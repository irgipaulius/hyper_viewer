/*! For license information please see files-integration.js.LICENSE.txt */
!function(){var e={9282:function(e,t,n){"use strict";var r=n(4155),i=n(5108);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,s,u=n(2136).codes,l=u.ERR_AMBIGUOUS_ARGUMENT,c=u.ERR_INVALID_ARG_TYPE,d=u.ERR_INVALID_ARG_VALUE,f=u.ERR_INVALID_RETURN_VALUE,p=u.ERR_MISSING_ARGS,h=n(5961),g=n(9539).inspect,m=n(9539).types,y=m.isPromise,v=m.isRegExp,b=Object.assign?Object.assign:n(8091).assign,w=Object.is?Object.is:n(609);new Map;function S(){var e=n(9158);o=e.isDeepEqual,s=e.isDeepStrictEqual}var T=!1,x=e.exports=I,A={};function k(e){if(e.message instanceof Error)throw e.message;throw new h(e)}function E(e,t,n,r){if(!n){var i=!1;if(0===t)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var a=new h({actual:n,expected:!0,message:r,operator:"==",stackStartFn:e});throw a.generatedMessage=i,a}}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[I,t.length].concat(t))}x.fail=function e(t,n,a,o,s){var u,l=arguments.length;if(0===l)u="Failed";else if(1===l)a=t,t=void 0;else{if(!1===T){T=!0;var c=r.emitWarning?r.emitWarning:i.warn.bind(i);c("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===l&&(o="!=")}if(a instanceof Error)throw a;var d={actual:t,expected:n,operator:void 0===o?"fail":o,stackStartFn:s||e};void 0!==a&&(d.message=a);var f=new h(d);throw u&&(f.message=u,f.generatedMessage=!0),f},x.AssertionError=h,x.ok=I,x.equal=function e(t,n,r){if(arguments.length<2)throw new p("actual","expected");t!=n&&k({actual:t,expected:n,message:r,operator:"==",stackStartFn:e})},x.notEqual=function e(t,n,r){if(arguments.length<2)throw new p("actual","expected");t==n&&k({actual:t,expected:n,message:r,operator:"!=",stackStartFn:e})},x.deepEqual=function e(t,n,r){if(arguments.length<2)throw new p("actual","expected");void 0===o&&S(),o(t,n)||k({actual:t,expected:n,message:r,operator:"deepEqual",stackStartFn:e})},x.notDeepEqual=function e(t,n,r){if(arguments.length<2)throw new p("actual","expected");void 0===o&&S(),o(t,n)&&k({actual:t,expected:n,message:r,operator:"notDeepEqual",stackStartFn:e})},x.deepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new p("actual","expected");void 0===o&&S(),s(t,n)||k({actual:t,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:e})},x.notDeepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new p("actual","expected");void 0===o&&S();s(t,n)&&k({actual:t,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:e})},x.strictEqual=function e(t,n,r){if(arguments.length<2)throw new p("actual","expected");w(t,n)||k({actual:t,expected:n,message:r,operator:"strictEqual",stackStartFn:e})},x.notStrictEqual=function e(t,n,r){if(arguments.length<2)throw new p("actual","expected");w(t,n)&&k({actual:t,expected:n,message:r,operator:"notStrictEqual",stackStartFn:e})};var C=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.forEach((function(e){e in t&&(void 0!==r&&"string"==typeof r[e]&&v(t[e])&&t[e].test(r[e])?i[e]=r[e]:i[e]=t[e])}))};function M(e,t,n,r,i,a){if(!(n in e)||!s(e[n],t[n])){if(!r){var o=new C(e,i),u=new C(t,i,e),l=new h({actual:o,expected:u,operator:"deepStrictEqual",stackStartFn:a});throw l.actual=e,l.expected=t,l.operator=a.name,l}k({actual:e,expected:t,message:r,operator:a.name,stackStartFn:a})}}function D(e,t,n,r){if("function"!=typeof t){if(v(t))return t.test(e);if(2===arguments.length)throw new c("expected",["Function","RegExp"],t);if("object"!==a(e)||null===e){var i=new h({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:r});throw i.operator=r.name,i}var s=Object.keys(t);if(t instanceof Error)s.push("name","message");else if(0===s.length)throw new d("error",t,"may not be an empty object");return void 0===o&&S(),s.forEach((function(i){"string"==typeof e[i]&&v(t[i])&&t[i].test(e[i])||M(e,t,i,n,s,r)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function P(e){if("function"!=typeof e)throw new c("fn","Function",e);try{e()}catch(e){return e}return A}function R(e){return y(e)||null!==e&&"object"===a(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function L(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!R(t=e()))throw new f("instance of Promise","promiseFn",t)}else{if(!R(e))throw new c("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return A})).catch((function(e){return e}))}))}function O(e,t,n,r){if("string"==typeof n){if(4===arguments.length)throw new c("error",["Object","Error","Function","RegExp"],n);if("object"===a(t)&&null!==t){if(t.message===n)throw new l("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new l("error/message",'The error "'.concat(t,'" is identical to the message.'));r=n,n=void 0}else if(null!=n&&"object"!==a(n)&&"function"!=typeof n)throw new c("error",["Object","Error","Function","RegExp"],n);if(t===A){var i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=r?": ".concat(r):".";var o="rejects"===e.name?"rejection":"exception";k({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(n&&!D(t,n,r,e))throw t}function N(e,t,n,r){if(t!==A){if("string"==typeof n&&(r=n,n=void 0),!n||D(t,n)){var i=r?": ".concat(r):".",a="doesNotReject"===e.name?"rejection":"exception";k({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(a).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[j,t.length].concat(t))}x.throws=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];O.apply(void 0,[e,P(t)].concat(r))},x.rejects=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return L(t).then((function(t){return O.apply(void 0,[e,t].concat(r))}))},x.doesNotThrow=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];N.apply(void 0,[e,P(t)].concat(r))},x.doesNotReject=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return L(t).then((function(t){return N.apply(void 0,[e,t].concat(r))}))},x.ifError=function e(t){if(null!=t){var n="ifError got unwanted exception: ";"object"===a(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=g(t);var r=new h({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),i=t.stack;if("string"==typeof i){var o=i.split("\n");o.shift();for(var s=r.stack.split("\n"),u=0;u<o.length;u++){var l=s.indexOf(o[u]);if(-1!==l){s=s.slice(0,l);break}}r.stack="".concat(s.join("\n"),"\n").concat(o.join("\n"))}throw r}},x.strict=b(j,x,{equal:x.strictEqual,deepEqual:x.deepStrictEqual,notEqual:x.notStrictEqual,notDeepEqual:x.notDeepStrictEqual}),x.strict.strict=x.strict},5961:function(e,t,n){"use strict";var r=n(4155);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)})(e)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t,n){return(c=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&d(i,n.prototype),i}).apply(null,arguments)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=n(9539).inspect,g=n(2136).codes.ERR_INVALID_ARG_TYPE;function m(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var y="",v="",b="",w="",S={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function T(e){var t=Object.keys(e),n=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){n[t]=e[t]})),Object.defineProperty(n,"message",{value:e.message}),n}function x(e){return h(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function A(e,t,n){var i="",a="",o=0,s="",u=!1,l=x(e),c=l.split("\n"),d=x(t).split("\n"),f=0,h="";if("strictEqual"===n&&"object"===p(e)&&"object"===p(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===c.length&&1===d.length&&c[0]!==d[0]){var g=c[0].length+d[0].length;if(g<=10){if(!("object"===p(e)&&null!==e||"object"===p(t)&&null!==t||0===e&&0===t))return"".concat(S[n],"\n\n")+"".concat(c[0]," !== ").concat(d[0],"\n")}else if("strictEqualObject"!==n){if(g<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;c[0][f]===d[0][f];)f++;f>2&&(h="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",f),"^"),f=0)}}}for(var T=c[c.length-1],A=d[d.length-1];T===A&&(f++<2?s="\n  ".concat(T).concat(s):i=T,c.pop(),d.pop(),0!==c.length&&0!==d.length);)T=c[c.length-1],A=d[d.length-1];var k=Math.max(c.length,d.length);if(0===k){var E=l.split("\n");if(E.length>30)for(E[26]="".concat(y,"...").concat(w);E.length>27;)E.pop();return"".concat(S.notIdentical,"\n\n").concat(E.join("\n"),"\n")}f>3&&(s="\n".concat(y,"...").concat(w).concat(s),u=!0),""!==i&&(s="\n  ".concat(i).concat(s),i="");var I=0,C=S[n]+"\n".concat(v,"+ actual").concat(w," ").concat(b,"- expected").concat(w),M=" ".concat(y,"...").concat(w," Lines skipped");for(f=0;f<k;f++){var D=f-o;if(c.length<f+1)D>1&&f>2&&(D>4?(a+="\n".concat(y,"...").concat(w),u=!0):D>3&&(a+="\n  ".concat(d[f-2]),I++),a+="\n  ".concat(d[f-1]),I++),o=f,i+="\n".concat(b,"-").concat(w," ").concat(d[f]),I++;else if(d.length<f+1)D>1&&f>2&&(D>4?(a+="\n".concat(y,"...").concat(w),u=!0):D>3&&(a+="\n  ".concat(c[f-2]),I++),a+="\n  ".concat(c[f-1]),I++),o=f,a+="\n".concat(v,"+").concat(w," ").concat(c[f]),I++;else{var P=d[f],R=c[f],L=R!==P&&(!m(R,",")||R.slice(0,-1)!==P);L&&m(P,",")&&P.slice(0,-1)===R&&(L=!1,R+=","),L?(D>1&&f>2&&(D>4?(a+="\n".concat(y,"...").concat(w),u=!0):D>3&&(a+="\n  ".concat(c[f-2]),I++),a+="\n  ".concat(c[f-1]),I++),o=f,a+="\n".concat(v,"+").concat(w," ").concat(R),i+="\n".concat(b,"-").concat(w," ").concat(P),I+=2):(a+=i,i="",1!==D&&0!==f||(a+="\n  ".concat(R),I++))}if(I>20&&f<k-2)return"".concat(C).concat(M,"\n").concat(a,"\n").concat(y,"...").concat(w).concat(i,"\n")+"".concat(y,"...").concat(w)}return"".concat(C).concat(u?M:"","\n").concat(a).concat(i).concat(s).concat(h)}var k=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==p(e)||null===e)throw new g("options","Object",e);var i=e.message,a=e.operator,u=e.stackStartFn,l=e.actual,c=e.expected,d=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=i)n=o(this,f(t).call(this,String(i)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(y="[34m",v="[32m",w="[39m",b="[31m"):(y="",v="",w="",b="")),"object"===p(l)&&null!==l&&"object"===p(c)&&null!==c&&"stack"in l&&l instanceof Error&&"stack"in c&&c instanceof Error&&(l=T(l),c=T(c)),"deepStrictEqual"===a||"strictEqual"===a)n=o(this,f(t).call(this,A(l,c,a)));else if("notDeepStrictEqual"===a||"notStrictEqual"===a){var h=S[a],m=x(l).split("\n");if("notStrictEqual"===a&&"object"===p(l)&&null!==l&&(h=S.notStrictEqualObject),m.length>30)for(m[26]="".concat(y,"...").concat(w);m.length>27;)m.pop();n=1===m.length?o(this,f(t).call(this,"".concat(h," ").concat(m[0]))):o(this,f(t).call(this,"".concat(h,"\n\n").concat(m.join("\n"),"\n")))}else{var k=x(l),E="",I=S[a];"notDeepEqual"===a||"notEqual"===a?(k="".concat(S[a],"\n\n").concat(k)).length>1024&&(k="".concat(k.slice(0,1021),"...")):(E="".concat(x(c)),k.length>512&&(k="".concat(k.slice(0,509),"...")),E.length>512&&(E="".concat(E.slice(0,509),"...")),"deepEqual"===a||"equal"===a?k="".concat(I,"\n\n").concat(k,"\n\nshould equal\n\n"):E=" ".concat(a," ").concat(E)),n=o(this,f(t).call(this,"".concat(k).concat(E)))}return Error.stackTraceLimit=d,n.generatedMessage=!i,Object.defineProperty(s(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=l,n.expected=c,n.operator=a,Error.captureStackTrace&&Error.captureStackTrace(s(n),u),n.stack,n.name="AssertionError",o(n)}var n,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(u=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:h.custom,value:function(e,t){return h(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}])&&a(n.prototype,u),l&&a(n,l),t}(u(Error));e.exports=k},2136:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s,u,l={};function c(e,t,n){n||(n=Error);var r=function(n){function r(n,o,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(u=i(this,a(r).call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,o,s)))).code=e,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,n),r}(n);l[e]=r}function d(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",(function(e,t,i){var a,o,u,l;if(void 0===s&&(s=n(9282)),s("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(o="not ",t.substr(!u||u<0?0:+u,o.length)===o)?(a="must not be",t=t.replace(/^not /,"")):a="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))l="The ".concat(e," ").concat(a," ").concat(d(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(c," ").concat(a," ").concat(d(t,"type"))}return l+=". Received type ".concat(r(i))}),TypeError),c("ERR_INVALID_ARG_VALUE",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===u&&(u=n(9539));var i=u.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)}),TypeError,RangeError),c("ERR_INVALID_RETURN_VALUE",(function(e,t,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),c("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];void 0===s&&(s=n(9282)),s(t.length>0,"At least one arg needs to be specified");var i="The ",a=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),a){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,a-1).join(", "),i+=", and ".concat(t[a-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=l},9158:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=void 0!==/a/g.flags,o=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t},u=Object.is?Object.is:n(609),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},c=Number.isNaN?Number.isNaN:n(360);function d(e){return e.call.bind(e)}var f=d(Object.prototype.hasOwnProperty),p=d(Object.prototype.propertyIsEnumerable),h=d(Object.prototype.toString),g=n(9539).types,m=g.isAnyArrayBuffer,y=g.isArrayBufferView,v=g.isDate,b=g.isMap,w=g.isRegExp,S=g.isSet,T=g.isNativeError,x=g.isBoxedPrimitive,A=g.isNumberObject,k=g.isStringObject,E=g.isBooleanObject,I=g.isBigIntObject,C=g.isSymbolObject,M=g.isFloat32Array,D=g.isFloat64Array;function P(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function R(e){return Object.keys(e).filter(P).concat(l(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function L(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function O(e,t,n,r){if(e===t)return 0!==e||(!n||u(e,t));if(n){if("object"!==i(e))return"number"==typeof e&&c(e)&&c(t);if("object"!==i(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==i(e))return(null===t||"object"!==i(t))&&e==t;if(null===t||"object"!==i(t))return!1}var o,s,l,d,f=h(e);if(f!==h(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var p=R(e),g=R(t);return p.length===g.length&&j(e,t,n,r,1,p)}if("[object Object]"===f&&(!b(e)&&b(t)||!S(e)&&S(t)))return!1;if(v(e)){if(!v(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(w(e)){if(!w(t)||(l=e,d=t,!(a?l.source===d.source&&l.flags===d.flags:RegExp.prototype.toString.call(l)===RegExp.prototype.toString.call(d))))return!1}else if(T(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(y(e)){if(n||!M(e)&&!D(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===L(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1;var P=R(e),O=R(t);return P.length===O.length&&j(e,t,n,r,0,P)}if(S(e))return!(!S(t)||e.size!==t.size)&&j(e,t,n,r,2);if(b(e))return!(!b(t)||e.size!==t.size)&&j(e,t,n,r,3);if(m(e)){if(s=t,(o=e).byteLength!==s.byteLength||0!==L(new Uint8Array(o),new Uint8Array(s)))return!1}else if(x(e)&&!function(e,t){return A(e)?A(t)&&u(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):k(e)?k(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):E(e)?E(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):I(e)?I(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):C(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return j(e,t,n,r,0)}function N(e,t){return t.filter((function(t){return p(e,t)}))}function j(e,t,n,r,i,a){if(5===arguments.length){a=Object.keys(e);var o=Object.keys(t);if(a.length!==o.length)return!1}for(var s=0;s<a.length;s++)if(!f(t,a[s]))return!1;if(n&&5===arguments.length){var u=l(e);if(0!==u.length){var c=0;for(s=0;s<u.length;s++){var d=u[s];if(p(e,d)){if(!p(t,d))return!1;a.push(d),c++}else if(p(t,d))return!1}var h=l(t);if(u.length!==h.length&&N(t,h).length!==c)return!1}else{var g=l(t);if(0!==g.length&&0!==N(t,g).length)return!1}}if(0===a.length&&(0===i||1===i&&0===e.length||0===e.size))return!0;if(void 0===r)r={val1:new Map,val2:new Map,position:0};else{var m=r.val1.get(e);if(void 0!==m){var y=r.val2.get(t);if(void 0!==y)return m===y}r.position++}r.val1.set(e,r.position),r.val2.set(t,r.position);var v=H(e,t,n,a,r,i);return r.val1.delete(e),r.val2.delete(t),v}function U(e,t,n,r){for(var i=o(e),a=0;a<i.length;a++){var s=i[a];if(O(t,s,n,r))return e.delete(s),!0}return!1}function _(e){switch(i(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(c(e))return!1}return!0}function B(e,t,n){var r=_(n);return null!=r?r:t.has(r)&&!e.has(r)}function F(e,t,n,r,i){var a=_(n);if(null!=a)return a;var o=t.get(a);return!(void 0===o&&!t.has(a)||!O(r,o,!1,i))&&(!e.has(a)&&O(r,o,!1,i))}function V(e,t,n,r,i,a){for(var s=o(e),u=0;u<s.length;u++){var l=s[u];if(O(n,l,i,a)&&O(r,t.get(l),i,a))return e.delete(l),!0}return!1}function H(e,t,n,a,u,l){var c=0;if(2===l){if(!function(e,t,n,r){for(var a=null,s=o(e),u=0;u<s.length;u++){var l=s[u];if("object"===i(l)&&null!==l)null===a&&(a=new Set),a.add(l);else if(!t.has(l)){if(n)return!1;if(!B(e,t,l))return!1;null===a&&(a=new Set),a.add(l)}}if(null!==a){for(var c=o(t),d=0;d<c.length;d++){var f=c[d];if("object"===i(f)&&null!==f){if(!U(a,f,n,r))return!1}else if(!n&&!e.has(f)&&!U(a,f,n,r))return!1}return 0===a.size}return!0}(e,t,n,u))return!1}else if(3===l){if(!function(e,t,n,a){for(var o=null,u=s(e),l=0;l<u.length;l++){var c=r(u[l],2),d=c[0],f=c[1];if("object"===i(d)&&null!==d)null===o&&(o=new Set),o.add(d);else{var p=t.get(d);if(void 0===p&&!t.has(d)||!O(f,p,n,a)){if(n)return!1;if(!F(e,t,d,f,a))return!1;null===o&&(o=new Set),o.add(d)}}}if(null!==o){for(var h=s(t),g=0;g<h.length;g++){var m=r(h[g],2),y=(d=m[0],m[1]);if("object"===i(d)&&null!==d){if(!V(o,e,d,y,n,a))return!1}else if(!(n||e.has(d)&&O(e.get(d),y,!1,a)||V(o,e,d,y,!1,a)))return!1}return 0===o.size}return!0}(e,t,n,u))return!1}else if(1===l)for(;c<e.length;c++){if(!f(e,c)){if(f(t,c))return!1;for(var d=Object.keys(e);c<d.length;c++){var p=d[c];if(!f(t,p)||!O(e[p],t[p],n,u))return!1}return d.length===Object.keys(t).length}if(!f(t,c)||!O(e[c],t[c],n,u))return!1}for(c=0;c<a.length;c++){var h=a[c];if(!O(e[h],t[h],n,u))return!1}return!0}e.exports={isDeepEqual:function(e,t){return O(e,t,false)},isDeepStrictEqual:function(e,t){return O(e,t,true)}}},6314:function(e,t,n){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof n.g[r[t]]&&(e[e.length]=r[t]);return e}},1924:function(e,t,n){"use strict";var r=n(210),i=n(5559),a=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&a(e,".prototype.")>-1?i(n):n}},5559:function(e,t,n){"use strict";var r=n(8612),i=n(210),a=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(o,a),u=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=s(r,o,arguments);if(u&&l){var n=u(t,"length");n.configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var d=function(){return s(r,a,arguments)};l?l(e.exports,"apply",{value:d}):e.exports.apply=d},5108:function(e,t,n){var r=n(9539),i=n(9282);function a(){return(new Date).getTime()}var o,s=Array.prototype.slice,u={};o=void 0!==n.g&&n.g.console?n.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var l=[[function(){},"log"],[function(){o.log.apply(o,arguments)},"info"],[function(){o.log.apply(o,arguments)},"warn"],[function(){o.warn.apply(o,arguments)},"error"],[function(e){u[e]=a()},"time"],[function(e){var t=u[e];if(!t)throw new Error("No such label: "+e);delete u[e];var n=a()-t;o.log(e+": "+n+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=r.format.apply(null,arguments),o.error(e.stack)},"trace"],[function(e){o.log(r.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=s.call(arguments,1);i.ok(!1,r.format.apply(null,t))}},"assert"]],c=0;c<l.length;c++){var d=l[c],f=d[0],p=d[1];o[p]||(o[p]=f)}e.exports=o},4289:function(e,t,n){"use strict";var r=n(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,o=Array.prototype.concat,s=Object.defineProperty,u=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),l=function(e,t,n,r){var i;(!(t in e)||"function"==typeof(i=r)&&"[object Function]"===a.call(i)&&r())&&(u?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},a=r(t);i&&(a=o.call(a,Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;s+=1)l(e,a[s],t[a[s]],n[a[s]])};c.supportsDescriptors=!!u,e.exports=c},4079:function(e,t,n){"use strict";var r=n(210)("%Object.getOwnPropertyDescriptor%");if(r)try{r([],"length")}catch(e){r=null}e.exports=r},8091:function(e){"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var a=Object.keys(Object(i)),o=0,s=a.length;o<s;o++){var u=a[o],l=Object.getOwnPropertyDescriptor(i,u);void 0!==l&&l.enumerable&&(n[u]=i[u])}}return n}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},9804:function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString;e.exports=function(e,r,i){if("[object Function]"!==n.call(r))throw new TypeError("iterator must be a function");var a=e.length;if(a===+a)for(var o=0;o<a;o++)r.call(i,e[o],o,e);else for(var s in e)t.call(e,s)&&r.call(i,e[s],s,e)}},7648:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";e.exports=function(e){var a=this;if("function"!=typeof a||r.call(a)!==i)throw new TypeError(t+a);for(var o,s=n.call(arguments,1),u=function(){if(this instanceof o){var t=a.apply(this,s.concat(n.call(arguments)));return Object(t)===t?t:this}return a.apply(e,s.concat(n.call(arguments)))},l=Math.max(0,a.length-s.length),c=[],d=0;d<l;d++)c.push("$"+d);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),a.prototype){var f=function(){};f.prototype=a.prototype,o.prototype=new f,f.prototype=null}return o}},8612:function(e,t,n){"use strict";var r=n(7648);e.exports=Function.prototype.bind||r},210:function(e,t,n){"use strict";var r,i=SyntaxError,a=Function,o=TypeError,s=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(e){u=null}var l=function(){throw new o},c=u?function(){try{return l}catch(e){try{return u(arguments,"callee").get}catch(e){return l}}}():l,d=n(1405)(),f=Object.getPrototypeOf||function(e){return e.__proto__},p={},h="undefined"==typeof Uint8Array?r:f(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?f(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":h,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},m=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=f(i.prototype))}return g[t]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=n(8612),b=n(7642),w=v.call(Function.call,Array.prototype.concat),S=v.call(Function.apply,Array.prototype.splice),T=v.call(Function.call,String.prototype.replace),x=v.call(Function.call,String.prototype.slice),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,E=function(e){var t=x(e,0,1),n=x(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return T(e,A,(function(e,t,n,i){r[r.length]=n?T(i,k,"$1"):t||e})),r},I=function(e,t){var n,r=e;if(b(y,r)&&(r="%"+(n=y[r])[0]+"%"),b(g,r)){var a=g[r];if(a===p&&(a=m(r)),void 0===a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:a}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');var n=E(e),r=n.length>0?n[0]:"",a=I("%"+r+"%",t),s=a.name,l=a.value,c=!1,d=a.alias;d&&(r=d[0],S(n,w([0,1],d)));for(var f=1,p=!0;f<n.length;f+=1){var h=n[f],m=x(h,0,1),y=x(h,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==h&&p||(c=!0),b(g,s="%"+(r+="."+h)+"%"))l=g[s];else if(null!=l){if(!(h in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&f+1>=n.length){var v=u(l,h);l=(p=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:l[h]}else p=b(l,h),l=l[h];p&&!c&&(g[s]=l)}}return l}},1405:function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(5419);e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},5419:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},7642:function(e,t,n){"use strict";var r=n(8612);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},5717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},2584:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,i=n(1924)("Object.prototype.toString"),a=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},o=function(e){return!!a(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return a(arguments)}();a.isLegacyArguments=o,e.exports=s?a:o},8662:function(e){"use strict";var t,n=Object.prototype.toString,r=Function.prototype.toString,i=/^\s*(?:function)?\*/,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(i.test(r.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===n.call(e);if(!o)return!1;if(void 0===t){var s=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();t=!!s&&o(s)}return o(e)===t}},8611:function(e){"use strict";e.exports=function(e){return e!=e}},360:function(e,t,n){"use strict";var r=n(5559),i=n(4289),a=n(8611),o=n(9415),s=n(3194),u=r(o(),Number);i(u,{getPolyfill:o,implementation:a,shim:s}),e.exports=u},9415:function(e,t,n){"use strict";var r=n(8611);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},3194:function(e,t,n){"use strict";var r=n(4289),i=n(9415);e.exports=function(){var e=i();return r(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},5692:function(e,t,n){"use strict";var r=n(9804),i=n(6314),a=n(1924),o=a("Object.prototype.toString"),s=n(1405)()&&"symbol"==typeof Symbol.toStringTag,u=i(),l=a("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},c=a("String.prototype.slice"),d={},f=n(4079),p=Object.getPrototypeOf;s&&f&&p&&r(u,(function(e){var t=new n.g[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=p(t),i=f(r,Symbol.toStringTag);if(!i){var a=p(r);i=f(a,Symbol.toStringTag)}d[e]=i.get}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!s){var t=c(o(e),8,-1);return l(u,t)>-1}return!!f&&function(e){var t=!1;return r(d,(function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}})),t}(e)}},4244:function(e){"use strict";var t=function(e){return e!=e};e.exports=function(e,n){return 0===e&&0===n?1/e==1/n:e===n||!(!t(e)||!t(n))}},609:function(e,t,n){"use strict";var r=n(4289),i=n(5559),a=n(4244),o=n(5624),s=n(2281),u=i(o(),Object);r(u,{getPolyfill:o,implementation:a,shim:s}),e.exports=u},5624:function(e,t,n){"use strict";var r=n(4244);e.exports=function(){return"function"==typeof Object.is?Object.is:r}},2281:function(e,t,n){"use strict";var r=n(5624),i=n(4289);e.exports=function(){var e=r();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8987:function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=n(1414),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===a.call(e),r=o(e),s=t&&"[object String]"===a.call(e),f=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var h=l&&n;if(s&&e.length>0&&!i.call(e,0))for(var g=0;g<e.length;++g)f.push(String(g));if(r&&e.length>0)for(var m=0;m<e.length;++m)f.push(String(m));else for(var y in e)h&&"prototype"===y||!i.call(e,y)||f.push(String(y));if(u)for(var v=function(e){if("undefined"==typeof window||!p)return d(e);try{return d(e)}catch(e){return!1}}(e),b=0;b<c.length;++b)v&&"constructor"===c[b]||!i.call(e,c[b])||f.push(c[b]);return f}}e.exports=r},2215:function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(1414),a=Object.keys,o=a?function(e){return a(e)}:n(8987),s=Object.keys;o.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)}):Object.keys=o;return Object.keys||o},e.exports=o},1414:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},4155:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,u=[],l=!1,c=-1;function d(){l&&s&&(l=!1,s.length?u=s.concat(u):c=-1,u.length&&f())}function f(){if(!l){var e=o(d);l=!0;for(var t=u.length;t;){for(s=u,u=[];++c<t;)s&&s[c].run();c=-1,t=u.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},1123:function(e,t,n){var r=n(5108);!function(){var e="undefined"!=typeof window?window:n.g,i={};for(var a in function(e,t,n){var i,a="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var s,u=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function l(e,t){if(t)e:{var n=u;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&o(n,e,{configurable:!0,writable:!0,value:t})}}if("function"==typeof Object.setPrototypeOf)s=Object.setPrototypeOf;else{var c;e:{var d={};try{d.__proto__={a:!0},c=d.a;break e}catch(e){}c=!1}s=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var f=s;function p(e,t){if(e.prototype=a(t.prototype),e.prototype.constructor=e,f)f(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Gm=t.prototype}function h(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function g(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:h(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function m(e){if(!(e instanceof Array)){e=g(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function y(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function v(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function b(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function w(e,t){e.i={Wh:t,li:!0},e.g=e.m||e.j}function S(e,t,n){return e.g=n,{value:t}}function T(e){e.g=0}function x(e,t,n){e.m=t,null!=n&&(e.j=n)}function A(e,t){e.m=0,e.j=t||0}function k(e,t,n){e.g=t,e.m=n||0}function E(e,t){return e.m=t||0,t=e.i.Wh,e.i=null,t}function I(e){e.B=[e.i],e.m=0,e.j=0}function C(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.li?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function M(e){this.g=new v,this.h=e}function D(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var a=i.value}catch(t){return e.g.l=null,w(e.g,t),P(e)}return e.g.l=null,r.call(e.g,a),P(e)}function P(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,w(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.li)throw t.Wh;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function R(e){this.next=function(t){return b(e.g),e.g.l?t=D(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=P(e)),t},this.throw=function(t){return b(e.g),e.g.l?t=D(e,e.g.l.throw,t,e.g.u):(w(e.g,t),t=P(e)),t},this.return=function(t){return function(e,t){b(e.g);var n=e.g.l;return n?D(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),P(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())}))}(new R(new M(e)))}function O(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return{gi:i,v:a}}return{gi:-1,v:void 0}}function U(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function _(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}l("Symbol",(function(e){function t(e,t){this.g=e,o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),l("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=u[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&o(r.prototype,e,{configurable:!0,writable:!0,value:function(){return y(h(this))}})}return e})),v.prototype.u=function(e){this.h=e},v.prototype.return=function(e){this.i={return:e},this.g=this.j},v.prototype.A=function(e){this.g=e},l("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var i=u.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.G),reject:e(this.l)}},t.prototype.G=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.I(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.F(e):this.m(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.m=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.H(),this.B()},t.prototype.H=function(){var e=this;i((function(){if(e.C()){var t=u.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.C=function(){if(this.o)return!1;var e=u.CustomEvent,t=u.Event,n=u.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=u.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.I=function(e){var t=this.j();e.Qe(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){a(e)}}:t}var i,a,o=new t((function(e,t){i=e,a=t}));return this.Qe(r(e,i),r(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qe=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=g(e),a=i.next();!a.done;a=i.next())r(a.value).Qe(t,n)}))},t.all=function(e){var n=g(e),i=n.next();return i.done?r([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,r(i.value).Qe(a(o.length-1),t),i=n.next()}while(!i.done)}))},t})),l("WeakMap",(function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=g(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!N(e,s)){var t=new n;o(e,s,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var u=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!N(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return r(e)&&N(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return r(e)&&N(e,s)&&N(e[s],this.g)},t.prototype.delete=function(e){return!!(r(e)&&N(e,s)&&N(e[s],this.g))&&delete e[s][this.g]},t})),l("Map",(function(e){function t(){var e={};return e.vc=e.next=e.head=e}function n(e,t){var n=e[1];return y((function(){if(n){for(;n.head!=e[1];)n=n.vc;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var r=e[0][n];if(r&&N(e[0],n))for(e=0;e<r.length;e++){var i=r[e];if(t!=t&&i.key!=i.key||t===i.key)return{id:n,list:r,index:e,entry:i}}return{id:n,list:r,index:-1,entry:void 0}}function i(e){if(this[0]={},this[1]=t(),this.size=0,e){e=g(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(g([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this[0][n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this[1],vc:this[1].vc,head:this[1],key:e,value:t},n.list.push(n.entry),this[1].vc.next=n.entry,this[1].vc=n.entry,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this[0][e.id],e.entry.vc.next=e.entry.next,e.entry.next.vc=e.entry.vc,e.entry.head=null,this.size--,!0)},i.prototype.clear=function(){this[0]={},this[1]=this[1].vc=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).entry},i.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var o=0;return i})),l("Set",(function(e){function t(e){if(this.g=new Map,e){e=g(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(g([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(r){return e.call(t,r,r,n)}))},t)})),l("Array.prototype.findIndex",(function(e){return e||function(e,t){return j(this,e,t).gi}})),l("Array.prototype.values",(function(e){return e||function(){return U(this,(function(e,t){return t}))}})),l("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var a=0;!(i=e.next()).done;)r.push(t.call(n,i.value,a++))}else for(i=e.length,a=0;a<i;a++)r.push(t.call(n,e[a],a));return r}})),l("Array.prototype.keys",(function(e){return e||function(){return U(this,(function(e){return e}))}})),l("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),l("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for((t=t||0)<0&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}})),l("String.prototype.includes",(function(e){return e||function(e,t){return-1!==_(this,e,"includes").indexOf(e,t||0)}})),l("String.fromCodePoint",(function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var r=Number(arguments[n]);if(r<0||r>1114111||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),t+=String.fromCharCode(1023&r|56320))}return t}})),l("WeakSet",(function(e){function t(e){if(this.g=new WeakMap,e){e=g(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([t]);return!(!r.has(t)||r.has(n))&&(r.delete(t),r.add(n),!r.has(t)&&r.has(n))}catch(e){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)})),l("Array.prototype.find",(function(e){return e||function(e,t){return j(this,e,t).v}})),l("String.prototype.startsWith",(function(e){return e||function(e,t){var n=_(this,e,"startsWith"),r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<i&&t<r;)if(n[t++]!=e[a++])return!1;return a>=i}})),l("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push([t,e[t]]);return n}}));var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)N(r,i)&&(e[i]=r[i])}return e};l("Object.assign",(function(e){return e||B})),l("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),l("Array.prototype.entries",(function(e){return e||function(){return U(this,(function(e,t){return[e,t]}))}})),l("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),l("String.prototype.repeat",(function(e){return e||function(e){var t=_(this,null,"repeat");if(e<0||e>1342177279)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),l("Number.EPSILON",(function(){return 2220446049250313e-31})),l("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991})),l("Number.isFinite",(function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&e!==1/0&&e!==-1/0)}})),l("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push(e[t]);return n}})),l("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),l("String.prototype.endsWith",(function(e){return e||function(e,t){var n=_(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;r>0&&t>0;)if(n[--t]!=e[--r])return!1;return r<=0}})),l("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||e===1/0||e===-1/0||0===e)return e;var t=Math.floor(Math.abs(e));return e<0?-t:t}}));var F=this||self;function V(e,t){e=e.split(".");var n,r=F;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function H(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function G(e){return e.h/(1-Math.pow(e.g,e.i))}function q(){this.h=new H(2),this.j=new H(5),this.g=0,this.i=128e3,this.l=16e3}function K(){}function z(){}function W(){}function X(e){var t=O.apply(1,arguments);J.has(e)||(J.add(e),W.apply(K,m(t)))}function Y(){}H.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},q.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},q.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},q.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(G(this.h),G(this.j))};var J=new Set;function $(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Q(e,t){(t=e.indexOf(t))>-1&&e.splice(t,1)}function Z(e,t,n){if(n||(n=$),e.length!=t.length)return!1;t=t.slice();for(var r=(e=g(e)).next(),i={};!r.done;i={mi:void 0},r=e.next()){if(i.mi=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.mi,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function ee(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=$),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function te(){this.g=new Map}function ne(){this.g=new te}function re(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=ie;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}ie=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}e.console&&((new Map).set(1,(function(){return r.error.apply(r,m(O.apply(0,arguments)))})).set(2,(function(){return r.warn.apply(r,m(O.apply(0,arguments)))})).set(3,(function(){return r.info.apply(r,m(O.apply(0,arguments)))})).set(4,(function(){return r.log.apply(r,m(O.apply(0,arguments)))})).set(5,(function(){return r.debug.apply(r,m(O.apply(0,arguments)))})).set(6,(function(){return r.debug.apply(r,m(O.apply(0,arguments)))})),W=function(){return r.warn.apply(r,m(O.apply(0,arguments)))},z=function(){r.error.apply(r,m(O.apply(0,arguments)))}),(i=te.prototype).push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},i.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},i.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter((function(e){return e!=t}));this.g.set(e,n),n.length||this.g.delete(e)}},i.forEach=function(e){this.g.forEach((function(t,n){e(n,t)}))},i.size=function(){return this.g.size},i.keys=function(){return Array.from(this.g.keys())},(i=ne.prototype).release=function(){this.Pa(),this.g=null},i.D=function(e,t,n,r){this.g&&(e=new re(e,t,n,r),this.g.push(t,e))},i.Ba=function(e,t,n,r){var i=this;this.D(e,t,(function r(a){i.Ma(e,t,r),n(a)}),r)},i.Ma=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],i=(r=g(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.Ma(),this.g.remove(t,i))},i.Pa=function(){if(this.g){for(var e=[],t=g(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,m(n.value));for(t=(e=g(e)).next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},V("shaka.util.EventManager",ne),ne.prototype.removeAll=ne.prototype.Pa,ne.prototype.unlisten=ne.prototype.Ma,ne.prototype.listenOnce=ne.prototype.Ba,ne.prototype.listen=ne.prototype.D,ne.prototype.release=ne.prototype.release,re.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var ie=void 0;function ae(e){this.h=e,this.g=void 0}function oe(){return le.value()}V("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ae.prototype.value=function(){return void 0===this.g&&(this.g=this.h()),this.g};var se=null,ue=null,le=new ae((function(){var e=void 0;return se&&(e=se()),!e&&ue&&(e=ue()),e}));function ce(e,t){this.g=e,this.h=t}function de(e,t){var n=new ce(5,0),r=he,i=r.g,a=n.h-i.h;((n.g-i.g||a)>0?r.i:r.h)(r.g,n,e,t)}function fe(e,t,n,r){W([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function pe(e,t,n,r){z([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}ce.prototype.toString=function(){return"v"+this.g+"."+this.h};var he=null,ge=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function me(e){var t;e instanceof me?(ye(this,e.bc),this.hd=e.hd,ve(this,e.Db),be(this,e.Cd),this.Sb=e.Sb,we(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(ge))?(ye(this,t[1]||"",!0),this.hd=Se(t[2]||""),ve(this,t[3]||"",!0),be(this,t[4]),this.Sb=Se(t[5]||"",!0),we(this,t[6]||"",!0),this.Rc=Se(t[7]||"")):this.g=new Me(null)}function ye(e,t,n){e.bc=n?Se(t,!0):t,e.bc&&(e.bc=e.bc.replace(/:$/,""))}function ve(e,t,n){e.Db=n?Se(t,!0):t}function be(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Cd=t}else e.Cd=null}function we(e,t,n){t instanceof Me?e.g=t:(n||(t=Te(t,Ie)),e.g=new Me(t))}function Se(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Te(e,t,n){return null!=e?(e=encodeURI(e).replace(t,xe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xe(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=me.prototype).bc="",i.hd="",i.Db="",i.Cd=null,i.Sb="",i.Rc="",i.toString=function(){var e=[],t=this.bc;if(t&&e.push(Te(t,Ae,!0),":"),t=this.Db){e.push("//");var n=this.hd;n&&e.push(Te(n,Ae,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Cd)&&e.push(":",String(t))}return(t=this.Sb)&&(this.Db&&"/"!=t.charAt(0)&&e.push("/"),e.push(Te(t,"/"==t.charAt(0)?Ee:ke,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",Te(t,Ce)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.bc&&(t=new me);var n=!!e.bc;n?ye(t,e.bc):n=!!e.hd,n?t.hd=e.hd:n=!!e.Db,n?ve(t,e.Db):n=null!=e.Cd;var r=e.Sb;if(n)be(t,e.Cd);else if(n=!!e.Sb){if("/"!=r.charAt(0))if(this.Db&&!this.Sb)r="/"+r;else{var i=t.Sb.lastIndexOf("/");-1!=i&&(r=t.Sb.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((a.length>1||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}}return n?t.Sb=r:n=""!==e.g.toString(),n?we(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},i.clone=function(){return new me(this)};var Ae=/[#\/\?@]/g,ke=/[#\?:]/g,Ee=/[#\?]/g,Ie=/[#\?@]/g,Ce=/#/g;function Me(e){this.g=e||null}function De(e){if(!e.eb&&(e.eb=new Map,e.Sd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(r>=0){var a=t[n].substring(0,r);i=t[n].substring(r+1)}else a=t[n];a=decodeURIComponent(a),i=i||"",e.add(a,decodeURIComponent(i))}}function Pe(e){return De(e),e.Sd}function Re(){}function Le(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ne(e);t=Ne(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function Oe(e){return ArrayBuffer.isView(e)?0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function Ne(e,t,n){return _e(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function je(e,t,n){return _e(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint16Array)}function Ue(e,t,n){return _e(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function _e(e,t,n,r){var i=ArrayBuffer.isView(e)?e.buffer:e,a=1;"BYTES_PER_ELEMENT"in r&&(a=r.BYTES_PER_ELEMENT);var o=((e.byteOffset||0)+e.byteLength)/a;return new r(i,e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/a,o))),Math.floor(Math.min(e+Math.max(n,0),o))-e)}function Be(e,t,n){var r=O.apply(3,arguments);if(this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code,Fe)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}}(i=Me.prototype).eb=null,i.Sd=null,i.add=function(e,t){De(this),this.g=null;var n=this.eb.has(e)?this.eb.get(e):null;return n||this.eb.set(e,n=[]),n.push(t),this.Sd++,this},i.set=function(e,t){return De(this),this.g=null,this.eb.has(e)?this.eb.set(e,[t]):this.add(e,t),this},i.get=function(e){return De(this),this.eb.get(e)||[]},i.toString=function(){if(this.g)return this.g;if(!this.eb||!this.eb.size)return"";for(var e=[],t=g(this.eb.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=encodeURIComponent(r),r=this.eb.get(r);for(var i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),e.push(a)}}return this.g=e.join("&")},i.clone=function(){var e=new Me;if(e.g=this.g,this.eb){for(var t=new Map,n=g(this.eb),r=n.next();!r.done;r=n.next()){var i=g(r.value);r=i.next().value,i=i.next().value,t.set(r,i.concat())}e.eb=t,e.Sd=this.Sd}return e},V("shaka.util.BufferUtils",Re),Re.toDataView=Ue,Re.toUint16=je,Re.toUint8=Ne,Re.toArrayBuffer=Oe,Re.equal=Le,Be.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},V("shaka.util.Error",Be);var Fe=!0;function Ve(){}function He(t){if(!t)return"";if(239==(t=Ne(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!oe().rh())return(t=(new TextDecoder).decode(t)).includes("�")&&z('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var i=65533;if(0==(128&t[r])?i=t[r]:t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(i=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(i=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(i=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3),i<=65535)n+=String.fromCharCode(i);else{var a=1023&(i-=65536);n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+a)}}return n}function Ge(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new Be(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=Ue(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return We(r)}function qe(e){function t(e){return n.byteLength<=e||n[e]>=9&&n[e]<=126}if(!e)return"";var n=Ne(e);if(239==n[0]&&187==n[1]&&191==n[2])return He(n);if(254==n[0]&&255==n[1])return Ge(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Ge(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Ge(e,!1);if(0==n[1]&&0==n[3])return Ge(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return He(e);throw new Be(2,2,2003)}function Ke(t){if(e.TextEncoder&&!oe().rh()){var n=new TextEncoder;return Oe(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return Oe(n)}function ze(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}function We(e){return Ye.value()(e)}function Xe(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,(function(e){return"#"==e[1]?(e="x"==e[2]||"X"==e[2]?parseInt(e.substring(3),16):parseInt(e.substring(2),10))>=0&&e<=1114111?String.fromCodePoint(e):"":t[e]||"'"})):e||""}Be.Severity={RECOVERABLE:1,CRITICAL:2},Be.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Be.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007},V("shaka.util.StringUtils",Ve),Ve.resetFromCharCode=function(){Ye.g=void 0},Ve.toUTF16=ze,Ve.toUTF8=Ke,Ve.fromBytesAutoDetect=qe,Ve.fromUTF16=Ge,Ve.fromUTF8=He;var Ye=new ae((function(){function e(e){try{var t=new Uint8Array(e);return String.fromCharCode.apply(null,t).length>0}catch(e){return!1}}for(var t={Oc:65536};t.Oc>0;(t={Oc:t.Oc}).Oc/=2)if(e(t.Oc))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.Oc)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.Oc));return n}}(t);return null}));function Je(){}function $e(e){return e=We(Ne(e)),btoa(e)}function Qe(e,t){return t=null==t||t,e=$e(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ze(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function et(t){for(var n=t.length/2,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.parseInt(t.substr(2*i,2),16);return r}function tt(e){var t=Ne(e);e="";for(var n=(t=g(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function nt(){for(var e=O.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var i=e[r];ArrayBuffer.isView(i)&&1===i.BYTES_PER_ELEMENT?t.set(i,n):t.set(Ne(i),n),n+=i.byteLength}return t}function rt(e,t,n){if(n=void 0===n?"":n,0==t.length)return e;if(1==e.length&&1==t.length){var r=new me(e[0]);return t=new me(t[0]),t=r.resolve(t),n&&we(t,n),[t.toString()]}t=t.map((function(e){return new me(e)})),r=[];for(var i=(e=g(e)).next();!i.done;i=e.next()){i=new me(i.value);for(var a=g(t),o=a.next();!o.done;o=a.next())o=i.resolve(o.value),n&&we(o,n),r.push(o.toString())}return r}function it(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function at(t,n){n=void 0===n?"cenc":n;var r=[],i=[],a=[];t.forEach((function(e,t){var n=t;22!=n.length&&(n=Qe(et(t),!1));var o=e;22!=o.length&&(o=Qe(et(e),!1)),e={kty:"oct",kid:n,k:o},r.push(e),i.push(e.kid),a.push(t)})),t=JSON.stringify({keys:r});var o=JSON.stringify({kids:i});return o=[{initData:Ne(Ke(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(a)}}function ot(e,t){if(1==t.length)return t[0];if(null!=(e=st(e,t)))return e;throw new Be(2,4,4025,t)}function st(e,t){for(var n=ft.get(e),r=(n=g(n)).next();!r.done;r=n.next()){r=r.value;for(var i=g(t),a=i.next();!a.done;a=i.next())if(a=a.value,r.test(a.trim()))return a.trim()}return e==lt?"":null}function ut(e,t){for(var n=[],r=(e=g(e=ft.get(e))).next();!r.done;r=e.next()){r=r.value;for(var i=g(t),a=i.next();!a.done;a=i.next())a=a.value,r.test(a.trim())&&n.push(a.trim())}return n}V("shaka.util.Uint8ArrayUtils",Je),Je.concat=nt,Je.toHex=tt,Je.fromHex=et,Je.fromBase64=Ze,Je.toBase64=Qe,Je.toStandardBase64=$e;var lt="text",ct={Aa:"video",ka:"audio",Na:lt,Uf:"image",ol:"application"},dt=1/15,ft=(new Map).set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function pt(e,t,n,r){this.g=null,this.l=e,this.i=t,this.m=n,this.o=r,this.j=!1;e:{if("undefined"==typeof libDPIModule&&W("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){W("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,de("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?(W("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||W(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function ht(e,t,n,r){"video"!==r.type||e.o&&!r.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",r.id,-n,!e.o)}function gt(e){e.g&&e.i.classList.add("shaka-hidden")}function mt(e){return!(!e||"undefined"==typeof LCEVCdec)&&"lvc1"==e.codecs}function yt(t){if(wt.has(t))return wt.get(t);var n=e.ManagedMediaSource||e.MediaSource;return!!n&&(n=n.isTypeSupported(t),wt.set(t,n),n)}function vt(){var t=e.ManagedSourceBuffer||e.SourceBuffer;return!!t&&!!t.prototype&&!!t.prototype.changeType}function bt(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.prototype)&&(!!t.prototype.setLiveSeekableRange&&!!t.prototype.clearLiveSeekableRange)}pt.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},V("shaka.lcevc.Dec",pt),pt.prototype.release=pt.prototype.release;var wt=new Map;function St(){}function Tt(){}function xt(){}function At(e){this.h=new Map,this.i=0,this.j=new Tt,(e=Et(e.toLowerCase()))&&(this.j=e()),this.g=new St,(e=Ct)&&(this.g=e(),this.h.set(this.i,this.g))}function kt(e,t){It.set(e,t)}function Et(e){return It.get(e)}St.prototype.extract=function(){},St.prototype.decode=function(){return[]},St.prototype.clear=function(){},St.prototype.getStreams=function(){return[]},Tt.prototype.init=function(){},Tt.prototype.parse=function(){return[]},(i=xt.prototype).init=function(){},i.xf=function(){},i.Nd=function(){},i.remove=function(){},i.Vf=function(){},V("shaka.media.IClosedCaptionParser",xt),(i=At.prototype).init=function(e,t,n){if(t=void 0!==t&&t,-1!=(n=void 0===n?-1:n)&&this.i!=n){t=n;var r=this.h.get(t);this.h.set(this.i,this.g),r?this.g=r:((r=Ct)&&(this.g=r()),this.h.set(t,this.g))}else t||this.Nd();this.j.init(e),-1!=n&&(this.i=n)},i.xf=function(e){for(var t=(e=g(e=this.j.parse(e))).next();!t.done;t=e.next()){var n=Ne((t=t.value).packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},i.Nd=function(){this.g.clear()},i.remove=function(e){e=void 0===e?[]:e,e=new Set(e);for(var t=g(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var r=this.h.get(n);r&&r.clear(),this.h.delete(n)}},i.Vf=function(){return this.g.getStreams()},V("shaka.media.ClosedCaptionParser",At),At.findDecoder=function(){return Ct},At.unregisterDecoder=function(){Ct=null},At.registerDecoder=function(e){Ct=e},At.findParser=Et,At.unregisterParser=function(e){It.delete(e)},At.registerParser=kt;var It=new Map,Ct=null;function Mt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Dt,this.scroll=Pt}V("shaka.text.CueRegion",Mt);var Dt=1;Mt.units={PX:0,PERCENTAGE:Dt,LINES:2};var Pt="";function Rt(e){this.h=e||"",this.g=0}function Lt(e){Ot(e,/[ \t]+/gm)}function Ot(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Nt(e){return e.g==e.h.length?null:(e=Ot(e,/[^ \t\n]*/gm))?e[0]:null}function jt(e){if(null==(e=Ot(e,_t)))return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Ut(e){return e?jt(new Rt(e)):null}Mt.scrollMode={NONE:Pt,UP:"up"};var _t=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Bt(){}function Ft(e){var t=new WeakSet;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||ArrayBuffer.isView(n))return n;if(t.has(n))return null;var r=Array.isArray(n);if(n.constructor!=Object&&!r)return null;t.add(n);var i,a=r?[]:{};for(i in n)a[i]=e(n[i]);return r&&(a.length=n.length),a}}(e)}function Vt(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ht(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=n.toString(),i=e[n];void 0!==i&&(i=Ht(i))&&t.push(r+":"+i)}e="["+t.join(",")+"]"}else if("function"==typeof e)e="";else if(e instanceof Object){for((n=Object.keys(e)).sort(),t=[],r=(n=g(n)).next();!r.done;r=n.next())i=r.value,r=JSON.stringify(i),void 0!==(i=e[i])&&(i=Ht(i))&&t.push(r+":"+i);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}function Gt(e,t){var n=void 0!==n&&n;return qt(e=qe(e),t,n)}function qt(e,t,n){return e=function(e,t){function n(a,o){o=void 0!==o&&o;for(var s=[];e[i];)if(60==e.charCodeAt(i)){if(47===e.charCodeAt(i+1)){o=i+2,i=e.indexOf(">",i);var u=(o=e.substring(o,i)).indexOf(a);if(-1==u){var l=a.indexOf(".");l>0&&(u=o.indexOf(a.substring(0,l)))}if(-1==u)throw a=e.substring(0,i).split("\n"),Error("Unexpected close tag\nLine: "+(a.length-1)+"\nColumn: "+(a[a.length-1].length+1)+"\nChar: "+e[i]);i+1&&(i+=1);break}if(33===e.charCodeAt(i+1)){if(45==e.charCodeAt(i+2)){for(;-1!==i&&(62!==e.charCodeAt(i)||45!=e.charCodeAt(i-1)||45!=e.charCodeAt(i-2)||-1==i);)i=e.indexOf(">",i+1);-1===i&&(i=e.length)}else if(91===e.charCodeAt(i+2)&&91===e.charCodeAt(i+8)&&"cdata"===e.substr(i+3,5).toLowerCase()){-1==(u=e.indexOf("]]>",i))?(s.push(e.substr(i+9)),i=e.length):(s.push(e.substring(i+9,u)),i=u+3);continue}i++;continue}e:{l=o,i++;var c=r(),d={};for(u=[];62!==e.charCodeAt(i)&&e[i];){var f=e.charCodeAt(i);if(f>64&&f<91||f>96&&f<123){f=r();for(var p=e.charCodeAt(i);p&&39!==p&&34!==p&&!(p>64&&p<91||p>96&&p<123)&&62!==p;)i++,p=e.charCodeAt(i);var h=i+1;if(i=e.indexOf(e[i],h),h=e.slice(h,i),39===p||34===p){if(-1===i){if(l={tagName:c,attributes:d,children:u,parent:null},t)for(c=0;c<u.length;c++)"string"!=typeof u[c]&&(u[c].parent=l);u=l;break e}}else h=null,i--;if(f.startsWith("xmlns:")){p=h;var g=f.split(":")[1];wn.set(p,g),Sn.set(g,p)}"tt"===c&&"xml:space"===f&&"preserve"===h&&(l=!0),d[f]=h}i++}for(47!==e.charCodeAt(i-1)?(i++,u=n(c,l)):i++,l={tagName:c,attributes:d,children:u,parent:null},c=u.length,d=0;d<c;d++)"string"!=typeof(f=u[d])?t&&(f.parent=l):d==c-1&&"\n"==f&&u.pop();u=l}if(s.push(u),"string"==typeof u)break;"?"===u.tagName[0]&&u.children&&(s.push.apply(s,m(u.children)),u.children=[])}else u=i,-2===(i=e.indexOf("<",i)-1)&&(i=e.length),u=e.slice(u,i+1),o?u.length>0&&s.push(u):(s.length&&1==u.length&&"\n"==u[0]||u.trim().length>0)&&s.push(u),i++;return s}function r(){for(var t=i;-1==="\r\n\t>/= ".indexOf(e[i])&&e[i];)i++;return e.slice(t,i)}var i=0;return n("")}(e,void 0!==n&&n),!t&&e.length?e[0]:(e=e.find((function(e){return t.split(",").includes(e.tagName)})))?e:null}function Kt(e){return wn.has(e)?wn.get(e):""}function zt(e){return"string"==typeof e}function Wt(e){var t=[];if(!e.children)return[];for(var n=(e=g(e.children)).next();!n.done;n=e.next())"string"!=typeof(n=n.value)&&t.push(n);return t}function Xt(e,t){var n=[];if(!e.children)return[];for(var r=(e=g(e.children)).next();!r.done;r=e.next())(r=r.value).tagName===t&&n.push(r);return n}function Yt(e){return"string"==typeof e?Xe(e):""===(e=e.children.reduce((function(e,t){return"string"==typeof t?e+t:e}),""))?null:Xe(e)}function Jt(e){return Array.from(e.children).every((function(e){return"string"==typeof e}))?((e=Yt(e))&&(e=e.trim()),e):null}function $t(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children)for(var r=(e=g(e.children)).next();!r.done;r=e.next())$t(r.value,t,n);return n}function Qt(e,t){return 1!=(e=Xt(e,t)).length?null:e[0]}function Zt(e,t,n){return 1!=(e=nn(e,t,n)).length?null:e[0]}function en(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.attributes[t])&&(i=n(e)),null==i?r:i}function tn(e,t,n){return t=Kt(t),e.attributes[t+":"+n]||null}function nn(e,t,n){var r=Kt(t);if(t=[],e.children)for(n=r?r+":"+n:n,r=(e=g(e.children)).next();!r.done;r=e.next())(r=r.value)&&r.tagName===n&&t.push(r);return t}function rn(e,t,n){for(var r=(t=g(t)).next();!r.done;r=t.next())if(r=tn(e,r.value,n))return r;return null}function an(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function on(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function sn(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function un(e){return(e=Number(e))%1==0?e:null}function ln(e){return(e=Number(e))%1==0&&e>0?e:null}function cn(e){return(e=Number(e))%1==0&&e>=0?e:null}function dn(e){return e=Number(e),isNaN(e)?null:e}function fn(e){return!!e&&"true"===e.toLowerCase()}function pn(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function hn(e){for(var t=[],n=(e=g(e=Xe(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))).next();!n.done;n=e.next()){var r=(n=n.value).match(/^([\w]+)/);if(r){var i=n.match(/(@id='(.*?)')/),a=n.match(/(@t='(\d+)')/),o=n.match(/(@n='(\d+)')/),s=n.match(/\[(\d+)\]/);t.push({name:r[0],id:i?i[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:s?Number(s[1])-1:null,Bc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Bc=n.slice(1))}return t}function gn(e,t){var n=hn(t.attributes.sel||"");if(n.length){var r=n[n.length-1],i=t.attributes.pos||null;null==(n=r.position)&&(null!==r.t&&(n=mn(e,"t",r.t)),null!==r.n&&(n=mn(e,"n",r.n))),null===n?n="prepend"===i?0:e.length:"prepend"===i?--n:"after"===i&&++n,i=t.tagName,(r=r.Bc)&&e[n]?yn(e[n],i,r,Jt(t)||""):("remove"!==i&&"replace"!==i||e.splice(n,1),"add"!==i&&"replace"!==i||e.splice.apply(e,[n,0].concat(m(t.children))))}}function mn(e,t,n){for(var r=0,i=(e=g(e)).next();!i.done;i=e.next()){if(Number(i.value.attributes[t])===n)return r;r++}return null}function yn(e,t,n,r){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=r)}function vn(e){var t="",n=e.tagName.split(":");for(var r in n.length>0&&(t=n[0],t=Sn.has(t)?Sn.get(t):""),t=document.createElementNS(t,e.tagName),e.attributes)t.setAttribute(r,e.attributes[r]);for(r=(e=g(e.children)).next();!r.done;r=e.next())n=void 0,n="string"==typeof(r=r.value)?new Text(r):vn(r),t.appendChild(n);return t}function bn(e){if(!e)return null;for(var t={tagName:e.tagName,attributes:Vt(e.attributes),children:[],parent:null},n=(e=g(e.children)).next();!n.done;n=e.next())"string"==typeof(n=n.value)||((n=bn(n)).parent=t),t.children.push(n);return t}V("shaka.util.ObjectUtils",Bt),Bt.alphabeticalKeyOrderStringify=Ht,Bt.shallowCloneObject=Vt,Bt.cloneObject=Ft;var wn=new Map,Sn=new Map;function Tn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Mt,this.position=null,this.positionAlign=Mn,this.size=0,this.textAlign=Dn,this.direction=On,this.writingMode=Nn,this.lineInterpretation=jn,this.line=null,this.lineHeight="",this.lineAlign=Un,this.displayAlign=Rn,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Vn,this.fontStyle=Gn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function xn(e,t){return(e=new Tn(e,t,"")).lineBreak=!0,e}function An(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!ee(e.nestedCues,t.nestedCues,An))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!ee(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function kn(e,t){t=void 0===t?new Map:t;var n=e.payload;if(n.includes("<")){0===t.size&&En(t);var r=n;n=[];for(var i=-1,a=0;a<r.length;a++)"<"===r[a]?i=a+1:">"===r[a]&&i>0&&((i=r.substr(i,a-i)).match(Wn)&&n.push(i),i=-1);for(a=(n=g(n)).next();!a.done;a=n.next())a=a.value,r=r.replace("<"+a+">",'<div time="'+a+'">'),r+="</div>";e:{a=r,i=[];var o=-1;n="",r=!1;for(var s=0;s<a.length;s++)if("/"===a[s]){var u=a.indexOf(">",s);if(-1===u){n=a;break e}if((u=a.substring(s+1,u))&&"v"==u){r=!0;var l=null;if(i.length&&(l=i[i.length-1]),l){if(l===u)n+="/"+u+">";else{if(!l.startsWith("v")){n+=a[s];continue}n+="/"+l+">"}s+=u.length+1}else n+=a[s]}else n+=a[s]}else"<"===a[s]?"v"!=a[o=s+1]&&(o=-1):">"===a[s]&&o>0&&(i.push(a.substr(o,s-o)),o=-1),n+=a[s];for(i=(a=g(i)).next();!i.done;i=a.next())o=(i=i.value).replace(" ",".voice-"),n=(n=n.replace("<"+i+">","<"+o+">")).replace("</"+i+">","</"+o+">"),r||(n+="</"+o+">")}n=function(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,(function(e){return t[e]||""})):e||""}(n),e.payload="",r="<span>"+n.replace("\n","<br />")+"</span>";try{var c=qt(r,"span")}catch(e){}if(c)if(1!=(c=c.children).length||c[0].tagName)for(n=(c=g(c)).next();!n.done;n=c.next())In(n.value,e,t);else e.payload=Xe(n);else e.payload=Xe(n)}else e.payload=Xe(n)}function En(e){for(var t=g(Object.entries(Bn)),n=t.next();!n.done;n=t.next()){var r=g(n.value);n=r.next().value,r=r.next().value;var i=new Tn(0,0,"");i.color=r,e.set("."+n,i)}for(n=(t=g(Object.entries(Fn))).next();!n.done;n=t.next())n=(r=g(n.value)).next().value,r=r.next().value,(i=new Tn(0,0,"")).backgroundColor=r,e.set("."+n,i)}function In(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Mt,r.position=null,r.size=0,r.textAlign=Dn,e.tagName)for(var i=g(e.tagName.split(/(?=[ .])+/g)),a=i.next();!a.done;a=i.next()){var o=a=a.value;if(o.startsWith(".voice-")){var s=o.split("-").pop();o='v[voice="'+s+'"]',n.has(o)||(o="v[voice="+s+"]")}switch(n.has(o)&&(s=r,o=n.get(o))&&(s.backgroundColor=Cn(o.backgroundColor,s.backgroundColor),s.color=Cn(o.color,s.color),s.fontFamily=Cn(o.fontFamily,s.fontFamily),s.fontSize=Cn(o.fontSize,s.fontSize),s.textShadow=Cn(o.textShadow,s.textShadow),s.fontWeight=o.fontWeight,s.fontStyle=o.fontStyle,s.opacity=o.opacity,s.rubyTag=o.rubyTag,s.textCombineUpright=o.textCombineUpright,s.wrapLine=o.wrapLine),a){case"br":return r=xn(r.startTime,r.endTime),void t.nestedCues.push(r);case"b":r.fontWeight=Hn;break;case"i":r.fontStyle=qn;break;case"u":r.textDecoration.push(zn);break;case"font":(a=e.attributes.color)&&(r.color=a);break;case"div":if(!(a=e.attributes.time))break;(a=Ut(a))&&(r.startTime=a);break;case"ruby":case"rp":case"rt":r.rubyTag=a}}if(i=e.children,zt(e)||1==i.length&&zt(i[0]))for(n=Yt(e).split("\n"),e=!0,i=(n=g(n)).next();!i.done;i=n.next())i=i.value,e||(e=xn(r.startTime,r.endTime),t.nestedCues.push(e)),i.length>0&&((e=r.clone()).payload=Xe(i),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),e=(t=g(i)).next();!e.done;e=t.next())In(e.value,r,n)}function Cn(e,t){return e&&e.length>0?e:t}Tn.prototype.clone=function(){var e,t=new Tn(0,0,"");for(e in this)t[e]=this[e],Array.isArray(t[e])&&(t[e]=t[e].slice());return t},V("shaka.text.Cue",Tn),Tn.parseCuePayload=kn,Tn.equal=An,Tn.prototype.clone=Tn.prototype.clone;var Mn="auto";Tn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Mn};var Dn="center",Pn={LEFT:"left",RIGHT:"right",CENTER:Dn,START:"start",END:"end"};Tn.textAlign=Pn;var Rn="after",Ln={BEFORE:"before",CENTER:"center",AFTER:Rn};Tn.displayAlign=Ln;var On="ltr";Tn.direction={HORIZONTAL_LEFT_TO_RIGHT:On,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Nn="horizontal-tb";Tn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Nn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var jn=0;Tn.lineInterpretation={LINE_NUMBER:jn,PERCENTAGE:1};var Un="start",_n={CENTER:"center",START:Un,END:"end"};Tn.lineAlign=_n;var Bn={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Tn.defaultTextColor=Bn;var Fn={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Tn.defaultTextBackgroundColor=Fn;var Vn=400,Hn=700;Tn.fontWeight={NORMAL:Vn,BOLD:Hn};var Gn="normal",qn="italic",Kn={NORMAL:Gn,ITALIC:qn,OBLIQUE:"oblique"};Tn.fontStyle=Kn;var zn="underline";Tn.textDecoration={UNDERLINE:zn,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Wn=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Xn(){}function Yn(e,t,n){$n.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,yf:t})}function Jn(e,t){for(var n=e.toLowerCase().split(";")[0],r=g([tr,er,Zn,Qn]),i=r.next();!i.done;i=r.next())if(i=$n.get(n+"-"+i.value)){var a=i.yf(),o=a.isSupported(e,t);if(a.destroy(),o)return i.yf}return null}Xn.prototype.destroy=function(){},V("shaka.transmuxer.TransmuxerEngine",Xn),Xn.findTransmuxer=Jn,Xn.unregisterTransmuxer=function(e,t){$n.delete(e.toLowerCase().split(";")[0]+"-"+t)},Xn.registerTransmuxer=Yn,Xn.prototype.destroy=Xn.prototype.destroy;var $n=new Map,Qn=1,Zn=2,er=3,tr=4;function nr(){}function rr(e,t){var n=e;return t&&!pr.includes(e)&&(n+='; codecs="'+t+'"'),n}function ir(e,t){return t&&(e+='; codecs="'+t+'"'),e}function ar(e,t,n){var r=rr(e,t);return Jn(t=ir(e,t))?(e=Jn(t))?(n=(e=e()).convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?r.replace("video","audio"):r,n}function or(e){return e.split(";")[0].split("/")[1]}function sr(e){var t=fr(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:case"ac3"===e:case"ac-3"===e:return"ac-3";case"mp4a"===e&&"a6"===t:case"eac3"===e:case"ec-3"===e:return"ec-3";case"ac-4"===e:return"ac-4";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"vp09"===e:case"vp9"===e:return"vp9";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"vvc1"===e:case"vvi1"===e:return"vvc";case"dvh1"===e:case"dvhe"===e:return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1";case"dvc1"===e:case"dvi1"===e:return"dovi-vvc"}return e}function ur(e){for(var t=[],n=(e=g(e.split(","))).next();!n.done;n=e.next())n=fr(n.value),t.push(n[0]);return t.sort().join(",")}function lr(e){return e.split(";")[0]}function cr(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function dr(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function fr(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}Xn.PluginPriority={FALLBACK:Qn,PREFERRED_SECONDARY:Zn,PREFERRED:er,APPLICATION:tr},V("shaka.util.MimeUtils",nr),nr.getFullTypeWithAllCodecs=ir,nr.getFullType=rr,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var pr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function hr(e){this.i=null,this.l=e,this.C=!1,this.m=this.u=0,this.o=1/0,this.h=this.g=null,this.F="",this.B=function(){},this.j=new Map}function gr(e,t){Sr.set(e,t)}function mr(e){return Sr.get(e)}function yr(e){return!!Sr.has(e)||("application/cea-608"==e||"application/cea-708"==e)&&!!Ct}function vr(e,t,n){e.F=t,(t=e.j.get(t))&&((t=t.filter((function(e){return e.endTime<=n}))).length&&e.l.append(t))}function br(e,t,n){t.startTime+=n,t.endTime+=n;for(var r=(t=g(t.nestedCues)).next();!r.done;r=t.next())br(e,r.value,n)}function wr(e){for(var t=1/0,n=-1/0,r=g(e.j.values()),i=r.next();!i.done;i=r.next())for(var a=(i=g(i.value)).next();!a.done;a=i.next())a=a.value,t=Math.min(t,a.startTime),n=Math.max(n,a.endTime);t!==1/0&&n!==-1/0&&(e.g=null==e.g?Math.max(t,e.m):Math.min(e.g,Math.max(t,e.m)),e.h=Math.max(e.h,Math.min(n,e.o)))}hr.prototype.destroy=function(){return this.l=this.i=null,this.j.clear(),Promise.resolve()},hr.prototype.remove=function(e,t){var n=this;return L((function(r){return 1==r.g?S(r,Promise.resolve(),2):e>=t?r.return():(function(e,t,n){for(var r=g(e.j.keys()),i=r.next();!i.done;i=r.next()){i=i.value;var a=e.j.get(i);a=a.filter((function(e){return e.startTime<t||e.endTime>=n})),e.j.set(i,a)}}(n,e,t),n.l&&n.l.remove(e,t)&&null!=n.g&&(t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),wr(n)),void T(r))}))},V("shaka.text.TextEngine",hr),hr.prototype.destroy=hr.prototype.destroy,hr.findParser=mr,hr.unregisterParser=function(e){Sr.delete(e)},hr.registerParser=gr;var Sr=new Map;function Tr(e){this.h=e,this.g=null}function xr(e){this.h=e,this.g=null}function Ar(e,t){return e.concat(t)}function kr(){}function Er(e){return null!=e}function Ir(e,t){return Promise.race([t,new Promise((function(t,n){new xr(n).ia(e)}))])}function Cr(){}function Mr(e,t){return e=Rr(e),t=Rr(t),e.split("-")[0]==t.split("-")[0]}function Dr(e,t){return e=Rr(e),t=Rr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function Pr(e,t){return e=Rr(e),t=Rr(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function Rr(e){var t=(e=g(e.split("-x-"))).next().value;t=void 0===t?"":t,e=void 0===(e=e.next().value)?"":e;var n=g(t.split("-"));return t=void 0===(t=n.next().value)?"":t,n=void 0===(n=n.next().value)?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Ur.get(t)||t,((n=n.toUpperCase())?t+"-"+n:t)+(e?"-"+e:"")}function Lr(e,t){return e=Rr(e),(t=Rr(t))==e?4:Dr(t,e)?3:Pr(t,e)?2:Dr(e,t)?1:0}function Or(e){var t=e.indexOf("-");return e=(e=t>=0?e.substring(0,t):e).toLowerCase(),Ur.get(e)||e}function Nr(e){return e.language?Rr(e.language):e.audio&&e.audio.language?Rr(e.audio.language):e.video&&e.video.language?Rr(e.video.language):"und"}function jr(e,t){e=Rr(e);for(var n=new Set,r=(t=g(t)).next();!r.done;r=t.next())n.add(Rr(r.value));for(r=(t=g(n)).next();!r.done;r=t.next())if((r=r.value)==e)return r;for(r=(t=g(n)).next();!r.done;r=t.next())if(Dr(r=r.value,e))return r;for(r=(t=g(n)).next();!r.done;r=t.next())if(Pr(r=r.value,e))return r;for(t=(n=g(n)).next();!t.done;t=n.next())if(Dr(e,t=t.value))return t;return null}Tr.prototype.ia=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout((function(){r&&n.h()}),1e3*t),this},Tr.prototype.stop=function(){this.g&&(this.g(),this.g=null)},xr.prototype.Jb=function(){return this.stop(),this.h(),this},xr.prototype.ia=function(e){var t=this;return this.stop(),this.g=new Tr((function(){t.h()})).ia(e),this},xr.prototype.Ea=function(e){var t=this;return this.stop(),this.g=new Tr((function(){t.g.ia(e),t.h()})).ia(e),this},xr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},V("shaka.util.Timer",xr),xr.prototype.stop=xr.prototype.stop,xr.prototype.tickEvery=xr.prototype.Ea,xr.prototype.tickAfter=xr.prototype.ia,xr.prototype.tickNow=xr.prototype.Jb,V("shaka.util.LanguageUtils",Cr),Cr.findClosestLocale=jr,Cr.getLocaleForVariant=Nr,Cr.getLocaleForText=function(e){return Rr(e.language||"und")},Cr.getBase=Or,Cr.relatedness=Lr,Cr.areSiblings=function(e,t){var n=Or(e),r=Or(t);return e!=n&&t!=r&&n==r},Cr.normalize=Rr,Cr.isSiblingOf=Pr,Cr.isParentOf=Dr,Cr.areLanguageCompatible=Mr,Cr.areLocaleCompatible=function(e,t){return(e=Rr(e))==(t=Rr(t))};var Ur=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function _r(){}function Br(e,t,n,r,i){function a(e){var t=String(e.width||"")+String(e.height||"")+String(Math.round(e.frameRate||0))+(e.hdr||"")+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),e.roles&&(t+=e.roles.sort().join("_")),t}if(i.length){for(var o=e.textStreams,s=(i=g(i)).next(),u={};!s.done;u={Bh:void 0},s=i.next())if(u.Bh=s.value,(s=o.filter(function(e){return function(t){return!(!t.codecs.startsWith(e.Bh)&&!t.mimeType.startsWith(e.Bh))}}(u))).length){o=s;break}e.textStreams=o}if(o=e.variants,(t.length||n.length)&&(o=function(e,t,n){for(var r=(t=g(t)).next(),i={};!r.done;i={videoCodec:void 0},r=t.next())if(i.videoCodec=r.value,(r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.videoCodec)}}(i))).length){e=r;break}for(n=g(n),t=n.next(),r={};!t.done;r={audioCodec:void 0},t=n.next())if(r.audioCodec=t.value,(t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.audioCodec)}}(r))).length){e=t;break}return e}(o,t,n)),r.length){for(t=new te,o=(n=g(o)).next();!o.done;o=n.next())o=o.value,t.push(String(o.video.width||0),o);var l=[];t.forEach((function(e,t){e=0;for(var n=[],i=(t=g(t)).next(),a={};!i.done;a={Tf:void 0},i=t.next())a.Tf=i.value,(i=r.filter(function(e){return function(t){return e.Tf.decodingInfos[0][t]}}(a)).length)>e?(e=i,n=[a.Tf]):i==e&&n.push(a.Tf);l.push.apply(l,m(n))})),o=l}for(n=new Set,t=new Set,i=(o=g(o)).next();!i.done;i=o.next())(i=i.value).audio&&n.add(i.audio),i.video&&t.add(i.video);o=Array.from(n).sort((function(e,t){return e.bandwidth-t.bandwidth}));var c,d,f=[];for(n=new Map,i=(o=g(o)).next();!i.done;i=o.next()){if(i=i.value,d=void 0,d=(c=i).language+(c.channelsCount||0)+(c.audioSamplingRate||0)+c.roles.join(",")+c.label+c.groupId+c.fastSwitching,c.dependencyStream&&(d+=c.dependencyStream.baseOriginalId||""),s=d,(u=n.get(s)||[]).length){var p=u[u.length-1],h=sr(p.codecs),y=sr(i.codecs);h!=y||i.bandwidth&&p.bandwidth&&!(i.bandwidth>p.bandwidth)||(u.push(i),f.push(i.id))}else u.push(i),f.push(i.id);n.set(s,u)}var v={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};o=Array.from(t).sort((function(e,t){if(!e.bandwidth||!t.bandwidth||e.bandwidth==t.bandwidth){if(e.codecs&&t.codecs&&e.codecs!=t.codecs&&e.width==t.width){var n=sr(e.codecs),r=sr(t.codecs);if(n!=r)return(v[n]||1)-(v[r]||1)}return e.width-t.width}return e.bandwidth-t.bandwidth})),t=vt();var b=[];for(n=new Map,i=(o=g(o)).next();!i.done;i=o.next()){if(s=a(i=i.value),(u=n.get(s)||[]).length){if(p=u[u.length-1],!t&&(h=sr(p.codecs))!==(y=sr(i.codecs)))continue;(h=sr(p.codecs))!=(y=sr(i.codecs))||i.bandwidth&&p.bandwidth&&!(i.bandwidth>p.bandwidth)||(u.push(i),b.push(i.id))}else u.push(i),b.push(i.id);n.set(s,u)}e.variants=e.variants.filter((function(e){var t=e.audio;return e=e.video,!(t&&!f.includes(t.id)||e&&!b.includes(e.id))}))}function Fr(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;if(i&&i.width&&i.height){var a=i.width,o=i.height;if(o>a&&(a=(o=g([o,a])).next().value,o=o.next().value),!r(a,t.minWidth,Math.min(t.maxWidth,n.width))||!r(o,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Vr(e,t,n,r){return n=void 0===n?[]:n,r=void 0===r?{}:r,L((function(i){return 1==i.g?S(i,Hr(e,t,t.offlineSessionIds.length>0,n,r),2):(function(e){e.textStreams=e.textStreams.filter((function(e){return yr(e=rr(e.mimeType,e.codecs))}))}(t),S(i,function(e){var t,n,r,i,a,o,s;return L((function(u){switch(u.g){case 1:t=[],n=g(e.imageStreams),r=n.next();case 2:if(r.done){u.A(4);break}if(i=r.value,"application/mp4"==(a=i.mimeType)&&"mjpg"==i.codecs&&(a="image/jpg"),fi.has(a)){u.A(5);break}if(!(o=pi.get(a))){fi.set(a,!1),u.A(5);break}return S(u,function(e){return new Promise((function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then((function(){t(!0)})).catch((function(){t(!1)})):n.onload=n.onerror=function(){t(2===n.height)}}))}(o),7);case 7:s=u.h,fi.set(a,s);case 5:fi.get(a)&&t.push(i),r=n.next(),u.A(2);break;case 4:e.imageStreams=t,T(u)}}))}(t),0))}))}function Hr(e,t,n,r,i){var a,o;return L((function(s){if(1==s.g)return oe().Ui()&&function(e){for(var t=(new Map).set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set,r=(e=g(e)).next();!r.done;r=e.next())(r=r.value).video&&n.add(r.video);for(n=g(n),e=n.next();!e.done;e=n.next()){e=e.value;for(var i=(r=g(t)).next();!i.done;i=r.next()){var a=g(i.value);if(i=a.next().value,a=a.next().value,e.codecs.includes(i)){e.codecs=e.codecs.replace(i,a);break}}}}(t.variants),S(s,Kr(t.variants,n,!1,r),2);a=null,e&&(o=e.g)&&(a=o.keySystem),t.variants=t.variants.filter((function(e){var t=function(e,t,n){if(!e.decodingInfos.some((function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&(n[e.keySystem]||e.keySystem)!=t)})))return!1;var r=oe(),i="Xbox"===r.Nb();r="MOBILE"===r.Ua()&&"GECKO"===r.Ha();var a=e.video,o=a&&a.width||0,s=a&&a.height||0;return!(i&&a&&(o>1920||s>1080)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3."))||(i=a&&a.dependencyStream)&&!mt(i))&&(e=e.audio,!(r&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}(e,a,i);if(!t){var n=[];e.audio&&n.push(si(e.audio)),e.video&&n.push(si(e.video))}return t})),T(s)}))}function Gr(e,t){var n,r,i,a,o,s,u;return L((function(l){if(1==l.g){for(n=function(e,t){if(e){var n=Vt(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},r=null,i=[],a=g(t),o=a.next(),s={};!o.done;s={cache:void 0,Pe:void 0},o=a.next())u=o.value,s.Pe=Ht(u),s.cache=ci,s.cache.has(s.Pe)?r=n(r,s.cache.get(s.Pe)):i.push(qr(u).then(function(e){return function(t){for(var i=null,a=(t=g(t||[])).next();!a.done;a=t.next())i=n(i,a.value);i&&(e.cache.set(e.Pe,i),r=n(r,i))}}(s)));return S(l,Promise.all(i),2)}r&&e.decodingInfos.push(r),T(l)}))}function qr(e){var t=[""];e.video&&(t=cr(e.video.contentType).split(","));var n=[""];e.audio&&(n=cr(e.audio.contentType).split(","));for(var r=[],i=(t=g(t)).next();!i.done;i=t.next()){i=i.value;for(var a=g(n),o=a.next(),s={};!o.done;s={Qc:void 0},o=a.next())o=o.value,s.Qc=Ft(e),e.video&&(s.Qc.video.contentType=rr(lr(s.Qc.video.contentType),i)),e.audio&&(s.Qc.audio.contentType=rr(lr(s.Qc.audio.contentType),o)),r.push(new Promise(function(e){return function(t,n){("MOBILE"==oe().Ua()?Ir(5,navigator.mediaCapabilities.decodingInfo(e.Qc)):navigator.mediaCapabilities.decodingInfo(e.Qc)).then((function(e){t(e)})).catch(n)}}(s)))}return Promise.all(r).catch((function(){return JSON.stringify(e),null}))}function Kr(e,t,n,r){var i,a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,T,x;return L((function(A){switch(A.g){case 1:if(e.some((function(e){return e.decodingInfos.length})))return A.return();i=g(r),a=i.next(),o={};case 2:if(a.done){A.A(4);break}o.Ci=a.value,s=!1,u=g(e),l=u.next();case 5:if(l.done){A.A(7);break}c=l.value,d=zr(c,t,n).filter((k=o,function(e){return((e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)===k.Ci})),f=g(d),p=f.next();case 8:if(p.done){A.A(10);break}return h=p.value,S(A,Gr(c,h),9);case 9:p=f.next(),A.A(8);break;case 10:c.decodingInfos.some((function(e){return e.supported}))&&(s=!0),l=u.next(),A.A(5);break;case 7:if(s)return A.return();o={Ci:void 0},a=i.next(),A.A(2);break;case 4:m=g(e),y=m.next();case 12:if(y.done){A.A(0);break}v=y.value,b=zr(v,t,n).filter((function(e){return!(e=(e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!r.includes(e)})),w=g(b),T=w.next();case 15:if(T.done){y=m.next(),A.A(12);break}return x=T.value,S(A,Gr(v,x),16);case 16:T=w.next(),A.A(15)}var k}))}function zr(e,t,n){var r=e.audio,i=e.video,a=[],o=[];if(i)for(var s=g(i.fullMimeTypes),u=s.next();!u.done;u=s.next()){var l=cr(u=u.value);if(l.includes(",")&&!r){var c=l.split(","),d=lr(u);l=ot("video",c),d=ar(d,c=Wr(c=ot("audio",c),d),"audio"),o.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=Xr(l),u={contentType:ar(lr(u),l,"video"),width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||30},i.hdr)switch(i.hdr){case"PQ":u.transferFunction="pq";break;case"HLG":u.transferFunction="hlg"}i.colorGamut&&(u.colorGamut=i.colorGamut),a.push(u)}if(r)for(u=(s=g(r.fullMimeTypes)).next();!u.done;u=s.next())u=ar(u=lr(l=u.value),l=Wr(cr(l),u),"audio"),o.push({contentType:u,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(s=[],0==a.length&&a.push(null),0==o.length&&o.push(null),u=(a=g(a)).next();!u.done;u=a.next())for(u=u.value,d=(l=g(o)).next();!d.done;d=l.next())d=d.value,c={type:n?"file":"media-source"},u&&(c.video=u),d&&(c.audio=d),s.push(c);if(!(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[s];for(e=[],n=new Map,a=(o=g(o)).next();!a.done;a=o.next())a=a.value,n.get(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);for(o=t?"required":"optional",t=t?["persistent-license"]:["temporary"],u=(a=g(n.keys())).next();!u.done;u=a.next()){for(u=u.value,d=n.get(u),l=new Map,c=(d=g(d)).next();!c.done;c=d.next()){var f=(c=c.value).videoRobustness+","+c.audioRobustness;l.get(f)||l.set(f,[]),l.get(f).push(c)}for(d=(l=g(l.values())).next();!d.done;d=l.next()){d=d.value,c=[];for(var p=(f=g(s)).next();!p.done;p=f.next()){p=Object.assign({},p.value);for(var h={keySystem:u,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},m=g(d),y=m.next();!y.done;y=m.next()){if((y=y.value).initData&&y.initData.length){for(var v=new Set,b=g(y.initData),w=b.next();!w.done;w=b.next())v.add(w.value.initDataType);h.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(h.distinctiveIdentifier="required"),y.persistentStateRequired&&(h.persistentState="required"),y.sessionType&&(h.sessionTypes=[y.sessionType]),r&&(h.audio?(y.encryptionScheme&&(h.audio.encryptionScheme=h.audio.encryptionScheme||y.encryptionScheme),h.audio.robustness=h.audio.robustness||y.audioRobustness):(h.audio={robustness:y.audioRobustness},y.encryptionScheme&&(h.audio.encryptionScheme=y.encryptionScheme)),""==h.audio.robustness&&delete h.audio.robustness),i&&(h.video?(y.encryptionScheme&&(h.video.encryptionScheme=h.video.encryptionScheme||y.encryptionScheme),h.video.robustness=h.video.robustness||y.videoRobustness):(h.video={robustness:y.videoRobustness},y.encryptionScheme&&(h.video.encryptionScheme=y.encryptionScheme)),""==h.video.robustness&&delete h.video.robustness)}p.keySystemConfiguration=h,c.push(p)}e.push(c)}}return e}function Wr(e,t){var n=oe();return"flac"==e.toLowerCase()?"WEBKIT"!=n.Ha()?"flac":"fLaC":"opus"===e.toLowerCase()?"WEBKIT"!=n.Ha()?"opus":"mp4"==or(t)?"Opus":"opus":"ac-3"==e.toLowerCase()&&n.oe()?"ec-3":e}function Xr(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Yr(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=t?t.groupId:null,u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var d=g(t.roles),f=d.next();!f.done;f=d.next())c.add(f.value);if(n)for(f=(d=g(n.roles)).next();!f.done;f=d.next())c.add(f.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:u,audioMimeType:r,videoMimeType:i,codecs:"",audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(c),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(r=n.dependencyStream)&&(e.width=r.width||e.width,e.height=r.height||e.height,e.videoCodec=r.codecs||e.videoCodec,e.videoBandwidth&&r.bandwidth&&(e.videoBandwidth+=r.bandwidth)),o.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=i,i=o.split(",");try{e.videoCodec=ot("video",i),e.audioCodec=ot("audio",i)}catch(e){}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,i=t.dependencyStream)&&(e.audioCodec=i.codecs||e.audioCodec,e.audioBandwidth&&i.bandwidth&&(e.audioBandwidth+=i.bandwidth)),n&&!e.videoBandwidth&&(t?e.audioBandwidth&&(e.videoBandwidth=e.bandwidth-e.audioBandwidth):e.videoBandwidth=e.bandwidth),t&&!e.audioBandwidth&&(n?e.videoBandwidth&&(e.audioBandwidth=e.bandwidth-e.videoBandwidth):e.audioBandwidth=e.bandwidth),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Jr(e){return{id:e.id,active:!1,type:lt,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function $r(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=Ru(e.segmentIndex));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:i||null,originalImageId:e.originalId}}function Qr(e){return e.__shaka_id||(e.__shaka_id=di++),e.__shaka_id}function Zr(e){var t={id:Qr(e),active:"disabled"!=e.mode,type:lt,bandwidth:0,language:Rr(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:"forced"==e.kind,originalTextId:e.id,originalLanguage:e.language};return"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function ei(e,t){var n=e?e.language:null;if(n={id:Qr(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Rr(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!!e&&"main"==e.kind,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+","+n.videoCodec:n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function ti(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function ni(e){return e.filter((function(e){return ti(e)}))}function ri(e,t,n,r){var i=e,a=e.filter((function(e){return e.primary}));a.length&&(i=a);var o=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==o})),t){var s=jr(Rr(t),e.map((function(e){return e.language})));s&&(i=e.filter((function(e){return Rr(e.language)==s})))}if(i=i.filter((function(e){return e.forced==r})),n){if((e=ii(i,n)).length)return e}else if((e=i.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=i.map((function(e){return e.roles})).reduce(Ar,[])).length?ii(i,e[0]):i}function ii(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function ai(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function oi(e,t){t.length&&(t=t.filter((function(t){return sr(e.codecs)==sr(t.codecs)})).sort((function(e,t){return e.bandwidth&&t.bandwidth&&e.bandwidth!=t.bandwidth?e.bandwidth-t.bandwidth:(e.width||0)-(t.width||0)})),e.trickModeVideo=t[0],t.length>1&&(t=t.find((function(t){return e.width==t.width&&e.height==t.height}))))&&(e.trickModeVideo=t)}function si(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function ui(e,t,n){if(0==n.autoShowText)return!1;if(1==n.autoShowText)return!0;var r=Rr(n.preferredTextLanguage);return t=Rr(t.language),2==n.autoShowText?Mr(t,r):3==n.autoShowText?!!e&&(e=Rr(e.language),Mr(t,r)&&!Mr(e,t)):(W("Invalid autoShowText setting!"),!1)}function li(e){for(var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n=(e=g(e)).next();!n.done;n=e.next()){var r={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:(n=n.value)?lr(n):"",codecs:n?cr(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};r.fullMimeTypes.add(rr(r.mimeType,r.codecs)),n.startsWith("audio/")?(r.type="audio",t.audio=r):t.video=r}return t}V("shaka.util.StreamUtils",_r),_r.meetsRestrictions=Fr;var ci=new Map,di=0,fi=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),pi=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function hi(){var t=this;this.H=null,this.B=!1,this.u=new q,this.j=new ne,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",(function(){if(t.B&&t.g.useNetworkInformation){t.u=new q,t.g&&t.u.configure(t.g.advanced);var e=t.chooseVariant();e&&navigator.onLine&&t.H(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}})),this.o=[],this.I=1,this.J=!1,this.h=this.m=this.g=this.C=null,this.l=new xr((function(){if(t.B&&(t.g.restrictToElementSize||t.g.restrictToScreenSize)){var e=t.chooseVariant();e&&t.H(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}})),this.F=e,"documentPictureInPicture"in e&&this.j.D(e.documentPictureInPicture,"enter",(function(){t.F=e.documentPictureInPicture.window,t.l&&t.l.Jb(),t.j.Ba(t.F,"pagehide",(function(){t.F=e,t.l&&t.l.Jb()}))})),this.G=this.i=null}function gi(e,t){if(void 0===t||!t){if(!e.J){if(!((t=e.u).g>=t.i))return;e.J=!0,e.C-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}if(Date.now()-e.C<1e3*e.g.switchInterval)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function mi(e,t,n,r,i){if(e.G){var a=e.G.bi();a&&(n=n.filter((function(e){return!e.bandwidth||!a||e.bandwidth<=a})))}return t&&(n=n.filter((function(e){return Fr(e,t,{width:i,height:r})}))),n.sort((function(e,t){return e.bandwidth-t.bandwidth}))}(i=hi.prototype).stop=function(){this.H=null,this.B=!1,this.o=[],this.I=1,this.m=this.C=null,this.h&&(this.h.disconnect(),this.h=null),this.l&&this.l.stop(),this.G=this.i=null},i.release=function(){this.stop(),this.j.release(),this.l=null},i.init=function(e){this.H=e},i.chooseVariant=function(e){e=void 0!==e&&e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,t=this.F.screen.height*n,n*=this.F.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,i=this.m.clientHeight,a=this.m.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.m&&(i=this.i.height,a=this.i.width),t=Math.min(t,i*r),n=Math.min(n,a*r)}if((i=this.o.filter((function(e){return e&&!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)}))).length||(i=this.o),r=i,e&&i.length!=this.o.length&&(r=this.o.filter((function(e){return e&&!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)}))),e=mi(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=function(e){for(var t=[],n=(e=g(e)).next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort((function(e,t){return e.width-t.width}))}(e),i=(e=g(e)).next();!i.done;i=e.next())if((i=i.value).height>=t&&i.width>=n){t=i.height,n=i.width;break}e=mi(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=[(e=mi(this,null,r,1/0,1/0))[0]]),n=e[0]||null,r=0;r<e.length;r++){i=e[r];var o=isNaN(this.I)?1:Math.abs(this.I);a=o*i.bandwidth/this.g.bandwidthDowngradeTarget;for(var s={bandwidth:1/0},u=r+1;u<e.length;u++)if(i.bandwidth!=e[u].bandwidth){s=e[u];break}o=o*s.bandwidth/this.g.bandwidthUpgradeTarget,t>=a&&t<=o&&(n.bandwidth!=i.bandwidth||n.bandwidth==i.bandwidth&&n.video&&i.video&&(n.video.width<i.video.width||n.video.height<i.video.height))&&(n=i)}return this.C=Date.now(),n},i.enable=function(){this.B=!0},i.disable=function(){this.B=!1},i.segmentDownloaded=function(e,t,n,r){var i=e;this.g.removeLatencyFromFirstPacketTime&&r&&1===r.packetNumber&&r.timeToFirstByte&&(i=e-r.timeToFirstByte),i>=this.g.cacheLoadThreshold&&this.u.sample(i,t),n&&null!=this.C&&this.B&&gi(this)},i.trySuggestStreams=function(){this.B&&(this.C=Date.now(),gi(this,!0))},i.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.G?this.G.getBandwidthEstimate(e):e)},i.setVariants=function(e){return!Z(e,this.o)&&(this.o=e,!0)},i.playbackRateChanged=function(e){this.I=e},i.setMediaElement=function(t){function n(){r.l.ia(yi)}var r=this;this.m=t,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in e&&(this.h=new ResizeObserver(n),this.h.observe(this.m)),this.j.D(t,"enterpictureinpicture",(function(e){e.pictureInPictureWindow&&(r.i=e.pictureInPictureWindow,r.j.D(r.i,"resize",n))})),this.j.D(t,"leavepictureinpicture",(function(){r.i&&r.j.Ma(r.i,"resize",n),r.i=null}))},i.setCmsdManager=function(e){this.G=e},i.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)},V("shaka.abr.SimpleAbrManager",hi),hi.prototype.configure=hi.prototype.configure,hi.prototype.setCmsdManager=hi.prototype.setCmsdManager,hi.prototype.setMediaElement=hi.prototype.setMediaElement,hi.prototype.playbackRateChanged=hi.prototype.playbackRateChanged,hi.prototype.setVariants=hi.prototype.setVariants,hi.prototype.getBandwidthEstimate=hi.prototype.getBandwidthEstimate,hi.prototype.trySuggestStreams=hi.prototype.trySuggestStreams,hi.prototype.segmentDownloaded=hi.prototype.segmentDownloaded,hi.prototype.disable=hi.prototype.disable,hi.prototype.enable=hi.prototype.enable,hi.prototype.chooseVariant=hi.prototype.chooseVariant,hi.prototype.init=hi.prototype.init,hi.prototype.release=hi.prototype.release,hi.prototype.stop=hi.prototype.stop;var yi=1;function vi(e,t){if(e===t||!e.length||!t.length)return!0;for(var n=(e=g(e)).next();!n.done;n=e.next()){if(Ti(n=n.value))return!0;for(var r=g(t),i=r.next();!i.done;i=r.next())if(i=i.value,n.keySystem===i.keySystem||Ti(i))return!0}return!1}function bi(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=(e=g(e)).next();!r.done;r=e.next()){r=r.value;for(var i=g(t),a=i.next();!a.done;a=i.next()){if(a=a.value,r.keySystem==a.keySystem){i=new Map;for(var o=g((r.initData||[]).concat(a.initData||[])),s=o.next();!s.done;s=o.next())s=s.value,i.set(s.keyId,s);i=Array.from(i.values()),o=r.keyIds&&a.keyIds?new Set([].concat(m(r.keyIds),m(a.keyIds))):r.keyIds||a.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||a.persistentStateRequired,videoRobustness:r.videoRobustness||a.videoRobustness,audioRobustness:r.audioRobustness||a.audioRobustness,serverCertificate:r.serverCertificate||a.serverCertificate,serverCertificateUri:r.serverCertificateUri||a.serverCertificateUri,initData:i,keyIds:o});break}Ti(r)?n.push(r):Ti(a)&&n.push(a)}}return n}function wi(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Si(e){return!!e&&!!e.match(/^com\.apple\.fps/)}function Ti(e){return!!(e=e.licenseServerUri)&&e.startsWith("data:application/json;base64,")}var xi=new ae((function(){return Oe(new Uint8Array([0]))})),Ai=new Map;function ki(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Ei(e){var t,n;return L((function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new Be(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),S(r,new Promise((function(e){new xr(e).ia(n/1e3)})),2))}e.h*=e.m,T(r)}))}function Ii(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Ci(e,t){this.promise=e,this.i=t,this.g=null}function Mi(e){return new Ci(Promise.reject(e),(function(){return Promise.resolve()}))}function Di(){var e=Promise.reject(new Be(2,7,7001));return e.catch((function(){})),new Ci(e,(function(){return Promise.resolve()}))}function Pi(e){return new Ci(Promise.resolve(e),(function(){return Promise.resolve()}))}function Ri(e){return new Ci(e,(function(){return e.catch((function(){}))}))}function Li(e){return new Ci(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function Oi(t,n){if(n)if(n instanceof Map)for(var r=g(n.keys()),i=r.next();!i.done;i=r.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Ni(e){var t,n=new Oi(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}Ii.prototype.resolve=function(){},Ii.prototype.reject=function(){},Ci.prototype.abort=function(){return this.g||(this.g=this.i()),this.g},Ci.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},Ci.prototype.Xa=function(e,t){function n(n){return function(s){if(i.g&&n)a.reject(o);else{var u=n?e:t;u?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(u,s,a):(n?a.resolve:a.reject)(s)}}}function r(){return a.reject(o),i.abort()}var i=this,a=new Ii;a.catch((function(){}));var o=new Be(2,7,7001);return this.promise.then(n(!0),n(!1)),new Ci(a,(function(){return r()}))},u.Object.defineProperties(Ci.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return null!==this.g}}}),V("shaka.util.AbortableOperation",Ci),Ci.prototype.chain=Ci.prototype.Xa,Ci.prototype.finally=Ci.prototype.finally,Ci.all=Li,Ci.prototype.abort=Ci.prototype.abort,Ci.notAbortable=Ri,Ci.completed=Pi,Ci.aborted=Di,Ci.failed=Mi,Oi.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Oi.prototype.stopImmediatePropagation=function(){this.g=!0},Oi.prototype.stopPropagation=function(){},V("shaka.util.FakeEvent",Oi);var ji={rl:"abrstatuschanged",ul:"adaptation",vl:"audiotrackchanged",wl:"audiotrackschanged",xl:"boundarycrossed",yl:"buffering",zl:"canupdatestarttime",Al:"complete",Bl:"currentitemchanged",Cl:"downloadcompleted",Dl:"downloadfailed",El:"downloadheadersreceived",Fl:"drmsessionupdate",Gl:"emsg",Ml:"itemsinserted",Nl:"itemsremoved",bm:"prft",Error:"error",Hl:"expirationupdated",Il:"firstquartile",Jl:"gapjumped",Ol:"keystatuschanged",Rl:"loaded",Sl:"loading",Ul:"manifestparsed",Vl:"manifestupdated",Wl:"mediaqualitychanged",Xl:"mediasourcerecovered",Yl:"metadataadded",Metadata:"metadata",Zl:"midpoint",$l:"nospatialvideoinfo",am:"onstatechange",dm:"ratechange",hm:"segmentappended",im:"sessiondata",jm:"spatialvideoinfo",lm:"stalldetected",nm:"started",om:"statechanged",pm:"streaming",qm:"textchanged",rm:"texttrackvisibility",sm:"thirdquartile",tm:"timelineregionadded",um:"timelineregionenter",vm:"timelineregionexit",wm:"trackschanged",ym:"unloading",Am:"variantchanged"};function Ui(){this.ab=new te,this.Fe=this}function _i(){this.g=[]}function Bi(e,t){e.g.push(t.finally((function(){Q(e.g,t)})))}function Fi(e,t,n,r,i,a,o){Ui.call(this),this.i=null,this.j=!1,this.u=new _i,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=r||null,this.F=i||null,this.H=a||null,this.G=o||null,this.l=new Map}function Vi(e,t,n,r){r=void 0!==r&&r,n=n||Yi;var i=Ji.get(e);(!i||n>=i.priority)&&Ji.set(e,{priority:n,yf:t,Fk:r})}function Hi(e,t){for(var n=g(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(n=(e=g(e.h)).next();!n.done;n=e.next())t.h.add(n.value)}function Gi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function qi(e,t,n,r,i,a,o,s){e.i.forceHTTP&&(n.uris[a]=n.uris[a].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[a]=n.uris[a].replace("http://","https://")),a>0&&e.H&&e.H(t,r,n.uris[a],n.uris[a-1]);var u=new me(n.uris[a]),l=u.bc,c=!1;l||(ye(u,l=(l=location.protocol).slice(0,-1)),n.uris[a]=u.toString()),l=l.toLowerCase();var d=(l=Ji.get(l))?l.yf:null;if(!d)return Mi(new Be(2,1,1e3,u));var f=l.Fk;(u=e.l.get(u.Db))&&(n.headers["common-access-token"]=u);var p,h=null,g=null,m=!1,y=!1;return Ri(Ei(i)).Xa((function(){if(e.j)return Di();p=Date.now();var i=0;n.requestStartTime=Date.now();var o=d(n.uris[a],n,t,(function(a,o,u){h&&h.stop(),g&&g.ia(l/1e3),e.o&&t==Xi&&(i++,n.packetNumber=i,e.o(a,o,Ki(r),n,r),c=!0,s.g=u)}),(function(r){y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(r,n,t)}),{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!f)return o;var u=n.retryParameters.connectionTimeout;u&&(h=new xr((function(){m=!0,o.abort()}))).ia(u/1e3);var l=n.retryParameters.stallTimeout;return l&&(g=new xr((function(){m=!0,o.abort()}))),o})).Xa((function(r){h&&h.stop(),g&&g.stop(),null==r.timeMs&&(r.timeMs=Date.now()-p);var i=r.headers["common-access-token"];if(i){var a=new me(r.uri);e.l.set(a.Db,i)}return i={response:r,fk:c},!y&&e.m&&e.m(r.headers,n,t),e.B&&e.B(n,r),i}),(function(u){if(h&&h.stop(),g&&g.stop(),e.C){var l=null,c=0;u instanceof Be&&(l=u,1001==u.code&&(c=u.data[1])),e.C(n,l,c,m)}if(e.j)return Di();if(m&&(u=new Be(1,1,1003,n.uris[a],t)),u instanceof Be){if(7001==u.code)throw u;if(1010==u.code)throw o;if(1==u.severity){if((l=new Oi("retry",l=(new Map).set("error",u))).cancelable=!0,e.dispatchEvent(l),l.defaultPrevented)throw u;return a=(a+1)%n.uris.length,qi(e,t,n,r,i,a,u,s)}}throw u}))}function Ki(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}function zi(){this.g=0}function Wi(e,t,n){Ci.call(this,e,t),this.h=n}Ui.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},Ui.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},Ui.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),n=(t=g(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Fe,e.currentTarget=this.Fe;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented},Ui.prototype.release=function(){this.ab=null},_i.prototype.destroy=function(){for(var e=[],t=g(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},p(Fi,Ui),(i=Fi.prototype).configure=function(e){this.i=e},i.Ik=function(e){this.g.add(e)},i.hl=function(e){this.g.delete(e)},i.oj=function(){this.g.clear()},i.Jk=function(e){this.h.add(e)},i.il=function(e){this.h.delete(e)},i.pj=function(){this.h.clear()},i.Qh=function(){this.l.clear()},i.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Ui.prototype.release.call(this),this.u.destroy()},i.request=function(e,t,n){var r=this,i=new zi;if(this.j){var a=Promise.reject(new Be(2,7,7001));return a.catch((function(){})),new Wi(a,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ft(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Ft(t.uris);var o=(a=function(e,t,n,r){function i(e){a=a.Xa((function(){return n.body&&(n.body=Oe(n.body)),e(t,n,r)}))}var a=Pi(void 0);e.F&&i(e.F);for(var o=(e=g(e.g)).next();!o.done;o=e.next())i(o.value);return a.Xa(void 0,(function(e){if(e instanceof Be&&7001==e.code)throw e;throw new Be(2,1,1006,e)}))}(this,e,t,n)).Xa((function(){return qi(r,e,t,n,new ki(t.retryParameters,!1),0,null,i)})),s=o.Xa((function(t){return function(e,t,n,r){for(var i=Pi(void 0),a=(e=g(e.h)).next(),o={};!a.done;o={Ji:void 0},a=e.next())o.Ji=a.value,i=i.Xa(function(e){return function(){var i=n.response;return i.data&&(i.data=Oe(i.data)),(0,e.Ji)(t,i,r)}}(o));return i.Xa((function(){return n}),(function(e){var t=2;if(e instanceof Be){if(7001==e.code)throw e;t=e.severity}throw new Be(t,1,1007,e)}))}(r,e,t,n)})),u=Date.now(),l=0;a.promise.then((function(){l=Date.now()-u}),(function(){}));var c=0;o.promise.then((function(){c=Date.now()}),(function(){}));var d=s.Xa((function(i){var a=Date.now()-c,o=i.response;return o.timeMs+=l,o.timeMs+=a,i.fk||!r.o||o.fromCache||"HEAD"==t.method||e!=Xi||r.o(o.timeMs,o.data.byteLength,Ki(n),t,n),r.G&&r.G(e,o,n),o}),(function(e){throw e&&(e.severity=2),e}));return a=new Wi(d.promise,(function(){return d.abort()}),i),Bi(this.u,a),a},V("shaka.net.NetworkingEngine",Fi),Fi.prototype.request=Fi.prototype.request,Fi.prototype.destroy=Fi.prototype.destroy,Fi.makeRequest=Gi,Fi.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Fi.prototype.clearCommonAccessTokenMap=Fi.prototype.Qh,Fi.prototype.clearAllResponseFilters=Fi.prototype.pj,Fi.prototype.unregisterResponseFilter=Fi.prototype.il,Fi.prototype.registerResponseFilter=Fi.prototype.Jk,Fi.prototype.clearAllRequestFilters=Fi.prototype.oj,Fi.prototype.unregisterRequestFilter=Fi.prototype.hl,Fi.prototype.registerRequestFilter=Fi.prototype.Ik,Fi.unregisterScheme=function(e){Ji.delete(e)},Fi.registerScheme=Vi,Fi.prototype.configure=Fi.prototype.configure,Fi.NumBytesRemainingClass=zi,p(Wi,Ci),Fi.PendingRequest=Wi;var Xi=1;Fi.RequestType={MANIFEST:0,SEGMENT:Xi,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},Fi.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var Yi=3;Fi.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Yi};var Ji=new Map;function $i(e){this.g=!1,this.h=new Ii,this.i=e}function Qi(e,t){if(e.g){if(t instanceof Be&&7003==t.code)throw t;throw new Be(2,7,7003,t)}}function Zi(e,t){for(var n=[],r=(e=g(e)).next();!r.done;r=e.next())n.push(t(r.value));return n}function ea(e){for(var t=new Map,n=g(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function ta(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function na(e,t){this.h=Ue(e),this.i=t==ia,this.g=0}function ra(){return new Be(2,3,3e3)}$i.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},(i=na.prototype).Ia=function(){return this.g<this.h.byteLength},i.Oa=function(){return this.g},i.getLength=function(){return this.h.byteLength},i.Y=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(e){throw ra()}},i.Ca=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(e){throw ra()}},i.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(e){throw ra()}},i.Zg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(e){throw ra()}},i.Dd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw ra()}if(t>2097151)throw new Be(2,3,3001);return this.g+=8,4294967296*t+e},i.Tb=function(e,t){if(this.g+e>this.h.byteLength)throw ra();var n=Ne(this.h,this.g,e);return this.g+=e,t?new Uint8Array(n):n},i.skip=function(e){if(this.g+e>this.h.byteLength)throw ra();this.g+=e},i.Ki=function(e){if(this.g<e)throw ra();this.g-=e},i.seek=function(e){if(e<0||e>this.h.byteLength)throw ra();this.g=e},i.Yc=function(){for(var e=this.g;this.Ia()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=Ne(this.h,e,this.g-e),this.g+=1,He(e)},V("shaka.util.DataViewReader",na),na.prototype.readTerminatedString=na.prototype.Yc,na.prototype.seek=na.prototype.seek,na.prototype.rewind=na.prototype.Ki,na.prototype.skip=na.prototype.skip,na.prototype.readBytes=na.prototype.Tb,na.prototype.readUint64=na.prototype.Dd,na.prototype.readInt32=na.prototype.Zg,na.prototype.readUint32=na.prototype.U,na.prototype.readUint16=na.prototype.Ca,na.prototype.readUint8=na.prototype.Y,na.prototype.getLength=na.prototype.getLength,na.prototype.getPosition=na.prototype.Oa,na.prototype.hasMoreData=na.prototype.Ia;var ia=1;function aa(){this.i=new Map,this.h=new Map,this.g=!1}function oa(e){for(var t=pa(e);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function sa(e){for(var t=pa(e),n=e.reader.U(),r=0;r<n&&(e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);r++);}function ua(e){var t=pa(e);for(e.reader.skip(78);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function la(e){var t=pa(e);e.reader.skip(8);var n=e.reader.Ca();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function ca(e,t){return function(n){e(n.reader.Tb(n.reader.getLength()-n.reader.Oa(),t))}}function da(e){for(var t=0,n=(e=g(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function fa(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function pa(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}na.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:ia},(i=aa.prototype).box=function(e,t){return e=da(e),this.i.set(e,ha),this.h.set(e,t),this},i.T=function(e,t){return e=da(e),this.i.set(e,ga),this.h.set(e,t),this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new na(e,0),this.g=!1;e.Ia()&&!this.g;)this.zd(0,e,t,n)},i.zd=function(e,t,n,r){var i=t.Oa();if(r&&i+8>t.getLength())this.g=!0;else{var a=t.U(),o=t.U(),s=fa(o),u=!1;switch(a){case 0:a=t.getLength()-i;break;case 1:if(r&&t.Oa()+8>t.getLength())return void(this.g=!0);a=t.Dd(),u=!0}var l=this.h.get(o);if(l){var c=null,d=null;if(this.i.get(o)==ga){if(r&&t.Oa()+4>t.getLength())return void(this.g=!0);c=(d=t.U())>>>24,d&=16777215}o=i+a,n&&o>t.getLength()&&(o=t.getLength()),r&&o>t.getLength()?this.g=!0:(o-=t.Oa(),l({name:s,parser:this,partialOkay:n||!1,stopOnPartial:r||!1,version:c,flags:d,reader:t=new na(t=o>0?t.Tb(o,!1):new Uint8Array(0),0),size:a,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+a-t.Oa(),t.getLength()-t.Oa()))}},V("shaka.util.Mp4Parser",aa),aa.headerSize=pa,aa.typeToString=fa,aa.allData=ca,aa.audioSampleEntry=la,aa.visualSampleEntry=ua,aa.sampleDescription=sa,aa.children=oa,aa.prototype.parseNext=aa.prototype.zd,aa.prototype.parse=aa.prototype.parse,aa.prototype.stop=aa.prototype.stop,aa.prototype.fullBox=aa.prototype.T,aa.prototype.box=aa.prototype.box;var ha=0,ga=1;function ma(e){var t=this;this.g=[],this.h=[],this.data=[],(new aa).box("moov",oa).box("moof",oa).T("pssh",(function(e){if(!(e.version>1)){var n=Ne(e.reader.h,-12,e.size);if(t.data.push(n),n=e.reader.Tb(16,!1),t.g.push(tt(n)),e.version>0){n=e.reader.U();for(var r=0;r<n;r++){var i=e.reader.Tb(16,!1);i=tt(i),t.h.push(i)}}}})).parse(e)}function ya(e,t,n,r){var i=e.length,a=12+t.length+4+i;r>0&&(a+=4+16*n.size);var o=new Uint8Array(a),s=Ue(o),u=0;if(s.setUint32(u,a),u+=4,s.setUint32(u,1886614376),u+=4,r<1?s.setUint32(u,0):s.setUint32(u,16777216),u+=4,o.set(t,u),u+=t.length,r>0)for(s.setUint32(u,n.size),u+=4,n=(t=g(n)).next();!n.done;n=t.next())n=et(n.value),o.set(n,u),u+=n.length;return s.setUint32(u,i),o.set(e,u+4),o}function va(e){var t=this;this.F=e,this.j=this.B=null,this.oa=this.S=!1,this.J=0,this.g=null,this.o=new ne,this.i=new Map,this.X=[],this.C=new Map,this.K=!1,this.m=new Ii,this.h=null,this.u=function(n){2==n.severity&&t.m.reject(n),e.onError(n)},this.aa=new Map,this.ma=new Map,this.M=new xr((function(){return function(e){var t=e.aa,n=e.ma;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.u(new Be(2,6,6014)),e.F.vf(ta(n))}(t)})),this.R=!1,this.N=[],this.$=!1,this.G=new xr((function(){!function(e){e.i.forEach((function(t,n){var r=t.Ug,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.F.onExpirationUpdated(n.sessionId,i),t.Ug=i)}))}(t)})),this.m.catch((function(){})),this.l=new $i((function(){return function(e){return L((function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.M.stop(),e.M=null,S(t,Ra(e),2);case 2:if(!e.j){t.A(3);break}return x(t,4),S(t,e.j.setMediaKeys(null),6);case 6:k(t,5);break;case 4:E(t);case 5:e.j=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.I=null,T(t)}}))}(t)})),this.O=!1,this.H=this.I=null,this.V=function(){return!1}}function ba(e,t,n,r){r=void 0===r||r,e.C=new Map;for(var i=(n=g(n)).next();!i.done;i=n.next())e.C.set(i.value,{initData:null,initDataType:null});for(i=(n=g(e.h.persistentSessionsMetadata)).next();!i.done;i=n.next())i=i.value,e.C.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.R=e.C.size>0,wa(e,t,r)}function wa(e,t,n){var r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b,w;return L((function(T){if(1==T.g){for(ja(e.h.clearKeys,t),r=t.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})),i=ea(e.h.servers),a=ea(e.h.advanced||{}),!r&&n&&function(e,t){var n=[];for(t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})})),e=g(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(t,i),o=new WeakSet,s=g(t),u=s.next();!u.done;u=s.next())for(l=u.value,c=La(l),d=g(c),f=d.next();!f.done;f=d.next())p=f.value,o.has(p)||(o.add(p),Na(p,i,a,e.h.keySystemsMapping));for(h=function(t,n){for(var r=[],i=(t=g(t)).next();!i.done;i=t.next()){var o,s=(i=i.value)[n]||a.has(i.keySystem)&&a.get(i.keySystem)[n]||"";if((o=""==s)&&(o=!!(o=i.keySystem)&&!!o.match(/^com\.widevine\.alpha/)),o&&("audioRobustness"==n?s=[e.h.defaultAudioRobustnessForWidevine]:"videoRobustness"==n&&(s=[e.h.defaultVideoRobustnessForWidevine])),"string"==typeof s)r.push(i);else if(Array.isArray(s))for(0===s.length&&(s=[""]),o=(s=g(s)).next();!o.done;o=s.next()){var u={};r.push(Object.assign({},i,(u[n]=o.value,u)))}}return r},m=new WeakSet,y=g(t),v=y.next();!v.done;v=y.next())(b=v.value).video&&!m.has(b.video)&&(b.video.drmInfos=h(b.video.drmInfos,"videoRobustness"),b.video.drmInfos=h(b.video.drmInfos,"audioRobustness"),m.add(b.video)),b.audio&&!m.has(b.audio)&&(b.audio.drmInfos=h(b.audio.drmInfos,"videoRobustness"),b.audio.drmInfos=h(b.audio.drmInfos,"audioRobustness"),m.add(b.audio));return S(T,Kr(t,e.R,e.O,e.h.preferredKeySystems),2)}return Qi(e.l),r||i.size>0?(w=ka(e,t),T.return(r?w:w.catch((function(){})))):(e.S=!0,T.return(Promise.resolve()))}))}function Sa(e){var t;return L((function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.I){n.A(2);break}return S(n,e.I,3);case 3:return Qi(e.l),n.return();case 2:return x(n,4),e.I=e.j.setMediaKeys(e.B),S(n,e.I,6);case 6:k(n,5);break;case 4:t=E(n),e.u(new Be(2,6,6003,t.message));case 5:Qi(e.l),T(n)}}))}function Ta(e){var t,n,r,i;return L((function(a){if(1==a.g)return e.C.size?(e.C.forEach((function(t,n){Ca(e,n,t)})),S(a,e.m,3)):a.A(2);if(2!=a.g){if((e.g&&e.g.keyIds||new Set([])).size>0&&function(e){for(var t=g(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.aa.get(n.value))return!1;return!0}(e))return a.return(e.m);e.K=!1,e.m=new Ii,e.m.catch((function(){}))}for(t=(e.g?e.g.initData:[])||[],n=g(t),r=n.next();!r.done;r=n.next())i=r.value,xa(e,i.initDataType,i.initData);return Oa(e)&&e.m.resolve(),a.return(e.m)}))}function xa(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){for(var r=e.i.values(),i=(r=g(r)).next();!i.done;i=r.next())if(Le(n,i.value.initData))return;var a=!1;if(e.C.forEach((function(e){!a&&Le(n,e.initData)&&(a=!0)})),a)return}e.K=!0,e.i.size>0&&Oa(e)&&(e.m.resolve(),e.K=!1,e.m=new Ii,e.m.catch((function(){}))),function(e,t,n,r){try{var i=e.B.createSession(r)}catch(t){return void e.u(new Be(2,6,6005,t.message))}e.o.D(i,"message",(function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(t):Ma(e,t)})),e.o.D(i,"keystatuseschange",(function(t){return Da(e,t)})),e.i.set(i,{initData:n,initDataType:t,loaded:!1,Ug:1/0,Kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof Be||(t=new Be(2,6,6016,n)),void e.u(t)}e.h.logLicenseExchange&&Qe(n),i.generateRequest(t,n).catch((function(t){if(!e.l.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;r<0&&(r+=4294967296),r="0x"+r.toString(16)}e.u(new Be(2,6,6006,t.message,t,r))}}))}(e,t,n,e.g.sessionType)}}function Aa(e){return e=Zi(e=e.i.keys(),(function(e){return e.sessionId})),Array.from(e)}function ka(t,n){var r,i,a,o,s,u;return L((function(l){switch(l.g){case 1:if(r=new Map,!(i=function(e,t,n){for(var r=g(t),i=r.next();!i.done;i=r.next())for(var a=(i=g(La(i.value))).next();!a.done;a=i.next())a=a.value,n.has(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);if(1==n.size&&n.has(""))throw new Be(2,6,6e3);(r=e.h.preferredKeySystems).length||1==(i=ea(e.h.servers)).size&&(r=Array.from(i.keys()));var o=(i=g(r)).next();for(a={};!o.done;a={Di:void 0},o=i.next()){a.Di=o.value;for(var s=(o=g(t)).next();!s.done;s=o.next())if(s=s.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Di}}(a)))return s.keySystemAccess}for(i=g([!0,!1]),a=i.next();!a.done;a=i.next())for(a=a.value,o=g(t),s=o.next();!s.done;s=o.next())for(var u=(s=g(s.value.decodingInfos)).next();!u.done;u=s.next())if((u=u.value).supported&&u.keySystemAccess){var l=u.keySystemAccess.keySystem;if(!r.includes(l)){var c=n.get(l);for(!c&&e.h.keySystemsMapping[l]&&(c=n.get(e.h.keySystemsMapping[l])),c=(l=g(c)).next();!c.done;c=l.next())if(!!c.value.licenseServerUri==a)return u.keySystemAccess}}return null}(t,n,r))){if(!navigator.requestMediaKeySystemAccess)throw new Be(2,6,6020);throw new Be(2,6,6001)}Qi(t.l),x(l,2),i.getConfiguration();var c=a=t.h.keySystemsMapping[i.keySystem]||i.keySystem,d=r.get(a),f=[],p=[],h=[],y=[],v=[],b=new Set,w=new Set;!function(t,n,r,i,a,o,s,u){for(var l=[],c=(t=g(t)).next(),d={};!c.done;d={Ka:void 0},c=t.next()){if(d.Ka=c.value,n.includes(d.Ka.encryptionScheme)||n.push(d.Ka.encryptionScheme),"org.w3.clearkey"==d.Ka.keySystem&&d.Ka.licenseServerUri.startsWith("data:application/json;base64,")?l.includes(d.Ka.licenseServerUri)||l.push(d.Ka.licenseServerUri):r.includes(d.Ka.licenseServerUri)||r.push(d.Ka.licenseServerUri),a.includes(d.Ka.serverCertificateUri)||a.push(d.Ka.serverCertificateUri),d.Ka.serverCertificate&&(i.some(function(e){return function(t){return Le(t,e.Ka.serverCertificate)}}(d))||i.push(d.Ka.serverCertificate)),d.Ka.initData)for(var f=(c=g(d.Ka.initData)).next(),p={};!f.done;p={Lg:void 0},f=c.next())p.Lg=f.value,o.some(function(e){return function(t){var n=e.Lg;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Le(t.initData,n.initData)}}(p))||o.push(p.Lg);if(d.Ka.keyIds)for(f=(c=g(d.Ka.keyIds)).next();!f.done;f=c.next())s.add(f.value);if(d.Ka.keySystemUris&&u)for(c=(d=g(d.Ka.keySystemUris)).next();!c.done;c=d.next())u.add(c.value)}if(1==l.length)r.push(l[0]);else if(l.length>0){for(n=[],i=(l=g(l)).next();!i.done;i=l.next())i=e.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),n.push.apply(n,m(i.keys));l=JSON.stringify({keys:n}),r.push("data:application/json;base64,"+e.btoa(l))}}(d,f,p,y,h,v,b,w);var T=t.R?"persistent-license":"temporary";for(c={keySystem:c,encryptionScheme:f[0],licenseServerUri:p[0],distinctiveIdentifierRequired:d[0].distinctiveIdentifierRequired,persistentStateRequired:d[0].persistentStateRequired,sessionType:d[0].sessionType||T,audioRobustness:d[0].audioRobustness||"",videoRobustness:d[0].videoRobustness||"",serverCertificate:y[0],serverCertificateUri:h[0],initData:v,keyIds:b},w.size>0&&(c.keySystemUris=w),w=(d=g(d)).next();!w.done;w=d.next())(w=w.value).distinctiveIdentifierRequired&&(c.distinctiveIdentifierRequired=w.distinctiveIdentifierRequired),w.persistentStateRequired&&(c.persistentStateRequired=w.persistentStateRequired);if(t.g=c,!t.g.licenseServerUri)throw new Be(2,6,6012,t.g.keySystem);return S(l,i.createMediaKeys(),4);case 4:if(o=l.h,Qi(t.l),t.B=o,""==t.h.minHdcpVersion||!("getStatusForPolicy"in t.B)){l.A(5);break}return x(l,6),S(l,t.B.getStatusForPolicy({minHdcpVersion:t.h.minHdcpVersion}),8);case 8:if("usable"!=l.h)throw new Be(2,6,6018);Qi(t.l),k(l,5,2);break;case 6:if((s=E(l,2))instanceof Be)throw s;throw new Be(2,6,6019,s.message);case 5:return t.S=!0,t.G.Ea(t.h.updateExpirationTime),S(l,function(e){var t,n;return L((function(r){switch(r.g){case 1:if(!e.B||!e.g)return r.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){r.A(2);break}return t=Gi([e.g.serverCertificateUri],e.h.retryParameters),x(r,3),S(r,e.F.sc.request(5,t,{isPreload:e.V()}).promise,5);case 5:n=r.h,e.g.serverCertificate=Ne(n.data),k(r,4);break;case 3:throw new Be(2,6,6017,E(r));case 4:if(e.l.g)return r.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(x(r,6),S(r,e.B.setServerCertificate(e.g.serverCertificate),8)):r.return();case 8:k(r,0);break;case 6:throw new Be(2,6,6004,E(r).message)}}))}(t),9);case 9:Qi(t.l),k(l,0);break;case 2:if(u=E(l),Qi(t.l,u),t.g=null,u instanceof Be)throw u;throw new Be(2,6,6002,u.message)}}))}function Ea(e){Oa(e)&&e.m.resolve()}function Ia(e,t){new xr((function(){t.loaded=!0,Ea(e)})).ia(_a)}function Ca(e,t,n){var r,i,a,o,s,u,l;return L((function(c){switch(c.g){case 1:try{r=e.B.createSession("persistent-license")}catch(t){return i=new Be(2,6,6005,t.message),e.u(i),c.return(Promise.reject(i))}return e.o.D(r,"message",(function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(t):Ma(e,t)})),e.o.D(r,"keystatuseschange",(function(t){return Da(e,t)})),a={initData:n.initData,initDataType:n.initDataType,loaded:!1,Ug:1/0,Kb:null,type:"persistent-license"},e.i.set(r,a),x(c,2),S(c,r.load(t),4);case 4:return o=c.h,Qi(e.l),o||(e.i.delete(r),s=e.h.persistentSessionOnlinePlayback?1:2,e.u(new Be(s,6,6013)),a.loaded=!0),Ia(e,a),Ea(e),c.return(r);case 2:u=E(c),Qi(e.l,u),e.i.delete(r),l=e.h.persistentSessionOnlinePlayback?1:2,e.u(new Be(l,6,6005,u.message)),a.loaded=!0,Ea(e);case 3:return c.return(Promise.resolve())}}))}function Ma(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h,m,y,v;L((function(b){switch(b.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Qe(t.message),r=e.i.get(n),i=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(i=a.individualizationServer),(o=Gi([i],e.h.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.g,r&&(o.initData=r.initData,o.initDataType=r.initDataType),a&&a.headers)for(s in a.headers)o.headers[s]=a.headers[s];if("org.w3.clearkey"===e.g.keySystem){var w=o,A=e.g;try{var I=qe(w.body);if(I){var C=JSON.parse(I);C.type||(C.type=A.sessionType,w.body=Ke(JSON.stringify(C)))}}catch(e){}}if(wi(e.g.keySystem))if((w=Ge(o.body,!0,!0)).includes("PlayReadyKeyMessage")){for(I=(A=g(A=$t(w=qt(w,"PlayReadyKeyMessage"),"HttpHeader"))).next();!I.done;I=A.next())I=$t(C=I.value,"name")[0],C=$t(C,"value")[0],o.headers[Yt(I)]=Yt(C);w=$t(w,"Challenge")[0],o.body=Ze(Yt(w))}else o.headers["Content-Type"]="text/xml; charset=utf-8";return u=Date.now(),x(b,2),c=e.F.sc.request(2,o,{isPreload:e.V()}),e.X.push(c),S(b,c.promise,4);case 4:l=b.h,Q(e.X,c),k(b,3);break;case 2:return d=E(b),e.l.g?b.return():(f={sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType},p=new Be(2,6,6007,d,f),1==e.i.size?(e.u(p),r&&r.Kb&&r.Kb.reject(p)):(r&&r.Kb&&r.Kb.reject(p),e.i.delete(n),Oa(e)&&(e.m.resolve(),e.M.ia(.1))),b.return());case 3:return e.l.g?b.return():(e.J+=(Date.now()-u)/1e3,e.h.logLicenseExchange&&Qe(l.data),x(b,5),S(b,n.update(l.data),7));case 7:k(b,6);break;case 5:return m=(h=E(b))&&h.message||String(h),y=new Be(2,6,6008,m),e.u(y),r&&r.Kb&&r.Kb.reject(y),b.return();case 6:if(e.l.g)return b.return();v=new Oi("drmsessionupdate"),e.F.onEvent(v),r&&(r.Kb&&r.Kb.resolve(),Ia(e,r)),T(b)}}))}function Da(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach((function(t,i){if("string"==typeof i){var a=i;i=t,t=a}if(a=oe(),wi(e.g.keySystem)&&16==i.byteLength&&a.gh()){var o=(a=Ue(i)).getUint32(0,!0),s=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),i=tt(i).slice(0,32),e.aa.set(i,t)}));var i=t.expiration-Date.now();(i<0||r&&i<1e3)&&n&&!n.Kb&&(e.i.delete(t),Pa(t)),Oa(e)&&(e.m.resolve(),e.M.ia(Ba))}function Pa(e){return L((function(t){return 1==t.g?(x(t,2),S(t,Ir(Ua,Promise.all([e.close().catch((function(){})),e.closed])),4)):2!=t.g?k(t,0):(E(t),void T(t))}))}function Ra(e){var t;return L((function(n){return t=Array.from(e.i.entries()),e.i.clear(),S(n,Promise.all(t.map((function(t){var n=(t=g(t)).next().value,r=t.next().value;return L((function(t){return 1==t.g?(x(t,2),e.oa||e.C.has(n.sessionId)||"persistent-license"!==r.type||e.h.persistentSessionOnlinePlayback?S(t,Pa(n),5):S(t,n.remove(),5)):2!=t.g?k(t,0):(E(t),void T(t))}))}))),0)}))}function La(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Oa(e){return function(e,t){for(var n=(e=g(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),(function(e){return e.loaded}))}function Na(t,n,r,i){var a=t.keySystem;!a||"org.w3.clearkey"==a&&t.licenseServerUri||(n.size&&n.get(a)&&(n=n.get(a),t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(a))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),i[a]&&(t.keySystem=i[a]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready"))}function ja(e,t){if(0!=(e=ea(e)).size){e=at(e);for(var n=(t=g(t)).next();!n.done;n=t.next())(n=n.value).video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}(i=va.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.S&&this.g&&this.G.Ea(this.h.updateExpirationTime)},i.fc=function(e){var t,n,r=this;return L((function(i){if(1==i.g)return r.j===e?i.return():r.B?(r.j=e,r.h.delayLicenseRequestUntilPlayed&&r.o.Ba(r.j,"play",(function(){for(var e=g(r.N),t=e.next();!t.done;t=e.next())Ma(r,t.value);r.$=!0,r.N=[]})),r.j.remote?(r.o.D(r.j.remote,"connect",(function(){return Ra(r)})),r.o.D(r.j.remote,"connecting",(function(){return Ra(r)})),r.o.D(r.j.remote,"disconnect",(function(){return Ra(r)}))):"webkitCurrentPlaybackTargetIsWireless"in r.j&&r.o.D(r.j,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Ra(r)})),r.H=r.g&&r.g.initData.find((function(e){return e.initData.length>0}))||null,t=r.g.keySystem,(n=oe().Rg(t))||!r.H&&"com.apple.fps"===r.g.keySystem&&!r.C.size?i.A(2):S(i,Sa(r),2)):(r.o.Ba(e,"encrypted",(function(){r.u(new Be(2,6,6010))})),i.return());Ta(r).catch((function(){})),!n&&(r.H||r.C.size||r.h.parseInbandPsshEnabled)||r.o.D(r.j,"encrypted",(function(e){return function(e,t){return L((function(n){if(1==n.g)return S(n,Sa(e),2);xa(e,t.initDataType,Ne(t.initData)),T(n)}))}(r,e)})),T(i)}))},i.Gg=function(){var e=this,t=this.i.keys();return t=Zi(t,(function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}})),Array.from(t)},i.Wd=function(){for(var e=1/0,t=this.i.keys(),n=(t=g(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.Xe=function(){return ta(this.ma)};var Ua=1,_a=5,Ba=.5;function Fa(){this.g=Ga,this.i=(new Map).set(Ga,2).set(Ha,1),this.h=0}function Va(e,t){var n=e.g!==t;return e.g=t,n&&t===Ga&&(e.h=Date.now()),n}var Ha=0,Ga=1;function qa(e,t,n){this.g=e,this.i=t,this.h=n}function Ka(e,t){return L((function(n){if(1==n.g)return S(n,Vr(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||Br(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(ti))throw new Be(2,4,4032);return n.return(Wa(e,t))}))}function za(e,t){var n=e.g.restrictions;e=e.i;for(var r=!1,i=(t=g(t.variants)).next();!i.done;i=t.next()){var a=(i=i.value).allowedByApplication;i.allowedByApplication=Fr(i,n,e),a!=i.allowedByApplication&&(r=!0)}return r}function Wa(e,t){var n=za(e,t);if(t){var r=e.h?e.h.g:null;if(r&&e.h.B){for(var i=new Set,a=g(t.variants),o=a.next();!o.done;o=a.next())(o=o.value).audio&&i.add(o.audio),o.video&&i.add(o.video);for(a=(i=g(i)).next();!a.done;a=i.next())Xa(e,r.keySystem,a.value)}Ya(e,t)}return n}function Xa(e,t,n){for(var r=(n=g(n.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==t)for(var i=(r=g(r.initData||[])).next();!i.done;i=r.next())i=i.value,xa(e.h,i.initDataType,i.initData)}function Ya(e,t){e=e.h?e.h.Xe():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var r=!1,i=!1,a=new Set,o=new Set,s=new Set,u=(t=g(t.variants)).next();!u.done;u=t.next())(u=u.value).audio&&s.add(u.audio),u.video&&s.add(u.video),u.allowedByApplication?u.allowedByKeySystem&&(r=!0):i=!0;for(t=(s=g(s)).next();!t.done;t=s.next())if((t=t.value).keyIds.size)for(u=(t=g(t.keyIds)).next();!u.done;u=t.next()){u=u.value;var l=e[n?"00":u];l?Ja.includes(l)&&o.add(l):a.add(u)}if(!r)throw new Be(2,4,4012,e={hasAppRestrictions:i,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)})}var Ja=["output-restricted","internal-error"];function $a(){}function Qa(e,t){eo.set(e,t)}function Za(e,t){if(t){var n=eo.get(t.toLowerCase());if(n)return n}throw new Be(2,4,4e3,e,t)}V("shaka.media.ManifestParser",$a),$a.unregisterParserByMime=function(e){eo.delete(e)},$a.registerParserByMime=Qa,$a.registerParserByExtension=function(){de("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},$a.AccessibilityPurpose={zm:"visually impaired",Kl:"hard of hearing",gm:"spoken subtitles"};var eo=new Map;function to(e,t){var n=null,r=null,i=null,a=null,o=e.U();return 1&t&&(i=e.Dd()),2&t&&(a=e.U()),8&t&&(n=e.U()),16&t&&(r=e.U()),{trackId:o,Td:n,Ud:r,kj:i,Li:a}}function no(e,t){return 1==t?{baseMediaDecodeTime:4294967296*(t=e.U())+(e=e.U())}:{baseMediaDecodeTime:e.U()}}function ro(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ca(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function io(e,t,n){var r=e.U(),i=[],a=null;1&n&&(a=e.Zg()),4&n&&e.skip(4);for(var o=0;o<r;o++){var s={ih:null,sampleSize:null,Cf:null};256&n&&(s.ih=e.U()),512&n&&(s.sampleSize=e.U()),1024&n&&e.skip(4),2048&n&&(s.Cf=0==t?e.U():e.Zg()),i.push(s)}return{Fm:r,hh:i,mg:a}}function ao(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ca();return e.skip(2),e.skip(2),e.skip(2),{channelCount:t,sampleRate:e=e.Ca()+e.Ca()/65536}}function oo(e){return{codec:fa(e=e.U())}}function so(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function uo(e){return(e<10?"0":"")+e}function lo(e){this.g=e}function co(e){for(var t=[],n=g(e.g),r=n.next();!r.done;r=n.next()){var i=t,a=i.push,o=r.value;r=So;var s=o.id+1,u=o.stream.width||0,l=o.stream.height||0;"audio"==o.type&&(l=u=0);var c=o.duration*o.timescale,d=Math.floor(c/(To+1));switch(c=Math.floor(c%(To+1)),s=So("tkhd",s=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(m(vo(s,4)),[0,0,0,0],m(vo(d,4)),m(vo(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],m(vo(u,2)),[0,0],m(vo(l,2)),[0,0]))),u=So,d=o.duration*o.timescale,l=Math.floor(d/(To+1)),d=Math.floor(d%(To+1)),c=(c=o.stream.language).charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,l=So("mdhd",l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(m(vo(o.timescale,4)),m(vo(l,4)),m(vo(d,4)),m(vo(c,2)),[0,0]))),d=o,c=new Uint8Array([]),d.type){case"video":c=Ao.value();break;case"audio":c=ko.value()}d=So("hdlr",c);e:{switch(o.type){case"video":o=So("minf",So("vmhd",Do.value()),Oo.value(),fo(o));break e;case"audio":o=So("minf",So("smhd",Po.value()),Oo.value(),fo(o));break e}o=new Uint8Array([])}r=r("trak",s,o=u("mdia",l,d,o)),a.call(i,r)}for(t=nt.apply(Je,m(t)),n=So,r=(a=e.g[0]).duration*a.timescale,i=Math.floor(r/(To+1)),r=Math.floor(r%(To+1)),i=So("mvhd",i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(m(vo(a.timescale,4)),m(vo(i,4)),m(vo(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),r=[],u=(e=g(e.g)).next();!u.done;u=e.next())s=(o=r).push,u=So("trex",u=new Uint8Array([0,0,0,0].concat(m(vo(u.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),s.call(o,u);if(e=So("mvex",e=nt.apply(Je,m(r))),r=[],a.encrypted){for(o=(a=g(a.stream.drmInfos)).next();!o.done;o=a.next())if((o=o.value).initData)for(s=(o=g(o.initData)).next();!s.done;s=o.next())r.push(s.value.initData);a=nt.apply(Je,m(r))}else a=new Uint8Array([]);return e=n("moov",i,t,e,a),t=Lo.value(),(n=new Uint8Array(t.byteLength+e.byteLength)).set(t),n.set(e,t.byteLength),n}function fo(e){var t=So,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=oe().oe()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var r=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,r=e.stream.height||0,e.Ra.byteLength>0)var i=So("avcC",e.Ra);else{i=So;for(var a=7,o=[],s=[],u=0,l=0,c=0,d=0;d<e.Bb.length;d++){var f=bo(e.Bb[d]);switch(31&f[0]){case 7:o.push(f),a+=f.length+2;break;case 8:s.push(f),a+=f.length+2}}for(o.length>0&&(u=o[0][1],c=o[0][2],l=o[0][3]),d=0,(a=new Uint8Array(a))[d++]=1,a[d++]=u,a[d++]=c,a[d++]=l,a[d++]=255,a[d++]=224|o.length,u=0;u<o.length;u++)a[d++]=(65280&o[u].length)>>8,a[d++]=255&o[u].length,a.set(o[u],d),d+=o[u].length;for(a[d++]=s.length,o=0;o<s.length;o++)a[d++]=(65280&s[o].length)>>8,a[d++]=255&s[o].length,a.set(s[o],d),d+=s[o].length;i=i("avcC",a)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(m(vo(n,2)),m(vo(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",s=po(e),o=new Uint8Array([]),e.encrypted&&(o=go(e.stream,e.codecs),r="encv"),r=So(r,n,i,s,o)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),e.Ra.byteLength>0&&(n=So("hvcC",e.Ra)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(m(vo(r,2)),m(vo(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",s=po(e),o=new Uint8Array([]),e.encrypted&&(o=go(e.stream,e.codecs),i="encv"),r=So(i,r,n,s,o));break;case"audio":"mp3"==n?e=So(".mp3",ho(e)):"ac-3"==n?(n=So("dac3",e.Ga),r="ac-3",i=new Uint8Array([]),e.encrypted&&(i=go(e.stream,e.codecs),r="enca"),e=So(r,ho(e),n,i)):"ec-3"==n?(n=So("dec3",e.Ga),r="ec-3",i=new Uint8Array([]),e.encrypted&&(i=go(e.stream,e.codecs),r="enca"),e=So(r,ho(e),n,i)):"opus"==n?(n=So("dOps",e.Ga),r="Opus",i=new Uint8Array([]),e.encrypted&&(i=go(e.stream,e.codecs),r="enca"),e=So(r,ho(e),n,i)):(e.Ga.byteLength>0?n=So("esds",e.Ga):(n=So,r=e.id+1,i=e.stream.channelsCount||2,o=e.stream.audioSamplingRate||44100,u=ot("audio",e.codecs.split(",")),s=(l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[o],"mp4a.40.5"!==u&&"mp4a.40.29"!==u||(s=l[2*o]),o=parseInt(u.split(".").pop(),10),n=n("esds",r=new Uint8Array([0,0,0,0,3,25].concat(m(vo(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,o<<3|s>>>1,s<<7|i<<3,6,1,2])))),r="mp4a",i=new Uint8Array([]),e.encrypted&&(i=go(e.stream,e.codecs),r="enca"),e=So(r,ho(e),n,i)),r=e}return t("stbl",e=So("stsd",Ro.value(),r),So("stts",Eo.value()),So("stsc",Io.value()),So("stsz",Mo.value()),So("stco",Co.value()))}function po(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return So("pasp",e=new Uint8Array([].concat(m(vo(e.Za,4)),m(vo(t,4)))))}function ho(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(m(vo(e.stream.audioSamplingRate||44100,2)),[0,0]))}function go(e,t){var n=So;t=So("frma",t=new Uint8Array([].concat(m(vo(wo(t.split(".")[0]),4)))));var r="cenc",i=e.drmInfos[0];i&&i.encryptionScheme&&(r=i.encryptionScheme),r=So("schm",r=new Uint8Array([0,0,0,0].concat(m(vo(wo(r),4)),[0,1,0,0]))),i=So;for(var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=(e=g(e.drmInfos)).next();!o.done;o=e.next())if((o=o.value)&&o.keyIds&&o.keyIds.size)for(var s=(o=g(o.keyIds)).next();!s.done;s=o.next())a=bo(s.value);return n("sinf",t,r,i("schi",a=So("tenc",e=new Uint8Array([0,0,0,0,0,0,1,8]),a)))}function mo(e){for(var t=[],n=(e=g(e.g)).next();!n.done;n=e.next()){n=n.value;var r,i=t.push,a=i.apply,o=So,s=new Uint8Array([0,0,0,0].concat(m(vo(n.data?n.data.sequenceNumber:0,4))));s=So("mfhd",s);var u=n.data?n.data.zb:[],l=new Uint8Array(4+u.length);for(r=0;r<u.length;r++){var c=u[r].flags;l[r+4]=c.hb<<4|c.mb<<2|c.jb}var d=(u=So("sdtp",l)).length+32+20+8+16+8+8;l=So,r=So("tfhd",r=new Uint8Array([0,0,0,58].concat(m(vo(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),c=n.data?n.data.baseMediaDecodeTime:0;var f=Math.floor(c%(To+1));c=So("tfdt",c=new Uint8Array([1,0,0,0].concat(m(vo(Math.floor(c/(To+1)),4)),m(vo(f,4)))));var p=d,h=12+16*(f=(d=n.data?n.data.zb:[]).length),y=new Uint8Array(h);for(p+=8+h,y.set(["video"===n.type?1:0,0,15,1].concat(m(vo(f,4)),m(vo(p,4))),0),p=0;p<f;p++){var v=d[p];h=vo(v.duration,4);var b=vo(v.size,4),w=v.flags;v=vo(v.sb,4),y.set([].concat(m(h),m(b),[w.xb<<2|w.hb,w.mb<<6|w.jb<<4|w.yb,61440&w.gb,15&w.gb],m(v)),12+16*p)}o=o("moof",s,u=l("traf",r,c,d=So("trun",y),u)),a.call(i,t,[o,yo(n)])}return nt.apply(Je,m(t))}function yo(e){return e=(e.data?e.data.zb:[]).map((function(e){return e.data})),So("mdat",e=nt.apply(Je,m(e)))}function vo(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function bo(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function wo(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function So(e){var t=O.apply(1,arguments),n=xo.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],xo.set(e,n));for(var r=8,i=t.length-1;i>=0;i--)r+=t[i].byteLength;for((i=new Uint8Array(r))[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=255&r,i.set(n,4),n=0,r=8;n<t.length;n++)i.set(t[n],r),r+=t[n].byteLength;return i}V("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});var To=4294967295,xo=new Map,Ao=new ae((function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])})),ko=new ae((function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])})),Eo=new ae((function(){return new Uint8Array([0,0,0,0,0,0,0,0])})),Io=new ae((function(){return new Uint8Array([0,0,0,0,0,0,0,0])})),Co=new ae((function(){return new Uint8Array([0,0,0,0,0,0,0,0])})),Mo=new ae((function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])})),Do=new ae((function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})),Po=new ae((function(){return new Uint8Array([0,0,0,0,0,0,0,0])})),Ro=new ae((function(){return new Uint8Array([0,0,0,0,0,0,0,1])})),Lo=new ae((function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]);return So("ftyp",e,new Uint8Array([0,0,0,1]),e,t)})),Oo=new ae((function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=So("dref",e),So("dinf",e)}));function No(e){function t(e){o.push(e),oa(e)}var n,r,i,a,o=[];if((new aa).box("moof",t).box("traf",t).T("tfhd",(function(e){n=e,i=to(e.reader,e.flags)})).T("trun",(function(e){r=e,a=io(e.reader,e.version,e.flags)})).parse(e),i&&2!==i.Li){var s=n.start+pa(n)+4+(null!==i.kj?8:0),u=Ue(e);if(null!==i.Li)u.setUint32(s,2);else{Uo(e,n.start,n.size+4);var l=u.getUint32(n.start+8);u.setUint32(n.start+8,2|l),a&&null!==a.mg&&u.setInt32(r.start+pa(r)+4,a.mg+4),l=e.subarray(0,s),u=e.subarray(s),(e=new Uint8Array(e.byteLength+4)).set(l),l=[];for(var c=3;c>=0;c--)l.push(2>>8*c&255);for(e.set(new Uint8Array(l),s),e.set(u,s+4),u=(s=g(o)).next();!u.done;u=s.next())Uo(e,(u=u.value).start,u.size+4)}}return e}function jo(e,t,n,r,i,a){var o=go(e,r.name),s=t.subarray(r.start,r.start+r.size);for((e=new Uint8Array(r.size+o.byteLength)).set(s,0),Ue(e).setUint32(4,a),e.set(o,r.size),Uo(e,0,e.byteLength),a=new Uint8Array(t.byteLength+e.byteLength),r=oe().df()?r.start:r.start+r.size,o=t.subarray(r),a.set(t.subarray(0,r)),a.set(e,r),a.set(o,r+e.byteLength),i=(t=g(i)).next();!i.done;i=t.next())Uo(a,(i=i.value).start,i.size+e.byteLength);return e=Ue(a,n.start),n=pa(n),t=e.getUint32(n),e.setUint32(n,t+1),a}function Uo(e,t,n){0!=(t=(e=Ue(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function _o(e,t,n,r,i,a,o,s){this.P=e,this.startByte=t,this.endByte=n,this.xd=void 0===r?null:r,this.timescale=void 0===i?null:i,this.h=void 0===a?null:a,this.aesKey=void 0===o?null:o,this.g=this.mimeType=this.codecs=null,this.encrypted=void 0!==s&&s}function Bo(e,t){return e===t||(e&&t?e.Ic()==t.Ic()&&e.Fc()==t.Fc()&&ee(e.P().sort(),t.P().sort())&&Le(e.Yb(),t.Yb()):e==t)}function Fo(e,t,n,r,i,a,o,s,u,l,c,d,f,p,h,m){for(l=void 0===l?[]:l,p=void 0===p?Go:p,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=r,this.endByte=i,this.ba=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=u,this.g=l,this.tilesLayout=void 0===c?"":c,this.B=void 0===d?null:d,this.h=void 0===f?null:f,this.status=p,this.preload=!1,this.l=!0,this.o=!1,this.aesKey=void 0===h?null:h,this.thumbnailSprite=null,this.i=-1,this.m=void 0!==m&&m,this.ee=this.Xc=!1,t=(e=g(this.g)).next();!t.done;t=e.next())t.value.ri();this.m&&this.g.length&&this.g[this.g.length-1].pi(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}function Vo(e){if(e.endByte)return e.endByte+1-e.startByte;if(e.bandwidth){var t=e.bandwidth*(e.endTime-e.startTime);if(!isNaN(t)&&t>0)return t}if(e.g.length>0&&e.m)for(e=(e=g(e.g)).next();!e.done;e=e.next()){Vo(e.value);break}return null}function Ho(e,t){e.ba=t;for(var n=(e=g(e.g)).next();!n.done;n=e.next())Ho(n.value,t)}_o.prototype.Ic=function(){return this.startByte},_o.prototype.Fc=function(){return this.endByte},_o.prototype.pe=function(e){this.h=e},_o.prototype.Yb=function(){return this.h},V("shaka.media.InitSegmentReference",_o),_o.prototype.getEndByte=_o.prototype.Fc,_o.prototype.getStartByte=_o.prototype.Ic,(i=Fo.prototype).P=function(){return this.C()},i.getStartTime=function(){return this.startTime},i.Ej=function(){return this.endTime},i.Ic=function(){return this.startByte},i.Fc=function(){return this.endByte},i.$j=function(){return this.tilesLayout},i.Zj=function(){return this.B},i.Jc=function(){return this.status},i.xk=function(){this.status=qo},i.Qg=function(){this.preload=!0},i.isPreload=function(){return this.preload},i.wd=function(){this.l=!1},i.kk=function(){return this.l},i.ri=function(){this.Xc=!0},i.nk=function(){return this.Xc},i.pi=function(){this.ee=!0},i.lk=function(){return this.ee},i.oi=function(){this.o=!0},i.gk=function(){return this.o},i.If=function(e){this.thumbnailSprite=e},i.Xj=function(){return this.thumbnailSprite},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=g(this.g),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},i.yh=function(e){null==this.h?z("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},i.pe=function(e,t){this.u=e,this.F=void 0!==t&&t},i.Yb=function(e){var t=this.u;return(void 0===e||e)&&this.F&&(this.u=null),t},V("shaka.media.SegmentReference",Fo),Fo.prototype.getSegmentData=Fo.prototype.Yb,Fo.prototype.setSegmentData=Fo.prototype.pe,Fo.prototype.syncAgainst=Fo.prototype.yh,Fo.prototype.offset=Fo.prototype.offset,Fo.prototype.getThumbnailSprite=Fo.prototype.Xj,Fo.prototype.setThumbnailSprite=Fo.prototype.If,Fo.prototype.hasByterangeOptimization=Fo.prototype.gk,Fo.prototype.markAsByterangeOptimization=Fo.prototype.oi,Fo.prototype.isLastPartial=Fo.prototype.lk,Fo.prototype.markAsLastPartial=Fo.prototype.pi,Fo.prototype.isPartial=Fo.prototype.nk,Fo.prototype.markAsPartial=Fo.prototype.ri,Fo.prototype.isIndependent=Fo.prototype.kk,Fo.prototype.markAsNonIndependent=Fo.prototype.wd,Fo.prototype.isPreload=Fo.prototype.isPreload,Fo.prototype.markAsPreload=Fo.prototype.Qg,Fo.prototype.markAsUnavailable=Fo.prototype.xk,Fo.prototype.getStatus=Fo.prototype.Jc,Fo.prototype.getTileDuration=Fo.prototype.Zj,Fo.prototype.getTilesLayout=Fo.prototype.$j,Fo.prototype.getEndByte=Fo.prototype.Fc,Fo.prototype.getStartByte=Fo.prototype.Ic,Fo.prototype.getEndTime=Fo.prototype.Ej,Fo.prototype.getStartTime=Fo.prototype.getStartTime,Fo.prototype.getUris=Fo.prototype.P;var Go=0,qo=1;function Ko(e){return 1==e.length&&e.end(0)-e.start(0)<1e-4}function zo(e){return!e||Ko(e)?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null}function Wo(e){return!e||Ko(e)?null:e.length?e.end(e.length-1):null}function Xo(e,t){return!(!e||!e.length||Ko(e)||t>e.end(e.length-1))&&t>=e.start(0)}function Yo(e,t){if(!e||!e.length||Ko(e))return 0;for(var n=0,r=(e=g(Jo(e))).next();!r.done;r=e.next()){var i=r.value;r=i.start,(i=i.end)>t&&(n+=i-Math.max(r,t))}return n}function Jo(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function $o(){}function Qo(e,t){var n=document.createElement("source");return n.src=e,n.type=void 0===t?"":t,n}function Zo(e){for(var t=!1,n=e.getElementsByTagName("source"),r=n.length-1;r>=0;--r)e.removeChild(n[r]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function es(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ts(){return rs||(ns||(ns=new xr((function(){rs=null}))),(rs=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(rs=document.createElement("video")),ns.ia(1),rs)}Fo.Status={ql:Go,xm:qo,Tl:2},V("shaka.util.Dom",$o),$o.removeAllChildren=es,$o.clearSourceFromVideo=Zo;var ns=null,rs=null;function is(){}function as(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function os(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function ss(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function us(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(e.size<2||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=He(Ne(e.data,1,n)),i=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(-1===a)return null;var o,s=He(Ne(e.data,3+n,a));return o="--\x3e"===r?He(Ne(e.data,4+n+a)):Oe(e.data.subarray(4+n+a)),t.mimeType=r,t.pictureType=i,t.description=s,t.data=o,t}return"TXXX"===e.type||"WXXX"===e.type?e.size<2||3!==e.data[0]||-1===(r=e.data.subarray(1).indexOf(0))?null:(n=He(Ne(e.data,1,r)),e=He(Ne(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?e.size<2||-1===(n=e.data.indexOf(0))?null:(n=He(Ne(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=Oe(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?e.size<2||3!==e.data[0]?null:(e=He(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=He(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Oe(e.data),t):null}function ls(e){for(var t=0,n=[];as(e,t);){var r=ss(e,t+6);for(e[t+5]>>6&1&&(t+=10),r=(t+=10)+r;t+10<r;){var i=e.subarray(t),a=ss(i,4);(a=us(i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:a,data:i.subarray(10,10+a)}))&&n.push(a),t+=i.size+10}os(e,t)&&(t+=10)}return n}function cs(e,t){for(var n=t=void 0===t?0:t,r=0;as(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=ss(e,t+6),os(e,t+10)&&(r+=10),t+=r;return r>0?e.subarray(n,n+r):new Uint8Array([])}function ds(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function fs(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)r>=2&&3==e[r]&&0==e[r-1]&&0==e[r-2]||(t[n]=e[r],n++);this.j=Ne(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function ps(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);0!==r&&(n.set(e.j.subarray(t,t+r)),e.h=new na(n,0).U(),e.g=8*r,e.i-=r)}function hs(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,ps(e)}e.h<<=t,e.g-=t}function gs(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&ps(e),(n=t-n)>0?r<<n|gs(e,n):r}function ms(e){var t;for(t=0;t<e.g;++t)if(0!=(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;return ps(e),t+ms(e)}function ys(e){hs(e,1+ms(e))}function vs(e){return gs(e,ms(e)+1)-1}function bs(e){return 1&(e=vs(e))?1+e>>>1:-1*(e>>>1)}function ws(e){return 1===gs(e,1)}function Ss(e){return gs(e,8)}function Ts(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=(n+(r=bs(e))+256)%256),n=0===r?n:r}function xs(e){return Ss(e),vs(e),vs(e)}function As(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}function ks(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(192&r){var i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.u&&(e.u=i),n.pts=Is(i,e.u),e.u=n.pts,n.dts=n.pts,64&r&&(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.o&&(e.o=r),n.dts=n.pts!=i?Is(r,e.o):r),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function Es(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function Is(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e}function Cs(e){return!(Ms(e)<0)}function Ms(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}V("shaka.util.Id3Utils",is),is.getID3Data=cs,is.getID3Frames=ls,V("shaka.util.ExpGolomb",fs),(i=As.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},i.Gf=function(e){null!=this.B&&this.B!=e&&(this.o=this.u=null),this.B=e},i.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,Ms(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(71==e[i]){var a=!!(64&e[i+1]),o=((31&e[i+1])<<8)+e[i+2];if((48&e[i+3])>>4>1){var s=i+5+e[i+4];if(s==i+188)continue}else s=i+4;switch(o){case 0:a&&(s+=e[s]+1),this.I=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.I:a&&(s+=e[s]+1),o={audio:-1,video:-1,bf:-1,audioCodec:"",videoCodec:""};var u=s+3+((15&(a=e)[s+1])<<8|a[s+2])-4;for(s+=12+((15&a[s+10])<<8|a[s+11]);s<u;){var l=(31&a[s+1])<<8|a[s+2],c=(15&a[s+3])<<8|a[s+4];switch(a[s]){case 6:if(c>0)for(var d=s+5,f=c;f>2;){var p=a[d+1]+2;switch(a[d]){case 5:var h=We(a.subarray(d+2,d+p));-1==o.audio&&"Opus"===h?(o.audio=l,o.audioCodec="opus"):-1==o.video&&"AV01"===h&&(o.video=l,o.videoCodec="av1");break;case 106:-1==o.audio&&(o.audio=l,o.audioCodec="ac3");break;case 122:-1==o.audio&&(o.audio=l,o.audioCodec="ec3");break;case 124:-1==o.audio&&(o.audio=l,o.audioCodec="aac");break;case 127:"opus"==o.audioCodec&&(h=null,128===a[d+2]&&(h=a[d+3]),null!=h&&(this.H={channelCount:0==(15&h)?2:15&h,nj:h,sampleRate:48e3}))}d+=p,f-=p}break;case 15:-1==o.audio&&(o.audio=l,o.audioCodec="aac");break;case 17:-1==o.audio&&(o.audio=l,o.audioCodec="aac-loas");break;case 21:-1==o.bf&&(o.bf=l);break;case 27:-1==o.video&&(o.video=l,o.videoCodec="avc");break;case 3:case 4:-1==o.audio&&(o.audio=l,o.audioCodec="mp3");break;case 36:-1==o.video&&(o.video=l,o.videoCodec="hvc");break;case 129:-1==o.audio&&(o.audio=l,o.audioCodec="ac3");break;case 132:case 135:-1==o.audio&&(o.audio=l,o.audioCodec="ec3")}s+=c+5}-1!=(a=o).video&&(this.K=a.video,this.m=a.videoCodec),-1!=a.audio&&(this.F=a.audio,this.C=a.audioCodec),-1!=a.bf&&(this.G=a.bf),r&&!this.J&&(r=!1,i=t-188),this.J=!0;break;case this.K:s=e.subarray(s,i+188),a?this.j.push([s]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(s);break;case this.F:s=e.subarray(s,i+188),a?this.i.push([s]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(s);break;case this.G:s=e.subarray(s,i+188),a?this.l.push([s]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(s);break;default:r=!0}}return this},i.Ek=function(e){return de("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Wg(e,{ge:null,state:null})},i.Wg=function(e,t){var n=e.pts?e.pts/9e4:null,r=(e=e.data).byteLength,i=1;"hvc"==this.m&&(i=2);var a=t.state||0,o=a,s=0,u=[],l=-1,c=0;for(-1==a&&(l=0,c="hvc"==this.m?e[0]>>1&63:31&e[0],a=0,s=1);s<r;){var d=e[s++];a?1===a?a=d?0:2:d?1==d?(d=s-a-1,l>=0?u.push({data:e.subarray(l+i,d),fullData:e.subarray(l,d),type:c,time:n,state:null}):(a=u.length?u[u.length-1]:t.ge)&&(o&&s<=4-o&&a.state&&(a.data=a.data.subarray(0,a.data.byteLength-o),a.fullData=a.fullData.subarray(0,a.fullData.byteLength-o)),d>0&&(d=e.subarray(0,d),a.data=nt(a.data,d),a.fullData=nt(a.fullData,d),a.state=0)),s<r?(c="hvc"==this.m?e[s]>>1&63:31&e[s],l=s,a=0):a=-1):a=0:a=3:a=d?0:1}return l>=0&&a>=0&&u.push({data:e.subarray(l+i,r),fullData:e.subarray(l,r),type:c,time:n,state:a}),!u.length&&t.ge&&(n=u.length?u[u.length-1]:t.ge)&&(n.data=nt(n.data,e),n.fullData=nt(n.fullData,e)),t.state=a,u},i.getMetadata=function(){for(var e=[],t=g(this.l),n=t.next();!n.done;n=t.next())(n=ks(this,n=nt.apply(Je,m(n.value))))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:ls(n.data),dts:n.dts,pts:n.pts});return e},i.ub=function(){if(this.i.length&&!this.h.length)for(var e=g(this.i),t=e.next();!t.done;t=e.next()){var n=nt.apply(Je,m(t.value)),r=ks(this,n);t=this.h.length?this.h[this.h.length-1]:null,r&&null!=r.pts&&null!=r.dts&&(!t||t.pts!=r.pts&&t.dts!=r.dts)?this.h.push(r):this.h.length&&(n=r?r.data:n)&&((t=this.h.pop()).data=nt(t.data,n),this.h.push(t))}return this.h},i.ud=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=g(this.j),n=t.next();!n.done;n=t.next()){var r=nt.apply(Je,m(n.value)),i=ks(this,r);n=this.g.length?this.g[this.g.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!n||n.pts!=i.pts&&n.dts!=i.dts)?this.g.push(i):this.g.length&&(r=i?i.data:r)&&((n=this.g.pop()).data=nt(n.data,r),this.g.push(n))}if(e){for(t={ge:null,state:null},n=[],i=(r=g(this.g)).next();!i.done;i=r.next())(i=i.value).nalus=this.Wg(i,t),i.nalus.length&&(n.push(i),t.ge=i.nalus[i.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},i.getStartTime=function(e){if("audio"==e){e=null;var t=this.ub();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,(t=this.ud(!1)).length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},i.Vd=function(){return{audio:this.C,video:this.m}},i.$e=function(){for(var e=[],t=g(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,m(n.value.nalus));return e},i.dk=function(){de("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Jg();return{height:e.height,width:e.width}},i.Jg=function(){return"hvc"==this.m?function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.$e();if(!n.length)return t;if(!(n=n.find((function(e){return 33==e.type}))))return t;var r=new fs(n.fullData,!0);Ss(r),Ss(r),gs(r,4);var i=gs(r,3);ws(r);var a=gs(r,2),o=gs(r,1),s=gs(r,5),u=gs(r,32);n=Ss(r);for(var l=Ss(r),c=Ss(r),d=Ss(r),f=Ss(r),p=Ss(r),h=Ss(r),g=[],m=[],y=0;y<i;y++)g.push(ws(r)),m.push(ws(r));if(i>0)for(y=i;y<8;y++)gs(r,2);for(y=0;y<i;y++)g[y]&&gs(r,88),m[y]&&Ss(r);vs(r),3==(i=vs(r))&&gs(r,1),g=vs(r),m=vs(r);var v=y=0,b=0,w=0;return ws(r)&&(y+=vs(r),v+=vs(r),b+=vs(r),w+=vs(r)),t.width=String(g-(y+v)*(1===i||2===i?2:1)),t.height=String(m-(b+w)*(1===i?2:1)),r=function(e){for(var t=0,n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}(u),o=1==o?"H":"L",a="hvc1."+["","A","B","C"][a]+s,a+="."+r.toString(16).toUpperCase(),a+="."+o+h,p&&(a+="."+p.toString(16).toUpperCase()),f&&(a+="."+f.toString(16).toUpperCase()),d&&(a+="."+d.toString(16).toUpperCase()),c&&(a+="."+c.toString(16).toUpperCase()),l&&(a+="."+l.toString(16).toUpperCase()),n&&(a+="."+n.toString(16).toUpperCase()),t.codec=a,t.frameRate=Es(e),t}(this):function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.$e();if(!n.length)return t;if(!(n=n.find((function(e){return 7==e.type}))))return t;var r=Ss(n=new fs(n.data)),i=Ss(n),a=Ss(n);if(ys(n),Ds.includes(r)){var o=vs(n);if(3===o&&hs(n,1),ys(n),ys(n),hs(n,1),ws(n)){o=3!==o?8:12;for(var s=0;s<o;s++)ws(n)&&Ts(n,s<6?16:64)}}if(ys(n),0===(o=vs(n)))vs(n);else if(1===o)for(hs(n,1),ys(n),ys(n),o=vs(n),s=0;s<o;s++)ys(n);ys(n),hs(n,1),o=vs(n),s=vs(n);var u=gs(n,1);0===u&&hs(n,1),hs(n,1);var l=0,c=0,d=0,f=0;return ws(n)&&(l=vs(n),c=vs(n),d=vs(n),f=vs(n)),t.height=String((2-u)*(s+1)*16-2*d-2*f),t.width=String(16*(o+1)-2*l-2*c),t.codec="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t.frameRate=Es(e),t}(this)},V("shaka.util.TsParser",As),As.syncOffset=Ms,As.probe=Cs,As.prototype.getVideoInfo=As.prototype.Jg,As.prototype.getVideoResolution=As.prototype.dk,As.prototype.getVideoNalus=As.prototype.$e,As.prototype.getCodecs=As.prototype.Vd,As.prototype.getStartTime=As.prototype.getStartTime,As.prototype.getVideoData=As.prototype.ud,As.prototype.getAudioData=As.prototype.ub,As.prototype.getMetadata=As.prototype.getMetadata,As.prototype.parseNalus=As.prototype.Wg,As.prototype.parseAvcNalus=As.prototype.Ek,As.prototype.parse=As.prototype.parse,As.prototype.setDiscontinuitySequence=As.prototype.Gf,As.prototype.clearData=As.prototype.clearData,As.Timescale=9e4;var Ds=[100,110,122,244,44,83,86,118,128,138,139,134];function Ps(e,t,n,r,i){var a=this;this.g=e,this.O=n,this.B=r,this.aa=t,this.l=new Map,this.F=new Map,this.Sa=new Map,this.h=null,this.Fa=!1,this.H=i||null,this.o=new Map,this.u=new ne,this.j=new Map,this.J=null,this.M=new Ii,this.Da="",this.ob=!1,this.ya=!0,this.N=!1,this.C=this.R=null,this.i=Rs(this,this.M),this.ab=this.G=!1,this.K=new $i((function(){return function(e){var t,n,r,i,a,o,s,u,l,c,d,f,p;return L((function(h){if(1==h.g){for(t=[],n=g(e.o),r=n.next();!r.done;r=n.next())for(i=r.value,a=g(i),o=a.next().value,s=a.next().value,u=s[0],l=o,e.o.set(l,s.slice(0,1)),u&&t.push(u.p.catch(kr)),c=g(s.slice(1)),d=c.next();!d.done;d=c.next())d.value.p.reject(new Be(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),S(h,Promise.all(t),2)}for(f=g(e.j.values()),p=f.next();!p.done;p=f.next())p.value.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.C=null,e.B=null,e.i=null,e.h=null,e.aa=null,e.l.clear(),e.Sa.clear(),e.j.clear(),e.J=null,e.o.clear(),e.H=null,e.$.clear(),e.O=null,T(h)}))}(a)})),this.I=!1,this.X="UNKNOWN",this.ib=this.kb=!1,this.Ta=new Ii,this.m=!1,this.xa=null,this.$=new Map,this.oa=this.S=this.wa=this.V=null,this.ma=new Ii,this.g.remote&&(this.N="disconnected"!=this.g.remote.state,this.u.D(this.g.remote,"connect",(function(){a.N="disconnected"!=a.g.remote.state})),this.u.D(this.g.remote,"connecting",(function(){a.N="disconnected"!=a.g.remote.state})),this.u.D(this.g.remote,"disconnect",(function(){a.N="disconnected"!=a.g.remote.state})))}function Rs(t,n){if(t.ya=!0,e.ManagedMediaSource){t.C||(t.g.disableRemotePlayback=!0);var r=new ManagedMediaSource;t.u.D(r,"startstreaming",(function(){t.ya=!0})),t.u.D(r,"endstreaming",(function(){t.ya=!1}))}else r=new MediaSource;return t.u.Ba(r,"sourceopen",(function(){URL.revokeObjectURL(t.Da),n.resolve()})),t.u.Ba(t.g,"playing",(function(){t.ob=!0})),t.Da=ru(r),t.B.useSourceElements?(t.g.removeAttribute("src"),t.R&&t.g.removeChild(t.R),t.C&&t.g.removeChild(t.C),t.R=Qo(t.Da),t.g.appendChild(t.R),t.C&&t.g.appendChild(t.C),t.g.load()):t.g.src=t.Da,r}function Ls(e,t,n,r){"audio"==t&&r&&(r=Wr(r,n.mimeType));var i=rr(n.mimeType,r);if(t==lt)Ns(e,i,e.I,n.external);else{var a=e.B.forceTransmux;(!yt(i)||!e.I&&pr.includes(i))&&(a=!0);var o=ir(n.mimeType,r);if(a){if(a=st("audio",(r||"").split(",")),r=st("video",(r||"").split(",")),a&&r)return e.m=!0,Ls(e,"audio",n,a),void Ls(e,"video",n,r);(r=Jn(o))&&(i=r(),e.j.set(t,i),i=i.convertCodecs(t,o))}o=i+e.B.addExtraFeaturesToSourceBuffer(i),Qi(e.K);try{var s=e.i.addSourceBuffer(o)}catch(t){throw new Be(2,3,3015,t,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.I&&(s.mode=iu),e.u.D(s,"error",(function(){var n=e.o.get(t)[0];n.p.reject(new Be(2,3,3014,e.g.error?e.g.error.code:0,n.uri))})),e.u.D(s,"updateend",(function(){return Ys(e,t)})),e.l.set(t,s),e.F.set(t,i),e.Sa.set(t,!!n.drmInfos.length)}}function Os(e){return e.ya&&!e.N&&!e.G}function Ns(e,t,n,r){e.h||(e.h=new hr(e.aa),e.h&&(e.h.B=e.B.modifyCueCallback));var i=e.h;r=r||e.Fa,e=e.X,"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=Sr.get(t)(),i.i.setSequenceMode?i.i.setSequenceMode(n):de("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):de("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),i.C=r)}function js(e){return!e.G&&(!e.i||"ended"==e.i.readyState)}function Us(e){return!e.G&&(!e.i||"closed"==e.i.readyState)}function _s(e,t){return e.l.size?t==lt?e.h.g:zo(Fs(e,t)):null}function Bs(e,t){return e.l.size?t==lt?e.h.h:Wo(Fs(e,t)):null}function Fs(e,t){if(e.G||e.N)return null;try{return e.l.get(t).buffered}catch(n){return e.l.has(t),null}}function Vs(e,t,n,r,i,a,o,s,u,l,c){var d,f,p,h,y,v,b,w,x,A,k,E,I,C,M,D,P,R,O;return o=void 0!==o&&o,s=void 0!==s&&s,u=void 0!==u&&u,l=void 0!==l&&l,L((function(N){switch(N.g){case 1:if(t!=(d=ct).Na){N.A(2);break}if("HLS"!=e.X){N.A(3);break}return S(N,e.Ta,4);case 4:f=N.h,e.h.u=f;case 3:return S(N,function(e,t,n,r,i){var a,o,s,u,l,c,d;return L((function(f){if(1==f.g)return S(f,Promise.resolve(),2);if(!e.i||!e.l)return f.return();if(null==n||null==r)return e.i.parseInit(Ne(t)),f.return();for(a=e.C?n:e.u,o={periodStart:e.u,segmentStart:n,segmentEnd:r,vttOffset:a},s=e.i.parseMedia(Ne(t),o,i,[]),u=g(s),l=u.next();!l.done;l=u.next())c=l.value,e.B(c,i||null,o);d=s.filter((function(t){return t.startTime>=e.m&&t.startTime<e.o})),e.l.append(d),null==e.g&&(e.g=Math.max(n,e.m)),e.h=Math.min(r,e.o),T(f)}))}(e.h,n,r?r.startTime:null,r?r.endTime:null,r?r.P()[0]:null),5);case 5:return N.return();case 2:if(l||!e.m){N.A(6);break}return S(N,Vs(e,d.ka,n,r,i,a,o,s,u,!0),7);case 7:return S(N,Vs(e,d.Aa,n,r,i,a,o,s,u,!0),8);case 8:return N.return();case 6:if(!e.l.has(t))return N.return();if(p=e.l.get(t).timestampOffset,h=e.F.get(t),e.j.has(t)&&(h=e.j.get(t).getOriginalMimeType()),r&&(y=function(e,t,n,r,i,a,o){o=void 0!==o&&o;var s=null,u=[],l=Ne(n);if(pr.includes(a))(n=ls(l)).length&&r&&((o=n.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&"number"==typeof o.data&&(s=Math.round(o.data)/1e3),e.O.onMetadata([{cueTime:r.startTime,data:l,frames:n,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(a.includes("/mp4")&&r&&r.ba){l=new aa;var c=null!=i.emsgSchemeIdUris&&i.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes;c&&l.T("emsg",(function(t){var n=i.emsgSchemeIdUris;if(0===t.version)var a=t.reader.Yc(),o=t.reader.Yc(),s=t.reader.U(),u=t.reader.U(),l=t.reader.U(),c=t.reader.U(),d=r.startTime+u/s;else s=t.reader.U(),u=(d=t.reader.Dd()/s+r.timestampOffset)-r.startTime,l=t.reader.U(),c=t.reader.U(),a=t.reader.Yc(),o=t.reader.Yc();t=t.reader.Tb(t.reader.getLength()-t.reader.Oa(),!0),(n&&n.includes(a)||e.B.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==a?e.O.Dk():(n=d+l/s,e.O.Bk({startTime:d,endTime:n,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:u,eventDuration:l,id:c,messageData:t}),("https://aomedia.org/emsg/ID3"==a||"https://developer.apple.com/streaming/emsg-id3"==a)&&(s=ls(t)).length&&e.O.onMetadata([{cueTime:d,data:t,frames:s,dts:d,pts:d}],0,n)))}));var d=r.ba.timescale;t=d&&!isNaN(d);var f=0,p=!1;t&&l.T("prft",(function(t){var n=t.reader,r=t.version;n.U(),t=1e3*(t=n.U())+n.U()/4294967296*1e3,0===r?n=n.U():(r=n.U(),n=4294967296*r+(n=n.U())),t=ds(t),n=new Oi("prft",n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/d*1e3)})),e.O.onEvent(n)})).box("moof",oa).box("traf",oa).T("tfdt",(function(e){p||(f=no(e.reader,e.version).baseMediaDecodeTime/d,p=!0,c||e.parser.stop())})),(c||t)&&l.parse(n,!1,o),p&&0==r.timestampOffset&&(s=f)}else a.includes("/mp4")||a.includes("/webm")||!Cs(l)||(e.$.has(t)||e.$.set(t,new As),(u=e.$.get(t)).clearData(),u.Gf(r.i),u.parse(l),null!=(l=u.getStartTime(t))&&(s=l),u=u.getMetadata());return{timestamp:s,metadata:u}}(e,t,n,r,i,h,u),v=y.timestamp,b=y.metadata,null!=v&&(null==e.V&&t==d.Aa&&(e.V=v,e.wa=r.startTime,null!=e.S&&(w=0,e.wa==e.oa&&(w=e.V-e.S),e.ma.resolve(w))),null==e.S&&t==d.ka&&(e.S=v,e.oa=r.startTime,null!=e.V&&(x=0,e.wa==e.oa&&(x=e.V-e.S),e.ma.resolve(x))),A=v,k=pr,!e.I&&k.includes(e.F.get(t))&&(A=0),E=r.startTime-A,(Math.abs(p-E)>=.001||o||s)&&(!u||E>0||!p)&&(p=E,e.ib&&(Js(e,t,(function(){return zs(e,t)}),null),Js(e,t,(function(){return Ws(e,t,p)}),null))),(t==d.Aa||!e.l.has(d.Aa))&&e.Ta.resolve(p)),b.length)&&e.O.onMetadata(b,p,r?r.endTime:null),a&&t==d.Aa&&(e.h||Ns(e,"application/cea-608",e.I,!1),e.J||(I=h.split(";",1)[0],e.J=new At(I)),r?(C=e.J.xf(n)).length&&function(e,t,n){for(var r=new Map,i=(t=g(t)).next();!i.done;i=t.next()){var a=i.value;i=a.stream,a=a.cue,r.has(i)||r.set(i,[]),br(e,a,n),a.startTime>=e.m&&a.startTime<e.o&&(r.get(i).push(a),i==e.F&&e.l.append([a]))}for(t=(n=g(r.keys())).next();!t.done;t=n.next())for(t=t.value,e.j.has(t)||e.j.set(t,[]),a=(i=g(r.get(t))).next();!a.done;a=i.next())a=a.value,e.j.get(t).push(a);wr(e)}(e.h,C,p):e.J.init(n,s,c)),!e.j.has(t)){N.A(9);break}return S(N,e.j.get(t).transmux(n,i,r,e.i.duration,t),10);case 10:M=N.h,ArrayBuffer.isView(M)?n=M:(null!=(D=M).init&&(P=D.init,Js(e,t,(function(){e.H&&ht(e.H,P,p,i),e.l.get(t).appendBuffer(P)}),r?r.P()[0]:null)),n=D.data);case 9:if(n=function(e,t,n,r,i){if("mp4"!=or(e.F.get(i)))return n;var a=null===r,o=e.Sa.get(i),s=e.O.Jj(),u=!1;r&&r.ba&&(u=r.ba.encrypted),r=r?r.P()[0]:null;var l=oe();return e.B.correctEc3Enca&&a&&"audio"===i&&(n=function(e){e=Ne(e);var t=null;return(new aa).box("moov",oa).box("trak",oa).box("mdia",oa).box("minf",oa).box("stbl",oa).T("stsd",sa).box("enca",(function(e){return t=e.reader.h,la(e)})).box("sinf",oa).box("frma",(function(e){e.parser.stop(),"ec-3"===oo(e.reader).codec&&t&&2!==t.getUint16(16)&&t.setUint16(16,2)})).parse(e),e}(n)),e.B.insertFakeEncryptionInInit&&o&&l.Ed(s,i)&&(a?n=function(e,t,n){function r(e){d.push({box:e,wi:1701733217})}function i(e){d.push({box:e,wi:1701733238})}function a(e){l=!0,e.parser.stop()}function o(e){c.push(e),oa(e)}var s,u=t=Ne(t),l=!1,c=[],d=[];if((new aa).box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).T("stsd",(function(e){s=e,c.push(e),sa(e)})).T("encv",a).T("enca",a).T("dvav",i).T("dva1",i).T("dvh1",i).T("dvhe",i).T("dvc1",i).T("dvi1",i).T("hev1",i).T("hvc1",i).T("avc1",i).T("avc3",i).T("ac-3",r).T("ec-3",r).T("ac-4",r).T("Opus",r).T("fLaC",r).T("mp4a",r).parse(t),l)return t;if(0==d.length||!s)throw tt(t),new Be(2,3,3019,n);d.reverse();for(var f=(n=g(d)).next();!f.done;f=n.next())f=f.value,u=jo(e,u,s,f.box,c,f.wi);return oe().Gi()?((e=new Uint8Array(t.byteLength+u.byteLength)).set(u),e.set(t,u.byteLength),e):u}(t,n,r):!u&&l.Hi(i)&&(n=function(e){e=Ne(e);var t=[];(new aa).box("mdat",(function(e){t.push(e)})).parse(e);for(var n=[],r=0;r<t.length;r++){var i=t[r-1],a=t[r];n.push(No(e.subarray(i?i.start+i.size:0,a.start+a.size)))}return nt.apply(Je,m(n))}(n))),a&&l.oe()&&(n=function(e){function t(e){r.push({start:e.start,size:e.size}),oa(e)}var n=Ne(e),r=[];return(new aa).box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",(function(e){r.push({start:e.start,size:e.size});for(var t=Ue(n,e.start),i=0;i<e.size-3;i++){var a=t.getUint32(i);1633889587==a?t.setUint32(i,1700998451):1684103987==a&&t.setUint32(i,1684366131)}})).parse(n),n}(n)),n}(e,i,n,r,t),!r||!e.I||t==d.Na){N.A(11);break}if(!o&&!s){N.A(11);break}if(R=r.startTime,"HLS"!=e.X||e.m||t!=d.ka||!e.l.has(d.Aa)){N.A(13);break}return S(N,e.ma,14);case 14:O=N.h,Math.abs(O)>.15&&(R-=O);case 13:Js(e,t,(function(){return zs(e,t)}),null),Js(e,t,(function(){return Ws(e,t,R)}),null);case 11:return S(N,Js(e,t,(function(){var r=n;e.H&&ht(e.H,r,p,i),e.l.get(t).appendBuffer(r)}),r?r.P()[0]:null),15);case 15:T(N)}}))}function Hs(e,t){var n;return L((function(r){return 1==r.g?t==(n=ct).Na?e.h?S(r,e.h.remove(0,1/0),0):r.return():t===n.Aa&&e.J&&e.h?S(r,e.h.remove(0,1/0),4):r.A(4):6!=r.g?S(r,Js(e,t,(function(){return Ks(e,t,0,e.i.duration)}),null),6):e.m?S(r,Js(e,n.ka,(function(){return Ks(e,n.ka,0,e.i.duration)}),null),0):r.A(0)}))}function Gs(e,t,n,r,i,a,o,s,u){var l,c;return L((function(d){return 1==d.g?t==(l=ct).Na?(a||(e.h.u=n),function(e,t,n){e.m=t,e.o=n}(e.h,r,i),d.return()):(c=[],S(d,function(e,t,n,r,i){var a,o,s,u,l,c;return L((function(d){return 1==d.g?(a=ct,o=nu(e,t,n,r,i),s=o.type,u=o.dc,l=o.rf,(c=i.get(a.ka))&&(e.m=c.isAudioMuxedInVideo),s==au?(e.j.has(t)&&!u?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&u?e.j.set(t,u):u&&(e.j.has(t)&&e.j.get(t).transmux!==u.transmux?(e.j.get(t).destroy(),e.j.set(t,u)):u.destroy()),d.return(!1)):s==su?S(d,function(e,t,n,r){return Js(e,t,(function(){if(t!==lt){if(e.F.get(t),vt()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),r&&e.j.set(t,r);var i=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(i),e.F.set(t,n)}Ys(e,t)}}),null)}(e,t,l,u),3):s!=ou?d.A(3):(u&&u.destroy(),S(d,eu(e,i),3))):d.return(!0)}))}(e,t,o,s,u),2)):(d.h||(c.push(Js(e,t,(function(){return zs(e,t)}),null)),e.m&&c.push(Js(e,l.ka,(function(){return zs(e,l.ka)}),null))),a||(c.push(Js(e,t,(function(){return Ws(e,t,n)}),null)),e.m&&c.push(Js(e,l.ka,(function(){return Ws(e,l.ka,n)}),null))),0==r&&i==1/0||(c.push(Js(e,t,(function(){return Xs(e,t,r,i)}),null)),e.m&&c.push(Js(e,l.ka,(function(){return Xs(e,l.ka,r,i)}),null))),c.length?S(d,Promise.all(c),0):d.A(0))}))}function qs(e){L((function(t){return e.K.g||e.g.error||e.N||e.G||js(e)||Us(e)?t.return():S(t,$s(e,(function(){js(e)||Us(e)||e.i.clearLiveSeekableRange()})),0)}))}function Ks(e,t,n,r){r<=n?Ys(e,t):e.l.get(t).remove(n,r)}function zs(e,t){var n=e.l.get(t),r=n.appendWindowStart,i=n.appendWindowEnd;n.abort(),n.appendWindowStart=r,n.appendWindowEnd=i,Ys(e,t)}function Ws(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,Ys(e,t)}function Xs(e,t,n,r){var i=e.l.get(t);i.appendWindowEnd===r&&i.appendWindowStart===n||(i.appendWindowStart=0,i.appendWindowEnd=r,i.appendWindowStart=n),Ys(e,t)}function Ys(e,t){if(e.G||e.K.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),Qs(e,t))}function Js(e,t,n,r){return Qi(e.K),n={start:n,p:new Ii,uri:r},e.o.get(t).push(n),1==e.o.get(t).length&&Zs(e,t),n.p}function $s(e,t){var n,r,i,a,o,s,u,l,c,d,f;return L((function(p){switch(p.g){case 1:for(Qi(e.K),n=[],r=Array.from(e.l.keys()),i=g(r),a=i.next(),o={};!a.done;o={ready:void 0},a=i.next())s=a.value,o.ready=new Ii,u={start:function(e){return function(){return e.ready.resolve()}}(o),p:o.ready,uri:null},(l=e.o.get(s)).push(u),n.push(o.ready),1==l.length&&u.start();return x(p,2),S(p,Promise.all(n),4);case 4:k(p,3);break;case 2:throw E(p);case 3:return x(p,5,6),S(p,t(),6);case 6:for(I(p),c=g(r),d=c.next();!d.done;d=c.next())f=d.value,Qs(e,f);C(p,0);break;case 5:throw new Be(2,3,3015,E(p),e.g.error||"No error in the media element",null)}}))}function Qs(e,t){e.o.get(t).shift(),Zs(e,t)}function Zs(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new Be(2,3,3017,t)):Os(e)?n.p.reject(new Be(2,3,3015,r,e.g.error||"No error in the media element",n.uri)):n.p.reject(new Be(2,3,3024,t)),Qs(e,t)}}function eu(e,t){return $s(e,(function(){return function(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,T;return L((function(x){if(1==x.g){if(e.G||e.N)return x.return();for(n=ct,e.G=!0,e.m=!1,r=e.g.currentTime,i=e.g.autoplay,e.g.paused||(e.ab=!0),e.ob&&(e.g.autoplay=!1),A(x,2),e.u.Pa(),a=g(e.j.values()),o=a.next();!o.done;o=a.next())o.value.destroy();for(s=g(e.l.values()),u=s.next();!u.done;u=s.next()){l=u.value;try{e.i.removeSourceBuffer(l)}catch(e){}}return e.j.clear(),e.l.clear(),c=e.i.duration,e.M=new Ii,e.i=Rs(e,e.M),S(x,e.M,4)}if(2!=x.g){for(!isNaN(c)&&c?e.i.duration=c:!isNaN(e.xa)&&e.xa&&(e.i.duration=e.xa),d=new Ii,f=e.i.sourceBuffers,p=t.size,h=0,m=function(){++h===p&&(d.resolve(),e.u.Ma(f,"addsourcebuffer",m))},e.u.D(f,"addsourcebuffer",m),y=g(t.keys()),v=y.next();!v.done;v=y.next())b=v.value,w=t.get(b),Ls(e,b,w,w.codecs);return(T=t.get(n.ka))&&T.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.ka)&&e.o.set(n.ka,[]),e.g.currentTime=r,S(x,d,2)}return I(x),e.G=!1,Qi(e.K),e.u.Ba(e.g,"canplaythrough",(function(){e.K.g||(e.g.autoplay=i,e.ab&&(e.ab=!1,e.g.play()))})),C(x,0)}))}(e,t)}))}function tu(e,t,n,r){var i=!1,a=st("audio",(r||"").split(",")),o=st("video",(r||"").split(",")),s=o;"audio"==t&&(s=a),s||(s=r),r=rr(n,s);var u=lr(e.F.get(t)),l=e.B.forceTransmux;if(!yt(r)||!e.I&&pr.includes(r)?l=!0:l||n==u||(l=!oe().Jf()&&pr.includes(n)),l&&(n=Jn(e=ir(n,s)))){var c=n();a&&o&&(i=!0),r=c.convertCodecs(t,e)}return t=sr(cr(r)),{dc:c,fl:i,Nh:lr(r),codec:t,mimeType:r}}function nu(e,t,n,r,i){if(t==lt)return{type:au,rf:n,dc:null};var a=sr(cr(e.F.get(t))),o=lr(e.F.get(t)),s=tu(e,t,n,r),u=s.dc,l=s.fl,c=s.Nh,d=s.codec;s=s.mimeType;var f=!0;return l&&e.F.has("audio")&&(n=tu(e,"audio",n,r),r=sr(cr(e.F.get("audio"))),f=lr(e.F.get("audio")),f=r==n.codec&&f==n.Nh,n.dc&&n.dc.destroy()),a===d&&o===c&&f?{type:au,rf:s,dc:u}:(a=!0,(e.m&&!i.has("audio")||l&&u&&!e.j.has(t))&&(a=!1),a&&"smooth"===e.B.codecSwitchingStrategy&&vt()?{type:su,rf:s,dc:u}:(u&&u.destroy(),{type:ou,rf:s,dc:null}))}(i=Ps.prototype).destroy=function(){return this.K.destroy()},i.init=function(e,t,n,r){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,r=void 0!==r&&r;var i,a,o,s,u,l,c=this;return L((function(d){if(1==d.g)return i=ct,S(d,c.M,2);if(3!=d.g)return js(c)||Us(c)?(z("Expected MediaSource to be open during init(); reopening the media source."),c.M=new Ii,c.i=Rs(c,c.M),S(d,c.M,3)):d.A(3);for(c.I=t,c.X=n,c.kb=r,c.ib=!c.I&&"HLS"==c.X&&!c.kb,c.$.clear(),c.V=null,c.wa=null,c.S=null,c.oa=null,c.ma=new Ii,a=g(e.keys()),o=a.next();!o.done;o=a.next())s=o.value,u=e.get(s),Ls(c,s,u,u.codecs),c.m?(c.o.set(i.ka,[]),c.o.set(i.Aa,[])):c.o.set(s,[]);(l=e.get(i.ka))&&l.isAudioMuxedInVideo&&(c.m=!0),T(d)}))},i.configure=function(e){this.B=e,this.h&&(this.h.B=e.modifyCueCallback)},i.Ec=function(){var e={total:this.G?[]:Jo(this.g.buffered),audio:Jo(Fs(this,"audio")),video:Jo(Fs(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n,r){var i,a,o=this;return L((function(s){return 1==s.g?(e==(i=ct).Aa&&o.J&&(o.J.remove(r),a=o.h.g||0,o.h.remove(a,n)),e==i.Na?S(s,o.h.remove(t,n),0):n>t?S(s,Js(o,e,(function(){return Ks(o,e,t,n)}),null),5):s.A(0)):o.m?S(s,Js(o,i.ka,(function(){return Ks(o,i.ka,t,n)}),null),0):s.A(0)}))},i.flush=function(e){var t,n=this;return L((function(r){return 1==r.g?e==(t=ct).Na?r.return():S(r,Js(n,e,(function(){n.g.currentTime-=.001,Ys(n,e)}),null),2):n.m?S(r,Js(n,t.ka,(function(){var e=t.ka;n.g.currentTime-=.001,Ys(n,e)}),null),0):r.A(0)}))},i.endOfStream=function(e){var t=this;return L((function(n){return S(n,$s(t,(function(){js(t)||Us(t)||(e?t.i.endOfStream(e):t.i.endOfStream())})),0)}))},i.Ab=function(e){var t=this;return L((function(n){return S(n,$s(t,(function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var n=g(t.l.keys()),r=n.next();!r.done;r=n.next()){r=r.value;var i={start:function(){},p:new Ii,uri:null};t.o.get(r).unshift(i)}t.i.duration=e,t.xa=e})),0)}))},i.getDuration=function(){return this.i.duration};var ru=e.URL.createObjectURL,iu="sequence",au="none",ou="reset",su="changeType";function uu(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=void 0===n||n,this.H=0,this.o=!1,this.m=e}function lu(e,t,n,r){var i=this;this.u=r,this.g=e,this.F=t,this.h=n,this.j=new ne,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=function(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new du(new fu(e.g),t,(function(){return L((function(t){if(1==t.g)return Jo(e.g.buffered).length?n?(e.g.currentTime+=n,t.A(2)):S(t,e.g.play(),3):t.return();if(2!=t.g){if(!e.g)return t.return();e.g.pause(),e.g.play()}e.H++,e.u(new Oi("stalldetected")),T(t)}))}))}(this),this.B=!1,this.j.D(e,"waiting",(function(){return cu(i)})),this.i=new xr((function(){cu(i)})).Ea(this.h.gapJumpTimerTime)}function cu(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){var n=(t=e.o).h,r=pu(n),i=n.g.currentTime,a=Date.now()/1e3;t.g==i&&t.m==r||(t.l=a,t.g=i,t.m=r,t.i=!1),(r=(i=a-t.l)>=t.o&&r&&!t.i)&&(t.j&&t.j(t.g,i),t.i=!0,t.g=n.g.currentTime),t=!r}t&&(t=e.g.currentTime,null==(r=function(e,t,n){return e&&e.length&&!Ko(e)&&(e=Jo(e).findIndex((function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)})))>=0?e:null}(n=e.g.buffered,t,e.h.gapDetectionThreshold))||0==r&&!e.B||(i=n.start(r),(a=e.h.gapPadding)&&(i=Math.ceil(100*(i+a))/100),i>=e.F.Gb()||i-t<.001||(0!=r&&n.end(r-1),function(e,t){e.C=!0,e.j.Ba(e.g,"seeked",(function(){e.C=!1})),e.g.currentTime=t}(e,i),t==e.l&&(e.l=i),e.G++,e.u(new Oi("gapjumped")))))}}}function du(e,t,n){this.h=e,this.m=pu(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}function fu(e){var t=this;this.g=e,this.h=new ne,this.i=!1,this.h.D(this.g,"audiofocuspaused",(function(){t.i=!0})),this.h.D(this.g,"audiofocusgranted",(function(){t.i=!1})),this.h.D(this.g,"audiofocuslost",(function(){t.i=!0}))}function pu(e){if(e.g.paused||0==e.g.playbackRate||e.i||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=g(Jo(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function hu(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=gu.value().get(t),n.Ba(e,t,r))}(i=uu.prototype).getDuration=function(){return this.l},i.Mj=function(){return this.h},i.Qi=function(e){this.i=e},i.Ab=function(e){this.l=e},i.Sj=function(){return this.i},i.Pi=function(e){this.B=e},i.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},i.Hf=function(e){this.u=e},i.Ze=function(){return this.u},i.nh=function(e){this.F=e},i.Dj=function(){return this.F},i.Ai=function(e,t){if(0!=e.length){var n=(Date.now()+this.B)/1e3;if(0!=(e=e.filter((function(e){return e.start+t<n}))).length){var r=e[e.length-1].end+t;this.tf(e[0].start+t),this.h=e.reduce((function(e,t){return Math.max(e,t.end-t.start)}),this.h),this.g=Math.max(this.g,r),null!=this.i&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},i.ie=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3,i=(e=g(e)).next();!i.done;i=e.next())r<(i=i.value).startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.h=Math.max(this.h,i.endTime-i.startTime));this.tf(t),this.g=Math.max(this.g,n),null!=this.i&&this.G&&!this.o&&(this.i=r-this.g-this.h)}},i.zi=function(e,t){this.tf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},i.Nj=function(){return this.g},i.lf=function(){this.o=!0},i.pk=function(){return this.o},i.oh=function(e){this.m=e},i.Ij=function(){return this.m},i.tf=function(e){null==this.j?this.j=e:this.J||(this.j=Math.min(this.j,e))},i.Sg=function(e){this.h=Math.max(this.h,e)},i.offset=function(e){null!=this.j&&(this.j+=e),null!=this.g&&(this.g+=e)},i.W=function(){return this.l==1/0&&!this.C},i.Vc=function(){return this.l!=1/0&&!this.C},i.Hb=function(){return Math.max(this.I,this.Hc()-this.u)},i.Si=function(e){this.I=e},i.Hc=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},i.Xd=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Hc()-this.u+e,this.Gb()))},i.Xb=function(){return this.Xd(0)},i.Gb=function(){return Math.max(0,this.Hc()-(this.W()||this.Vc()?this.F:0))},i.ej=function(){return!(null==this.i||null!=this.g&&this.G)},i.Oi=function(e){this.H=e},i.yj=function(){return this.H},V("shaka.media.PresentationTimeline",uu),uu.prototype.getAvailabilityTimeOffset=uu.prototype.yj,uu.prototype.setAvailabilityTimeOffset=uu.prototype.Oi,uu.prototype.usingPresentationStartTime=uu.prototype.ej,uu.prototype.getSeekRangeEnd=uu.prototype.Gb,uu.prototype.getSeekRangeStart=uu.prototype.Xb,uu.prototype.getSafeSeekRangeStart=uu.prototype.Xd,uu.prototype.getSegmentAvailabilityEnd=uu.prototype.Hc,uu.prototype.setUserSeekStart=uu.prototype.Si,uu.prototype.getSegmentAvailabilityStart=uu.prototype.Hb,uu.prototype.isInProgress=uu.prototype.Vc,uu.prototype.isLive=uu.prototype.W,uu.prototype.offset=uu.prototype.offset,uu.prototype.notifyMaxSegmentDuration=uu.prototype.Sg,uu.prototype.notifyMinSegmentStartTime=uu.prototype.tf,uu.prototype.getInitialProgramDateTime=uu.prototype.Ij,uu.prototype.setInitialProgramDateTime=uu.prototype.oh,uu.prototype.isStartTimeLocked=uu.prototype.pk,uu.prototype.lockStartTime=uu.prototype.lf,uu.prototype.getMaxSegmentEndTime=uu.prototype.Nj,uu.prototype.notifyPeriodDuration=uu.prototype.zi,uu.prototype.notifySegments=uu.prototype.ie,uu.prototype.notifyTimeRange=uu.prototype.Ai,uu.prototype.getDelay=uu.prototype.Dj,uu.prototype.setDelay=uu.prototype.nh,uu.prototype.getSegmentAvailabilityDuration=uu.prototype.Ze,uu.prototype.setSegmentAvailabilityDuration=uu.prototype.Hf,uu.prototype.setStatic=uu.prototype.cd,uu.prototype.setClockOffset=uu.prototype.Pi,uu.prototype.getPresentationStartTime=uu.prototype.Sj,uu.prototype.setDuration=uu.prototype.Ab,uu.prototype.setPresentationStartTime=uu.prototype.Qi,uu.prototype.getMaxSegmentDuration=uu.prototype.Mj,uu.prototype.getDuration=uu.prototype.getDuration,lu.prototype.release=function(){this.j&&(this.j.release(),this.j=null),null!=this.i&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},lu.prototype.wf=function(){this.B=!0,this.i&&this.i.Ea(this.h.gapJumpTimerTime),cu(this)},du.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null},fu.prototype.release=function(){this.h&&this.h.release(),this.h=null};var gu=new ae((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function mu(e,t,n,r){var i=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return null==i.l&&(i.l=r()),i.l},this.o=!1,this.h=new ne,this.i=new Su(e),hu(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){bu(i,i.j())}))}function yu(e){return e.o?e.g.currentTime:e.j()}function vu(e,t){e.g.readyState>0?Tu(e.i,t):hu(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){bu(e,e.j())}))}function bu(e,t){Math.abs(e.g.currentTime-t)<.001?wu(e):(e.h.Ba(e.g,"seeking",(function(){wu(e)})),Tu(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function wu(e){e.o=!0,e.h.D(e.g,"seeking",(function(){return e.m()})),e.u(e.g.currentTime)}function Su(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new xr((function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)}))}function Tu(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Ea(.1)}function xu(e){this.g=e,this.i=!1,this.h=null,this.j=new ne}function Au(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function ku(e,t){return(e=e.g.seekable).length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Eu(e,t,n,r,i,a){var o=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=i,this.o=null,this.i=new lu(e,t.presentationTimeline,n,a),this.j=new mu(e,(function(){e:{var e=o.i;e.m=!0,e.B=!1,e.i&&e.i.Ea(e.h.gapJumpTimerTime),cu(e);var t=yu(o.j);if(e=Mu(o,t),!bt()&&Math.abs(e-t)>.001){t=!1;var n=oe().Mi();if(n){var r=Date.now()/1e3;(!o.o||o.o<r-n)&&(o.o=r,t=!0)}else t=!0;if(t){vu(o.j,e),e=void 0;break e}}o.u(),e=void 0}return e}),(function(e){var t=o.i;t.g.seeking&&!t.m&&(t.m=!0,t.l=e),t.i&&t.i.Ea(t.h.gapJumpTimerTime),cu(t)}),(function(){return Iu(o,r)})),this.m=new xr((function(){if(0!=o.h.readyState&&!o.h.paused){var e=yu(o.j),t=o.g.Xb(),n=o.g.Gb();n-t<3&&(t=n-3),e<t&&(e=Mu(o,e),o.h.currentTime=e)}}))}function Iu(e,t){return null==t?t=e.g.getDuration()<1/0?e.g.Xb():e.g.Gb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Gb()+t),Cu(e,Du(e,t))}function Cu(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Mu(e,t){var n=e.l.rebufferingGoal,r=e.l.safeSeekOffset,i=e.g.Xb(),a=e.g.Gb(),o=e.g.getDuration();a-i<3&&(i=a-3);var s=e.g.Xd(n),u=e.g.Xd(r);return n=e.g.Xd(n+r),t>=o?Cu(e,t):t>a?a-e.l.safeSeekEndOffset:t<i?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?a-e.l.safeSeekEndOffset:Xo(e.h.buffered,u)?u:n:t>=s||Xo(e.h.buffered,t)?t:n}function Du(e,t){var n=e.g.Xb();return t<n?n:t>(e=e.g.Gb())?e:t}function Pu(e){this.g=e,this.m=null,this.i=0,this.o=!1}function Ru(e){return e.g[0]||null}function Lu(e,t,n){return new Pu([e=new Fo(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function Ou(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}function Nu(){Pu.call(this,[]),this.h=[]}function ju(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Ye(),this.h=new xr((function(){t.g.ui(.25*t.i)}))}function Uu(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{return void(e.g.Ye()!=t&&e.g.ph(t))}catch(e){}e.h.Ea(.25),0!=e.g.Ye()&&e.g.ph(0)}function _u(e){var t=this;this.j=e,this.h=new ne,this.g=new Set,this.i=new xr((function(){Bu(t,!1)})).Jb(),e.paused||this.i.Ea(.25),this.h.D(e,"playing",(function(){t.i.Jb().Ea(.25)})),this.h.D(e,"pause",(function(){t.i.stop()}))}function Bu(e,t){for(var n=e.j.currentTime,r=(e=g(e.g)).next();!r.done;r=e.next())r.value.j(n,t)}function Fu(e){Ui.call(this),this.g=new Map,this.h=e}function Vu(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function Hu(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return"video"==e.type&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),"audio"==e.type&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Gu(e){Ui.call(this),this.h=new Map,this.i=e,this.g=null}function qu(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1);e.h.has(n)||(e.h.set(n,t),t=new Oi("regionadd",new Map([["region",t]])),e.dispatchEvent(t),function(e){e.g||(e.g=new xr((function(){for(var t=e.i(),n=g(e.h),r=n.next();!r.done;r=n.next()){var i=g(r.value);r=i.next().value,(i=i.next().value).endTime<t.start&&(e.h.delete(r),r=new Oi("regionremove",new Map([["region",i]])),e.dispatchEvent(r))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)})).Ea(2))}(e))}function Ku(e,t,n,r,i){this.m=e,this.i=t,this.l=n,this.g=new Map,this.j=new Map,this.h=null,this.o=r,this.u=i||function(e,t){return!(t.fastSwitching&&e.Xc&&e.ee)}}function zu(e,t){e.l=t;for(var n=(e=g(e.g.values())).next();!n.done;n=e.next())n.value.g=t}function Wu(e,t,n){if(n=void 0!==n&&n,!e.i.segmentIndex)return Promise.resolve();if(e.h||(e.h=e.i.segmentIndex.Vb(t,!0,e.o)),!e.h)return Promise.resolve();for(n&&e.h.next(),t=[];e.g.size<e.m&&(n=e.h.next().value);){var r=!0;if(n.isPreload()&&null!=n.endByte&&(r=!1),2==n.Jc()&&(r=!1),n.Yb(!1)&&(r=!1),r&&n.ba&&t.push(Xu(e,n.ba)),r&&!e.g.has(n)&&(r=new el(e.l),t.push(tl(r,n,e.i)),e.g.set(n,r)),!e.u(n,e.i))break}return $u(e),Promise.all(t)}function Xu(e,t){if(!e.i.segmentIndex||t.Yb()||Array.from(e.j.keys()).some((function(e){return Bo(e,t)})))return Promise.resolve();var n=new el(e.l),r=tl(n,t,e.i);return e.j.set(t,n),r}function Yu(e,t){for(var n=(t=g(t.keys())).next();!n.done;n=t.next())(n=n.value)&&Zu(e,n)}function Ju(e){Yu(e,e.g),Yu(e,e.j),e.h=null}function $u(e){if(e.g.size)for(var t=Array.from(e.g.keys()),n=g(e.j.keys()),r=n.next(),i={};!r.done;i={Mg:void 0},r=n.next())i.Mg=r.value,t.some(function(e){return function(t){return Bo(t.ba,e.Mg)}}(i))||Zu(e,i.Mg)}function Qu(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&Zu(e,r)}$u(e)}function Zu(e,t){var n=e.g;t instanceof _o&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function el(e){this.g=e,this.je=this.wh=null}function tl(e,t,n){var r=new Uint8Array(0);return e.je=e.g(t,n,(function(t){return L((function(n){if(1==n.g)return r=r.byteLength>0?nt(r,t):t,e.wh?S(n,e.wh(r),3):n.A(0);r=new Uint8Array(0),T(n)}))})),e.je.promise.catch((function(e){return e instanceof Be&&7001==e.code?Promise.resolve():Promise.reject(e)}))}function nl(e){var t=lr(e);return{type:t.split("/")[0],mimeType:t,codecs:e=cr(e),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ve:null,colorGamut:null,frameRate:null}}function rl(e,t,n){function r(e){o=e.name;var t=e.reader;t.skip(24);var n=t.Ca(),r=t.Ca();t.skip(50),p=String(n),f=String(r),e.reader.Ia()&&oa(e)}function i(e){var t=ao(e.reader);h=t.channelCount,m=t.sampleRate,a(e.name)}function a(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":u.push(e+".42E01E"),c=!0;break;case"hev1":case"hvc1":u.push(e+".1.6.L93.90"),c=!0;break;case"dvh1":case"dvhe":u.push(e+".05.04"),c=!0;break;case"vp09":u.push(e+".00.10.08"),c=!0;break;case"av01":u.push(e+".0.01M.08"),c=!0;break;case"mp4a":s.push("mp4a.40.2"),l=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(e),l=!0;break;case"apac":s.push("apac.31.00"),l=!0}}var o,s=[],u=[],l=!1,c=!1,d=null,f=null,p=null,h=null,m=null,y=null,v=null;if((new aa).box("moov",oa).box("trak",oa).box("mdia",oa).T("mdhd",(function(e){d=ro(e.reader,e.version).language})).box("minf",oa).box("stbl",oa).T("stsd",sa).box("mp4a",(function(e){var t=ao(e.reader);h=t.channelCount,m=t.sampleRate,e.reader.Ia()?oa(e):a(e.name)})).box("esds",(function(e){e=e.reader;for(var t,n,r="mp4a";e.Ia();){t=e.Y();for(var i=e.Y();128&i;)i=e.Y();if(3==t)e.Ca(),128&(i=e.Y())&&e.Ca(),64&i&&e.skip(e.Y()),32&i&&e.Ca();else if(4==t)n=e.Y(),e.skip(12);else if(5==t)break}n&&(r+="."+so(n),5==t&&e.Ia()&&(31===(n=(248&(t=e.Y()))>>3)&&e.Ia()&&(n=32+((7&t)<<3)+((224&e.Y())>>5)),r+="."+n)),s.push(r),l=!0})).box("ac-3",i).box("ec-3",i).box("ac-4",i).box("Opus",i).box("fLaC",i).box("apac",i).box("avc1",r).box("avc3",r).box("hev1",r).box("hvc1",r).box("dva1",r).box("dvav",r).box("dvh1",r).box("dvhe",r).box("vp09",r).box("av01",r).box("avcC",(function(e){var t=o||"";switch(o){case"dvav":t="avc3";break;case"dva1":t="avc1"}(e=e.reader).skip(1),e=t+"."+so(e.Y())+so(e.Y())+so(e.Y()),u.push(e),c=!0})).box("hvcC",(function(e){var t=o||"";switch(o){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1);var r=["","A","B","C"][(e=n.Y())>>6],i=31&e,a=n.U(),s=(32&e)>>5?"H":"L";e=[n.Y(),n.Y(),n.Y(),n.Y(),n.Y(),n.Y()],n=n.Y();for(var l=0,d=0;d<32&&(l|=1&a,31!=d);d++)l<<=1,a>>=1;for(t=t+"."+r+i+"."+so(l,!0),t+="."+s+n,r="",i=e.length;i--;)((s=e[i])||r)&&(r="."+s.toString(16).toUpperCase()+r);t+=r,u.push(t),c=!0})).box("dvcC",(function(e){var t=o||"";switch(o){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.Y(),n=n.Y(),u.push(t+"."+uo(e>>1&127)+"."+uo(e<<5&32|n>>3&31)),c=!0})).box("dvvC",(function(e){var t=o||"";switch(o){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.Y(),n=n.Y(),u.push(t+"."+uo(e>>1&127)+"."+uo(e<<5&32|n>>3&31)),c=!0})).T("vpcC",(function(e){var t=o||"",n=e.reader;e=n.Y();var r=n.Y();n=n.Y()>>4&15,u.push(t+"."+uo(e)+"."+uo(r)+"."+uo(n)),c=!0})).box("av1C",(function(e){var t=o||"";switch(o){case"dav1":t="av01"}var n=e.reader;n.skip(1);var r=(e=n.Y())>>>5,i=(64&(n=n.Y()))>>6;u.push(t+"."+r+"."+uo(31&e)+(n>>>7?"H":"M")+"."+uo(2===r&&i?(32&n)>>5?12:10:i?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+uo(1)+"."+uo(1)+"."+uo(1)+".0"),c=!0})).box("enca",la).box("encv",ua).box("sinf",oa).box("frma",(function(e){a(e=oo(e.reader).codec)})).box("colr",(function(e){u=u.map((function(t){if(t.startsWith("av01.")){var n=e.reader,r=n.Oa(),i=n.Tb(4,!1),a=String.fromCharCode(i[0]);if(a+=String.fromCharCode(i[1]),a+=String.fromCharCode(i[2]),"nclx"===(a+=String.fromCharCode(i[3]))){i=n.Ca(),a=n.Ca();var o=n.Ca(),s=n.Y()>>7,u=t.split(".");10==u.length&&(u[6]=uo(i),u[7]=uo(a),u[8]=uo(o),u[9]=String(s),t=u.join("."))}n.seek(r)}return t}));var t=function(e){var t=null,n=null,r=e.Tb(4,!1),i=String.fromCharCode(r[0]);if(i+=String.fromCharCode(r[1]),i+=String.fromCharCode(r[2]),"nclx"===(i+=String.fromCharCode(r[3]))){switch(e.Ca()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.Ca(),e.Ca(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ve:n}}(e.reader),n=t.colorGamut;y=t.ve,v=n})).parse(e||t,!0,!0),!s.length&&!u.length)return null;var b=l&&!c,w=new Map;if(c&&!n){n=new At("video/mp4"),e&&n.init(e);try{n.xf(t);for(var S=g(n.Vf()),T=S.next();!T.done;T=S.next()){var x=T.value;w.set(x,x)}}catch(e){}n.Nd()}return{type:b?"audio":"video",mimeType:b?"audio/mp4":"video/mp4",codecs:il(s.concat(u)).join(", "),language:d,height:f,width:p,channelCount:h,sampleRate:m,closedCaptions:w,ve:y,colorGamut:v,frameRate:null}}function il(e){for(var t=new Set,n=[],r=(e=g(e)).next();!r.done;r=e.next()){var i=ur(r=r.value);t.has(i)||(n.push(r),t.add(i))}return t=ut("audio",n),r=ut("video",n),e=ut(lt,n),r=function(e){if(e.length<=1)return e;var t=e.find((function(e){return e.startsWith("dvav.")||e.startsWith("dva1.")||e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")||e.startsWith("dvc1.")||e.startsWith("dvi1.")}));return t?yt('video/mp4; codecs="'+t+'"')?[t]:e.filter((function(e){return e!=t})):e}(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function al(t,n,r){var i,a,o,s,u;return L((function(l){if(1==l.g)return(i=n).cryptoKey?l.A(2):S(l,i.fetchKey(),3);if(!(a=i.iv))for(a=Ne(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+r,s=a.byteLength-1;s>=0;s--)a[s]=255&o,o>>=8;return u="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:a}:{name:"AES-CTR",counter:a,length:64},l.return(e.crypto.subtle.decrypt(u,i.cryptoKey,t))}))}function ol(e,t,n,r,i){return e=Gi(e,r,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function sl(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.M=new Map,this.F=1,this.B=this.o=null,this.V=0,this.h=new Map,this.N=!1,this.X=null,this.C=!1,this.l=new $i((function(){return function(e){var t,n,r,i,a,o;return L((function(s){if(1==s.g){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=g(e.h.values()),r=n.next();!r.done;r=n.next())Il(i=r.value),t.push(Cl(i)),i.ha&&(Ju(i.ha),i.ha=null);for(a=g(e.m.values()),o=a.next();!o.done;o=a.next())Ju(o.value);return S(s,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,T(s)}))}(n)})),this.R=Date.now()/1e3,this.m=new Map,this.S={projection:null,hfov:null},this.aa=0,this.$=1/0,this.H=null,this.O=[],this.u=new xr((function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var e=n.j.presentationTimeline.Xb(),t=n.j.presentationTimeline.Gb();t-e>1?function(e,t,n){L((function(r){return e.K.g||e.g.error||e.N||e.G||js(e)||Us(e)?r.return():S(r,$s(e,(function(){js(e)||Us(e)||e.i.setLiveSeekableRange(t,n)})),0)}))}(n.g.Z,e,t):qs(n.g.Z)}else qs(n.g.Z),n.u&&n.u.stop();else n.u&&n.u.stop()})),this.I=null,this.J=!1,this.K=new xr((function(){var e=n.g.video;!e.ended&&n.I&&(n.J=!0,e.currentTime=n.I,n.I=null)})),this.G=new ne}function ul(e,t){for(var n=e.g.Ob()<0,r=g(e.h.values()),i=r.next();!i.done;i=r.next())(i=i.value).ua&&i.ua.Id(n),i.ha&&i.ha.Id(n);for(i=(r=g(e.m.values())).next();!i.done;i=r.next())i.value.Id(n);(n=e.h.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.Mc&&(dl(e,t,!1,0,!1),n.Mc=r):(t=n.Mc)&&(n.Mc=null,dl(e,t,!0,0,!1)))}function ll(e,t,n,r,i,a){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,a=void 0!==a&&a,e.o=t,e.N&&(t.video&&dl(e,t.video,n,r,i,a),t.audio&&dl(e,t.audio,n,r,i,a))}function cl(e,t){L((function(n){if(1==n.g)return e.H=null,e.B=t,e.N?t.segmentIndex?n.A(2):S(n,t.createSegmentIndex(),2):n.return();dl(e,t,!0,0,!1),T(n)}))}function dl(e,t,n,r,i,a){var o=e.h.get(t.type);o||t.type!=lt?o&&(o.Mc&&(t.trickModeVideo?(o.Mc=t,t=t.trickModeVideo):o.Mc=null),o.stream!=t||i)&&(e.m.has(t)?o.ha=e.m.get(t):o.ha&&function(e,t){t&&t!==e.i&&(Ju(e),e.i=t)}(o.ha,t),t.type==lt&&o.stream!=t&&(i=rr(t.mimeType,t.codecs),Ns(e.g.Z,i,e.j.sequenceMode,t.external)),!e.m.has(o.stream)&&o.stream.closeSegmentIndex&&(o.Ja?(i="("+o.type+":"+o.stream.id+")",e.M.has(i)||e.M.set(i,o.stream.closeSegmentIndex)):o.stream.closeSegmentIndex()),i=o.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,o.stream=t,o.ua=null,o.cg=!!a,t.dependencyStream?o.Dc=hl(e,t.dependencyStream):o.Dc=null,Rl(e),i&&(o.pb=null,o.nc=null,o.mc=null,t.isAudioMuxedInVideo&&(t=null,"video"===o.type?t=e.h.get("audio"):"audio"===o.type&&(t=e.h.get("video")),t&&(Cl(t).catch((function(){})),t.pb=null,t.nc=null,t.mc=null,pl(e,t),fl(e,t).catch((function(t){e.g&&e.g.onError(t)}))))),n?o.Ub?o.Kd=!0:o.Ja?(o.ec=!0,o.ld=r,o.Kd=!0):(Il(o),kl(e,o,!0,r).catch((function(t){e.g&&e.g.onError(t)}))):o.Ja||o.qb||El(e,o,0),fl(e,o).catch((function(t){e.g&&e.g.onError(t)}))):function(e,t){var n,r,i,a,o;L((function(s){switch(s.g){case 1:return n=ct,e.V++,r=e.V,x(s,2),S(s,Hs(e.g.Z,n.Na),4);case 4:k(s,3);break;case 2:i=E(s),e.g&&e.g.onError(i);case 3:a=rr(t.mimeType,t.codecs),Ns(e.g.Z,a,e.j.sequenceMode,t.external),(e.g.Z.aa.isTextVisible()||e.i.alwaysStreamText)&&e.V==r&&(o=hl(e,t),e.h.set(n.Na,o),El(e,o,0)),T(s)}}))}(e,t)}function fl(e,t){var n,r,i;return L((function(a){if(1==a.g)return t.Va?(n=t.stream,r=t.Va,n.segmentIndex?a.A(2):S(a,n.createSegmentIndex(),2)):a.return();if(4!=a.g)return!(i=n.dependencyStream)||i.segmentIndex?a.A(4):S(a,i.createSegmentIndex(),4);if(t.Va!=r||t.stream!=n)return a.return();var o=e.g.Gc(),s=Bs(e.g.Z,t.type),u=t.stream.segmentIndex.find(t.La?t.La.endTime:o),l=null==u?null:t.stream.segmentIndex.get(u);u=l?Vo(l):null,l&&!u&&(u=(l.endTime-l.getStartTime())*(t.stream.bandwidth||e.o.bandwidth)/8),u?((l=l.ba)&&(u+=(l.endByte?l.endByte+1-l.startByte:null)||0),o=8*u/(l=e.g.getBandwidthEstimate())<(s||0)-o-e.i.rebufferingGoal||t.Va.h.g>u):o=!0,o&&t.Va.abort(),T(a)}))}function pl(e,t){t.Ub||t.ec||(t.Ja?(t.ec=!0,t.ld=0):null==_s(e.g.Z,t.type)?null==t.qb&&El(e,t,0):(Il(t),kl(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)}))))}function hl(e,t){var n={stream:t,type:t.type,ua:null,ha:gl(e,t),La:null,pb:null,kf:null,nc:null,mc:null,hf:null,jf:null,Mc:null,endOfStream:!1,Ja:!1,qb:null,ec:!1,ld:0,Kd:!1,Ub:!1,bd:!0,cg:!1,ah:!1,Zd:!1,Va:null,Dc:null};return t.dependencyStream&&(n.Dc=hl(e,t.dependencyStream)),n}function gl(e,t){if("video"===t.type&&e.i.disableVideoPrefetch||"audio"===t.type&&e.i.disableAudioPrefetch||t.type===lt&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===lt&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ha)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new Ku(e.i.segmentPrefetchLimit,t,(function(t,n,r){return Al(t,n,r||null,e.i.retryParameters,e.g.sc)}),e.g.Ob()<0,e.g.al):null}function ml(t,n){var r,i,a,o,s,u,l,c,d;return L((function(f){switch(f.g){case 1:if(Qi(t.l),r=ct,n.Ja||null==n.qb||n.Ub)return f.return();if(n.qb=null,!n.ec){f.A(2);break}return S(f,kl(t,n,n.Kd,n.ld),3);case 3:return f.return();case 2:if(function(e,t){for(var n=g(e.M.entries()),r=n.next();!r.done;r=n.next()){var i=g(r.value);r=i.next().value,i=i.next().value,r.includes(t.type)&&(i(),e.M.delete(r))}}(t,n),n.stream.segmentIndex){f.A(4);break}return i=n.stream,x(f,5),S(f,n.stream.createSegmentIndex(),7);case 7:k(f,6);break;case 5:return a=E(f),S(f,Ml(t,n,a),8);case 8:return f.return();case 6:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),n.Ja||n.qb||El(t,n,0),f.return();case 4:if(!n.Dc){f.A(9);break}if(n.Dc.stream.segmentIndex){f.A(9);break}return x(f,11),S(f,n.Dc.stream.createSegmentIndex(),13);case 13:k(f,9);break;case 11:E(f);case 9:x(f,14),null!=(o=function(t,n){if(Tl(n))return function(e,t){var n=Bs(e,"video")||0;vr(e.h,t,n)}(t.g.Z,n.stream.originalId||""),null;if(n.type==lt&&function(e){e.h&&vr(e.h,"",0)}(t.g.Z),n.stream.isAudioMuxedInVideo&&"audio"==n.type)return null;if(n.type!=lt&&Us(t.g.Z))return Dl(t,!0),null;var r=t.i.updateIntervalSeconds/Math.max(1,Math.abs(t.g.Ob()));if(!Os(t.g.Z)&&n.type!=lt)return r/2;var i=t.g.Gc();if("audio"===n.type)for(var a=g(t.m.keys()),o=a.next();!o.done;o=a.next())(o=t.m.get(o.value)).Ya(i,!0),Wu(o,i);a=n.La?n.La.endTime:i;var s=function(e,t,n){return t==lt?null==(e=e.h).h||e.h<n?0:e.h-Math.max(n,e.g):Yo(e=Fs(e,t),n)}(t.g.Z,n.type,i);o=Math.max(1,Math.max(t.i.rebufferingGoal,t.i.bufferingGoal)*t.F);var u=t.j.presentationTimeline.getDuration()-a,l=Bs(t.g.Z,n.type);if(u<1e-6&&l)return n.endOfStream=!0,"video"==n.type&&(t=t.h.get(lt))&&Tl(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,s>=o)return r/2;if(u=!n.ua,!(l=yl(t,n,i,l)))return r;s=n.pb;var c=l.ba;s&&c&&Bo(c,s)&&(s.g=c.g),s=!1,u&&n.cg&&(s=!0,n.cg=!1),u=1/0;for(var d=(c=g(c=Array.from(t.h.values()))).next();!d.done;d=c.next())Tl(d=d.value)||d.ua&&!d.ua.current()||(u=Math.min(u,d.La?d.La.endTime:i));return a>=u+t.j.presentationTimeline.h?r:(n.ha&&n.ua&&!t.m.has(n.stream)&&(n.ha.Ya(l.startTime+.001),Wu(n.ha,l.startTime).catch((function(){}))),Pl(t)&&function(e,t,n){if(t.type===lt)return!1;var r=t.pb;if(!r)return!1;var i=n.ba;if(n=r.g!==i.g,"reset_to_encrypted"===e.i.crossBoundaryStrategy&&(r.encrypted||i.encrypted||(n=!1),r.encrypted&&(e.i.crossBoundaryStrategy="keep")),"RESET_ON_ENCRYPTION_CHANGE"===e.i.crossBoundaryStrategy&&r.encrypted==i.encrypted&&(n=!1),"keep"===e.i.crossBoundaryStrategy&&r.mimeType&&i.mimeType){var a=sr(cr(r.mimeType)),o=sr(cr(r.mimeType));r.mimeType==i.mimeType&&a==o&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,Dl(e,!0).then((function(){var t=(new Map).set("oldEncrypted",r.encrypted).set("newEncrypted",i.encrypted);e.g.onEvent(new Oi("boundarycrossed",t))}))),n}(t,n,l)||(function(t,n,r,i,a){var o,s,u,l,c,d,f,p,h,m,y,v,b,w,A,I;return L((function(C){switch(C.g){case 1:if(o=ct,s=n.stream,u=n.ua,n.Ja=!0,x(C,2),2==i.Jc())throw new Be(1,1,1011);return S(C,function(e,t,n,r){var i,a,o,s,u,l,c,d,f,p,h,m,y,v,b;return L((function(w){switch(w.g){case 1:if(i=ct,a=null==t.La,o=[],s=Math.max(0,Math.max(n.appendWindowStart,e.aa)-.1),u=Math.min(n.appendWindowEnd,e.$)+.1,l=n.codecs||t.stream.codecs,c=ur(l),d=lr(n.mimeType||t.stream.mimeType),(f=n.timestampOffset)==t.kf&&s==t.nc&&u==t.mc&&c==t.hf&&d==t.jf){w.A(2);break}if(!(t.hf&&t.jf&&function(e,t,n,r,i){return(e=nu(e,t,n,r,i)).dc&&e.dc.destroy(),e.type==ou}(e.g.Z,t.type,d,l,Ol(e)))){w.A(3);break}if(p=null,t.type===i.Aa?p=e.h.get(i.ka):t.type===i.ka&&(p=e.h.get(i.Aa)),!p){w.A(3);break}return S(w,Cl(p).catch((function(){})),5);case 5:p.pb=null,p.nc=null,p.mc=null,pl(e,p);case 3:return S(w,bl(e,t,f,s,u,n,c,d),2);case 2:return Bo(n.ba,t.pb)||(t.pb=n.ba,n.l&&n.ba&&(h=xl(e,t,n.ba),m=function(){var a,o,s,u,l,c,d,f,p,m,y;return L((function(v){switch(v.g){case 1:return x(v,2),S(v,h,4);case 4:return a=v.h,Qi(e.l),o=null,s=new Map,u={projection:null,hfov:null},t.stream&&(l=t.stream.videoLayout)&&((c=l.split("/")).includes("PROJ-RECT")?u.projection="rect":c.includes("PROJ-EQUI")?u.projection="equi":c.includes("PROJ-HEQU")?u.projection="hequ":c.includes("PROJ-PRIM")?u.projection="prim":c.includes("PROJ-AIV")&&(u.projection="hequ")),(d=new aa).box("moov",oa).box("trak",oa).box("mdia",oa).T("mdhd",(function(e){o=ro(e.reader,e.version).timescale})).box("hdlr",(function(e){switch((e=e.reader).skip(8),e.Yc()){case"soun":s.set(i.ka,o);break;case"vide":s.set(i.Aa,o)}o=null})),t.type!==i.Aa||u.projection||d.box("minf",oa).box("stbl",oa).T("stsd",sa).box("encv",ua).box("avc1",ua).box("avc3",ua).box("hev1",ua).box("hvc1",ua).box("dvav",ua).box("dva1",ua).box("dvh1",ua).box("dvhe",ua).box("dvc1",ua).box("dvi1",ua).box("vexu",oa).box("proj",oa).T("prji",(function(e){e=e.reader.Yc(),u.projection=e})).box("hfov",(function(e){e=e.reader.U()/1e3,u.hfov=e})),d.parse(a,!0,!0),t.type===i.Aa&&function(e,t){if(e.S.projection!=t.projection||e.S.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new Oi("spatialvideoinfo",n)}else n=new Oi("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.S=t}}(e,u),s.has(t.type)?n.ba.timescale=s.get(t.type):null!=o&&(n.ba.timescale=o),(f=t.stream.segmentIndex)instanceof Nu&&(p=function(e,t){for(var n=(e=g(e.h)).next();!n.done;n=e.next())if(null!=(n=n.value).find(t))return n.Te();return-1}(f,n.startTime)),m=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,S(v,e.g.Oh(t.type,a),5);case 5:return S(v,Vs(e.g.Z,t.type,a,null,t.stream,m,t.bd,r,!1,!1,p),6);case 6:k(v,0);break;case 2:throw y=E(v),t.pb=null,y}}))},y=n.startTime,a&&(null!=(v=Bs(e.g.Z,t.type))&&(y=v)),e.g.Ck(y,n.ba),o.push(m()))),b=t.La?t.La.i:-1,n.i!=b&&o.push(function(e,t,n){var r,i;return L((function(a){return 1==a.g?t==(r=ct).Na?a.return():(t==r.Aa&&(e.Ta=new Ii),!e.I||(i=Bs(e,t))&&Math.abs(i-n)<.15?a.return():(Js(e,t,(function(){return zs(e,t)}),null),e.m&&Js(e,r.ka,(function(){return zs(e,r.ka)}),null),S(a,Js(e,t,(function(){return Ws(e,t,n)}),null),2))):e.m?S(a,Js(e,r.ka,(function(){return Ws(e,r.ka,n)}),null),0):a.A(0)}))}(e.g.Z,t.type,n.startTime)),S(w,Promise.all(o),0)}}))}(t,n,i,a),4);case 4:return Qi(t.l),t.C?C.return():(l="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,c=e.ReadableStream,t.i.lowLatencyMode&&t.j.isLowLatency&&c&&l&&("HLS"!=t.j.type||i.o)?(f=new Uint8Array(0),h=p=!1,y=function(e){var o,u,l;return L((function(c){switch(c.g){case 1:if(p)return c.return();if(h=!0,Qi(t.l),t.C)return c.return();if(x(c,2),f=nt(f,e),o=!1,u=0,(new aa).box("mdat",(function(e){u=e.size+e.start,o=!0})).parse(f,!1,!0),!o){c.A(4);break}return l=f.subarray(0,u),f=f.subarray(u),S(c,wl(t,n,r,s,i,l,!0,a),5);case 5:n.ha&&n.ua&&Wu(n.ha,i.startTime,!0);case 4:k(c,0);break;case 2:m=E(c),T(c)}}))},S(C,xl(t,n,i,y),9)):S(C,xl(t,n,i),7));case 7:return d=C.h,Qi(t.l),t.C?C.return():(Qi(t.l),n.ec?(n.Ja=!1,El(t,n,0),C.return()):S(C,wl(t,n,r,s,i,d,!1,a),6));case 9:if(v=C.h,m)throw m;if(h){C.A(10);break}return p=!0,Qi(t.l),t.C?C.return():n.ec?(n.Ja=!1,El(t,n,0),C.return()):S(C,wl(t,n,r,s,i,v,!1,a),10);case 10:n.ha&&n.ua&&Wu(n.ha,i.startTime,!0);case 6:if(Qi(t.l),t.C)return C.return();n.La=i,u.next(),n.Ja=!1,n.ah=!1,b=t.g.Z.Ec(),w=b[n.type],JSON.stringify(w),n.ec||(A=null,n.type===o.Aa?A=t.h.get(o.ka):n.type===o.ka&&(A=t.h.get(o.Aa)),A&&A.type==o.ka?t.g.wf(i,n.stream,A.stream.isAudioMuxedInVideo):t.g.wf(i,n.stream,n.stream.codecs.includes(","))),Il(n),El(t,n,0),k(C,0);break;case 2:if(I=E(C),Qi(t.l,I),t.C)return C.return();if(n.Ja=!1,7001==I.code)n.Ja=!1,Il(n),El(t,n,0),C.A(0);else{if(n.type!=o.Na||!t.i.ignoreTextStreamFailures)return 3017==I.code?S(C,function(e,t,n){var r,i,a,o;return L((function(s){if(1==s.g){if(r=Array.from(e.h.values()),r.some((function(e){return e!=t&&e.ah})))return s.A(2);if(i=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,e.g.disableStream(t.stream,i))return s.return();if(e.i.avoidEvictionOnQuotaExceededError)return El(e,t,4),s.return();if((a=Math.round(100*e.F))>20)e.F-=.2;else{if(!(a>4))return t.Zd=!0,e.C=!0,e.g.onError(n),s.return();e.F-=.04}return t.ah=!0,o=e.g.Gc(),S(s,Sl(e,t,o),2)}El(e,t,4),T(s)}))}(t,n,I),0):(n.Zd=!0,1==I.category&&n.ha&&Zu(n.ha,i),I.severity=2,S(C,Ml(t,n,I),0));t.h.delete(o.Na),C.A(0)}}}))}(t,n,i,l,s).catch((function(){})),n.Dc&&vl(t,n.Dc,i,o)),null)}(t,n))&&(El(t,n,o),n.Zd=!1),k(f,15);break;case 14:return s=E(f),S(f,Ml(t,n,s),16);case 16:return f.return();case 15:if(n.type===r.Na)return f.return();if(u=[n],l=n.type===r.ka?r.Aa:r.ka,(c=t.h.get(l))&&u.push(c),!t.N||!u.every((function(e){return e.endOfStream}))){f.A(0);break}return S(f,t.g.Z.endOfStream(),18);case 18:Qi(t.l),0!=(d=t.g.Z.getDuration())&&d<t.j.presentationTimeline.getDuration()&&t.j.presentationTimeline.Ab(d),T(f)}}))}function yl(e,t,n,r){if(t.ua)return(n=t.ua.current())&&t.La&&Math.abs(t.La.startTime-n.startTime)<.001&&(n=t.ua.next().value),n;if(t.La||r)return n=t.La?t.La.endTime:r,e=e.g.Ob()<0,t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),t.ua&&t.ua.next().value;r=e.j.sequenceMode||Pl(e)?0:e.i.inaccurateManifestTolerance;var i=Math.max(n-r,0);e=e.g.Ob()<0;var a=null;return r&&(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(i,!1,e)),a=t.ua&&t.ua.next().value),a||(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),a=t.ua&&t.ua.next().value),a}function vl(e,t,n,r){var i,a,o,s,u,l,c,d,f,p;return L((function(h){switch(h.g){case 1:for(i=t.stream,s=(o=(a=i.segmentIndex)&&a.Vb(n))&&o.next().value;s&&e.O.includes(s.startTime);)s=o&&o.next().value;if(!s){h.A(0);break}if(!(u=s.ba)||Bo(u,t.pb)){h.A(3);break}return t.pb=u,x(h,4),S(h,xl(e,t,u),6);case 6:l=h.h;var g=e.g.Z;g.H&&ht(g.H,l,0,i),e.O=[],k(h,3);break;case 4:throw c=E(h),t.pb=null,c;case 3:if(t.La&&t.La==s){h.A(0);break}return t.La=s,x(h,8),S(h,xl(e,t,s),10);case 10:d=h.h,(g=e.g.Z).H&&ht(g.H,d,0,i),e.O.push(s.startTime),k(h,9);break;case 8:throw f=E(h),t.La=null,f;case 9:if(p=Math.max.apply(Math,[0].concat(m(e.O))),e.g.Gc()+r>p)return S(h,vl(e,t,s.startTime,r),0);h.A(0)}}))}function bl(e,t,n,r,i,a,o,s){var u,l,c,d,f;return L((function(p){switch(p.g){case 1:if(u=ct,l=Ol(e),x(p,2),t.nc=r,t.mc=i,o&&(t.hf=o),s&&(t.jf=s),t.kf=n,c=e.j.sequenceMode||"HLS"==e.j.type,d=null,t.type===u.Aa?d=e.h.get(u.ka):t.type===u.ka&&(d=e.h.get(u.Aa)),!(d&&d.stream&&d.stream.isAudioMuxedInVideo)){p.A(4);break}return S(p,Gs(e.g.Z,d.type,n,r,i,c,d.stream.mimeType,d.stream.codecs,l),4);case 4:return S(p,Gs(e.g.Z,t.type,n,r,i,c,a.mimeType||t.stream.mimeType,a.codecs||t.stream.codecs,l),6);case 6:k(p,0);break;case 2:throw f=E(p),t.nc=null,t.mc=null,t.hf=null,t.jf=null,t.kf=null,f}}))}function wl(e,t,n,r,i,a,o,s){var u,l,c,d;return o=void 0!==o&&o,s=void 0!==s&&s,L((function(f){switch(f.g){case 1:return u=r.closedCaptions&&r.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(l="video/mp4"==r.mimeType||"audio/mp4"==r.mimeType,c=null,i.ba&&(c=i.ba.timescale),l&&c&&"video"===r.type&&"DASH"==e.j.type&&(new aa).box("moof",oa).box("traf",oa).T("tfdt",(function(n){var r,a,o,s,u;return L((function(l){return r=no(n.reader,n.version),(a=r.baseMediaDecodeTime)?(o=-a/c,(Number(t.kf)||0)<o?(s=t.nc,u=t.mc,S(l,bl(e,t,o,s,u,i),0)):l.A(0)):l.return()}))})).parse(a,!1,o)),S(f,Sl(e,t,n),2);case 2:return Qi(e.l),d=t.bd,t.bd=!1,S(f,e.g.Oh(t.type,a),3);case 3:return S(f,Vs(e.g.Z,t.type,a,i,r,u,d,s,o),4);case 4:Qi(e.l),T(f)}}))}function Sl(e,t,n){var r,i,a,o,s,u,l,c,d;return L((function(f){return 1==f.g?((r=t.stream.segmentIndex)instanceof Nu&&(r.Ya(e.j.presentationTimeline.Hb()),i=[],function(e,t){for(var n=(e=g(e.h)).next();!n.done;n=e.next())t(n.value)}(r,(function(e){i.push(e.Te())}))),a=Math.max(e.i.bufferBehind*e.F,e.j.presentationTimeline.h),null==(o=_s(e.g.Z,t.type))?(e.H==t&&(e.H=null),f.return()):(s=n-o,u=e.i.evictionGoal,l=e.j.presentationTimeline.Xb(),c=e.j.presentationTimeline.Gb(),d=s-a,c-l>u&&(d=Math.max(s-a,l-u-o)),d<=u?f.return():S(f,e.g.Z.remove(t.type,o,o+d,i),2))):4!=f.g?(Qi(e.l),e.H?S(f,Sl(e,e.H,n),4):f.A(0)):(Qi(e.l),void T(f))}))}function Tl(e){return e&&e.type==lt&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function xl(e,t,n,r){var i,a,o,s,u;return L((function(l){switch(l.g){case 1:if(i=n.Yb())return l.return(i);if(a=null,t.ha){var c=t.ha,d=c.g;n instanceof _o&&(d=c.j),d.has(n)?(c=d.get(n),r&&(c.wh=r),a=c.je):a=null}return a||(a=Al(n,t.stream,r||null,e.i.retryParameters,e.g.sc)),o=0,t.ua&&(o=t.ua.h),t.Va=a,S(l,a.promise,2);case 2:if(s=l.h,t.Va=null,u=s.data,!n.aesKey){l.A(3);break}return S(l,al(u,n.aesKey,o),4);case 4:u=l.h;case 3:return l.return(u)}}))}function Al(e,t,n,r,i,a){a=void 0!==a&&a;var o=e instanceof Fo?e:void 0,s=o?1:0;return(e=ol(e.P(),e.startByte,e.endByte,r,n)).contentType=t.type,i.request(Xi,e,{type:s,stream:t,segment:o,isPreload:a})}function kl(e,t,n,r){var i,a;return L((function(o){return 1==o.g?(t.ec=!1,t.Kd=!1,t.ld=0,t.Ub=!0,t.La=null,t.ua=null,t.ha&&!e.m.has(t.stream)&&Ju(t.ha),r?(i=e.g.Gc(),a=e.g.Z.getDuration(),S(o,e.g.Z.remove(t.type,i+r,a),3)):S(o,Hs(e.g.Z,t.type),4)):3!=o.g?(Qi(e.l),n?S(o,e.g.Z.flush(t.type),3):o.A(3)):(Qi(e.l),t.Ub=!1,t.endOfStream=!1,t.Ja||t.qb||El(e,t,0),void T(o))}))}function El(e,t,n){var r=t.type;(r!=lt||e.h.has(r))&&(t.qb=new Tr((function(){var n;return L((function(r){return 1==r.g?(x(r,2),S(r,ml(e,t),4)):2!=r.g?k(r,0):(n=E(r),e.g&&e.g.onError(n),void T(r))}))})).ia(n))}function Il(e){null!=e.qb&&(e.qb.stop(),e.qb=null)}function Cl(e){return L((function(t){return e.Va?S(t,e.Va.abort(),0):t.A(0)}))}function Ml(e,t,n){var r;return L((function(i){if(1==i.g)return 3024==n.code?(t.Ja=!1,Il(t),El(e,t,0),i.return()):S(i,Ei(e.X),2);if(Qi(e.l),1===n.category&&1003!=n.code){if(t.Mc)return ul(e,!1),i.return();r=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)}n.handled&&1011==n.code||e.g.onError(n),n.handled||e.i.failureCallback(n),T(i)}))}function Dl(e,t){var n,r,i,a,o,s;return t=void 0!==t&&t,L((function(u){if(1==u.g){if(n=Date.now()/1e3,r=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<r)return u.return(!1);e.R=n}return i=ct,(a=e.h.get(i.ka))&&(Il(a),a.Va&&(a.Va.abort(),a.Va=null),a.pb=null,a.nc=null,a.mc=null,a.Ja=!1,a.ec=!1,a.ld=0,a.Kd=!1,a.Ub=!1,a.ua&&a.ua.eh()),(o=e.h.get(i.Aa))&&(Il(o),o.Va&&(o.Va.abort(),o.Va=null),o.pb=null,o.nc=null,o.mc=null,o.Ja=!1,o.ec=!1,o.ld=0,o.Kd=!1,o.Ub=!1,o.ua&&o.ua.eh()),s=e.g.video.paused,S(u,eu(e.g.Z,Ol(e)),2)}return!o||o.Ub||o.Ja||o.qb||El(e,o,0),!a||a.Ub||a.Ja||a.qb||El(e,a,0),s||e.g.video.play(),u.return(!0)}))}function Pl(e){if("keep"!==e.i.crossBoundaryStrategy)return!0;var t=oe();if(vt()&&t.Pc()){if(!t.Jf())for(n=(t=g(e.h.keys())).next();!n.done;n=t.next())if((n=e.h.get(n.value)).type!==ct.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,n=(t=g(n.fullMimeTypes)).next();!n.done;n=t.next())e.add(or(n.value));return e.size>1}}else for(var n=(t=g(e.h.keys())).next();!n.done;n=t.next())if((n=e.h.get(n.value)).type!==ct.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0;return!1}function Rl(e){e.G.Pa(),Pl(e)&&(e.G.D(e.g.video,"waiting",(function(){return Ll(e)})),e.G.D(e.g.video,"timeupdate",(function(){return Ll(e)})))}function Ll(e){if(Pl(e)){e.K.stop();var t=e.g.Gc(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.pb)&&null!==n.g&&((t=n.g-t)<0||t>1||(e.I=n.g+.1,e.K.ia(t)))}}function Ol(e,t){function n(t){if(t.fullMimeTypes&&t.fullMimeTypes.size>1&&e.h.has(t.type)){var n=e.h.get(t.type),r=Bs(e.g.Z,n.type),i=e.g.Gc();(n=yl(e,n,i,r))&&n.codecs&&n.mimeType&&(t.codecs=n.codecs,t.mimeType=n.mimeType)}}t=void 0!==t&&t;var r=new Map,i=e.o.audio;return i&&(n(i),r.set("audio",i)),(i=e.o.video)&&(n(i),r.set("video",i)),t&&e.B&&r.set(lt,e.B),r}function Nl(){}function jl(e,t,n,r,i){var a,o=i in r,s=o?n.constructor==Object&&0==Object.keys(r).length:n.constructor==Object&&0==Object.keys(n).length,u=o||s,l=!0;for(a in t){var c=i+"."+a,d=o?r[i]:n[a];u||a in n?void 0===t[a]?void 0===d||u?delete e[a]:e[a]=Ft(d):s?e[a]=t[a]:d.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ft(d)),c=jl(e[a],t[a],d,r,c),l=l&&c):typeof t[a]!=typeof d||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=d.constructor?(z("Invalid config, wrong type for "+c),l=!1):"function"==typeof n[a]&&n[a].length!=t[a].length?(W("Unexpected number of arguments for "+c),e[a]=t[a]):e[a]=Array.isArray(e[a])?t[a].slice():t[a]:(z("Invalid config, unrecognized key "+c),l=!1)}return l}function Ul(e,t){for(var n={},r=n,i=0,a=0;!((i=e.indexOf(".",i))<0);)0!=i&&"\\"==e[i-1]||(r[a=e.substring(a,i).replace(/\\\./g,".")]={},r=r[a],a=i+1),i+=1;return r[e.substring(a).replace(/\\\./g,".")]=t,n}function _l(e,t){return e&&t}function Bl(e,t){function n(e){return e&&"object"==typeof e&&!Array.isArray(e)}return function e(t){for(var r=g(Object.keys(t)),i=r.next();!i.done;i=r.next())if(!(t[i=i.value]instanceof HTMLElement))if(n(t[i])&&0===Object.keys(t[i]).length)delete t[i];else{var a=t[i];Array.isArray(a)&&0===a.length||"function"==typeof t[i]?delete t[i]:n(t[i])&&(e(t[i]),0===Object.keys(t[i]).length&&delete t[i])}}(e=function e(t,r){return Object.keys(t).reduce((function(i,a){var o=t[a];return r.hasOwnProperty(a)?o instanceof HTMLElement&&r[a]instanceof HTMLElement?o.isEqualNode(r[a])||(i[a]=o):n(o)&&n(r[a])?(o=e(o,r[a]),(Object.keys(o).length>0||!n(o))&&(i[a]=o)):Array.isArray(o)&&Array.isArray(r[a])?Z(o,r[a])||(i[a]=o):Number.isNaN(o)&&Number.isNaN(r[a])||o!==r[a]&&(i[a]=o):i[a]=o,i}),{})}(e,t)),e}function Fl(){}function Vl(e){return new me(e=qe(e)).Db}function Hl(e,t,n){function r(e){Ue(a).setUint32(o,e.byteLength,!0),o+=4,a.set(Ne(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new Be(2,6,6015);var i;i="string"==typeof t?ze(t,!0):t,e=ze(e=qe(e),!0);var a=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),o=0;return r(e),r(i),r(n),a}function Gl(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Hl(e,n=qe(e).split("skd://").pop(),t))}function ql(e,t){2===e&&(e=t.drmInfo)&&Si(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}function Kl(e,t,n){for(n=void 0===n||n,this.h=e,this.g=new Set([e]),t=(e=g(t=t||[])).next();!t.done;t=e.next())this.add(t.value,n)}function zl(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map((function(e){return ur(e)})),t=t.codecs.split(",").map((function(e){return ur(e)})),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Wl(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=g(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Xl(){this.g=null}function Yl(e,t){return e.filter((function(e){return!(e.audio&&e.audio.channelsCount&&e.audio.channelsCount>t)})).sort((function(e,t){return e.audio||t.audio?e.audio?t.audio?(t.audio.channelsCount||0)-(e.audio.channelsCount||0):1:-1:0}))}function Jl(e,t){return e.filter((function(e){return!e.audio||e.audio.codecs==t}))}function $l(){}function Ql(){var t=1/0,n=oe();navigator.connection&&navigator.connection.saveData&&(t=360);var r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,r){return"apple"===e.shakaMediaKeysPolyfill&&"skd"==n&&(n=r.serverCertificate,t=Hl(t,r=Vl(t),n)),t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},i="reload";vt()&&n.Pc()&&(i="smooth");var a={trackSelectionCallback:function(e){return L((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return L((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?S(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){return _l([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},o={drm:r,manifest:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:tc,manifestPreprocessorTXml:nc,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:n.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:tc,manifestPreprocessorTXml:nc,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},streaming:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return _l([e])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:i,addExtraFeaturesToSourceBuffer:function(e){return _l([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(e,t){return _l([e,t])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:a,abrFactory:function(){return new hi},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Xl,[null].concat(m(O.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return a.trackSelectionCallback=function(e){return L((function(t){return t.return(function(e,t,n){var r=n;"AUTO"==r&&(n=e.some((function(e){return!(!e.hdr||"HLG"!=e.hdr)})),r=oe().sd(n));var i=e.filter((function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=r)}));n=[];var a=jr(t,i.map((function(e){return e.language})));a&&(n=i.filter((function(e){return Rr(e.language)==a}))),0==n.length&&(n=i.filter((function(e){return e.primary}))),0==n.length&&(i.map((function(e){return e.language})),n=i);var o=n.filter((function(e){return e.height&&e.height<=480}));for(o.length&&(o.sort((function(e,t){return t.height-e.height})),n=o.filter((function(e){return e.height==o[0].height}))),t=[],n.length&&(i=Math.floor(n.length/2),n.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(n[i])),e=g(e),n=e.next();!n.done;n=e.next())(n=n.value).type!=lt&&"image"!=n.type||t.push(n);return t}(e,o.preferredAudioLanguage,o.preferredVideoHdrLevel))}))},n.Wa(o)}function Zl(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function ec(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return jl(e,t,n||Ql(),r,"")}function tc(e){return _l([e],e)}function nc(e){return _l([e],e)}function rc(){this.g=null,this.h=[]}function ic(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=(e=g(e.h)).next();!r.done;r=e.next())n+=(r=r.value).state==t?r.duration:0;return n}function ac(){this.i=this.h=null,this.g=[]}function oc(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function sc(){this.C=this.X=NaN,this.l="",this.j=this.ni=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.S=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new rc,this.h=new ac}function uc(e,t,n){e.X=t,e.C=n}function lc(e,t){e.j=isNaN(e.j)?t:e.j+t}function cc(e){for(var t=e.X,n=e.C,r=e.l,i=e.B,a=e.O,o=e.R,s=e.N,u=e.V,l=e.S,c=e.u,d=e.i,f=e.G,p=e.J,h=e.m,m=ic(e.g,"playing"),y=ic(e.g,"paused"),v=ic(e.g,"buffering"),b=e.o,w=e.F,S=e.K,T=e.ni,x=e.j,A=e.M,k=e.I,E=e.H,I=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=g(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(e.g),C=[],M=(e=g(e.h.g)).next();!M.done;M=e.next())M=M.value,C.push({timestamp:M.timestamp,id:M.id,type:M.type,fromAdaptation:M.fromAdaptation,bandwidth:M.bandwidth});return{width:t,height:n,currentCodecs:r,streamBandwidth:i,decodedFrames:a,droppedFrames:o,corruptedFrames:s,stallsDetected:u,gapsJumped:l,estimatedBandwidth:c,completionPercent:d,loadLatency:f,manifestTimeSeconds:p,drmTimeSeconds:h,playTime:m,pauseTime:y,bufferingTime:v,licenseTime:b,liveLatency:w,maxSegmentDuration:S,manifestSizeBytes:T,bytesDownloaded:x,nonFatalErrorCount:A,manifestPeriodCount:k,manifestGapCount:E,stateHistory:I,switchHistory:C}}function dc(e,t,n,r){Ui.call(this),this.N=e,this.V=t,this.Da=r.networkingEngine,this.m=n,this.C=null,this.ya=0,this.Sa=r.md,this.G=r.vk,this.Ta=r.wk,this.g=r.config,this.l=this.H=this.h=null,this.oa=!1,this.I=r.Hk,this.wa=!1,this.i=null,this.aa=!1,this.u=null,this.M=new Map,this.xa=!1,this.Fa=r.Gk,this.X=new sc,this.ma=new Ii,this.B=new Ii,this.O=null,this.j=!1,this.$=r.ij,this.S=this.o=null,this.R=!1,this.K=[],this.J=[],this.F=!0}function fc(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function pc(e,t){if(e.O=t,e.R=!0,e.K)for(var n=(t=g(e.K)).next();!n.done;n=t.next())(n=n.value)();e.K=null}function hc(e){if(e.j)throw new Be(2,7,7003)}function gc(e,t){e.dispatchEvent(new Oi("onstatechange",(new Map).set("state",t)))}function mc(e,t){var n,r,i;return L((function(a){switch(a.g){case 1:return!e.h||e.i?a.return():(gc(e,"drm-engine"),e.ya=Date.now()/1e3,e.i=e.Sa(),e.G.h=e.i,e.i.configure(e.g.drm,(function(){return e.F})),n=ni(e.h.variants),r=!0,e.h&&e.h.presentationTimeline&&(r=e.h.presentationTimeline.W()),S(a,ba(e.i,n,e.h.offlineSessionIds,r),2));case 2:if(hc(e),!t){a.A(3);break}return S(a,e.i.fc(t),4);case 4:hc(e);case 3:return S(a,Ka(e.G,e.h),5);case 5:if(!a.h){a.A(0);break}return i=new Oi("trackschanged",void 0),S(a,Promise.resolve(),7);case 7:e.dispatchEvent(i),T(a)}}))}function yc(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=ni(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function vc(e,t,n){var r,i,a,o,s;return L((function(u){return 1==u.g?(r=e.g.streaming.segmentPrefetchLimit||2,i=new Ku(r,t,(function(t,n,r){return Al(t,n,r||null,e.g.streaming.retryParameters,e.Da,e.F)}),!1),e.M.set(t.id,i),t.segmentIndex?u.A(2):S(u,t.createSegmentIndex(),2)):(a="number"==typeof e.m?e.m:0,o=t.segmentIndex.Vb(a),s=null,o&&((s=o.current())||(s=o.next().value)),s||(s=Ru(t.segmentIndex)),s?n?s.ba?S(u,Xu(i,s.ba),0):u.A(0):S(u,Wu(i,s.startTime),0):u.A(0))}))}function bc(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function wc(e,t){Ui.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:xc,Uc:function(e,t){return Sc(n,"enter",e,t)}},{kd:Tc,jd:xc,Uc:function(e,t){return Sc(n,"enter",e,t)}},{kd:Ac,jd:xc,Uc:function(e,t){return Sc(n,"enter",e,t)}},{kd:xc,jd:Tc,Uc:function(e,t){return Sc(n,"exit",e,t)}},{kd:xc,jd:Ac,Uc:function(e,t){return Sc(n,"exit",e,t)}},{kd:Tc,jd:Ac,Uc:function(e,t){t?Sc(n,"skip",e,t):(Sc(n,"enter",e,t),Sc(n,"exit",e,t))}},{kd:Ac,jd:Tc,Uc:function(e,t){return Sc(n,"skip",e,t)}}],this.h=new ne,this.h.D(this.i,"regionremove",(function(e){n.g.delete(e.region)}))}function Sc(e,t,n,r){t=new Oi(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}mu.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},Su.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},(i=xu.prototype).ready=function(){var e=this;hu(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,(function(){!function(){if(null==e.h||0==e.h&&e.g.duration!=1/0)e.i=!0;else{var t=e.g.currentTime,n=null;if("number"==typeof e.h)n=e.h;else if(e.h instanceof Date){var r=Au(e);null!==r&&(n=e.h.getTime()/1e3-r,n=ku(e,n))}null==n?e.i=!0:(n<0&&(n=Math.max(0,t+n)),t!=n?(e.j.Ba(e.g,"seeking",(function(){e.i=!0})),e.g.currentTime=n):e.i=!0)}}()}))},i.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},i.Wf=function(e){this.h=this.i?this.h:e},i.He=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=ku(this,e=e.getTime()/1e3-(Au(this)||0))),e||0},i.Ih=function(){return 0},i.Gh=function(){return 0},i.Hh=function(){return!1},i.xi=function(){},i.ki=function(){var e=Wo(this.g.buffered);return null!=e&&e>=this.g.duration-1},(i=Eu.prototype).ready=function(){this.m.Ea(.25)},i.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},i.Wf=function(e){vu(this.j,Iu(this,e))},i.He=function(){var e=yu(this.j);return this.h.readyState>0&&!this.h.paused?Du(this,e):e},i.Ih=function(){return this.i.H},i.Gh=function(){return this.i.G},i.Hh=function(){return this.i.C},i.xi=function(){this.i.wf()},i.ki=function(){if(this.g.W()){var e=this.g.Hc(),t=Wo(this.h.buffered);if(null!=t&&t>=e)return!0}return!1},(i=Pu.prototype).getNumReferences=function(){return this.g.length},i.getNumEvicted=function(){return this.i},i.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},i.yk=function(){this.o=!0},i.Fb=function(e){for(var t=g(this.g),n=t.next();!n.done;n=t.next())e(n.value)},i.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length||(e-=this.i)<0||e>=this.g.length?null:this.g[e]},i.offset=function(e){if(!this.o)for(var t=g(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.nf=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t})),this.g.push.apply(this.g,m(e))}},i.fe=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)})),this.nf(e),this.Ya(t)},i.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e})),this.i+=t-this.g.length}},i.pd=function(e,t,n){if(n=void 0!==n&&n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&((t=new Fo((e=this.g[this.g.length-1]).startTime,t,e.C,e.startByte,e.endByte,e.ba,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey)).mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},i.Nf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new xr((function(){var e=t();e?n.g.push.apply(n.g,m(e)):(n.m.stop(),n.m=null)})),this.m.Ea(e))},Pu.prototype[Symbol.iterator]=function(){return this.Vb(0)},Pu.prototype.Vb=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var r=this.find(e);if(null==r)return null;var i=this.get(r);n?r++:r--;var a=-1;if(i&&i.g.length>0)for(var o=i.g.length-1;o>=0;--o){var s=i.g[o];if(e>=s.startTime&&e<s.endTime){if(!t){for(;o&&!s.l;)o--,s=i.g[o];if(!s.l)return z("No independent partial segment found!"),null}n?r--:r++,a=o-1;break}}return new Ou(this,r,a,n)},Pu.prototype.Te=function(){return-1},V("shaka.media.SegmentIndex",Pu),Pu.forSingleSegment=Lu,Pu.prototype.getIteratorForTime=Pu.prototype.Vb,Pu.prototype.updateEvery=Pu.prototype.Nf,Pu.prototype.fit=Pu.prototype.pd,Pu.prototype.evict=Pu.prototype.Ya,Pu.prototype.mergeAndEvict=Pu.prototype.fe,Pu.prototype.offset=Pu.prototype.offset,Pu.prototype.get=Pu.prototype.get,Pu.prototype.find=Pu.prototype.find,Pu.prototype.markImmutable=Pu.prototype.yk,Pu.prototype.release=Pu.prototype.release,Pu.prototype.getNumEvicted=Pu.prototype.getNumEvicted,Pu.prototype.getNumReferences=Pu.prototype.getNumReferences,(i=Ou.prototype).Id=function(e){this.reverse=e},i.tj=function(){return this.h},i.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.m&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},i.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.m&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},i.eh=function(){var e=this.current();if(e&&e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},V("shaka.media.SegmentIterator",Ou),Ou.prototype.resetToLastIndependent=Ou.prototype.eh,Ou.prototype.next=Ou.prototype.next,Ou.prototype.current=Ou.prototype.current,Ou.prototype.currentPosition=Ou.prototype.tj,Ou.prototype.setReverse=Ou.prototype.Id,p(Nu,Pu),(i=Nu.prototype).clone=function(){var e=new Nu;return e.h=this.h.slice(),e.i=this.i,e},i.release=function(){this.h=[]},i.Fb=function(e){for(var t=g(this.h),n=t.next();!n.done;n=t.next())n.value.Fb(e)},i.find=function(e){for(var t=this.i,n=g(this.h),r=n.next();!r.done;r=n.next()){var i=(r=r.value).find(e);if(null!=i)return i+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},i.get=function(e){for(var t=this.i,n=g(this.h),r=n.next();!r.done;r=n.next()){var i=(r=r.value).get(e-t);if(i)return i;i=r.getNumReferences(),t+=r.getNumEvicted()+i}return null},i.offset=function(){},i.nf=function(){},i.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),0==t.getNumReferences()&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},i.fe=function(){},i.pd=function(){},i.Nf=function(){},V("shaka.media.MetaSegmentIndex",Nu),Nu.prototype.updateEvery=Nu.prototype.Nf,Nu.prototype.fit=Nu.prototype.pd,Nu.prototype.mergeAndEvict=Nu.prototype.fe,Nu.prototype.evict=Nu.prototype.Ya,Nu.prototype.merge=Nu.prototype.nf,Nu.prototype.offset=Nu.prototype.offset,Nu.prototype.get=Nu.prototype.get,Nu.prototype.find=Nu.prototype.find,Nu.prototype.forEachTopLevelReference=Nu.prototype.Fb,Nu.prototype.release=Nu.prototype.release,ju.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},ju.prototype.set=function(e){this.i=e,Uu(this)},ju.prototype.Tc=function(){return this.g.Tc()},_u.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},p(Fu,Ui),Fu.prototype.release=function(){this.g.clear(),Ui.prototype.release.call(this)},Fu.prototype.j=function(e){for(var t=g(this.g.values()),n=t.next();!n.done;n=t.next()){var r=(n=n.value).lg;e:{for(var i=n.me,a=i.length-1;a>=0;a--){var o=i[a];if(o.position<=e){i=o.xd;break e}}i=null}a=i&&!(r===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width),o=i&&r&&i.label&&r.label&&r.label!==i.label;var s=i&&r&&i.language&&r.language&&r.language!==i.language;r=i&&r&&i.roles&&r.roles&&!ee(r.roles,i.roles),(o||s||r)&&Vu(this,e,i.contentType)&&(n.lg=i,r=new Oi("audiotrackchange",new Map([["quality",i],["position",e]])),this.dispatchEvent(r)),a&&Vu(this,e,i.contentType)&&(n.lg=i,JSON.stringify(i),n=new Oi("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},p(Gu,Ui),Gu.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Ui.prototype.release.call(this)},Ku.prototype.Ya=function(e,t){t=void 0!==t&&t;for(var n=g(this.g.keys()),r=n.next();!r.done;r=n.next())e>(r=r.value).endTime&&Zu(this,r);t&&$u(this)},Ku.prototype.Id=function(e){this.o=e,this.h&&this.h.Id(e)},el.prototype.abort=function(){this.je&&this.je.abort()},V("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"}),(i=sl.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e){if(this.i=e,this.X=new ki({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ha&&(Ju(t.ha),t.ha=null);for(var n=(t=g(this.m.keys())).next();!n.done;n=t.next())n=n.value,Ju(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(lt))&&t.ha&&(Ju(t.ha),t.ha=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ha&&(Ju(t.ha),t.ha=null),n=(t=g(this.h.keys())).next();!n.done;n=t.next())(n=this.h.get(n.value)).ha?(Qu(n.ha,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(Ju(n.ha),n.ha=null)):e.segmentPrefetchLimit>0&&(n.ha=gl(this,n.stream));e.disableAudioPrefetch||function(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,r=g(e.j.variants),i=r.next(),a={};!i.done;a={Mb:void 0},i=r.next())if(a.Mb=i.value,a.Mb.audio)if(e.m.has(a.Mb.audio)){if(Qu(i=e.m.get(a.Mb.audio),t),!(t>0&&n.some(function(e){return function(t){return Mr(e.Mb.audio.language,t)}}(a)))){var o=e.h.get(a.Mb.audio.type);i!==(o&&o.ha)&&Ju(i),e.m.delete(a.Mb.audio)}}else t<=0||!n.some(function(e){return function(t){return Mr(e.Mb.audio.language,t)}}(a))||!(i=gl(e,a.Mb.audio))||(a.Mb.audio.segmentIndex||a.Mb.audio.createSegmentIndex(),e.m.set(a.Mb.audio,i))}(this)},i.start=function(e){var t=this;return L((function(n){if(1==n.g)return S(n,function(e,t){var n,r,i,a,o,s,u;return L((function(l){if(1==l.g){if(!e.o)throw new Be(2,5,5006);return n=Ol(e,!0),S(l,e.g.Z.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Qi(e.l),e.updateDuration(),r=g(n.keys()),i=r.next();!i.done;i=r.next())a=i.value,o=n.get(a),e.h.has(a)||(s=hl(e,o),t.has(o.id)&&(zu(u=t.get(o.id),(function(t,n,r){return Al(t,n,r||null,e.i.retryParameters,e.g.sc)})),s.ha=u),e.h.set(a,s),El(e,s,0));Rl(e),T(l)}))}(t,e||new Map),2);Qi(t.l),t.N=!0,T(n)}))},i.bd=function(){if(this.g){for(var e=this.g.Gc(),t=g(this.h.keys()),n=t.next();!n.done;n=t.next()){var r,i=n.value;if(n=this.h.get(i),(r=!this.J)&&(r=this.g.Z,i==lt?r=null!=(r=r.h).g&&null!=r.h&&(e>=r.g&&e<r.h):r=Xo(r=Fs(r,i),e),r=!r),r){if(this.R=0,n.ha&&(n.ha.h=null),"audio"===n.type)for(var a=(r=g(this.m.values())).next();!a.done;a=r.next())a.value.h=null;n.ua=null,(null!=Bs(this.g.Z,i)||n.Ja)&&pl(this,n),n.Va&&(n.Va.abort(),n.Va=null),i===lt&&((i=this.g.Z).J&&i.J.Nd()),n.bd=!0}!this.J||n.Ub||n.Ja||n.qb||El(this,n,0)}Pl(this)&&Ll(this)}},i.updateDuration=function(){var e=bt(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),qs(this.g.Z)),this.g.Z.Ab(t)):e?(this.u&&this.u.Ea(.5),this.g.Z.Ab(1/0)):this.g.Z.Ab(4294967296)},V("shaka.util.ConfigUtils",Nl),Nl.getDifferenceFromConfigObjects=Bl,Nl.convertToConfigObject=Ul,Nl.mergeConfigObjects=jl,V("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2}),V("shaka.drm.FairPlay",Fl),Fl.commonFairPlayResponse=function(e,t){if(2===e&&(e=t.originalRequest.drmInfo)&&Si(e.keySystem)){try{var n=He(t.data)}catch(e){return}if(e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0),!e)try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(e){}e&&(t.data=Oe(Ze(n)))}},Fl.muxFairPlayRequest=function(e,t){ql(e,t)},Fl.expressplayFairPlayRequest=function(e,t){if(2===e){var n=t.drmInfo;n&&Si(n.keySystem)&&ql(e,t)}},Fl.conaxFairPlayRequest=function(e,t){ql(e,t)},Fl.ezdrmFairPlayRequest=function(e,t){ql(e,t)},Fl.verimatrixFairPlayRequest=function(e,t){2===e&&(e=t.drmInfo)&&Si(e.keySystem)&&(e=Qe(e=Ne(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ke("spc="+e))},Fl.muxInitDataTransform=function(e,t,n){return Gl(e,t,n)},Fl.expressplayInitDataTransform=function(e,t,n){return Gl(e,t,n)},Fl.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=qe(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var i=new ArrayBuffer(2*r.length);i=je(i);for(var a=0,o=r.length;a<o;a++)i[a]=r.charCodeAt(a);return Hl(t,i,n)},Fl.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Hl(e,n=qe(e).split(";").pop(),t))},Fl.verimatrixInitDataTransform=function(e,t,n){return Gl(e,t,n)},Fl.initDataTransform=Hl,Fl.defaultGetContentId=Vl,Fl.isFairPlaySupported=function(){var e;return L((function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},x(t,2),S(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(E(t),t.return(!1))}))},Kl.prototype.add=function(e,t){var n,r=this.h;if(t=void 0===t||t,!(n=!!r.audio!=!!e.audio||!!r.video!=!!e.video||r.language!=e.language)&&(n=r.audio&&e.audio)){n=r.audio;var i=e.audio;n=!(!((!n.channelsCount||!i.channelsCount||n.channelsCount>2||i.channelsCount>2)&&n.channelsCount!=i.channelsCount||n.spatialAudio!==i.spatialAudio||t&&!zl(n,i))&&Wl(n.roles,i.roles)&&n.groupId===i.groupId)}return!n&&(n=r.video&&e.video)&&(r=r.video,n=e.video,n=!((!t||zl(r,n))&&Wl(r.roles,n.roles))),!n&&(this.g.add(e),!0)},Kl.prototype.values=function(){return this.g.values()},V("shaka.media.AdaptationSet",Kl),Xl.prototype.configure=function(e){this.g=e},Xl.prototype.getConfiguration=function(){return this.g},Xl.prototype.create=function(e){var t;if(this.g.language){var n=function(e,t){var n=jr(t=Rr(t),e.map((function(e){return Nr(e)})));return n?e.filter((function(e){return n==Nr(e)})):[]}(e,this.g.language);n.length&&(t=n)}t||(t=(t=e.filter((function(e){return e.primary}))).length?t:e),(e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t,this.g.role)).length&&(t=e),(e=function(e,t){return e.filter((function(e){return!!e.video&&(t?e.video.roles.includes(t):0==e.video.roles.length)}))}(t,this.g.videoRole)).length&&(t=e),this.g.videoLayout&&((e=function(e,t){return e.filter((function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t}))}(t,this.g.videoLayout)).length&&(t=e)),this.g.hdrLevel&&((e=function(e,t){if("AUTO"==t){var n=e.some((function(e){return!(!e.video||!e.video.hdr||"HLG"!=e.video.hdr)}));t=oe().sd(n)}return e.filter((function(e){return!e.video||!e.video.hdr||e.video.hdr==t}))}(t,this.g.hdrLevel)).length&&(t=e));var r=[this.g.channelCount,this.g.preferredAudioChannelCount];if((e=r.filter((function(e,t){return e&&r.indexOf(e)===t}))).length)for(n=(e=g(e)).next();!n.done;n=e.next())if((n=Yl(t,n.value)).length){t=n;break}this.g.audioLabel&&((e=function(e,t){return e.filter((function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.g.audioLabel)).length&&(t=e)),this.g.videoLabel&&((e=function(e,t){return e.filter((function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()}))}(t,this.g.videoLabel)).length&&(t=e)),(e=function(e,t){return e.filter((function(e){return!e.audio||e.audio.spatialAudio==t}))}(t,this.g.spatialAudio)).length&&(t=e);var i=[this.g.audioCodec,this.g.activeAudioCodec].concat(m(this.g.preferredAudioCodecs));if((e=i.filter((function(e,t){return e&&i.indexOf(e)===t}))).length)for(n=(e=g(e)).next();!n.done;n=e.next())if((n=Jl(t,n.value)).length){t=n;break}return new Kl(t[0],t,!("smooth"==this.g.codecSwitchingStrategy&&vt()))},V("shaka.util.PlayerConfiguration",$l),$l.mergeConfigObjects=ec,$l.createDefaultForLL=Zl,$l.createDefault=Ql,p(dc,Ui),(i=dc.prototype).getStartTime=function(){return this.m},i.rd=function(){return this.N},i.Hg=function(){return this.h},i.getStats=function(){return this.X},i.Rj=function(){return this.o?Yr(this.o):null},i.Qj=function(){return this.S?Jr(this.S):null},i.start=function(){var t,n=this;L((function(r){switch(r.g){case 1:return S(r,Promise.resolve(),2);case 2:return x(r,3),S(r,function(e){var t,n,r,i,a;return L((function(o){switch(o.g){case 1:if(gc(e,"manifest-parser"),e.l||(e.H=Za(e.N,e.V),e.l=e.H(),e.l.configure(e.g.manifest,(function(){return e.F}))),t=Date.now()/1e3,gc(e,"manifest"),e.h){o.A(2);break}return S(o,e.l.start(e.N,e.Ta),3);case 3:return e.h=o.h,bc(e.h),S(o,function(e){var t,n,r,i,a;return L((function(o){if(e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:e.g.preferredAudioChannelCount,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),1!=e.h.variants.length&&"HLS"!=e.h.type)return o.A(0);if(!(t=yc(e)))return o.A(0);for(n=[],r=g([t.video,t.audio]),i=r.next();!i.done;i=r.next())(a=i.value)&&!a.segmentIndex&&n.push(a.createSegmentIndex());return n.length>0?S(o,Promise.all(n),0):o.A(0)}))}(e),2);case 2:return e.ma.resolve(),n=new Oi("manifestparsed",void 0),S(o,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),0==e.h.variants.length)throw new Be(2,4,4036);if(bc(e.h),!za(e.G,e.h)){o.A(6);break}return r=new Oi("trackschanged",void 0),S(o,Promise.resolve(),7);case 7:hc(e),e.dispatchEvent(r);case 6:i=Date.now()/1e3,a=i-t,e.X.J=a,T(o)}}))}(n),5);case 5:if(hc(n),"webkit"===e.shakaMediaKeysPolyfill){r.A(6);break}return S(r,mc(n),7);case 7:hc(n);case 6:if(!n.$){r.A(8);break}return S(r,function(e){var t,n,r,i,a;return L((function(o){return!e.o&&(t=yc(e))&&(e.o=t),e.o?(n=e.h.presentationTimeline.W(),r=[],(i=e.o).video&&r.push(vc(e,i.video,n)),i.audio&&r.push(vc(e,i.audio,n)),(a=ri(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&ui(i.audio,a,e.g)&&(r.push(vc(e,a,n)),e.S=a),S(o,Promise.all(r),0)):o.A(0)}))}(n),9);case 9:hc(n);case 8:if(!n.$||!n.i){r.A(10);break}return S(r,function(e){return L((function(t){return 1==t.g?e.K?S(t,e.m,3):t.A(0):S(t,Promise.all(e.X.map((function(e){return e.promise}))),0)}))}(n.i),11);case 11:hc(n);case 10:n.B.resolve(),k(r,0);break;case 3:(t=E(r))instanceof Be&&(7001==t.code||7003==t.code)||n.B.reject(t),T(r)}}))},i.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Ui.prototype.dispatchEvent.call(this,e)},i.onError=function(e){2===e.severity&&(this.B.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new Oi("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},i.configure=function(e,t){e=Ul(e,t),ec(this.g,e)},i.getConfiguration=function(){return Ft(this.g)},i.ll=function(){return this.B},i.destroy=function(){var e,t,n=this;return L((function(r){if(1==r.g)return n.j=!0,!n.l||n.oa?r.A(2):S(r,n.l.stop(),2);if(4!=r.g)return n.u&&n.u.release(),n.I&&!n.wa&&n.I.release(),!n.i||n.aa?r.A(4):S(r,n.i.destroy(),4);if(n.M.size>0&&!n.xa)for(e=g(n.M.values()),t=e.next();!t.done;t=e.next())Ju(t.value);T(r)}))},V("shaka.media.PreloadManager",dc),dc.prototype.destroy=dc.prototype.destroy,dc.prototype.waitForFinish=dc.prototype.ll,dc.prototype.getPrefetchedTextTrack=dc.prototype.Qj,dc.prototype.getPrefetchedVariantTrack=dc.prototype.Rj,p(wc,Ui),wc.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Ui.prototype.release.call(this)},wc.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=g(this.i.h.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),a=e<r.startTime?Tc:e>r.endTime?Ac:xc;this.g.set(r,a);for(var o=g(this.m),s=o.next();!s.done;s=o.next())(s=s.value).kd==i&&s.jd==a&&s.Uc(r,t)}}};var Tc=1,xc=2,Ac=3;function kc(e,t,n){var r,i,a,o,s,u,l;return L((function(c){switch(c.g){case 1:return r=Ec(e),(i=Ic.get(r))?c.return(i):(a=0,o=Gi([e],n),x(c,2),o.method="HEAD",S(c,t.request(a,o).promise,4));case 4:s=c.h,i=s.headers["content-type"],k(c,3);break;case 2:if(!(u=E(c))||1002!=u.code&&1001!=u.code){c.A(3);break}return o.method="GET",S(c,t.request(a,o).promise,6);case 6:l=c.h,i=l.headers["content-type"];case 3:return c.return(i?i.toLowerCase().split(";").shift():"")}}))}function Ec(e){return 1==(e=new me(e).Sb.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}for(var Ic=(new Map).set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html"),Cc={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},Mc=g(Object.keys(Cc)),Dc=Mc.next();!Dc.done;Dc=Mc.next()){var Pc=Dc.value;Cc[Pc.toLowerCase()]=Cc[Pc]}function Rc(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map((function(t){return Rc(t,e)})).join("");if(!e.payload)return e.payload;var n=[],r=e.fontWeight>=Hn,i=e.fontStyle==qn,a=e.textDecoration.includes(zn);return r&&n.push(["b"]),i&&n.push(["i"]),a&&n.push(["u"]),""==(i=e.color)&&t&&(i=t.color),r="",(i=Lc(i))&&(r+="."+i),""==(i=e.backgroundColor)&&t&&(i=t.backgroundColor),(t=Lc(i))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight((function(e,t){var n=g(t);return"<"+(t=n.next().value)+(void 0===(n=n.next().value)?"":n)+">"+e+"</"+t+">"}),e.payload)}function Lc(e){var t=(e=e.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Oc(e,t){for(var n=[],r=(e=g(Nc(e))).next();!r.done;r=e.next())if((r=r.value).isContainer)n.push.apply(n,m(Oc(r.nestedCues,r)));else{var i=r.clone();i.nestedCues=[],i.payload=Rc(r,t),n.push(i)}return n}function Nc(e){for(var t=[],n=(e=g(e)).next(),r={};!n.done;r={ig:void 0},n=e.next())r.ig=n.value,t.some(function(e){return function(t){return An(e.ig,t)}}(r))||t.push(r.ig);return t}function jc(e){function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),"vertical-lr"==e.writingMode?n.vertical="lr":"vertical-rl"==e.writingMode&&(n.vertical="rl"),1==e.lineInterpretation&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}function Uc(e,t){var n=Oc(t),r=[];t=e.cues?Array.from(e.cues):[];for(var i=(n=g(n)).next(),a={};!i.done;a={vd:void 0},i=n.next())a.vd=i.value,!t.some(function(e){return function(t){return t.startTime==e.vd.startTime&&t.endTime==e.vd.endTime&&t.text==e.vd.payload}}(a))&&a.vd.payload&&(i=jc(a.vd))&&r.push(i);for(n=(t=g(t=r.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?r.indexOf(t)-r.indexOf(e):r.indexOf(e)-r.indexOf(t)})))).next();!n.done;n=t.next())e.addCue(n.value)}function _c(e,t){var n=!1;"disabled"===e.mode&&(n=!0,e.mode="hidden");for(var r=0;r<e.cues.length;){var i=e.cues[r];t(i)?e.removeCue(i):r++}n&&(e.mode="disabled")}function Bc(e){var t=this;this.i=e,this.l=new ne,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var e=g(t.h.values()),n=e.next();!n.done;n=e.next())n.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){for(var e=new Map,n=t.i.Kc(),r=(n=g(n)).next();!r.done;r=n.next()){if(r=r.value,t.h.has(r.id)){var i=t.h.get(r.id);r.active||"disabled"===i.track.mode||(i.track.mode="disabled"),t.h.delete(r.id)}else{(i=t.j.ownerDocument.createElement("track")).kind=Fc(r);var a=i,o=void 0;if(r.label)o=r.label;else if(r.language)if(r.language in Cc)o=Cc[r.language];else{var s=Or(r.language);s in Cc&&(o=Cc[s]+" ("+r.language+")")}o||(o=r.originalTextId,r.language&&r.language!==r.originalTextId&&(o+=" ("+r.language+")")),a.label=o,r.language in Cc&&(i.srclang=r.language),i.src="data:,WEBVTT",i.track.mode="disabled",t.j.appendChild(i)}e.set(r.id,i),r.active&&(t.g=r.id)}for(r=(n=g(t.h.values())).next();!r.done;r=n.next())r.value.remove();t.g>-1&&(e.has(t.g)?"disabled"===(n=e.get(t.g).track).mode&&(n.mode=t.u?"showing":"hidden"):t.g=-1),t.h=e},this.B=function(){if(!t.o){var e=t.j;t.o=new xr((function(){if(t.o=null,t.j===e){var n=-1,r=!1;if(t.h.has(t.g)){var i=t.h.get(t.g);"showing"===i.track.mode?(n=t.g,r=!0):"hidden"===i.track.mode&&(n=t.g)}if(!r)for(i=(r=g(t.h)).next();!i.done;i=r.next()){var a=g(i.value);if(i=a.next().value,"showing"===(a=a.next().value).track.mode){n=i;break}n<0&&"hidden"===a.track.mode&&(n=i)}for(i=(r=g(t.h)).next();!i.done;i=r.next())i=(a=g(i.value)).next().value,a=a.next().value,i!==n&&"disabled"!==a.track.mode&&(a.track.mode="disabled");t.g!==n&&(t.g=n,n>-1&&t.i.kh({id:n})),t.i.qh(n>-1&&"showing"===t.h.get(n).track.mode)}})).ia(0)}},this.l.D(e,"loaded",(function(){return t.enableTextDisplayer()})),this.enableTextDisplayer()}function Fc(e){var t=oe();return e.forced&&"WEBKIT"===t.Ha()?"forced":"caption"===e.kind||e.roles&&e.roles.some((function(e){return e.includes("transcribes-spoken-dialog")}))&&e.roles.some((function(e){return e.includes("describes-music-and-sound")}))?"captions":"subtitles"}function Vc(e,t){for(de("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,t=(e=g(Array.from(this.h.textTracks))).next();!t.done;t=e.next())"metadata"!==(t=t.value).kind&&"chapters"!==t.kind&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}function Hc(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function Gc(){}function qc(t,n){var r=this;this.m=!1,this.h=[],this.j=t,this.o=n,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new xr((function(){r.j.paused||Xc(r)})),Kc(this),this.l=new Map,this.i=new ne,this.i.D(document,"fullscreenchange",(function(){Xc(r,!0)})),this.i.D(this.j,"seeking",(function(){Xc(r,!0)})),this.i.D(this.j,"ratechange",(function(){Kc(r)})),this.i.D(this.j,"resize",(function(){var e=r.j,t=e.videoWidth;e=e.videoHeight,r.u=t&&e?t/e:null})),this.F=null,"ResizeObserver"in e&&(this.F=new ResizeObserver((function(){Xc(r,!0)})),this.F.observe(this.g)),this.G=new Map}function Kc(e){e.B&&(e.h.length?e.B.Ea((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function zc(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Wc(e,t,n,r,i){for(var a=!1,o=[],s=[],u=(t=g(t)).next();!u.done;u=t.next()){u=u.value,i.push(u);var l=e.l.get(u),c=u.startTime<=r&&u.endTime>r,d=l?l.gj:null;l&&(o.push(l.kg),l.$c&&o.push(l.$c),c||(a=!0,e.l.delete(u),l=null)),c&&(s.push(u),l?zc(e,d)||(a=!0):(Yc(e,u,i),d=(l=e.l.get(u)).gj,a=!0)),u.nestedCues.length>0&&d&&Wc(e,u.nestedCues,d,r,i),i.pop()}if(a){for(i=(r=g(o)).next();!i.done;i=r.next())(i=i.value).parentElement&&i.parentElement.removeChild(i);for(s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),r=(s=g(s)).next();!r.done;r=s.next())(r=e.l.get(r.value)).$c?(r.$c.contains(n)&&r.$c.removeChild(n),n.appendChild(r.$c),r.$c.appendChild(r.kg)):n.appendChild(r.kg)}}function Xc(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||void 0!==t&&t){for(var r=(t=g(e.G.values())).next();!r.done;r=t.next())es(r.value);es(e.g),e.l.clear(),e.G.clear()}e.m&&Wc(e,e.h,e.g,n,[])}}function Yc(e,t,n){var r=n.length>1,i=r?"span":"div";t.lineBreak&&(i="br"),t.rubyTag&&(i=t.rubyTag),r=!r&&t.nestedCues.length>0;var a=document.createElement(i);if("br"!=i&&function(e,t,n,r,i){var a=t.style,o=0==n.nestedCues.length,s=r.length>1;a.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)}));if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=Jc(n.linePadding,n,e.o),a.paddingRight=Jc(n.linePadding,n,e.o),a.textCombineUpright=n.textCombineUpright,a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",n.backgroundColor&&(a.backgroundColor=n.backgroundColor),a.width="100%",a.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),i||((t=function(e,t){for(var n=e.length-1;n>=0;n--){var r=t(e[n]);if(r||0===r)return r}return null}(r,(function(e){return e.backgroundColor})))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),u&&(l.setAttribute("translate","no"),l.textContent=u)}s&&!r[r.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center","left"==n.textAlign||"start"==n.textAlign?(a.width="100%",a.alignItems="start"):"right"!=n.textAlign&&"end"!=n.textAlign||(a.width="100%",a.alignItems="end"),a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end");o||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,a.fontSize=Jc(n.fontSize,n,e.o,e.C?e.C.fontScaleFactor:1),null!=(r=n.line)&&((o=n.lineInterpretation)==jn&&(o=1,s=16,e.u&&e.u<1&&(s=32),r=r<0?100+r/s*100:r/s*100),1==o&&(a.position="absolute",n.writingMode==Nn?(a.width="100%",n.lineAlign==Un?a.top=r+"%":"end"==n.lineAlign&&(a.bottom=100-r+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==Un?a.left=r+"%":"end"==n.lineAlign&&(a.right=100-r+"%")):(a.height="100%",n.lineAlign==Un?a.right=r+"%":"end"==n.lineAlign&&(a.left=100-r+"%")))),a.lineHeight=n.lineHeight,"line-left"==(e=function(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Mn?n:"left"===e||"start"===e&&t===On||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===On?"line-right":"center"}(n))?(a.cssFloat="left",null!==n.position&&(a.position="absolute",n.writingMode==Nn?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%")):"line-right"==e?(a.cssFloat="right",null!==n.position&&(a.position="absolute",n.writingMode==Nn?(a.right=100-n.position+"%",a.width="auto"):a.bottom=n.position+"%")):null!==n.position&&50!=n.position&&(a.position="absolute",n.writingMode==Nn?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%",n.size&&(a.transform="translateX(-50%)")),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Nn?a.width=n.size+"%":a.height=n.size+"%")}(e,a,t,n,r),n=null,t.region&&t.region.id){var o=t.region,s=e.u===4/3?2.5:1.9;if(n=o.id+"_"+o.width+"x"+o.height+(o.heightUnits==Dt?"%":"px")+"-"+o.viewportAnchorX+"x"+o.viewportAnchorY+(o.viewportAnchorUnits==Dt?"%":"px"),e.G.has(n))n=e.G.get(n);else{i=document.createElement("span");var u=o.heightUnits==Dt?"%":"px",l=o.widthUnits==Dt?"%":"px",c=o.viewportAnchorUnits==Dt?"%":"px";i.id="shaka-text-region---"+n,i.classList.add("shaka-text-region"),i.style.position="absolute";var d=o.height,f=o.width;2===o.heightUnits&&(d=5.33*o.height,u="%"),2===o.widthUnits&&(f=o.width*s,l="%"),i.style.height=d+u,i.style.width=f+l,2===o.viewportAnchorUnits?(s=o.viewportAnchorY/75*100,u=o.viewportAnchorX/(e.u===4/3?160:210)*100,s-=o.regionAnchorY*d/100,u-=o.regionAnchorX*f/100,i.style.top=s+"%",i.style.left=u+"%"):(i.style.top=o.viewportAnchorY-o.regionAnchorY*d/100+c,i.style.left=o.viewportAnchorX-o.regionAnchorX*f/100+c),0!==o.heightUnits&&0!==o.widthUnits&&0!==o.viewportAnchorUnits&&(o=Math.max(0,Math.min(100-(parseInt(i.style.width.slice(0,-1),10)||0),parseInt(i.style.left.slice(0,-1),10)||0)),i.style.top=Math.max(0,Math.min(100-(parseInt(i.style.height.slice(0,-1),10)||0),parseInt(i.style.top.slice(0,-1),10)||0))+"%",i.style.left=o+"%"),i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.G.set(n,i),n=i}}i=a,r&&((i=document.createElement("span")).classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",a.appendChild(i)),e.l.set(t,{kg:a,gj:i,$c:n})}function Jc(e,t,n,r){r=void 0===r?1:r;var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;switch(e=i.unit,r*=i.value,e){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return r+e}}function $c(e,t){this.g=t,this.j=e,this.F=new Map,this.l=void 0,this.C=!1,this.J=!0,this.o=this.I=!1,this.B=this.u=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.m={},this.i=new ne,this.G=[],this.h=null}function Qc(e){if(e.G)for(var t=g(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function Zc(e){return(e=e.g.targets)?e.filter((function(e){return e.mode===Fd&&e.enabled})):[]}function ed(e){return(e=e.g.targets)?e.filter((function(e){return e.mode===Bd&&!0===e.enabled})):[]}function td(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:t.g.version,sf:t.l,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.j.getBandwidthEstimate()/1e3}}function nd(e,t,n){if(n=void 0===n?{}:n,t=cd(e,t=Object.assign({e:t,ts:Date.now()},n),Fd),n=e.g.targets,!(e.g.version<Sd)&&n){var r=Zc(e);n=Array.from(new Set([].concat(m(Md),m(Rd))));for(var i=(r=g(r)).next();!i.done;i=r.next()){var a=ad((i=i.value).includeKeys||[],n);a.includes(jd)||a.push(jd),a=od(t,a);var o=i.events||[],s=a.e,u=a.sta;s&&(!Ld.includes(s)||!("ps"!==s||u&&Od.includes(u))||o&&o.length>0&&!o.includes(s))||id(e,a,i)}}}function rd(e,t,n){if(e.g.enabled){n=cd(e,n,_d);var r=sd({mode:_d,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.m[r]||(e.m[r]={request:1,response:1}),n.sn=e.m[r].request++,function(e,t,n){if(n)e=fd(e),Object.keys(e).length&&Object.assign(t.headers,e);else{var r=dd(e);r&&(t.uris=t.uris.map((function(e){return pd(e,r)})))}}(n=od(n,r=ad(r=e.g.includeKeys||[],e.g.version==Sd?Array.from(new Set([].concat(m(Md),m(Dd)))):Cd)),t,e.g.useHeaders)}}function id(e,t,n,r){var i={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},a=n.url;if(n.useHeaders){if(t=fd(t),!Object.keys(t).length)return;r&&Object.assign(r.headers,t),r=Gi([a],i),Object.assign(r.headers,t)}else{if(!(t=dd(t)))return;a=pd(a,t),r&&(r.uri=a),r=Gi([a],i)}e.j.Wb().request(9,r)}function ad(e,t){if(!e||0===e.length)return t;for(var n=g(e),r=n.next();!r.done;r=n.next())t.includes(r.value);return e.filter((function(e){return t.includes(e)}))}function od(e,t){return Object.keys(e).reduce((function(n,r){return t.includes(r)&&(n[r]=e[r]),n}),{})}function sd(e){var t=Object.keys(e).sort().reduce((function(t,n){return"enabled"!==n&&(t[n]=e[n]),t}),{});return JSON.stringify(t)}function ud(e,t){if(!(t=e.j.Ec()[t]).length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):0}function ld(e,t,n){var r=t.segment,i=0;r&&(i=r.endTime-r.startTime),(i={d:1e3*i,st:e.j.W()?xd:Td}).ot=function(e){if(0===e.type)return vd;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?yd:md;if("audio"==t)return gd;if("text"==t)return"application/mp4"===e.mimeType?wd:bd}}(t);var a=i.ot===md||i.ot===gd||i.ot===yd||i.ot===wd;if(t=t.stream){var o=e.j.Ob();if(a&&(i.bl=function(e,t){if(!(t=e.j.Ec()[t]).length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):NaN}(e,t.type),i.ot!==wd)){var s=ud(e,t.type);i.dl=o?s/Math.abs(o):s}if(t.bandwidth&&(i.br=t.bandwidth/1e3),t.segmentIndex&&r){if((o=t.segmentIndex.Vb(r.endTime,!0,o<0))&&(o=o.next().value)&&o!=r){if(n&&!ee(r.P(),o.P())){var u=o.P()[0];s=new URL(u);var l=new URL(n);if(s.origin!==l.origin)n=u;else{n=s.pathname.split("/").slice(1),u=l.pathname.split("/").slice(1,-1),l=Math.min(n.length,u.length);for(var c=0;c<l&&n[c]===u[c];c++)n.shift(),u.shift();for(;u.length;)u.shift(),n.unshift("..");n=n.join("/")+s.search+s.hash}i.nor=n}!o.startByte&&!o.endByte||r.startByte==o.startByte&&r.endByte==o.endByte||(n=o.startByte+"-",o.endByte&&(n+=o.endByte),i.nrr=n)}o=e.j.Ob()||1,n=ud(e,t.type)||500,r=(t=t.bandwidth)?t*(r.endTime-r.startTime)/1e3/(n/o/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(r)||(i.rtp=r)}}return a&&i.ot!==wd&&(i.tb=function(e,t){var n=e.j.lc();if(!n.length)return NaN;e=n[0];for(var r=(n=g(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case md:return e.videoBandwidth||NaN;case gd:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,i.ot)/1e3),i}function cd(e,t,n){Object.assign(t,td(e)),t.pr=e.j.Ob();var r=t.ot===md||t.ot===yd;return e.I&&r&&(t.bs=!0,t.su=!0,e.I=!1),null==t.su&&(t.su=e.J),e.j.W()&&(r=Sf(e.j),t.ltc=r||void 0),document.hidden&&(t.bg=!0),null==(r=e.B&&e.u?e.B-(e.H||e.u):void 0)||e.K[n]||(t.msd=r,e.K[n]=!0),t}function dd(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}for(var r,i=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n,ttfb:n,ttlb:n},o=Object.keys(e||{}).sort(),s=(o=g(o)).next();!s.done;s=o.next()){var u=e[s=s.value];if(!(r=u,Number.isNaN(r)||null==r||""===r||!1===r||"v"===s&&1===u||"pr"==s&&1===u)){var l=a[s];l&&(u=l(u));var c;c="string"===(l=typeof u)&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===l?s:"symbol"===l?s+"="+u.description:s+"="+u,i.push(c)}}return i.join(",")}function fd(e){for(var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3},o=(t=g(t)).next();!o.done;o=t.next())i[null!=a[o=o.value]?a[o]:1][o]=e[o];for(e=0;e<i.length;e++)(a=dd(i[e]))&&(n["CMCD-"+r[e]]=a);return n}function pd(e,t){return!t||e.includes("offline:")?e:((e=new me(e)).g.set("CMCD",t),e.toString())}(i=Bc.prototype).configure=function(){},i.remove=function(e,t){return!!this.i&&(this.h.has(this.g)&&_c(this.h.get(this.g).track,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){this.h.has(this.g)&&Uc(this.h.get(this.g).track,e)},i.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},i.isTextVisible=function(){return this.u},i.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;"disabled"!==t.mode&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&3===this.i.m)if(t=Array.from(this.i.h.textTracks).filter((function(e){return["captions","subtitles","forced"].includes(e.kind)})),e){e=null;for(var n=(t=g(t)).next();!n.done;n=t.next()){if("showing"===(n=n.value).mode){e=null;break}e||"hidden"!==n.mode||(e=n)}e&&(e.mode="showing")}else for(t=(e=g(t)).next();!t.done;t=e.next())"showing"===(t=t.value).mode&&(t.mode="hidden")},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){!this.j&&this.i&&2===this.i.m&&(this.j=this.i.h,this.l.Ba(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())},V("shaka.text.NativeTextDisplayer",Bc),Bc.prototype.enableTextDisplayer=Bc.prototype.enableTextDisplayer,Bc.prototype.setTextLanguage=Bc.prototype.setTextLanguage,Bc.prototype.setTextVisibility=Bc.prototype.setTextVisibility,Bc.prototype.isTextVisible=Bc.prototype.isTextVisible,Bc.prototype.destroy=Bc.prototype.destroy,Bc.prototype.append=Bc.prototype.append,Bc.prototype.remove=Bc.prototype.remove,Bc.prototype.configure=Bc.prototype.configure,(i=Vc.prototype).configure=function(){},i.remove=function(e,t){return!!this.g&&(_c(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){this.g&&Uc(this.g,e)},i.destroy=function(){return this.g&&(_c(this.g,(function(){return!0})),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},i.isTextVisible=function(){return!!this.g&&"showing"==this.g.mode},i.setTextVisibility=function(e){e&&!this.g&&Hc(this),this.g&&(this.g.mode=e?"showing":"hidden")},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){Hc(this)},V("shaka.text.SimpleTextDisplayer",Vc),Vc.prototype.enableTextDisplayer=Vc.prototype.enableTextDisplayer,Vc.prototype.setTextLanguage=Vc.prototype.setTextLanguage,Vc.prototype.setTextVisibility=Vc.prototype.setTextVisibility,Vc.prototype.isTextVisible=Vc.prototype.isTextVisible,Vc.prototype.destroy=Vc.prototype.destroy,Vc.prototype.append=Vc.prototype.append,Vc.prototype.remove=Vc.prototype.remove,Vc.prototype.configure=Vc.prototype.configure,(i=Gc.prototype).configure=function(){},i.remove=function(){},i.append=function(){},i.destroy=function(){},i.isTextVisible=function(){return!1},i.setTextVisibility=function(){},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){},V("shaka.text.StubTextDisplayer",Gc),Gc.prototype.enableTextDisplayer=Gc.prototype.enableTextDisplayer,Gc.prototype.setTextLanguage=Gc.prototype.setTextLanguage,Gc.prototype.setTextVisibility=Gc.prototype.setTextVisibility,Gc.prototype.isTextVisible=Gc.prototype.isTextVisible,Gc.prototype.destroy=Gc.prototype.destroy,Gc.prototype.append=Gc.prototype.append,Gc.prototype.remove=Gc.prototype.remove,Gc.prototype.configure=Gc.prototype.configure,(i=qc.prototype).configure=function(e){this.C=e,Kc(this),Xc(this,!0)},i.append=function(e){for(var t=[].concat(m(this.h)),n=(e=g(Nc(e))).next(),r={};!n.done;r={jg:void 0},n=e.next())r.jg=n.value,t.some(function(e){return function(t){return An(t,e.jg)}}(r))||this.h.push(r.jg);this.h.length&&Kc(this),Xc(this)},i.destroy=function(){return this.g?(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null),Promise.resolve()):Promise.resolve()},i.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter((function(n){return n.startTime<e||n.endTime>=t})),Xc(this,n>this.h.length),this.h.length||Kc(this),!0},i.isTextVisible=function(){return this.m},i.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),Xc(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},i.setTextLanguage=function(e){e&&"und"!=e?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},i.enableTextDisplayer=function(){},V("shaka.text.UITextDisplayer",qc),qc.prototype.enableTextDisplayer=qc.prototype.enableTextDisplayer,qc.prototype.setTextLanguage=qc.prototype.setTextLanguage,qc.prototype.setTextVisibility=qc.prototype.setTextVisibility,qc.prototype.isTextVisible=qc.prototype.isTextVisible,qc.prototype.remove=qc.prototype.remove,qc.prototype.destroy=qc.prototype.destroy,qc.prototype.append=qc.prototype.append,qc.prototype.configure=qc.prototype.configure,V("shaka.text.WebVttGenerator",(function(){})),$c.prototype.setMediaElement=function(t){this.h=t,function(t){t.i.D(t.h,"playing",(function(){t.B||(t.B=Date.now()),nd(t,"ps",{dd:"p"})})),t.i.D(t.h,"volumechange",(function(){nd(t,t.h.muted?"m":"um")})),t.i.D(t.h,"play",(function(){t.u||(t.u=Date.now(),nd(t,"ps",{dd:"s"}))})),t.i.D(t.h,"pause",(function(){nd(t,"ps",{dd:"a"})})),t.i.D(t.j,"buffering",(function(){nd(t,"ps",{dd:"w"})})),t.i.D(t.h,"seeking",(function(){return nd(t,"ps",{dd:"k"})})),t.i.D(document,"fullscreenchange",(function(){nd(t,document.fullscreenElement?"pe":"pc")}));var n=t.h;(n.webkitPresentationMode||n.webkitSupportsFullscreen)&&t.i.D(n,"webkitpresentationmodechanged",(function(){n.webkitPresentationMode?nd(t,"inline"!==n.webkitPresentationMode?"pe":"pc"):n.webkitSupportsFullscreen&&nd(t,n.webkitDisplayingFullscreen?"pe":"pc")})),t.i.D(t.h,"enterpictureinpicture",(function(){nd(t,"pe")})),t.i.D(t.h,"leavepictureinpicture",(function(){nd(t,"pc")})),"documentPictureInPicture"in e&&t.i.D(e.documentPictureInPicture,"enter",(function(e){nd(t,"pe"),t.i.Ba(e.window,"pagehide",(function(){nd(t,"pc")}))})),t.i.D(document,"visibilitychange",(function(){document.hidden?nd(t,"b",{bg:!0}):nd(t,"b")})),t.i.D(t.j,"complete",(function(){nd(t,"ps",{dd:"e"})}))}(this)},$c.prototype.configure=function(e){this.g=e,function(e){Qc(e);for(var t=Zc(e),n=(t=g(t)).next();!n.done;n=t.next())if(void 0===(n=n.value.timeInterval)&&(n=Nd),n>=1){var r=new xr((function(){return nd(e,Ud)}));r.Ea(n),e.G.push(r)}}(this)};var hd="m",gd="a",md="v",yd="av",vd="i",bd="c",wd="tt",Sd=2,Td="v",xd="l",Ad="d",kd="ld",Ed="h",Id="lh";V("shaka.util.CmcdManager.StreamingFormat",{DASH:Ad,Pl:kd,HLS:Ed,Ql:Id,fm:"s",OTHER:"o"});var Cd="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),Md="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),Dd="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),Pd="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),Rd=["e","sta"],Ld="ps e t c b m um pe pc".split(" "),Od="spawkrfeqd".split(""),Nd=10,jd="ts",Ud="t",_d="request",Bd="response",Fd="event";function Vd(e){this.h=e,this.g=null}function Hd(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}(i=Vd.prototype).configure=function(e){this.h=e},i.bi=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(qd)?1e3*this.g.get(qd):null},i.$h=function(){return this.h.enabled&&this.g&&this.g.has(Gd)?1e3*this.g.get(Gd):null},i.Tj=function(){return this.h.enabled&&this.g&&this.g.has(Kd)?this.g.get(Kd):null},i.Uj=function(){return this.h.enabled&&this.g&&this.g.has(zd)?this.g.get(zd):null},i.getBandwidthEstimate=function(e){var t=this.$h();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e},V("shaka.util.CmsdManager",Vd),Vd.prototype.getBandwidthEstimate=Vd.prototype.getBandwidthEstimate,Vd.prototype.getRoundTripTime=Vd.prototype.Uj,Vd.prototype.getResponseDelay=Vd.prototype.Tj,Vd.prototype.getEstimatedThroughput=Vd.prototype.$h,Vd.prototype.getMaxBitrate=Vd.prototype.bi;var Gd="etp",qd="mb",Kd="rd",zd="rtt";function Wd(){this.g=null,this.h=[]}function Xd(e,t){return L((function(n){if(1==n.g)return e.g?S(n,new Promise((function(t){return e.h.push(t)})),2):n.A(2);e.g=t,T(n)}))}function Yd(t,n,r){n=void 0===n?null:n,Ui.call(this);var i=this;this.m=tp,this.h=null,this.xe=n,this.$=!1,this.Ie=new ne,this.ye=new ne,this.j=new ne,this.ac=new ne,this.xc=new ne,this.G=this.H=this.F=this.J=null,this.Je=0,this.ma=new Wd,this.O=this.aa=this.X=this.i=this.wc=this.I=this.l=this.ue=this.S=this.Kh=this.wa=this.K=this.ib=this.ya=this.we=this.R=this.Fa=this.M=this.ob=null,this.Sa=!1,this.Ce=this.o=null,this.Be=1e9,this.Ge=[],this.tc=new Map,this.kb=[],this.Xf=-1,this.g=kf(this),this.Zf={streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}},this.V=null,this.Ke=-1,this.Zb=null,this.xa={width:1/0,height:1/0},this.Ae=new qa(this.g,this.xa,null),this.Ee=[],this.B=null,this.N=this.g.adaptationSetCriteriaFactory(),this.N.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.Fd=this.g.preferredTextLanguage,this.Md=this.g.preferredTextRole,this.Ld=this.g.preferForcedSubs,this.ze=[],r&&r(this),this.K=new $c(this,this.g.cmcd),this.wa=new Vd(this.g.cmsd),this.J=df(this),this.Jd=this.oa=this.Da=this.C=null,this.ag=!1,this.Yf=[],this.$f=new xr((function(){return L((function(e){return 1==e.g?i.oa?S(e,i.fc(i.Jd,!0),3):e.A(0):4!=e.g?S(e,i.load(i.oa),4):(i.ag?i.Jd.pause():i.Jd.play(),i.oa=null,i.ag=!1,void T(e))}))})),op&&(this.C=op(),this.C.configure(this.g.ads),this.xc.D(this.C,"ad-content-pause-requested",(function(e){var t;return L((function(n){if(1==n.g)return i.$f.stop(),i.oa?n.A(0):(i.Jd=i.h,i.ag=i.be(),t=e.saveLivePosition||!1,S(n,i.Uh(!0,t),3));i.oa=n.h,T(n)}))})),this.xc.D(this.C,"ad-content-resume-requested",(function(e){if(e=e.offset||0,i.oa){var t=i.oa;t.m&&e&&("number"==typeof t.m?t.m+=e:t.m.setTime(t.m.getTime()+1e3*e))}i.$f.ia(.1)})),this.xc.D(this.C,"ad-content-attach-requested",(function(){return L((function(e){return i.h||!i.Jd?e.A(0):S(e,i.fc(i.Jd,!0),0)}))}))),sp&&(this.Da=sp(this),this.Da.configure(this.g.queue)),this.Ie.D(e,"online",(function(){Kf(i),i.fh()})),this.De=new xr((function(){for(var e=Date.now()/1e3,t=!1,n=!0,r=g(i.i.variants),a=r.next();!a.done;a=r.next())(a=a.value).disabledUntilTime>0&&a.disabledUntilTime<=e&&(a.disabledUntilTime=0,t=!0),a.disabledUntilTime>0&&(n=!1);n&&i.De.stop(),t&&Lf(i,!1,void 0,!1,!1)})),this.Ta=null,t&&(de("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.fc(t,!0)),this.u=null}function Jd(e){null!=e.S&&(gt(e.S),e.S.release(),e.S=null)}function $d(e,t){return new Oi(e,t)}function Qd(e,t){ap.set(e,t)}function Zd(e,t){e.dispatchEvent($d("onstatechange",(new Map).set("state",t)))}function ef(e,t){var n;return L((function(r){return 1==r.g?(n=++e.Je,S(r,Xd(e.ma,t),2)):n!=e.Je?(e.ma.release(),r.return(!0)):r.return(!1)}))}function tf(e,t){var n,r,i;return t=void 0!==t&&t,L((function(a){if(1==a.g)return n=null,e.i&&e.I&&e.wc&&e.X&&e.g?(r=e.h.currentTime,e.W()&&!t&&(r=null),S(a,rf(e,e.X,r,e.aa,e.g,!0,!1),3)):a.A(2);if(2!=a.g){n=a.h,e.Ee.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(i=e.l?e.l.o:null)&&(n.o=i);var o=n,s=e.I,u=e.wc;o.h=e.i,o.l=s,o.H=u,n.C=e.N,n.start(),e.i=null,e.I=null,e.wc=null,e.o=null,e.Ce=null}return a.return(n)}))}function nf(e,t,n,r,i,a){var o,s,u;return i=void 0!==i&&i,L((function(l){return 1==l.g?r?l.A(2):S(l,af(e,t),3):(2!=l.g&&(r=l.h),function(e,t){if(!Xy(oe()))return!0;if(t){if(""==(e.h||ts()).canPlayType(t))return!1;if(!Xy(oe())||!eo.has(t))return!0;if(dr(t))return"WEBKIT"===oe().Ha()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if("application/dash+xml"===t||"video/vnd.mpeg.dash.mpd"===t)return e.g.streaming.preferNativeDash}return!1}(e,r)?l.return(null):(o=a||e.g,s=!1,i&&e.h&&"AUDIO"===e.h.nodeName&&(s=!0),u=rf(e,t,n,r||null,o,!i,s),u=i?u.then((function(e){return e.F=!1,e})):u.then((function(t){return e.Ee.push(t),t})),l.return(u)))}))}function rf(e,t,n,r,i,a,o){var s,u,l,c,d,f,p,h,m,y,v,b;return a=void 0===a||a,o=void 0!==o&&o,L((function(w){return 1==w.g?(s=null,u=Ft(i),o&&(u.manifest.disableVideo=!0),l=function(){return s.R&&s.j?null:s},c=function(){return l()?l().getConfiguration():e.g},e.xa.width!=1/0||e.xa.height!=1/0||e.g.ignoreHardwareResolution?w.A(2):S(w,oe().jc(),3)):(2!=w.g&&(d=w.h,e.xa.width=d.width,e.xa.height=d.height),f=new qa(u,e.xa,null),p={networkingEngine:e.J,filter:function(e){var t;return L((function(n){return 1==n.g?S(n,Ka(f,e),2):4!=n.g?n.h?(t=$d("trackschanged"),S(n,Promise.resolve(),4)):n.A(0):(s.dispatchEvent(t),void T(n))}))},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,r=g(t.textStreams),i=r.next();!i.done;i=r.next())"application/cea-608"!=(i=i.value).mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(r=g(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var a=g(i.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new Nu,l=i.closedCaptions.get(o);s={id:e.Be++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:lt,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([rr(s,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(e){qu(s.I,e)},onEvent:function(e){return s.dispatchEvent(e)},onError:function(e){return s.onError(e)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},updateDuration:function(){e.l&&s.R&&e.l.updateDuration()},newDrmInfo:function(e){var t=s.i,n=t?t.g:null;n&&t.B&&Xa(f,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.W());s.dispatchEvent($d("manifestupdated",t)),fc(s,!1,(function(){e.C&&e.C.onManifestUpdated(e.W())}))},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(t,n,r,i){var a=t;"com.apple.hls.interstitial"!=t&&"com.apple.hls.overlay"!=t||(a="com.apple.quicktime.HLS",t={startTime:n,endTime:r,values:i},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,t)),t=(i=g(i)).next();for(var o={};!t.done;o={Yg:void 0},t=i.next())o.Yg=t.value,"ID"!=o.Yg.name&&fc(s,!1,function(t){return function(){cf(e,n,r,a,t.Yg)}}(o))},disableStream:function(t){return e.disableStream(t,e.g.streaming.maxDisabledTime)},addFont:function(t,n){return e.addFont(t,n)}},(h=new Gu((function(){return e.Qa()}))).addEventListener("regionadd",(function(t){var n=t.region;Wf(e,"timelineregionadded",n,s),fc(s,!1,(function(){e.C&&(e.C.onDashTimedMetadata(n),e.C.onDASHInterstitialMetadata(e,e.h,n))}))})),m=null,u.streaming.observeQualityChanges&&((m=new Fu((function(){return e.Ec()}))).addEventListener("qualitychange",(function(t){Xf(e,t.quality,t.position)})),m.addEventListener("audiotrackchange",(function(t){Xf(e,t.quality,t.position,!0)}))),y=!0,v={sc:e.J,onError:function(e){return s.onError(e)},vf:function(t){fc(s,!0,(function(){e.F&&function(e,t){var n=$d("keystatuschanged");e.dispatchEvent(n);var r=Object.keys(t);1==r.length&&""==r[0]&&(r=["00"],t={"00":t[""]});var i=1==r.length&&"00"==r[0];if(n=!1,r.length){r=e.keySystem();for(var a=ea(e.g.drm.clearKeys),o=function(n,r){n.allowedByKeySystem=!0;for(var a=(r=g(r)).next();!a.done;a=r.next())a=a.value,((a=t[i?"00":a])||e.F.H)&&(n.allowedByKeySystem=n.allowedByKeySystem&&!!a&&!Ja.includes(a))},s=g(e.i.variants),u=s.next();!u.done;u=s.next())for(var l=ai(u=u.value),c=(l=g(l)).next();!c.done;c=l.next()){c=c.value;var d=u.allowedByKeySystem;if(c.keyIds.size)if(c.drmInfos.length&&!a.size&&"HLS"==e.i.type)for(var f=g(c.drmInfos),p=f.next();!p.done;p=f.next())(p=p.value).keySystem==r&&(p.keyIds.size?o(u,p.keyIds):o(u,c.keyIds));else o(u,c.keyIds);d!=u.allowedByKeySystem&&(n=!0)}}if(n&&(Uf(e),!Pf(e)))return;(n=e.l.o)&&!n.allowedByKeySystem&&Lf(e)}(e,t)}))},onExpirationUpdated:function(e,t){var n=$d("expirationupdated");s.dispatchEvent(n),(n=s.l)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){s.dispatchEvent(t),"drmsessionupdate"==t.type&&y&&(y=!1,t=Date.now()/1e3-s.ya,(e.B||s.getStats()).m=t,e.S&&gt(e.S))}},b=df(e,l),Hi(e.J,b),s=new dc(t,r,n,{config:u,wk:p,Hk:h,Gk:m,md:function(){return e.md(v)},vk:f,networkingEngine:b,ij:a}),w.return(s))}))}function af(e,t){var n,r;return L((function(i){return 1==i.g?(n=e.g.manifest.retryParameters,S(i,kc(t,e.J,n),2)):("application/x-mpegurl"==(r=i.h)&&("WEBKIT"===oe().Ha()&&(r="application/vnd.apple.mpegurl")),"video/quicktime"==r&&("CHROMIUM"===oe().Ha()&&(r="video/mp4")),i.return(r))}))}function of(e,t){var n=e.g.textDisplayFactory;e.Jh!==n||void 0!==t&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):de("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||de("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch((function(){}))):e.u.setTextVisibility(e.$),e.H&&function(e,t){e.aa=t,e.h&&(e.h.l=t)}(e.H,e.u),e.Jh=n,e.l&&function(e){var t=e.h.get(lt);t&&dl(e,t.stream,!0,0,!0)}(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function sf(e){var t,n,r;return L((function(i){if(1==i.g)return oe(),Zd(e,"media-source"),e.g.mediaSource.useSourceElements&&Zo(e.h),of(e),t=function(e,t,n,r,i){return new Ps(e,t,n,i,r)}(e.h,e.u,{Jj:function(){return e.keySystem()},onMetadata:function(t,n,r){for(var i=(t=g(t)).next();!i.done;i=t.next())if((i=i.value).data&&"number"==typeof i.cueTime&&i.frames){var a=i.cueTime+n,o=r;o&&a>o&&(o=a);for(var s=g(i.frames),u=s.next();!u.done;u=s.next())cf(e,a,o,"org.id3",u.value);e.C&&e.C.onHlsTimedMetadata(i,a)}},Bk:function(t){e.ib&&qu(e.ib,{schemeIdUri:t.schemeIdUri,startTime:t.startTime,endTime:t.endTime,id:String(t.id),emsg:t})},onEvent:function(t){return e.dispatchEvent(t)},Dk:function(){e.I&&e.I.update&&e.I.update()}},e.S,e.g.mediaSource),n=e.g.manifest,r=n.segmentRelativeVttTiming,t.Fa=r,S(i,t.M,2);e.H=t,T(i)}))}function uf(e,t,n){function r(){return Cf(e)}if(e.j.D(t,"playing",r),e.j.D(t,"pause",r),e.j.D(t,"ended",r),e.j.D(t,"ratechange",(function(){var t=e.h.playbackRate;0!=t&&(e.M&&(e.M.set(t),e.m==np&&e.o.playbackRateChanged(t),If(e,t)),t=$d("ratechange"),e.dispatchEvent(t))})),t.remote&&(e.j.D(t.remote,"connect",(function(){e.l&&"connected"==t.remote.state&&Vf(e),Uf(e)})),e.j.D(t.remote,"connecting",(function(){return Uf(e)})),e.j.D(t.remote,"disconnect",(function(){return L((function(n){if(1==n.g)return e.l&&"disconnected"==t.remote.state?S(n,Dl(e.l),3):n.A(2);2!=n.g&&Vf(e),Uf(e),T(n)}))}))),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",(function(){return Uf(e)})),e.j.D(t.audioTracks,"removetrack",(function(){return Uf(e)})),e.j.D(t.audioTracks,"change",(function(){return Uf(e)}))),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",(function(){return Uf(e)})),e.j.D(t.videoTracks,"removetrack",(function(){return Uf(e)})),e.j.D(t.videoTracks,"change",(function(){return Uf(e)}))),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",(function(){e.xe&&of(e,!0)})),t.textTracks){var i=function(){e.m===rp&&e.u instanceof Bc&&Vf(e),Uf(e)};e.j.D(t.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.j.D(t,"cuechange",(function(){if(t.activeCues)for(var n=g(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,cf(e,r.startTime,r.endTime,r.type,r.value),e.C&&e.C.onCueMetadataChange(r.value);if(t.cues){n=[];for(var i=(r=g(t.cues)).next(),a={};!i.done;a={Cc:void 0},i=r.next())a.Cc=i.value,"com.apple.quicktime.HLS"==a.Cc.type&&null!=a.Cc.startTime&&((i=n.find(function(e){return function(t){return t.startTime==e.Cc.startTime&&t.endTime==e.Cc.endTime}}(a)))||(i={startTime:a.Cc.startTime,endTime:a.Cc.endTime,values:[]},n.push(i)),i.values.push(a.Cc.value));for(r=(n=g(n)).next();!r.done;r=n.next())(r=r.value).values.some((function(e){return"X-ASSET-URI"==e.key||"X-ASSET-LIST"==e.key}))&&e.C&&(r.values.push({key:"CUE",description:"",data:0!=r.startTime||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,r))}}));var n=new xr((function(){for(var t=function(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=g(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Jb().ia(.5);e.ze.push((function(){n.stop()}))}}(e,t);break;case"chapters":!function(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new xr((function(){t.mode="hidden"})).Jb().ia(.5);e.ze.push((function(){n.stop()}))}}(e,t);break;default:i()}})),e.j.D(t.textTracks,"removetrack",i),e.j.D(t.textTracks,"change",i)}"none"!=t.preload&&e.j.Ba(t,"loadedmetadata",(function(){e.B.G=Date.now()/1e3-n}))}function lf(e,t,n){t=(new Map).set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent($d(n,t))}function cf(e,t,n,r,i){e.ya&&((t={schemeIdUri:r,startTime:t,endTime:n||1/0,id:"",payload:i}).id=JSON.stringify(t),qu(e.ya,t))}function df(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function r(e){t()?fc(t(),!0,e):e()}t||(t=function(){return null});var i=new Fi((function(t,n,i,a,o){r((function(){e.o&&e.o.segmentDownloaded(t,n,i,a,o)}))}),(function(t,i,a){n($d("downloadheadersreceived",i=(new Map).set("headers",t).set("request",i).set("requestType",a))),r((function(){if(e.wa){var n=e.wa;if(n.h.enabled){var r=t["cmsd-static"];if(r)try{var i=new Map,a=r.split(",");for(r=0;r<a.length;r++){var o=a[r].split("=");i.set(o[0],Hd(o[1]))}}catch(e){}if(i=t["cmsd-dynamic"]){e:{try{var s=new Map,u=i.split(";");for(i=1;i<u.length;i++){var l=u[i].split("=");s.set(l[0],Hd(l[1]))}var c=s;break e}catch(e){c=null;break e}c=void 0}c&&(n.g=c)}}}}))}),(function(e,t){n($d("downloadcompleted",e=(new Map).set("request",e).set("response",t)))}),(function(e,t,r,i){n($d("downloadfailed",e=(new Map).set("request",e).set("error",t).set("httpResponseCode",r).set("aborted",i)))}),(function(t,n,i){r((function(){if(e.K){var r=e.K,a=i;if(a=void 0===a?{}:a,r.g.enabled)if("HEAD"===n.method)rd(r,n,{});else switch(t){case 0:try{if(r.g.enabled){if(a.type){e:{switch(a.type){case 4:var o=r.o?kd:Ad;break e;case 3:case 2:o=r.o?Id:Ed;break e;case 5:o="s";break e}o=void 0}r.l=o}rd(r,n,{ot:hd,su:!r.C})}}catch(e){X("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case Xi:try{if(r.g.enabled){var s=ld(r,a,n.uris[0]);s.ts=Date.now(),r.F.set(n,s.ts),rd(r,n,s)}}catch(e){X("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:rd(r,n,{ot:"k"});break;case 4:rd(r,n,{ot:"o"})}}}))}),(function(n,r,i,a){(n=t()?t().l:e.I)&&n.banLocation&&n.banLocation(a)}),(function(n,r,i){if(r.data){var a=r.data.byteLength,o=t()?t().getStats():e.B;if(o&&(lc(o,a),0===n&&(o.ni=a)),i=void 0===i?{}:i,0!==ed(a=e.K).length)switch(n){case Xi:try{var s=ld(a,i,r.uri);r.originalRequest&&null!=r.originalRequest.timeToFirstByte&&(s.ttfb=r.originalRequest.timeToFirstByte),null!=r.timeMs&&(s.ttlb=r.timeMs);var u=r.originalUri||r.uri;if(u.includes("CMCD="))try{var l=new URL(u);l.searchParams.delete("CMCD");var c=l.toString()}catch(e){c=u}else c=u;s.url=c,a.F.has(r.originalRequest)?(s.ts=a.F.get(r.originalRequest),a.F.delete(r.originalRequest)):s.ts||(s.ts=Date.now());var d=ed(a);if(0!==d.length){var f=a.g.version==Sd?Array.from(new Set([].concat(m(Md),m(Pd)))):Cd;s.rc=r.status||0;var p=cd(a,s,Bd);r.headers&&r.headers["CMSD-Static"]&&(p.cmsds=btoa(r.headers["CMSD-Static"])),r.headers&&r.headers["CMSD-Dynamic"]&&(p.cmsdd=btoa(r.headers["CMSD-Dynamic"]));for(var h=g(d),y=h.next();!y.done;y=h.next()){var v=y.value,b=ad(v.includeKeys||[],f),w=sd(v);a.m[w]||(a.m[w]={request:1,response:1}),p.sn=a.m[w].response++,id(a,od(p,b),v,r)}}}catch(e){X("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",e)}}}}));return i.configure(e.g.networking),i}function ff(e,t,n){e.R=new Fa,Va(e.R,Ha),pf(e),Ef(e),e.Fa=new xr((function(){hf(e)})),e.g.streaming.rebufferingGoal&&e.Fa.Ea(.25),e.j.D(t,"waiting",(function(){return hf(e,"waiting")})),e.j.D(t,"canplaythrough",(function(){return hf(e,"canplaythrough")})),e.j.D(t,"playing",(function(){return hf(e,"playing")})),e.j.D(t,"seeked",(function(){return hf(e,"seeked")})),n&&(e.j.D(t,"stalled",(function(){return hf(e,"stalled")})),e.j.D(t,"progress",(function(){return hf(e,"progress")})),e.j.D(t,"timeupdate",(function(){return hf(e,"timeupdate")})))}function pf(e){var t=e.g.streaming.rebufferingGoal;e.R.i.set(Ga,Math.min(.5,t/2)).set(Ha,t)}function hf(e,t){if(e.g.streaming.rebufferingGoal){t=!!e.H&&js(e.H),t=e.be()||t||e.G.ki();var n=Yo(e.h.buffered,e.h.currentTime),r=e.R,i=r.i.get(r.g);Va(r,t||n>=i&&n>0?Ga:Ha)&&Ef(e)}else if(t){switch(n=void 0,t){case"seeking":case"waiting":n=Ha;break;case"canplaythrough":case"playing":case"seeked":n=Ga}void 0!==n&&Va(e.R,n)&&Ef(e)}}function gf(e,t){if(e.Ae=new qa(e.g,e.xa,e.F),e.I){var n=Ft(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=ep&&Wa(e.Ae,e.i)&&Uf(e)}catch(t){zf(e,t)}e.o&&Pf(e),!(n=e.l.o)||n.allowedByApplication&&n.allowedByKeySystem||Lf(e)}if(e.J&&e.J.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Fa=e.g.manifest.segmentRelativeVttTiming),e.u&&of(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),Gf(e)),e.R&&pf(e),e.Fa&&(e.g.streaming.rebufferingGoal?e.Fa.Ea(.25):e.Fa.stop()),e.i&&Jf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.wa&&e.wa.configure(e.g.cmsd),e.Da&&e.Da.configure(e.g.queue),e.m==np&&e.N.getConfiguration){n=e.N.getConfiguration();var r=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,r=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,r=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,r=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,r=!0),r&&(e.N.configure(n),Lf(e))}}function mf(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function yf(e,t){var n,r;return L((function(i){return 1==i.g?e.m!=np&&e.m!=rp?i.return(null):(n=e.Ge,e.i&&(n=e.i.imageStreams),(r=n[0])?(null!=t&&(r=n.find((function(e){return e.id==t}))),r?r.segmentIndex?i.A(2):S(i,r.createSegmentIndex(),2):i.return(null)):i.return(null)):i.return(r)}))}function vf(e,t,n,r){var i=t.width||0,a=t.height||0,o=i/r.columns,s=a/r.rows,u=r.columns*r.rows,l=e.j-e.startTime;l=e.B||l/u;var c=e.startTime,d=0,f=0;return u>1&&(f=Math.floor((n-e.startTime)/l),c=e.startTime+f*l,d=f%r.columns*o,f=Math.floor(f/r.columns)*s),r=!1,(n=e.thumbnailSprite)&&(r=!0,s=n.height,d=n.positionX,f=n.positionY,o=n.width),{segment:e,imageHeight:a,imageWidth:i,height:s,positionX:d,positionY:f,startTime:c,duration:l,uris:e.P(),startByte:e.Ic(),endByte:e.Fc(),width:o,sprite:r,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}function bf(e,t){e.j.D(t,"cuechange",(function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));for(var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},r=[],i=Array.from(t.activeCues||[]),a=(i=g(i)).next();!a.done;a=i.next()){if((a=a.value).endTime===1/0||a.endTime<a.startTime)a=null;else{var o=new Tn(a.startTime,a.endTime,a.text);o.line="number"==typeof a.line?a.line:null,a.lineAlign&&(o.lineAlign=a.lineAlign),o.lineInterpretation=a.snapToLines?jn:1,o.position="number"==typeof a.position?a.position:null,a.positionAlign&&(o.positionAlign=a.positionAlign),o.size=a.size,o.textAlign=a.align,"lr"===a.vertical?o.writingMode="vertical-lr":"rl"===a.vertical&&(o.writingMode="vertical-rl"),a.region&&(o.region.id=a.region.id,o.region.height=a.region.lines,o.region.heightUnits=2,o.region.regionAnchorX=a.region.regionAnchorX,o.region.regionAnchorY=a.region.regionAnchorY,o.region.scroll=a.region.scroll,o.region.viewportAnchorX=a.region.viewportAnchorX,o.region.viewportAnchorY=a.region.viewportAnchorY,o.region.viewportAnchorUnits=Dt,o.region.width=a.region.width,o.region.widthUnits=Dt),kn(o),a=o}a&&((o=e.g.mediaSource.modifyCueCallback)&&o(a,null,n),r.push(a))}e.u.append(r)})),t.mode=document.pictureInPictureElement?"showing":"hidden"}function wf(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Sf(e){if(!e.h||!e.h.currentTime)return null;var t=e.di();return t?Math.floor(Date.now()-(t.getTime()+1e3*e.h.currentTime)):null}function Tf(e,t){var n;return L((function(r){switch(r.g){case 1:return x(r,2),S(r,kc(t,e.J,e.g.streaming.retryParameters),4);case 4:n=r.h,k(r,3);break;case 2:E(r);case 3:if(n)return r.return(n);throw new Be(1,2,2011,t)}}))}function xf(e,t,n,r){var i,a,o;return L((function(s){if(1==s.g){i=Xi,(a=Gi([t],r)).method="GET";var u=e.K;try{u.g.enabled&&rd(u,a,{ot:bd,su:!0})}catch(e){X("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return S(s,n.request(i,a).promise,2)}return o=s.h,s.return(o.data)}))}function Af(e,t,n,r){var i=mr(n);if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ne(t),function(e,t){function n(e){for(var n=e,r=g(t),i=r.next();!i.done;i=r.next())(i=i.value).end&&i.start<e&&(n+=i.end-i.start);return((e=Math.floor(n/3600))<10?"0":"")+e+":"+((r=Math.floor(n/60%60))<10?"0":"")+r+":"+((i=Math.floor(n%60))<10?"0":"")+i+"."+((n=Math.floor(1e3*n%1e3))<100?n<10?"00":"0":"")+n}var r=Oc(e);e="WEBVTT\n\n";for(var i=(r=g(r)).next();!i.done;i=r.next())e+=n((i=i.value).startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case Dn:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}(t=n.parseMedia(t,e,null,[]),r);throw new Be(2,2,2014,n)}function kf(e){var t=Ql();return t.streaming.failureCallback=function(t){if(e.W()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.fh(n))}},t.textDisplayFactory=function(){if(e.xe){var t=e.h;t=!(t.webkitDisplayingFullscreen||t.webkitPresentationMode&&"inline"!=t.webkitPresentationMode)}else t=!1;return t?new qc(e.h,e.xe):"track"in document.createElement("track")?new Bc(e):new Gc},t}function Ef(e){var t=e.Ng();if(e.B&&e.R&&e.G){if(0==e.g.streaming.rebufferingGoal){var n=e.M;n.j=!1,Uu(n)}else(n=e.M).j=t,Uu(n);if(e.K&&(n=e.K,t||n.C||(n.C=!0),n.C&&t&&(n.I=!0,nd(n,"ps",{dd:"r"})),n.J=t),Cf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ke<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Ke*i,n-r))}}t=(new Map).set("buffering",t),e.dispatchEvent($d("buffering",t))}function If(e,t){e.ac.Pa(),e.ac.D(e.h,"timeupdate",(function(){var n=e.h.currentTime,r=e.Qa(),i=e.W(),a=i?e.g.streaming.safeSeekOffset:0;t>0?(!i||t>=1)&&Math.floor(n)>=Math.floor(r.end)&&e.Pd():Math.floor(n)<=Math.floor(r.start+a)&&e.Pd()}))}function Cf(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==Ha?n="buffering":e.be()?n="ended":e.h.paused&&(n="paused");var r=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var i=Date.now()/1e3;t.g.duration=i-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:i,state:r,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent($d("statechanged",n)))}}function Mf(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,i=e.Zh();i<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.se(r,!1):1==i&&t!==e.M.Tc()&&e.Pd()}if(n&&(n=e.Qa(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){r=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var a=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var o=e.g.streaming.liveSync.targetLatency,s=o+r,u=Math.max(0,o-r),l=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(o=e.i.serviceDescription.targetLatency,null!=e.i.serviceDescription.targetLatency?s=e.i.serviceDescription.targetLatency+r:null!=e.i.serviceDescription.maxLatency&&(s=e.i.serviceDescription.maxLatency),null!=e.i.serviceDescription.targetLatency?u=Math.max(0,e.i.serviceDescription.targetLatency-r):null!=e.i.serviceDescription.minLatency&&(u=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||"number"!=typeof o||(e.V=o);var d=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;i&&e.Zb&&null!==e.V&&"number"==typeof o&&e.Ke<d&&Date.now()-e.Zb>1e3*a&&(a=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(o-a)/2,a+r),e.Zb=Date.now()),i&&null!==e.V&&(s=e.V+r,u=e.V-r),o=n.end-e.h.currentTime,r=0,e.m==rp&&((i=e.h.buffered).length>0&&(r=i.end(i.length-1),r=Math.max(l,r-n.end))),n=e.g.streaming.liveSync.panicMode,i=1e3*e.g.streaming.liveSync.panicThreshold,a=Date.now()-e.R.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&a<=i?t!=c&&e.se(c,!1):null!=s&&l&&o-r>s?(t!=l&&e.se(l,!1),e.Zb=null):null!=u&&c&&o-r<u?(t!=c&&e.se(c,!1),e.Zb=null):t!==e.M.Tc()&&(e.Pd(),e.Zb=Date.now())}}function Df(e){if(e.h){var t=function(t,n){var r=void 0===r?Number.EPSILON:r;if(t===n)r=!0;else{var i=Math.abs(t-n);r=i<=r||r!==Number.EPSILON&&Math.abs(i-r)<=Number.EPSILON}return!!((r||n>t)&&e.Xf<t)&&(e.Xf=t,!0)},n=e.Qa();if(n=(n=n.end-n.start)>0?e.h.currentTime/n:0,!isNaN(n)){if(t(0,n*=100))var r=$d("started");else t(25,n)?r=$d("firstquartile"):t(50,n)?r=$d("midpoint"):t(75,n)?r=$d("thirdquartile"):((t(100,n)||n>100)&&(r=$d("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.be()&&e.h.pause());r&&e.dispatchEvent(r)}}}function Pf(e){try{Ya(e.Ae,e.i)}catch(t){return zf(e,t),!1}var t=ni(e.i.variants);return t=e.N.create(t),"boolean"!=typeof(e=e.o.setVariants(Array.from(t.values())))||e}function Rf(e,t){return t=void 0!==t&&t,Pf(e)?e.o.chooseVariant(t):null}function Lf(e,t,n,r,i){t=void 0===t||t,n=void 0===n?0:n,r=void 0!==r&&r,i=void 0===i||i;var a=Rf(e);a&&Of(e,a,i,t,n,r)}function Of(e,t,n,r,i,a){a=void 0!==a&&a;var o=e.l.o;if(t==o)r&&ll(e.l,t,r,i,!0);else{var s=e.B.h;if(s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),ll(e.l,t,r,i,a,n),r=null,o&&(r=Yr(o)),(o=Yr(t)).active=!0,e.S&&(i=e.S,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),a=0,s=-1,t.mimeType){case"video/webm":a=1;break;case"video/mp4":a=2}switch(e.ai()){case"DASH":s=1;break;case"HLS":s=0}i.g&&(i.g.setLevelSwitching(t.id,!0),i.g.setContainerFormat(a),i.j||i.g.setStreamingFormat(s))}n?$f(e,n=$d("adaptation",n=(new Map).set("oldTrack",r).set("newTrack",o))):_f(e,r,o),Bf(e,r,o)}}function Nf(e,t){var n=Array.from(e.h.audioTracks).find((function(e){return e.enabled}));if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var r=jf(e);_f(e,n=ei(n,r),t=ei(t,r)),Bf(e,n,t)}}function jf(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find((function(e){return e.selected})):null}function Uf(e){$f(e,$d("trackschanged")),Ff(e)}function _f(e,t,n){$f(e,t=$d("variantchanged",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function Bf(e,t,n){var r=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(r=!0),r&&Ff(e)}function Ff(e){$f(e,$d("audiotrackschanged"))}function Vf(e){$f(e,$d("textchanged"))}function Hf(e){$f(e,$d("texttrackvisibility"))}function Gf(e){e.g.abr.enabled||Kf(e),$f(e,$d("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function qf(e){var t=e.Kc().find((function(e){return e.active}));t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function Kf(e,t){if(t=void 0===t||t,e.m==np){e.De.stop();for(var n=g(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&Pf(e)}}function zf(e,t){var n,r,i,a;return L((function(o){switch(o.g){case 1:if(e.m==ep)return o.return();if(1===t.severity&&e.B.M++,n=!0,!(e.Sa&&e.i&&e.l)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3024!=t.code&&3018!=t.code){o.A(2);break}return"WEBKIT"===oe().Ha()&&3016==t.code?o.return():(x(o,3),S(o,Dl(e.l),5));case 5:r=o.h,n=!r,r&&(i=$d("mediasourcerecovered"),e.dispatchEvent(i)),k(o,2);break;case 3:E(o),n=!0;case 2:if(!n)return o.return();2===t.severity&&Kf(e,!1),a=$d("error",(new Map).set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),T(o)}}))}function Wf(e,t,n,r){r=void 0===r?e:r,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent($d(t,e))}function Xf(e,t,n,r){r=void 0!==r&&r,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent($d(r?"audiotrackchanged":"mediaqualitychanged",t))}function Yf(e,t){if(t=void 0===t||t,!e.h.error)return t?new Be(2,3,3016):null;var n=e.h.error.code;return t||1!=n?((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new Be(2,3,3016,n,t,e.h.error.message)):null}function Jf(e,t,n){t>0&&(e.W()||e.Si(t)),n<(t=e.getDuration())&&(e.W()||e.Ab(n))}function $f(e,t){L((function(n){if(1==n.g)return S(n,Promise.resolve(),2);e.m!=ep&&e.dispatchEvent(t),T(n)}))}function Qf(e){for(var t=new Set,n=(e=g(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Rr(n.language)):t.add("und");return t}function Zf(e){for(var t=new Map,n=new Map,r=0;r<e.length;r++){var i=e[r],a="und",o=[];i.language&&(a=Rr(i.language)),(o="variant"==i.type?i.audioRoles:i.roles)&&o.length||(o=[""]),t.has(a)||t.set(a,new Set);for(var s=(o=g(o)).next();!s.done;s=o.next())s=s.value,t.get(a).add(s),i.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(s,i.label))}var u=[];return t.forEach((function(e,t){for(var r=(e=g(e)).next();!r.done;r=e.next()){r=r.value;var i=null;n.has(t)&&n.get(t).has(r)&&(i=n.get(t).get(r)),u.push({language:t,role:r,label:i})}})),u}Wd.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null},p(Yd,Ui),(i=Yd.prototype).destroy=function(){var e,t=this;return L((function(n){switch(n.g){case 1:return t.m==ep?n.return():(Jd(t),e=t.detach(),t.m=ep,S(n,e,2));case 2:return S(n,t.ng(),3);case 3:if(t.Ie&&(t.Ie.release(),t.Ie=null),t.ye&&(t.ye.release(),t.ye=null),t.j&&(t.j.release(),t.j=null),t.ac&&(t.ac.release(),t.ac=null),t.xc&&(t.xc.release(),t.xc=null),t.Ce=null,t.g=null,t.B=null,t.xe=null,t.K=null,t.wa=null,!t.J){n.A(4);break}return S(n,t.J.destroy(),5);case 5:t.J=null;case 4:t.o&&(t.o.release(),t.o=null),t.Da&&(t.Da.destroy(),t.Da=null),Ui.prototype.release.call(t),T(n)}}))},i.fc=function(e,t){t=void 0===t||t;var n,r,i,a=this;return L((function(o){switch(o.g){case 1:if(a.m==ep)throw new Be(2,7,7e3);if(n=a.h&&a.h==e,!a.h||a.h==e){o.A(2);break}return S(o,a.detach(),2);case 2:return S(o,ef(a,"attach"),4);case 4:if(o.h)return o.return();if(x(o,5,6),n||(Zd(a,"attach"),r=function(){var e=Yf(a,!1);e&&zf(a,e)},a.ye.D(e,"error",r),a.h=e,a.K&&a.K.setMediaElement(e)),oe(),!t||!Xy()||a.H){o.A(6);break}return S(o,sf(a),6);case 6:I(o),a.ma.release(),C(o,0);break;case 5:return i=E(o),S(o,a.detach(),10);case 10:throw i}}))},i.jj=function(e){this.Kh=e},i.detach=function(e){e=void 0!==e&&e;var t=this;return L((function(n){if(1==n.g){if(t.m==ep)throw new Be(2,7,7e3);return S(n,t.Ac(!1,e),2)}if(3!=n.g)return S(n,ef(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.ye.Pa(),t.h=null),Zd(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ma.release()}T(n)}))},i.Ac=function(t,n){t=void 0===t||t,n=void 0!==n&&n;var r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b=this;return L((function(w){switch(w.g){case 1:return b.m!=ep&&(b.m=tp),S(w,ef(b,"unload"),2);case 2:return w.h?w.return():(A(w,3),b.Sa=!1,Zd(b,"unload"),Jd(b),r=b.ze.map((function(e){return e()})),b.ze=[],S(w,Promise.all(r),5));case 5:if(b.dispatchEvent($d("unloading")),b.we&&(b.we.release(),b.we=null),b.ya&&(b.ya.release(),b.ya=null),b.ib&&(b.ib.release(),b.ib=null),b.h&&(b.j.Pa(),b.ac.Pa()),b.De.stop(),b.ob&&(b.ob.release(),b.ob=null),b.Fa&&(b.Fa.stop(),b.Fa=null),!b.I){w.A(6);break}return S(w,b.I.stop(),7);case 7:b.I=null,b.wc=null;case 6:if(b.o&&b.o.stop(),!b.l){w.A(8);break}return S(w,b.l.destroy(),9);case 9:b.l=null;case 8:if(b.M&&(b.M.release(),b.M=null),b.G&&(b.G.release(),b.G=null),"webkit"!==e.shakaMediaKeysPolyfill||!b.F){w.A(10);break}return S(w,b.F.destroy(),11);case 11:b.F=null;case 10:if(!b.H){w.A(12);break}return S(w,b.H.destroy(),13);case 13:b.H=null;case 12:if(b.C&&!n&&b.C.onAssetUnload(),b.oa&&!n&&(b.oa.destroy(),b.oa=null),n||b.$f.stop(),b.K&&function(e){e.F.clear(),e.C=!1,e.J=!0,e.I=!1,e.o=!1,e.u=0,e.B=0,e.H=0,e.K={request:!1,response:!1,event:!1},Qc(e),e.m={},e.h=null,e.i.Pa()}(b.K),b.wa&&(b.wa.g=null),!b.u){w.A(14);break}return S(w,b.u.destroy(),15);case 15:b.u=null;case 14:if(b.$=!1,b.h){for(i=g(b.Yf),a=i.next();!a.done;a=i.next())(o=a.value).src.startsWith("blob:")&&URL.revokeObjectURL(o.src),o.remove();b.Yf=[],Zo(b.h)&&b.h.load()}if(!b.F){w.A(16);break}return S(w,b.F.destroy(),17);case 17:b.F=null;case 16:if(b.Ta&&b.X!=b.Ta.rd()&&(b.Ta.j||b.Ta.destroy(),b.Ta=null),b.X=null,b.aa=null,b.R=null,b.i){for(s=g(b.i.variants),u=s.next();!u.done;u=s.next())for(l=u.value,c=g([l.audio,l.video]),d=c.next();!d.done;d=c.next())(f=d.value)&&f.segmentIndex&&f.segmentIndex.release();for(p=g(b.i.textStreams),h=p.next();!h.done;h=p.next())(m=h.value).segmentIndex&&m.segmentIndex.release()}for(b.g&&b.g.streaming.clearDecodingCache&&(ci.clear(),Ai.clear()),b.i=null,b.B=new sc,b.Jh=null,b.Zb=null,b.V=null,b.Ke=-1,b.Ge=[],y=g(b.tc.values()),v=y.next();!v.done;v=y.next())v.value.stop();b.tc.clear(),b.kb=[],b.Xf=-1,b.J&&b.J.Qh(),Ef(b);case 3:I(w),b.ma.release(),C(w,4);break;case 4:if(oe(),t&&Xy()&&!b.H&&b.h)return S(w,sf(b),0);w.A(0)}}))},i.kl=function(e){this.O=e},i.load=function(t,n,r){n=void 0===n?null:n;var i,a,o,s,u,l,c,d,f,p,h,m,y,v,b=this;return L((function(w){switch(w.g){case 1:if(b.m==ep)throw new Be(2,7,7e3);if(i=null,a="",t instanceof dc){if(t.j)throw new Be(2,7,7006);a=(i=t).rd()||""}else a=t||"";return S(w,Xd(b.ma,"load"),2);case 2:if(b.ma.release(),!b.h)throw new Be(2,7,7002);if(!b.X){w.A(3);break}return b.X=a,S(w,b.Ac(!1),3);case 3:if(o=++b.Je,s=function(){return L((function(e){if(1==e.g)return b.Je==o?e.A(0):i?S(e,i.destroy(),3):e.A(3);throw new Be(2,7,7e3)}))},u=function(e,t){return L((function(n){switch(n.g){case 1:return A(n,2),S(n,Xd(b.ma,t),4);case 4:return S(n,s(),5);case 5:return S(n,e(),6);case 6:return S(n,s(),7);case 7:i&&b.g&&(i.g=b.g);case 2:I(n),b.ma.release(),C(n,0)}}))},x(w,5,6),null==n&&i&&(n=i.getStartTime()),b.O=n,b.Sa=!1,b.dispatchEvent($d("loading")),i){r=i.V,w.A(8);break}if(r){w.A(8);break}return S(w,u((function(){return L((function(e){if(1==e.g)return S(e,af(b,a),2);r=e.h,T(e)}))}),"guessMimeType_"),8);case 8:if(l=!!i,i){pc(i,b),b.B=i.getStats(),w.A(11);break}return S(w,nf(b,a,n,r,!0,b.g),12);case 12:(i=w.h)?(i.F=!1,pc(i,b),b.B=i.getStats(),i.start(),i.B.catch((function(){}))):b.B=new sc;case 11:return c=!i,d=Date.now()/1e3,b.B=i?i.getStats():new sc,b.X=a,b.aa=r||null,Ef(b),f=function(){var e=b.h?b.h.buffered:null;return{start:zo(e)||0,end:Wo(e)||0}},b.ya=new Gu(f),b.ya.addEventListener("regionadd",(function(e){lf(b,e.region,"metadataadded")})),c?S(w,u((function(){return L((function(e){return S(e,function(e,t){var n,r,i;return L((function(a){return 1==a.g?(n=Date.now()/1e3,r=!0,e.F=e.md({sc:e.J,onError:function(t){zf(e,t)},vf:function(){},onExpirationUpdated:function(){var t=$d("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&r&&(r=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),i=li([t]),e.F.O=!0,S(a,ba(e.F,[i],[]),2)):S(a,e.F.fc(e.h),0)}))}(b,r),0)}))}),"initializeSrcEqualsDrmInner_"),23):(b.ib=new Gu(f),S(w,u((function(){return L((function(e){if(1==e.g)return S(e,Promise.race([i.ma,i.B]),2);b.wc=i.H;var t=i;t.oa=!0,b.I=t.l,b.i=i.Hg(),T(e)}))}),"waitForFinish"),15));case 15:if(b.H){w.A(16);break}return S(w,u((function(){return L((function(e){return S(e,sf(b),0)}))}),"initializeMediaSourceEngineInner_"),16);case 16:return b.i&&b.i.textStreams.length&&(b.u.enableTextDisplayer?b.u.enableTextDisplayer():de("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),S(w,u((function(){return L((function(e){return S(e,i.B,0)}))}),"waitForFinish"),18);case 18:if(b.g=i.getConfiguration(),b.Ae=i.G,b.I&&b.I.setMediaElement&&b.h&&b.I.setMediaElement(b.h),b.we=function(e){return e.wa=!0,e.I}(i),b.ue=i.Fa,(p=i.C)&&(b.N=p),l&&b.h&&"AUDIO"===b.h.nodeName&&(function(e){for(var t=g(e.i.variants),n=t.next();!n.done;n=t.next())(n=n.value).video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter((function(e){return e.audio}))}(b),b.configure("manifest.disableVideo",!0)),i.i){w.A(19);break}return S(w,u((function(){return L((function(e){return S(e,mc(i,b.h),0)}))}),"drmEngine_.init"),19);case 19:return b.F=function(e){return e.aa=!0,e.i}(i),S(w,u((function(){return L((function(e){return S(e,b.F.fc(b.h),0)}))}),"drmEngine_.attach"),21);case 21:return h=b.g.abrFactory,b.o&&b.Ce==h||(b.Ce=h,b.o&&b.o.release(),b.o=h(),"function"!=typeof b.o.setMediaElement&&(de("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),b.o.setMediaElement=function(){}),"function"!=typeof b.o.setCmsdManager&&(de("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),b.o.setCmsdManager=function(){}),"function"!=typeof b.o.trySuggestStreams&&(de("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),b.o.trySuggestStreams=function(){}),b.o.configure(b.g.abr)),m=function(e){return e.xa=!0,e.M}(i),y=i.o,S(w,u((function(){return L((function(t){return S(t,function(t,n,r,i){var a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,x,A,k,E,I,C,M,D,P,R,O,N;return L((function(j){switch(j.g){case 1:Zd(t,"load"),a=t.h,t.M=new ju({Ye:function(){return a.playbackRate},Tc:function(){return a.defaultPlaybackRate},ph:function(e){a.playbackRate=e},ui:function(e){a.currentTime+=e}}),uf(t,a,n),"onchange"in e.screen&&t.j.D(e.screen,"change",(function(){if(t.N.getConfiguration){var e=t.N.getConfiguration();"AUTO"==e.hdrLevel?Pf(t):"AUTO"==t.g.preferredVideoHdrLevel&&t.g.abr.enabled&&(e.hdrLevel="AUTO",t.N.configure(e),Pf(t))}})),o=!1,s=g(t.i.variants);for(u=s.next();!u.done;u=s.next())l=u.value,(c=l.video&&l.video.dependencyStream)&&(o=mt(c));!function(e,t,n){n||t.lcevc.enabled?(Jd(e),null==e.S&&(e.S=new pt(e.h,e.Kh,t.lcevc,n),e.H&&(e.H.H=e.S))):Jd(e)}(t,t.g,o),t.Fd=t.g.preferredTextLanguage,t.Md=t.g.preferredTextRole,t.Ld=t.g.preferForcedSubs,Jf(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),t.o.init((function(e,n,r){t.i&&t.l&&e!=t.l.o&&Of(t,e,!0,void 0!==n&&n,void 0===r?0:r)})),t.o.setMediaElement(a),t.o.setCmsdManager(t.wa),t.l=function(e){return new sl(e.i,{Gc:function(){return e.G?e.G.He():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Ob:function(){return e.Ob()},video:e.h,Z:e.H,sc:e.J,onError:function(t){return zf(e,t)},onEvent:function(t){return e.dispatchEvent(t)},wf:function(t,n,r){var i=t.startTime,a=t.endTime,o=n.type;if(o!=lt){if(e.G){e.G.xi();var s=_s(e.H,o);!e.W()&&e.h.paused&&!e.h.seeking&&null!=s&&s>0&&e.G.He()<s&&e.G.Wf(s)}hf(e)}r=(new Map).set("start",i).set("end",a).set("contentType",o).set("isMuxed",r),e.dispatchEvent($d("segmentappended",r)),e.o&&n.fastSwitching&&t.Xc&&t.ee&&e.o.trySuggestStreams()},Ck:function(t,n){(n=n.xd)&&e.ue&&function(e,t,n){var r=function(e,t){var n=e.g.get(t);return n||(n={me:[],lg:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,r=e[e.length-1].end,i=t.me;t.me=i.filter((function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=r)}))}else t.me=[]}(e,r),e={xd:t,position:n},(t=(r=r.me).findIndex((function(e){return e.position>=n})))>=0?r.splice(t,r[t].position==n?1:0,e):r.push(e)}(e.ue,n,t)},Oh:function(t,n){var r=e.F;if(r.h.parseInbandPsshEnabled&&!r.H&&["audio","video"].includes(t)){t=new ma(Ne(n)),n=0;for(var i=g(t.data),a=i.next();!a.done;a=i.next())n+=a.value.length;if(0==n)r=Promise.resolve();else{for(n=new Uint8Array(n),i=0,a=(t=g(t.data)).next();!a.done;a=t.next())a=a.value,n.set(a,i),i+=a.length;xa(r,"cenc",n),r=r.m}}else r=Promise.resolve();return r},disableStream:function(t,n){return e.disableStream(t,n)},al:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.ee)}})}(t),t.l.configure(t.g.streaming),t.m=np,t.dispatchEvent($d("streaming")),d=r;case 2:for((p=t.l.o)||d||(d=Rf(t,!0)),h=[],m=g([(f=p||d).video,f.audio]),y=m.next();!y.done;y=m.next())(v=y.value)&&!v.segmentIndex&&(h.push(v.createSegmentIndex()),v.dependencyStream&&h.push(v.dependencyStream.createSegmentIndex()));if(!(h.length>0)){j.A(4);break}return S(j,Promise.all(h),4);case 4:if(!f||0!=f.disabledUntilTime){j.A(2);break}if(t.I&&t.I.onInitialVariantChosen&&t.I.onInitialVariantChosen(f),t.i.isLowLatency&&(t.g.streaming.lowLatencyMode?t.configure(t.Zf):W("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),t.K&&(function(e,t){e.o=t,e.o?e.l==Ad?e.l=kd:e.l==Ed&&(e.l=Id):e.l==kd?e.l=Ad:e.l==Id&&(e.l=Ed)}(t.K,t.i.isLowLatency&&t.g.streaming.lowLatencyMode),function(e,t){if(e.g&&e.g.enabled&&(nd(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then((function(){e.H=t})).catch((function(){e.H=0}))}}(t.K,1e3*n)),Jf(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),function(e,t,n){e.j.presentationTimeline.W()||(e.aa=t,e.$=n)}(t.l,t.g.playRangeStart,t.g.playRangeEnd),t.Sa=!0,t.dispatchEvent($d("canupdatestarttime")),b=function(e){t.G=function(e,t){return new Eu(e.h,e.i,e.g.streaming,t,(function(){e.ob&&Bu(e.ob,!e.G.Hh()),e.l&&e.l.bd(),e.R&&hf(e,"seeking")}),(function(t){return e.dispatchEvent(t)}))}(t,e),t.ob=function(e,t){var n=e.W()||"number"==typeof t&&t>0;(t=new wc(e.we,n)).addEventListener("enter",(function(t){Wf(e,"timelineregionenter",t.region)})),t.addEventListener("exit",(function(t){Wf(e,"timelineregionexit",t.region)})),t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(Wf(e,"timelineregionenter",n),Wf(e,"timelineregionexit",n))}));var r=new wc(e.ya,n);r.addEventListener("enter",(function(t){lf(e,t.region,"metadata")})),(n=new wc(e.ib,n)).addEventListener("enter",(function(t){t=(new Map).set("detail",t.region.emsg),e.dispatchEvent($d("emsg",t))}));var i=new _u(e.h);return i.g.add(t),i.g.add(r),i.g.add(n),e.ue&&i.g.add(e.ue),i}(t,e),ff(t,a,!1)},t.g.streaming.startAtSegmentBoundary||(null==(w=t.O)&&t.i.startTime&&(w=t.i.startTime),b(w)),p){j.A(7);break}if(!t.g.streaming.startAtSegmentBoundary){j.A(8);break}return x=t.i.presentationTimeline,t.O instanceof Date&&(k=x.m||x.i,null!=(E=t.O.getTime()/1e3-k)&&(A=E)),null==A&&(A="number"==typeof t.O?t.O:t.h.currentTime),null==t.O&&t.i.startTime&&(A=t.i.startTime),I=x.Xb(),C=x.Gb(),A<I?A=I:A>C&&(A=C),S(j,function(e,t){var n,r,i,a,o;return L((function(s){return 1==s.g?(n=e.audio,r=e.video,i=function(e,t){var n,r,i;return L((function(a){return 1==a.g?e?e.segmentIndex?a.A(2):S(a,e.createSegmentIndex(),2):a.return(null):(r=(n=e.segmentIndex.Vb(t))?n.next().value:null)?(i=r.startTime,a.return(i)):a.return(null)}))},S(s,i(n,t),2)):3!=s.g?(a=s.h,S(s,i(r,t),3)):null!=(o=s.h)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}(d,A),9);case 9:M=j.h,b(M);case 8:Of(t,d,!0,!1,0);case 7:return t.G.ready(),t.Kc().find((function(e){return e.active}))||((D=ri(t.i.textStreams,t.Fd,t.Md,t.Ld)[0]||null)&&oc(t.B.h,D,!0),d&&(D?(ui(d.audio,D,t.g)&&(t.$=!0),t.$&&t.u.setTextVisibility(!0)):(t.$=!1,t.u.setTextVisibility(!1)),Hf(t)),D&&(t.g.streaming.alwaysStreamText||t.Og())&&(cl(t.l,D),qf(t))),S(j,t.l.start(i),10);case 10:t.g.abr.enabled&&(t.o.enable(),Gf(t)),Uf(t),t.i.variants.some((function(e){return e.primary})),((P=t.W())&&(t.g.streaming.liveSync&&t.g.streaming.liveSync.enabled||t.i.serviceDescription||t.g.streaming.liveSync.panicMode)||t.g.streaming.vodDynamicPlaybackRate)&&(R=function(){return Mf(t)},t.j.D(a,"timeupdate",R)),P||(O=function(){return Df(t)},t.j.D(a,"timeupdate",O),Df(t),t.i.nextUrl&&(t.g.streaming.preloadNextUrlWindow>0&&(N=function(){var e;return L((function(n){if(1==n.g)return e=t.Qa().end-t.h.currentTime,!isNaN(e)&&e<=t.g.streaming.preloadNextUrlWindow?(t.j.Ma(a,"timeupdate",N),S(n,t.preload(t.i.nextUrl),4)):n.A(0);t.Ta=n.h,T(n)}))},t.j.D(a,"timeupdate",N)),t.j.D(a,"ended",(function(){t.load(t.Ta||t.i.nextUrl)})))),t.C&&t.C.onManifestUpdated(P),T(j)}}))}(b,d,y,m),0)}))}),"loadInner_"),22);case 22:!function(e){if(e.J)for(var t=g(e.J),n=t.next();!n.done;n=t.next())(n=n.value)();e.J=null}(i),b.aa&&oe().aj()&&dr(b.aa)&&function(t,n,r){t.g&&e.ManagedMediaSource&&t.i&&t.B.useSourceElements&&(t.C&&t.g.removeChild(t.C),t.C=Qo(n,r),t.g.appendChild(t.C),t.g.disableRemotePlayback=!1)}(b.H,b.X,b.aa),w.A(14);break;case 23:return S(w,u((function(){return L((function(e){return S(e,function(e,t,n){var r,i,a,o,s,u,l,c,d,f,p,h;return L((function(m){switch(m.g){case 1:if(Zd(e,"src-equals"),r=e.h,e.G=new xu(r),i=!1,e.ze.push((function(){i=!0})),e.dispatchEvent($d("canupdatestarttime")),null!=e.O&&e.G.Wf(e.O),e.ob=function(e,t){(t=new wc(e.ya,t instanceof Date||t>0)).addEventListener("enter",(function(t){lf(e,t.region,"metadata")}));var n=new _u(e.h);return n.g.add(t),n}(e,e.O||0),e.M=new ju({Ye:function(){return r.playbackRate},Tc:function(){return r.defaultPlaybackRate},ph:function(e){r.playbackRate=e},ui:function(e){r.currentTime+=e}}),ff(e,r,!0),r.textTracks&&(of(e),a=function(t){if(!(e.u instanceof Bc)){var n=wf(e).find((function(e){return"disabled"!==e.mode}));n&&(n.mode=t?"showing":"hidden"),e.u instanceof Vc&&(n=function(e){return Array.from(e.h.textTracks).find((function(e){return"Shaka Player TextTrack"==e.label}))}(e))&&(n.mode=!t&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(r,"enterpictureinpicture",(function(){return a(!0)})),e.j.D(r,"leavepictureinpicture",(function(){return a(!1)})),r.remote?(e.j.D(r.remote,"connect",(function(){return a(!1)})),e.j.D(r.remote,"connecting",(function(){return a(!1)})),e.j.D(r.remote,"disconnect",(function(){return a(!1)}))):"webkitCurrentPlaybackTargetIsWireless"in r&&e.j.D(r,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return a(!1)})),((o=r).webkitPresentationMode||o.webkitSupportsFullscreen)&&e.j.D(o,"webkitpresentationmodechanged",(function(){o.webkitPresentationMode?a("inline"!==o.webkitPresentationMode):o.webkitSupportsFullscreen&&a(o.webkitDisplayingFullscreen)}))),uf(e,r,t),!(s=function(e,t,n){try{if(!e.g.enabled)return t;var r=td(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var i=gd;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":i=yd;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":i=hd;break e}i=void 0}return r.ot=i,r.su=!0,pd(t,dd(r))}catch(e){return X("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}(e.K,e.X,n)).includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(s+="#t=",e.g.playRangeStart>0&&(s+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(s+=","+e.g.playRangeEnd)),!e.H){m.A(2);break}return S(m,e.H.destroy(),3);case 3:e.H=null;case 2:return Zo(r),r.src=s,"TV"==(u=oe()).Ua()&&r.load(),"none"!=r.preload&&!r.autoplay&&dr(n)&&"WEBKIT"===u.Ha()&&r.load(),e.m=rp,e.dispatchEvent($d("streaming")),l=new Ii,hu(r,HTMLMediaElement.HAVE_METADATA,e.j,(function(){e.G.ready(),e.aa&&dr(e.aa)||l.resolve()})),c=function(){return new Promise((function(t){var n=new xr(t);e.j.D(r.textTracks,"change",(function(){return n.ia(.5)})),n.ia(.5)}))},hu(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,(function(){var t,n,r,a,o;return L((function(s){if(1==s.g)return S(s,c(),2);if(i)return s.return();if(function(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Ni(t,e.g.preferredAudioRole)}(e),(t=wf(e)).some((function(e){return"showing"===e.mode}))&&(e.$=!0,e.u.setTextVisibility(!0)),!(e.u instanceof Bc))for(t.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():de("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),n=!1,r=g(t),a=r.next();!a.done;a=r.next())"disabled"!==(o=a.value).mode&&(n?(o.mode="disabled",W("Found more than one enabled text track, disabling it",o)):(bf(e,o),n=!0));!function(e){var t=e.g.preferredTextLanguage;""!=t&&e.jh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}(e),e.aa&&dr(e.aa)&&l.resolve(),T(s)}))})),r.error?l.reject(Yf(e)):"none"==r.preload&&(W('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),l.resolve()),e.j.Ba(r,"error",(function(){l.reject(Yf(e))})),S(m,Ir(e.g.streaming.loadTimeout,l),4);case 4:((d=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(f=function(){return Mf(e)},e.j.D(r,"timeupdate",f)),d||(p=function(){return Df(e)},e.j.D(r,"timeupdate",p),Df(e)),e.C&&(e.C.onManifestUpdated(d),d&&(h=e.Qa().end,e.j.D(r,"progress",(function(){var t=e.Qa().end;h!=t&&(e.C.onManifestUpdated(e.W()),h=t)})))),e.Sa=!0,T(m)}}))}(b,d,r),0)}))}),"srcEqualsInner_"),14);case 14:b.dispatchEvent($d("loaded"));case 6:if(I(w),!i){w.A(25);break}return S(w,i.destroy(),25);case 25:b.Ta=null,C(w,0);break;case 5:if(!(v=E(w))||7e3==v.code){w.A(27);break}return S(w,b.Ac(!1),27);case 27:throw v}}))},i.dj=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,r=this;return L((function(i){return 1==i.g?S(i,tf(r),2):3!=i.g?(n=i.h,S(i,r.Ac(e,t),3)):i.return(n)}))},i.Uh=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t;var n,r=this;return L((function(i){return 1==i.g?S(i,tf(r,t),2):3!=i.g?(n=i.h,S(i,r.detach(e),3)):i.return(n)}))},i.preload=function(e,t,n,r){t=void 0===t?null:t;var i,a,o=this;return L((function(s){return 1==s.g?(ec(i=kf(o),r||o.g,kf(o)),S(s,nf(o,e,t,n,!1,i),2)):((a=s.h)?a.start():zf(o,new Be(2,7,7005)),s.return(a))}))},i.ng=function(){var e,t,n,r,i=this;return L((function(a){for(e=[],t=g(i.Ee),n=t.next();!n.done;n=t.next())(r=n.value).j||e.push(r.destroy());return i.Ee=[],S(a,Promise.all(e),0)}))},i.Lk=function(){for(var e=this.ma;e.g;)e.release()},i.md=function(e){return new va(e)},i.configure=function(e,t){var n=this.getConfiguration();if(2==arguments.length&&"string"==typeof e&&(e=Ul(e,t)),"preferredVariantRole"in e&&(de("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(de("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(de("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){de("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var r=oe();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&"WEBKIT"===r.Ha(),delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&"boolean"==typeof e.streaming.liveSync&&(de("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),r=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=r),e.streaming&&(!e.streaming.liveSync||!("targetLatency"in e.streaming.liveSync))&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){r=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-r)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=r+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(de("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(de("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(de("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(de("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(de("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(de("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(de("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(de("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){de("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(de("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(de("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(de("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(de("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(de("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(de("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(de("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(de("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(de("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(de("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){for(var o in r=!1,e.drm.advanced){var s=e.drm.advanced[o];i=s.videoRobustness,s=s.audioRobustness,"videoRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].videoRobustness)&&(e.drm.advanced[o].videoRobustness=[i],r=!0),"audioRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].audioRobustness)&&(e.drm.advanced[o].audioRobustness=[s],r=!0)}r&&de("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(de("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(de("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(de("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),o=ec(this.g,e,kf(this)),gf(this,n),o},i.sj=function(e){this.Zf=e},i.getConfiguration=function(){var e=kf(this);return ec(e,this.g,kf(this)),e},i.Cj=function(){return this.Zf},i.ci=function(){return ec(kf(this),this.g,kf(this)),Bl(this.g,kf(this))},i.Zh=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.h.currentTime+t,this.Qa().end)))return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},i.Ii=function(){var e,t=this.getConfiguration();for(e in this.g)delete this.g[e];ec(this.g,kf(this),kf(this)),gf(this,t)},i.Kj=function(){return this.m},i.ai=function(){return this.i?this.i.type:null},i.Oj=function(){return this.h},i.Wb=function(){return this.J},i.rd=function(){return this.X},i.Yh=function(){return this.C?this.C:null},i.ei=function(){return this.Da?this.Da:null},i.W=function(){return this.i&&!this.va()?this.i.presentationTimeline.W():!(!this.h||!this.h.src&&!this.va())&&this.h.duration==1/0},i.Vc=function(){return!!this.i&&this.i.presentationTimeline.Vc()},i.hk=function(){if(this.i&&!this.va()){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src&&!this.va())&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},i.qk=function(){if(this.i&&!this.va()){var e=this.i.variants;return!!e.length&&(!((e=e[0]).audio||!e.video)&&!e.video.codecs.includes(","))}return!(!this.h||!this.h.src&&!this.va()||!this.h.audioTracks)&&0==this.h.audioTracks.length},i.Qa=function(){if(this.i&&!this.va()){if(!this.Sa&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Xb(),end:e.Gb()}}if(this.h&&(this.h.src||this.va())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return{start:t,end:e=Math.min(e.end(e.length-1),n)}}return{start:0,end:0}},i.ek=function(){this.W()&&(this.h.currentTime=this.Qa().end)},i.ik=function(){return this.Sa},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.F?this.F.g:null},i.Wd=function(){return this.F?this.F.Wd():1/0},i.Gg=function(){return this.F?this.F.Gg():[]},i.Xe=function(){return this.F?this.F.Xe():{}},i.Ng=function(){return this.R?this.R.g==Ha:!!this.X},i.Ob=function(){return this.h?this.M?this.M.i:1:0},i.Fh=function(e){this.m==np&&this.l&&ul(this.l,e)},i.se=function(e,t){t=void 0===t||t,0==e?W("A trick play rate of 0 is unsupported!"):(this.M.set(e),this.m==np&&(this.o.playbackRateChanged(e),this.Fh(t&&1!=e)),If(this,e))},i.Pd=function(){var e=this.M.Tc();this.m==rp&&this.M.set(e),this.m==np&&(this.M.set(e),this.o.playbackRateChanged(e),this.Fh(!1)),this.ac.Pa()},i.lc=function(){if(this.i&&!this.va()){for(var e=this.l?this.l.o:null,t=[],n=0,r=g(this.i.variants),i=r.next();!i.done;i=r.next())if(ti(i=i.value)){var a=Yr(i);a.active=i==e,a.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}if(this.h&&this.h.audioTracks){var o=jf(this);return(e=Array.from(this.h.audioTracks)).length?e.map((function(e){return ei(e,o)})):o?[ei(null,o)]:[]}return[]},i.Kc=function(){if(this.i){if(this.va())return[];for(var e=this.l?this.l.B:null,t=[],n=g(this.i.textStreams),r=n.next();!r.done;r=n.next()){var i=Jr(r=r.value);i.active=r==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?wf(this).map((function(e){return Zr(e)})):[]},i.Hj=function(){var e=this.Ge;return this.i&&(e=this.i.imageStreams),e.map((function(e){return $r(e)}))},i.vj=function(e){var t,n,r=this;return L((function(i){return 1==i.g?S(i,yf(r,e),2):(t=i.h)?(n=[],t.segmentIndex.Fb((function(e){var r=mf(e.tilesLayout||t.tilesLayout);if(r)for(var i=r.rows*r.columns,a=e.j-e.startTime,o=0;o<i;o++){var s=vf(e,t,e.startTime+a*o/i,r);n.push(s)}})),t.closeSegmentIndex&&t.closeSegmentIndex(),i.return(n)):i.return(null)}))},i.Yj=function(e,t){var n,r,i,a,o,s=this;return L((function(u){return 1==u.g?S(u,yf(s,e),2):(n=u.h)?(n.closeSegmentIndex&&(s.tc.has(n)||(r=new xr((function(){n.closeSegmentIndex(),s.tc.delete(n)})),s.tc.set(n,r)),s.tc.get(n).ia(5)),null==(i=n.segmentIndex.find(t))?u.return(null):(a=n.segmentIndex.get(i),(o=mf(a.tilesLayout||n.tilesLayout))?u.return(vf(a,n,t,o)):u.return(null))):u.return(null)}))},i.kh=function(e){var t,n=this;this.i&&this.G&&((t=n.i.textStreams.find((function(t){return t.id==e.id})))&&t!=n.l.B&&(oc(n.B.h,t,!1),cl(n.l,t),Vf(n),qf(n),n.Fd=t.language),!this.va())||function(){if(n.h&&n.h.textTracks){var t=wf(n),r=t.find((function(t){return Qr(t)===e.id}));if(r){if(n.u instanceof Bc)for(var i=(t=g(t)).next();!i.done;i=t.next()){var a=(i=i.value)===r?n.$?"showing":"hidden":"disabled";i.mode!==a&&(i.mode=a)}else(t=t.find((function(e){return"disabled"!==e.mode})))!==r&&(t&&(t.mode="disabled",n.j.Ma(t,"cuechange"),n.u.remove(0,1/0)),r&&bf(n,r));Vf(n),qf(n)}}}()},i.Ff=function(e,t,n){var r=this;t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.G&&(function(){var i=r.i.variants.find((function(t){return t.id==e.id}));if(i&&ti(i)){var a=r.l.o;r.g.abr.enabled&&(a.video!=i.video||a.audio&&i.audio&&a.audio.language==i.audio.language&&a.audio.channelsCount==i.audio.channelsCount&&a.audio.label==i.audio.label)&&W("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.va()?Of(r,i,!1,!1,0):Of(r,i,!1,t||!1,n||0),r.N.configure({language:i.language,role:i.audio&&i.audio.roles&&i.audio.roles[0]||"",videoRole:i.video&&i.video.roles&&i.video.roles[0]||"",channelCount:i.audio&&i.audio.channelsCount?i.audio.channelsCount:0,hdrLevel:i.video&&i.video.hdr?i.video.hdr:"",spatialAudio:!(!i.audio||!i.audio.spatialAudio)&&i.audio.spatialAudio,videoLayout:i.video&&i.video.videoLayout?i.video.videoLayout:"",audioLabel:i.audio&&i.audio.label?i.audio.label:"",videoLabel:i.video&&i.video.label?i.video.label:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:i.audio&&i.audio.codecs?i.audio.codecs:"",activeAudioCodec:a.audio&&a.audio.codecs?a.audio.codecs:"",activeAudioChannelCount:a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Pf(r)}}(),!this.va())||function(){if(e.originalAudioId&&r.h&&r.h.audioTracks)for(var t=Array.from(r.h.audioTracks),n=(t=g(t)).next();!n.done;n=t.next())if(Qr(n=n.value)==e.id){Nf(r,n);break}}()},i.Tk=function(e,t){var n,r=this;(t=void 0===t?0:t,this.i&&this.G&&((n=r.N.getConfiguration()).audioCodec=e.codecs||"",n.audioLabel=e.label||"",n.channelCount=e.channelsCount||0,n.language=e.language,n.role=e.roles[0]||"",n.spatialAudio=e.spatialAudio,r.N.configure(n),Lf(r,!0,t,!1,!1),!this.va()))||function(){if(r.h&&r.h.audioTracks){for(var t=Rr(e.language),n=Array.from(r.h.audioTracks),i=null,a=(n=g(n)).next();!a.done;a=n.next()){var o=(a=a.value).language||"und";if(a.label==e.label&&Rr(o)==t&&a.kind==e.roles[0]){i=a;break}}i&&Nf(r,i)}}()},i.getAudioTracks=function(){if(this.i&&!this.va()){var e=this.lc();if(!e.length)return[];var t=e.find((function(e){return e.active}));if(!t)return[];var n=e;if(this.m!=np||this.va()||(n=e.filter((function(e){return e.originalVideoId===t.originalVideoId&&(e.audioCodec||pr.includes(e.audioMimeType||""))}))),!n.length)return[];e=new Map;for(var r=(n=g(n)).next();!r.done;r=n.next()){var i=(r=r.value).originalAudioId;i||null==r.audioId||(i=String(r.audioId)),!i&&r.codecs.includes(",")&&r.audioCodec&&(i="muxed-in-video"),i&&(i+=[r.language,r.label,r.channelsCount,r.spatialAudio].join("_"),e.set(i,{active:r.active,language:r.language,label:r.label,mimeType:r.audioMimeType,codecs:r.audioCodec,primary:r.primary,roles:r.audioRoles||[],accessibilityPurpose:r.accessibilityPurpose,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,originalLanguage:r.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map((function(e){var t=e.language;return t={active:e.enabled,language:Rr(t||"und"),label:e.label,mimeType:null,codecs:null,primary:"main"==e.kind,roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:t},e.kind&&t.roles.push(e.kind),e.configuration&&(e.configuration.codec&&(t.codecs=e.configuration.codec),e.configuration.sampleRate&&(t.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(t.channelsCount=e.configuration.numberOfChannels)),t})):[]},i.Vk=function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n;var r=this.lc();if(r.length){var i=r.find((function(e){return e.active}));i&&(r=r.find((function(t){return t.audioId===i.audioId&&(t.videoBandwidth||t.bandwidth)==e.bandwidth&&t.width==e.width&&t.height==e.height&&t.frameRate==e.frameRate&&t.pixelAspectRatio==e.pixelAspectRatio&&t.hdr==e.hdr&&t.colorGamut==e.colorGamut&&t.videoLayout==e.videoLayout&&t.videoMimeType==e.mimeType&&t.videoCodec==e.codecs&&ee(t.videoRoles,e.roles)&&t.videoLabel==e.label})))&&!r.active&&this.Ff(r,t,n)}},i.getVideoTracks=function(){if(this.m==rp||this.va())return[];var e=this.lc();if(!e.length)return[];var t=e.find((function(e){return e.active}));if(!t)return[];var n=e.filter((function(e){return e.originalAudioId===t.originalAudioId&&e.audioId===t.audioId&&e.audioGroupId===t.audioGroupId&&e.videoCodec}));if(!n.length)return[];e=new Map;for(var r=(n=g(n)).next();!r.done;r=n.next()){var i=(r=r.value).originalVideoId;i||null==r.videoId||(i=String(r.videoId)),i&&e.set(i,{active:r.active,bandwidth:r.videoBandwidth||r.bandwidth,width:r.width,height:r.height,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,mimeType:r.videoMimeType,codecs:r.videoCodec,roles:r.videoRoles||[],label:r.videoLabel})}return Array.from(e.values())},i.xj=function(){return Zf(this.lc())},i.Wj=function(){return Zf(this.Kc())},i.wj=function(){return Array.from(Qf(this.lc()))},i.Vj=function(){return Array.from(Qf(this.Kc()))},i.Ni=function(e,t,n,r,i,a,o){var s=this;n=void 0===n?0:n,r=void 0===r?0:r,i=void 0===i?"":i,a=void 0!==a&&a,o=void 0===o?"":o,this.i&&this.G&&(function(){function u(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0}var l=s.l.o;s.N=s.g.adaptationSetCriteriaFactory(),s.N.configure({language:e,role:t||"",videoRole:l.video&&l.video.roles&&l.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:a||!1,videoLayout:"",audioLabel:o||"",videoLabel:"",codecSwitchingStrategy:s.g.mediaSource.codecSwitchingStrategy,audioCodec:i||"",activeAudioCodec:l.audio&&l.audio.codecs?l.audio.codecs:"",activeAudioChannelCount:l.audio&&l.audio.channelsCount?l.audio.channelsCount:0,preferredAudioCodecs:s.g.preferredAudioCodecs,preferredAudioChannelCount:s.g.preferredAudioChannelCount});for(var c=s.N.create(s.i.variants),d=null,f=(c=g(c.values())).next();!f.done;f=c.next())ti(f=f.value)&&(!d||u(d,l)>u(f,l))&&(d=f);d!=l&&(d?(l=Yr(d),s.Ff(l,!0,r||0)):Lf(s))}(),!this.va())||function(){if(s.h&&s.h.audioTracks){var n=ri(s.lc(),e,t||"",!1)[0];n&&s.Ff(n)}}()},i.jh=function(e,t,n){var r,i=this;(n=void 0!==n&&n,this.i&&this.G&&(function(){i.Fd=e,i.Md=t||"",i.Ld=n||!1;var r=ri(i.i.textStreams,i.Fd,i.Md,i.Ld)[0]||null;r&&r!=i.l.B&&(oc(i.B.h,r,!1),i.g.streaming.alwaysStreamText||i.Og())&&(cl(i.l,r),Vf(i),qf(i))}(),!this.va()))||(r=ri(i.Kc(),e,t||"",n||!1)[0])&&i.kh(r)},i.Uk=function(e,t,n){var r=this;t=void 0===t||t,n=void 0===n?0:n,this.i&&this.G&&(function(){for(var i=null,a=g(r.i.variants),o=a.next();!o.done;o=a.next())if((o=o.value).audio.label==e){i=o;break}null!=i&&(r.N=r.g.adaptationSetCriteriaFactory(),r.N.configure({language:i.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Lf(r,t,n))}(),!this.va())||function(){if(r.h&&r.h.audioTracks){for(var t=Array.from(r.h.audioTracks),n=null,i=(t=g(t)).next();!i.done;i=t.next())(i=i.value).label==e&&(n=i);n&&Nf(r,n)}}()},i.Og=function(){var e=this.$;return this.u?this.u.isTextVisible():e},i.Bj=function(){return this.kb.map((function(e){return Jr(e)}))},i.zj=function(e){if(de("getChapters","Please use an getChaptersAsync."),!this.kb.length)return[];var t=Rr(e);if(!(e=this.kb.filter((function(e){return Rr(e.language)==t}))).length)return[];for(var n=[],r=new Set,i=(e=g(e)).next();!i.done;i=e.next())(i=i.value).segmentIndex&&i.segmentIndex.Fb((function(e){var t=e.P()[0],i=e.startTime+"-"+e.endTime+"-"+t;e={id:i,title:t,startTime:e.startTime,endTime:e.endTime},r.has(i)||(n.push(e),r.add(i))}));return n},i.Aj=function(e){var t,n,r,i,a,o,s,u=this;return L((function(l){switch(l.g){case 1:if(!u.kb.length)return l.return([]);if(t=Rr(e),!(n=u.kb.filter((function(e){return Rr(e.language)==t}))).length)return l.return([]);r=[],i=new Set,a=g(n),o=a.next();case 2:if(o.done){l.A(4);break}if((s=o.value).segmentIndex){l.A(5);break}return S(l,s.createSegmentIndex(),5);case 5:s.segmentIndex.Fb((function(e){var t=e.P()[0],n=e.startTime+"-"+e.endTime+"-"+t;e={id:n,title:t,startTime:e.startTime,endTime:e.endTime},i.has(n)||(r.push(e),i.add(n))})),o=a.next(),l.A(2);break;case 4:return l.return(r)}}))},i.qh=function(e){e=!!e,this.$!=e&&(this.$=e,this.m==np?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=ri(this.i.textStreams,this.Fd,this.Md,this.Ld)).length>0&&(cl(this.l,e[0]),Vf(this),qf(this)):function(e){var t=e.h.get(lt);t&&(Il(t),Cl(t).catch((function(){})),e.H=e.h.get(lt),e.h.delete(lt),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),Hf(this))},i.Pj=function(){if(this.G)var e=this.G.He();else{if(null==this.O)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.va()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},i.di=function(){if(this.i&&!this.va()){var e=this.i.presentationTimeline;return null===(e=e.m||e.i)?null:new Date(1e3*e)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},i.Ze=function(){return this.W()&&this.i?this.i.presentationTimeline.Ze():null},i.Ec=function(){if(this.m==np)return this.H.Ec();var e={total:[],audio:[],video:[],text:[]};return this.m==rp&&(e.total=Jo(this.h.buffered)),e},i.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},i.getStats=function(){if(this.m!=np&&this.m!=rp)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Cf(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||function(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}(this.B,Math.round(100*t)),this.G&&(this.B.S=this.G.Gh(),this.B.V=this.G.Ih()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),function(e,t,n){e.R=t,e.O=n}(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?function(e){return e.J?e.J:NaN}(this.F):NaN,uc(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&(null!=(e=Sf(this))&&(this.B.F=e/1e3)),t=this.lc().find((function(e){return e.active})),e=this.Kc().find((function(e){return e.active})),t){if(t.bandwidth){var n=this.M?this.M.i:1,r=n*t.bandwidth;e&&e.bandwidth&&(r+=n*e.bandwidth),this.B.B=r}t.width&&t.height&&uc(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=np||this.va()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==rp&&lc(this.B,NaN),cc(this.B)},i.Od=function(e,t,n,r,i,a,o){o=void 0!==o&&o;var s,u,l,c,d,f,p,h,g,m,y,v=this;return L((function(b){switch(b.g){case 1:if(v.m!=np&&v.m!=rp)throw new Be(1,7,7004);if("subtitles"!=n&&"captions"!=n&&W("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){b.A(2);break}return S(b,Tf(v,e),3);case 3:r=b.h;case 2:if(s=[],v.C&&(s=v.C.getCuePoints()),v.m!=rp){b.A(4);break}return u=oe(),o&&"WEBKIT"===u.Ha()&&(n="forced"),S(b,function(e,t,n,r,i,a,o){var s,u,l,c;return L((function(d){if(1==d.g)return"text/vtt"!=i||o.length?S(d,xf(e,t,e.J,e.g.streaming.retryParameters),3):d.A(2);2!=d.g&&(s=d.h,u=Af(e,s,i,o),l=new Blob([u],{type:"text/vtt"}),t=ru(l),i="text/vtt"),c=document.createElement("track");e:{var f=e.K,p=t;try{if(!f.g.enabled){var h=p;break e}var g=td(f);g.ot=bd,g.su=!0,h=pd(p,dd(g));break e}catch(e){X("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),h=p;break e}h=void 0}return c.src=h,c.label=a,c.kind=r,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.Yf.push(c),d.return(c)}))}(v,e,t,n,r,a||"",s),5);case 5:if((l=b.h).track)return Uf(v),b.return(Zr(l.track));throw new Be(1,2,2012);case 4:if(c=ct,d=v.Qa(),f=d.end-d.start,v.i&&(f=v.i.presentationTimeline.getDuration()),f==1/0)throw new Be(1,4,4033);if(!s.length){b.A(6);break}return S(b,xf(v,e,v.J,v.g.streaming.retryParameters),7);case 7:p=b.h,h=Af(v,p,r,s),g=new Blob([h],{type:"text/vtt"}),e=ru(g),r="text/vtt";case 6:if(m={id:v.Be++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Lu(0,f,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:a||null,type:c.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rr(r||"",i||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},y=rr(m.mimeType,m.codecs),!yr(y))throw new Be(2,2,2014,r);return v.i.textStreams.push(m),Uf(v),b.return(Jr(m))}}))},i.Me=function(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,T=this;return L((function(x){switch(x.g){case 1:if(T.m!=np&&T.m!=rp)throw new Be(1,7,7004);if(t){x.A(2);break}return S(x,Tf(T,e),3);case 3:t=x.h;case 2:if("text/vtt"!=t)throw new Be(1,2,2017,e);if(n=ct,r=T.Qa(),i=r.end-r.start,T.i&&(i=T.i.presentationTimeline.getDuration()),i==1/0)throw new Be(1,4,4045);return S(x,xf(T,e,T.J,T.g.streaming.retryParameters),4);case 4:if(a=x.h,!(o=mr(t)))throw new Be(2,2,2014,t);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0},l=Ne(a),c=s.parseMedia(l,u,e,[]),d=[],f=g(c),p=f.next(),h={};!p.done;h={Sf:void 0,nd:void 0},p=f.next())h.nd=p.value,h.Sf=null,m=function(t){return function(){return null==t.Sf&&(t.Sf=rt([e],[t.nd.payload])),t.Sf||[]}}(h),y=new Fo(h.nd.startTime,h.nd.endTime,m,0,null,null,0,0,1/0),h.nd.payload.includes("#xywh")&&(4===(v=h.nd.payload.split("#xywh=")[1].split(",")).length&&y.If({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)})),d.push(y);if(b=t,!d.length){x.A(5);break}return S(x,kc(d[0].P()[0],T.J,T.g.manifest.retryParameters),6);case 6:b=x.h;case 5:return w={id:T.Be++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pu(d),mimeType:b||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.Uf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rr(b||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},T.m==rp?T.Ge.push(w):T.i.imageStreams.push(w),Uf(T),x.return($r(w))}}))},i.Le=function(e,t,n){var r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b=this;return L((function(w){switch(w.g){case 1:if(b.m!=np&&b.m!=rp)throw new Be(1,7,7004);if(n){w.A(2);break}return S(w,Tf(b,e),3);case 3:n=w.h;case 2:if(r=ct,i=b.Qa(),a=i.end-i.start,b.i&&(a=b.i.presentationTimeline.getDuration()),a==1/0)throw new Be(1,4,4054);return S(w,xf(b,e,b.J,b.g.streaming.retryParameters),4);case 4:if(o=w.h,!(s=mr(n)))throw new Be(2,2,2014,n);for(u=s(),l={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},c=Ne(o),d=u.parseMedia(c,l,e,[]),f=[],p=g(d),h=p.next(),m={};!h.done;m={Ue:void 0},h=p.next())m.Ue=h.value,y=new Fo(m.Ue.startTime,m.Ue.endTime,function(e){return function(){return[e.Ue.payload]}}(m),0,null,null,0,0,1/0),f.push(y);return v={id:b.Be++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pu(f),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:r.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rr("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},b.kb.push(v),Uf(b),w.return(Jr(v))}}))},i.$k=function(e,t){this.xa.width=e,this.xa.height=t},i.fh=function(e){if(this.m==np){var t=this.l;if(e=void 0===e?.1:e,t.l.g)t=!1;else if(t.C)t=!1;else{for(var n=g(t.h.values()),r=n.next();!r.done;r=n.next())!(r=r.value).Zd||r.Ja||r.qb||(r.Zd=!1,El(t,r,e));t=!0}}else t=!1;return t},i.Hg=function(){return W("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Lj=function(){return this.wc},i.Fj=function(){var e={video:null,audio:null,text:null};if(this.m!=np)return e;for(var t=this.l.o,n=this.h.currentTime,r=(t=g([t.video,t.audio,this.l.B])).next();!r.done;r=t.next())if((r=r.value)&&r.segmentIndex){var i=r.segmentIndex.find(n);i={codecs:(i=r.segmentIndex.get(i)).codecs||r.codecs,mimeType:i.mimeType||r.mimeType,bandwidth:i.bandwidth||r.bandwidth},"video"==r.type?(i.width=r.width,i.height=r.height,e.video=i):"audio"==r.type?e.audio=i:r.type==lt&&(e.text=i)}return e},i.Ti=function(e){this.xe=e},i.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===ep||!navigator.onLine||0==t||!this.i)return!1;if(this.i.variants.some((function(t){var n=t[e.type];return!(!n||n.id===e.id||t.disabledUntilTime)&&("audio"!=e.type||e.language===n.language)}))){for(var n=!1,r=!1,i=g(this.i.variants),a=i.next();!a.done;a=i.next()){var o=(a=a.value)[e.type];o&&(o.id===e.id?(a.disabledUntilTime=Date.now()/1e3+t,n=!0):o.trickModeVideo&&o.trickModeVideo.id==e.id&&(r=!0))}return!(!n&&r)&&(this.De.Ea(1),Lf(this,!1,t=this.Ec().video.reduce((function(e,t){return e+t.end-t.start}),0),!0,!1),!0)}return!1},i.addFont=function(t,n){return function(t,n){var r,i,a,o;return L((function(s){if(1==s.g)return"fonts"in document&&"FontFace"in e?S(s,document.fonts.ready,2):s.return();if(!("entries"in document.fonts))return s.return();for(r=g(function(e){for(var t=[],n=(e=e.entries()).next();!1===n.done;)t.push(n.value),n=e.next();return t}(document.fonts)),i=r.next();!i.done;i=r.next())if((a=i.value).family===t&&"swap"===a.display)return s.return();o=new FontFace(t,"url("+n+")",{display:"swap"}),document.fonts.add(o),T(s)}))}(t,n)},i.va=function(){return!(!this.h||!this.h.remote)&&"disconnected"!=this.h.remote.state},i.be=function(){return!(this.h&&!this.h.ended)||this.Sa&&!this.W()&&this.h.currentTime>=this.Qa().end},V("shaka.Player",Yd),Yd.prototype.isEnded=Yd.prototype.be,Yd.prototype.isRemotePlayback=Yd.prototype.va,Yd.prototype.addFont=Yd.prototype.addFont,Yd.prototype.setVideoContainer=Yd.prototype.Ti,Yd.prototype.getFetchedPlaybackInfo=Yd.prototype.Fj,Yd.prototype.getManifestParserFactory=Yd.prototype.Lj,Yd.prototype.getManifest=Yd.prototype.Hg,Yd.prototype.retryStreaming=Yd.prototype.fh,Yd.prototype.setMaxHardwareResolution=Yd.prototype.$k,Yd.prototype.addChaptersTrack=Yd.prototype.Le,Yd.prototype.addThumbnailsTrack=Yd.prototype.Me,Yd.prototype.addTextTrackAsync=Yd.prototype.Od,Yd.prototype.getStats=Yd.prototype.getStats,Yd.prototype.getBufferedInfo=Yd.prototype.Ec,Yd.prototype.getSegmentAvailabilityDuration=Yd.prototype.Ze,Yd.prototype.getPresentationStartTimeAsDate=Yd.prototype.di,Yd.prototype.getPlayheadTimeAsDate=Yd.prototype.Pj,Yd.prototype.setTextTrackVisibility=Yd.prototype.qh,Yd.prototype.getChaptersAsync=Yd.prototype.Aj,Yd.prototype.getChapters=Yd.prototype.zj,Yd.prototype.getChaptersTracks=Yd.prototype.Bj,Yd.prototype.isTextTrackVisible=Yd.prototype.Og,Yd.prototype.selectVariantsByLabel=Yd.prototype.Uk,Yd.prototype.selectTextLanguage=Yd.prototype.jh,Yd.prototype.selectAudioLanguage=Yd.prototype.Ni,Yd.prototype.getTextLanguages=Yd.prototype.Vj,Yd.prototype.getAudioLanguages=Yd.prototype.wj,Yd.prototype.getTextLanguagesAndRoles=Yd.prototype.Wj,Yd.prototype.getAudioLanguagesAndRoles=Yd.prototype.xj,Yd.prototype.getVideoTracks=Yd.prototype.getVideoTracks,Yd.prototype.selectVideoTrack=Yd.prototype.Vk,Yd.prototype.getAudioTracks=Yd.prototype.getAudioTracks,Yd.prototype.selectAudioTrack=Yd.prototype.Tk,Yd.prototype.selectVariantTrack=Yd.prototype.Ff,Yd.prototype.selectTextTrack=Yd.prototype.kh,Yd.prototype.getThumbnails=Yd.prototype.Yj,Yd.prototype.getAllThumbnails=Yd.prototype.vj,Yd.prototype.getImageTracks=Yd.prototype.Hj,Yd.prototype.getTextTracks=Yd.prototype.Kc,Yd.prototype.getVariantTracks=Yd.prototype.lc,Yd.prototype.cancelTrickPlay=Yd.prototype.Pd,Yd.prototype.trickPlay=Yd.prototype.se,Yd.prototype.useTrickPlayTrackIfAvailable=Yd.prototype.Fh,Yd.prototype.getPlaybackRate=Yd.prototype.Ob,Yd.prototype.isBuffering=Yd.prototype.Ng,Yd.prototype.getKeyStatuses=Yd.prototype.Xe,Yd.prototype.getActiveSessionsMetadata=Yd.prototype.Gg,Yd.prototype.getExpiration=Yd.prototype.Wd,Yd.prototype.drmInfo=Yd.prototype.drmInfo,Yd.prototype.keySystem=Yd.prototype.keySystem,Yd.prototype.isFullyLoaded=Yd.prototype.ik,Yd.prototype.goToLive=Yd.prototype.ek,Yd.prototype.seekRange=Yd.prototype.Qa,Yd.prototype.isVideoOnly=Yd.prototype.qk,Yd.prototype.isAudioOnly=Yd.prototype.hk,Yd.prototype.isInProgress=Yd.prototype.Vc,Yd.prototype.isLive=Yd.prototype.W,Yd.prototype.getQueueManager=Yd.prototype.ei,Yd.prototype.getAdManager=Yd.prototype.Yh,Yd.prototype.getAssetUri=Yd.prototype.rd,Yd.prototype.getNetworkingEngine=Yd.prototype.Wb,Yd.prototype.getMediaElement=Yd.prototype.Oj,Yd.prototype.getManifestType=Yd.prototype.ai,Yd.prototype.getLoadMode=Yd.prototype.Kj,Yd.prototype.resetConfiguration=Yd.prototype.Ii,Yd.prototype.getBufferFullness=Yd.prototype.Zh,Yd.prototype.getNonDefaultConfiguration=Yd.prototype.ci,Yd.prototype.getConfigurationForLowLatency=Yd.prototype.Cj,Yd.prototype.getConfiguration=Yd.prototype.getConfiguration,Yd.prototype.configurationForLowLatency=Yd.prototype.sj,Yd.prototype.configure=Yd.prototype.configure,Yd.prototype.releaseAllMutexes=Yd.prototype.Lk,Yd.prototype.destroyAllPreloads=Yd.prototype.ng,Yd.prototype.preload=Yd.prototype.preload,Yd.prototype.detachAndSavePreload=Yd.prototype.Uh,Yd.prototype.unloadAndSavePreload=Yd.prototype.dj,Yd.prototype.load=Yd.prototype.load,Yd.prototype.updateStartTime=Yd.prototype.kl,Yd.prototype.unload=Yd.prototype.Ac,Yd.prototype.detach=Yd.prototype.detach,Yd.prototype.attachCanvas=Yd.prototype.jj,Yd.prototype.attach=Yd.prototype.fc,Yd.probeSupport=function(t){var n,r,i,a,o;return t=void 0===t||t,L((function(s){switch(s.g){case 1:if(n={},!t){s.A(2);break}return S(s,function(){var t,n,r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,A,I,C,M,D,P,R,O,N,j;return L((function(U){if(1==U.g){if(t="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)){for(n={},r=g(t),i=r.next();!i.done;i=r.next())a=i.value,n[a]=null;return U.return(n)}for(o="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),u={"com.widevine.alpha":s=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],"com.widevine.alpha.experiment":s,"com.microsoft.playready.recommendation":["150","2000","3000"]},l={videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],initDataTypes:["cenc","sinf","skd","keyids"]},c=[null,"cenc","cbcs"],d=new Map,f=oe(),p=function(e,t,n){var r,i,a,s,u,l,c,p,h,m,y,v;return L((function(b){switch(b.g){case 1:return x(b,2),S(b,t.createMediaKeys(),5);case 5:r=b.h;case 4:k(b,3);break;case 2:return E(b),b.return();case 3:if(a=!!(i=t.getConfiguration().sessionTypes)&&i.includes("persistent-license"),f.ti()&&(a=!1),s=t.getConfiguration().videoCapabilities,u=t.getConfiguration().audioCapabilities,l={persistentState:a,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},d.get(e)?l=d.get(e):d.set(e,l),(c=s[0].encryptionScheme)&&!l.encryptionSchemes.includes(c)&&l.encryptionSchemes.push(c),(p=s[0].robustness)&&!l.videoRobustnessLevels.includes(p)&&l.videoRobustnessLevels.push(p),(h=u[0].robustness)&&!l.audioRobustnessLevels.includes(h)&&l.audioRobustnessLevels.push(h),!n||!("getStatusForPolicy"in r)){b.A(0);break}m=g(o),y=m.next();case 7:if(y.done){b.A(0);break}if(v=y.value,l.minHdcpVersions.includes(v)){b.A(8);break}return S(b,r.getStatusForPolicy({minHdcpVersion:v}),10);case 10:if("usable"!=b.h){b.A(0);break}l.minHdcpVersions.includes(v)||l.minHdcpVersions.push(v);case 8:y=m.next(),b.A(7)}}))},h=function(e,t,n,r,i){var a,o,s,u,c,d,f,h,m,y;return i=void 0!==i&&i,L((function(v){switch(v.g){case 1:for(x(v,2),a=Ft(l),o=g(a.videoCapabilities),s=o.next();!s.done;s=o.next())(u=s.value).encryptionScheme=t,u.robustness=n;for(c=g(a.audioCapabilities),d=c.next();!d.done;d=c.next())(f=d.value).encryptionScheme=t,f.robustness=r;return(h=Ft(a)).persistentState="required",h.sessionTypes=["persistent-license"],m=[h,a],"MOBILE"==oe().Ua()?S(v,Ir(5,navigator.requestMediaKeySystemAccess(e,m)),7):S(v,navigator.requestMediaKeySystemAccess(e,m),6);case 6:y=v.h,v.A(5);break;case 7:y=v.h;case 5:return S(v,p(e,y,i),8);case 8:k(v,0);break;case 2:E(v),T(v)}}))},m=g(t),y=m.next();!y.done;y=m.next())v=y.value,d.set(v,null);for(b=function(e){return"WEBKIT"!==oe().Ha()||"org.w3.clearkey"!==e},w=[],A=g(t),I=A.next();!I.done;I=A.next())if(C=I.value,b(C)){for(M=!0,D=g(c),P=D.next();!P.done;P=D.next())R=P.value,w.push(h(C,R,"","",M)),M=!1;for(O=g(u[C]||[]),N=O.next();!N.done;N=O.next())j=N.value,w.push(h(C,null,j,"")),w.push(h(C,null,"",j))}return S(U,Promise.all(w),2)}return U.return(ta(d))}))}(),3);case 3:n=s.h;case 2:return r=function(){var e={};if(oe(),Xy())for(var t=g(eo.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(n=(t=g(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!n.done;n=t.next())e[n=n.value]=Xy()?eo.has(n):""!=ts().canPlayType(n);return e}(),i=function(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(m(pr)),t={};oe();for(var n=(e=g(e)).next();!n.done;n=e.next()){if(yr(n=n.value))t[n]=!0;else if(Xy()){var r=lr(n);r=rr(r,Wr(cr(n),r)),t[n]=yt(r)||!!Jn(r)}else t[n]=""!=ts().canPlayType(n);t[r=n.split(";")[0]]=t[r]||t[n]}return t}(),S(s,oe().jc(),4);case 4:return a=s.h,o={manifest:r,media:i,drm:n,hardwareResolution:a},ap.forEach((function(e,t){o[t]=e()})),s.return(o)}}))},Yd.isBrowserSupported=function(){return e.Promise||W("A Promise implementation or polyfill is required"),!(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/"))&&(oe(),!!Xy()||""!=ts().canPlayType("application/x-mpegurl"))},Yd.setQueueManagerFactory=function(e){sp=e},Yd.setAdManagerFactory=function(e){op=e},Yd.registerSupportPlugin=Qd,Yd.prototype.destroy=Yd.prototype.destroy;var ep=0,tp=1,np=2,rp=3;Yd.LoadMode={DESTROYED:ep,NOT_LOADED:tp,MEDIA_SOURCE:np,SRC_EQUALS:rp},Yd.version="v4.16.2";var ip=["4","16"];he=new function(e){this.g=e,this.i=fe,this.h=pe}(new ce(Number(ip[0]),Number(ip[1])));var ap=new Map,op=null,sp=null;function up(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function lp(e){return e.g.length?e.g.reduce((function(e,t){return e+t}),0)/e.g.length:0}function cp(e,t,n){var r=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new ne,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,(function(){r.i=!0})),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,(function(){r.i=!1}))}function dp(){}function fp(e,t){for(var n=[],r=(e=g(Xt(e,"Ad"))).next();!r.done;r=e.next())if((r=Qt(r.value,"InLine"))&&(r=Qt(r,"Creatives")))for(var i=(r=g(Xt(r,"Creative"))).next();!i.done;i=r.next()){var a=Qt(i=i.value,"Linear");if(a&&pp(n,t,a),i=Qt(i,"NonLinearAds"))for(var o=(i=g(i=Xt(i,"NonLinear"))).next();!o.done;o=i.next())e:{a=n;var s=t,u=o.value,l=Qt(u,"StaticResource");if(l)o=l.attributes.creativeType;else{if(!(l=Qt(u,"HTMLResource")))break e;o="text/html"}if(l=Jt(l)){"text/html"===o&&(l="data:text/html;charset=UTF-8,"+encodeURIComponent(l));var c=en(u,"width",un)||en(u,"expandedWidth",un),d=en(u,"height",un)||en(u,"expandedHeight",un);if(c||d){var f=null,p=Qt(u,"NonLinearClickThrough");p&&(p=Jt(p))&&(f=p),p=null,(u=u.attributes.minSuggestedDuration)&&(p=Ut(u)),u=0,null!=s&&(u=s),a.push({id:null,groupId:null,startTime:u,endTime:null,uri:l,mimeType:o,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:p,once:!0,pre:null==s,post:s==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:d||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:f})}}}}return n}function pp(e,t,n){var r=0;null!=t&&(r=t);var i=null;n.attributes.skipoffset&&(i=Ut(n.attributes.skipoffset),isNaN(i)&&(i=null));var a=Qt(n,"MediaFiles");if(a){var o=null;for((n=Qt(n,"VideoClicks"))&&(n=Qt(n,"ClickThrough"))&&(n=Jt(n))&&(o=n),a=n=Xt(a,"MediaFile"),(n=n.filter((function(e){return"streaming"==e.attributes.delivery}))).length&&(a=n),n=(a=g(a=a.sort((function(e,t){return(parseInt(t.attributes.height,10)||0)-(parseInt(e.attributes.height,10)||0)})))).next();!n.done;n=a.next())if(!(n=n.value).attributes.apiFramework){var s=Jt(n);if(s){e.push({id:null,groupId:null,startTime:r,endTime:null,uri:s,mimeType:n.attributes.type||null,isSkippable:null!=i,skipOffset:i,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:null==t,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:o});break}}}}function hp(t,n,r,i,a){var o=this;this.u=t,this.i=n,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=a,this.j=null,this.h=new ne,google.ima.settings.setLocale(r),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.2"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){!function(t,n){if(t.l(new Oi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.H))),t.o.customPlayheadTracker){var r={currentTime:t.i.currentTime};t.g=n.getAdsManager(r,t.C),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.D(t.i,"timeupdate",(function(){t.i.duration&&(r.currentTime=t.i.currentTime)})),t.h.D(t.i,"volumechange",(function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))}))}else t.g=n.getAdsManager(t.i,t.C);t.l(new Oi("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[];for(var a=(i=g(i)).next();!a.done;a=i.next())n.push({start:a.value,end:null});t.l(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new Oi(n,t))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){gp(e,t)})),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){mp(e,t)})),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,(function(t){mp(e,t)})),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")})),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")})),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")})),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")})),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){yp(e,t)})),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){yp(e,t)})),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")})),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")})),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")})),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))})),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))})),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(n){e.j&&t(n,"ad-skip-state-changed")})),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")})),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")})),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")})),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")})),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")})),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")})),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")})),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")})),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")})),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")})),e.h.D(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")})),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")})),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight),t.h.D(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)})),"ResizeObserver"in e?(t.B=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)})),t.B.observe(t.i)):t.h.D(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)})),t.G||t.o.skipPlayDetection?t.g.start():t.h.Ba(t.i,"play",(function(){t.G=!0,t.g.start()}))}catch(e){yp(t,null)}}(o,t)})),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){gp(o,e)})),this.h.D(this.i,"ended",(function(){o.m.contentComplete()})),this.h.Ba(this.i,"play",(function(){o.G=!0}))}function gp(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.l(new Oi("ad-error",t)),yp(e,null),e.l(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function mp(e,t){var n=t.getAd();n?(e.j=new cp(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Oi("ad-content-pause-requested")),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Oi("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?((t=e.j).j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):W("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function yp(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Oi("ad-content-resume-requested")),e.l(new Oi("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function vp(e,t,n,r,i,a){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=r,this.m=i,this.u=a,this.C=t.overlay}function bp(e,t,n){this.g=e,this.j=t,this.h=n,this.i=null==e.overlay}function wp(e,t,n,r){var i=this;this.N=null,this.o=e,this.F=t,this.g=n,this.H=null,this.B=!0,this.h=this.g,this.i=r,this.V=new Set,this.I=new Set,this.G=new Map,this.M=new Map,this.j=new Yd,Dp(this),this.J=new ne,this.l=new ne,this.K=!1,this.aa=this.u=this.C=this.m=null,this.ma=!1,this.R=-1,this.$=function(){if(!i.K&&i.m&&!i.F.va()){i.m=i.g.currentTime;var e=kp(i);e&&Ep(i,e,1,1,Date.now())}},this.X=function(){if(!(i.K||i.m||i.F.va())){i.m=i.g.currentTime;var e=kp(i,!0);e||(e=kp(i)),e&&Ep(i,e,1,1,Date.now())}},this.oa=function(){if(!i.K&&i.m&&!i.F.va()){var e=i.g.currentTime;i.C&&!i.C.pre&&!i.C.post&&e<(i.C.endTime||i.C.startTime)&&(i.C=null)}},this.S=new xr(this.$),this.O=new xr((function(){var e,t,n,r,a,o,s,u,l,c,d;return L((function(f){switch(f.g){case 1:if(!i.I.size||null==i.m){f.A(0);break}if((e=i.F.m)==ep||e==tp)return f.return();t=!1,n=Array.from(i.I),r=i.F.Qa(),a=g(n),o=a.next();case 3:if(o.done){f.A(5);break}if((s=o.value)==i.C){f.A(4);break}if(u=s.endTime||s.startTime,!(r.start-u>=1)){(l=s.startTime-i.m)>0&&l<=10&&(!i.G.has(s)&&Rp(s)&&i.G.set(s,i.j.preload(s.uri,null,s.mimeType||void 0)),Op(i,s)),f.A(4);break}if(!i.G.has(s)){f.A(7);break}return S(f,i.G.get(s),8);case 8:(c=f.h)&&c.destroy(),i.G.delete(s);case 7:Np(i,s),d=JSON.stringify(s),i.V.has(d)&&i.V.delete(d),i.I.delete(s),Sp(i),s.overlay||(t=!0);case 4:o=a.next(),f.A(3);break;case 5:t&&Mp(i),T(f)}}))})),this.configure(this.F.getConfiguration().ads)}function Sp(e){e.ma&&!e.I.size&&(e.J.Ma(e.g,"playing",e.X),e.J.Ma(e.g,"timeupdate",e.X),e.J.Ma(e.g,"seeked",e.oa),e.J.Ma(e.g,"ended",e.$),-1!=e.R&&(e.g.cancelVideoFrameCallback(e.R),e.R=-1),e.S&&e.S.stop(),e.O&&e.O.stop(),e.ma=!1)}function Tp(e){if(e.o&&e.N&&!e.K){var t=e.N.supportsMultipleMediaElements,n=e.g;(n.webkitPresentationMode&&"inline"!==n.webkitPresentationMode||n.webkitDisplayingFullscreen)&&(t=!1),e.B==t&&(e.B=!t,e.B?(e.h=e.g,e.H&&(e.H.parentElement&&e.o.removeChild(e.H),e.H=null)):(e.H||((t=document.createElement(e.g.tagName)).autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.H=t),e.h=e.H))}else e.B=!0}function xp(e,t){var n;L((function(r){if(1==r.g)return Dp(e),n=[],t&&t.values.find((function(e){return"X-OVERLAY-ID"==e.key}))?(n=function(e){var t=[];if(!e)return t;var n=e.values.find((function(e){return"X-ASSET-URI"==e.key}));if(!n)return t;if(!(n=n.data))return t;var r=null,i=e.values.find((function(e){return"X-OVERLAY-ID"==e.key}));i&&(r=i.data),i=null==r?Math.floor(10*e.startTime)/10:e.startTime;var a=e.endTime;e.endTime&&e.endTime!=1/0&&"number"==typeof e.endTime&&(a=null==r?Math.floor(10*e.endTime)/10:e.endTime);var o=!1,s=!1,u=!1,l=e.values.find((function(e){return"CUE"==e.key}));l&&(u=l.data,o=u.includes("ONCE"),s=u.includes("PRE"),u=u.includes("POST")),l=null;var c=e.values.find((function(e){return"X-ASSET-MIMETYPE"==e.key}));c&&(l=c.data),c=!1;var d=e.values.find((function(e){return"X-LOOP"==e.key}));d&&(c="YES"==d.data),d=1;var f=e.values.find((function(e){return"X-DEPTH"==e.key}));f&&(d=parseFloat(f.data),isNaN(d)&&(d=1)),f=null;var p=e.values.find((function(e){return"X-BACKGROUND"==e.key}));p&&(f=p.data),p=1920;var h=1080,g=e.values.find((function(e){return"X-VIEWPORT"==e.key}));if(g){if(2!=(h=g.data.split("x")).length)return t;p=parseFloat(h[0]),h=parseFloat(h[1])}if(p={viewport:{x:p,y:h},topLeft:{x:0,y:0},size:{x:p,y:h}},h=e.values.find((function(e){return"X-OVERLAY-POSITION"==e.key}))){if(2!=(h=h.data.split("x")).length)return t;p.topLeft.x=parseFloat(h[0]),p.topLeft.y=parseFloat(h[1])}if(h=e.values.find((function(e){return"X-OVERLAY-SIZE"==e.key}))){if(2!=(h=h.data.split("x")).length)return t;p.size.x=parseFloat(h[0]),p.size.y=parseFloat(h[1])}if(h=null,(g=e.values.find((function(e){return"X-SQUEEZECURRENT"==e.key})))&&(h=parseFloat(g.data),isNaN(h)&&(h=1),h={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*h,y:1080*h}},e=e.values.find((function(e){return"X-SQUEEZECURRENT-POSITION"==e.key})))){if(2!=(e=e.data.split("x")).length)return t;h.topLeft.x=parseFloat(e[0]),h.topLeft.y=parseFloat(e[1])}return t.push({id:r,groupId:null,startTime:i,endTime:a,uri:n,mimeType:l,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:o,pre:s,post:u,timelineRange:!0,loop:c,overlay:p,displayOnBackground:-1==d,currentVideo:h,background:f,clickThroughUrl:null}),t}(t),r.A(2)):S(r,function(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h,g,m,y,v,b,w,T,A,I,C,M,D,P,R,O,N,j,U,_,B,F,V,H,G,q,K,z,W;return L((function(L){switch(L.g){case 1:if(n=[],!t)return L.return(n);if(r=t.values.find((function(e){return"X-ASSET-URI"==e.key})),i=t.values.find((function(e){return"X-ASSET-LIST"==e.key})),!r&&!i)return L.return(n);if(a=null,(o=t.values.find((function(e){return"ID"==e.key})))&&(a=o.data),s=null==a?Math.floor(10*t.startTime)/10:t.startTime,(u=t.endTime)&&t.endTime!=1/0&&"number"==typeof t.endTime&&(u=null==a?Math.floor(10*t.endTime)/10:t.endTime),l=t.values.find((function(e){return"X-RESTRICT"==e.key})),d=c=!0,l&&l.data&&(f=l.data,c=!f.includes("SKIP"),d=!f.includes("JUMP")),p=c?0:null,(h=t.values.find((function(e){return"X-ENABLE-SKIP-AFTER"==e.key})))&&(g=h.data,p=parseFloat(g),isNaN(p)&&(p=c?0:null)),m=null,(y=t.values.find((function(e){return"X-ENABLE-SKIP-FOR"==e.key})))&&(v=y.data,m=parseFloat(v),isNaN(p)&&(m=null)),b=null,(w=t.values.find((function(e){return"X-RESUME-OFFSET"==e.key})))&&(T=w.data,b=parseFloat(T),isNaN(b)&&(b=null)),A=null,(I=t.values.find((function(e){return"X-PLAYOUT-LIMIT"==e.key})))&&(C=I.data,A=parseFloat(C),isNaN(A)&&(A=null)),P=D=M=!1,(R=t.values.find((function(e){return"CUE"==e.key})))&&(O=R.data,M=O.includes("ONCE"),D=O.includes("PRE"),P=O.includes("POST")),N=!1,(j=t.values.find((function(e){return"X-TIMELINE-OCCUPIES"==e.key})))?(U=j.data,N=U.includes("RANGE")):!w&&e.F.W()&&(N=!D&&!P),r){if(!(_=r.data))return L.return(n);n.push({id:a,groupId:null,startTime:s,endTime:u,uri:_,mimeType:null,isSkippable:c,skipOffset:p,skipFor:m,canJump:d,resumeOffset:b,playoutLimit:A,once:M,pre:D,post:P,timelineRange:N,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),L.A(2);break}if(!i){L.A(2);break}return(B=i.data)?(x(L,4),S(L,Pp(e,B,{type:11}),6)):L.return(n);case 6:for(F=L.h,V=He(F),H=JSON.parse(V),(G=H["SKIP-CONTROL"])&&("number"==typeof(q=G["ENABLE-SKIP-AFTER"])&&(p=parseFloat(q),isNaN(q)&&(p=c?0:null)),"number"==typeof(K=G["ENABLE-SKIP-FOR"])&&(m=parseFloat(K),isNaN(K)&&(m=null))),z=0;z<H.ASSETS.length;z++)(W=H.ASSETS[z]).URI&&n.push({id:a+"_shaka_asset_"+z,groupId:a,startTime:s,endTime:u,uri:W.URI,mimeType:null,isSkippable:c,skipOffset:p,skipFor:m,canJump:d,resumeOffset:b,playoutLimit:A,once:M,pre:D,post:P,timelineRange:N,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});k(L,2);break;case 4:E(L);case 2:return L.return(n)}}))}(e,t),3);2!=r.g&&(n=r.h),n.length?Ap(e,n):W("Unsupported HLS interstitial",t),T(r)}))}function Ap(e,t){var n,r,i,a,o,s,u,l;L((function(c){switch(c.g){case 1:n=!1,r=g(t),i=r.next();case 2:if(i.done){c.A(4);break}if(!(a=i.value).uri){W("Missing URL in interstitial",a),c.A(3);break}if(a.mimeType){c.A(5);break}return x(c,6),o=e.j.Wb(),S(c,kc(a.uri,o,e.F.getConfiguration().streaming.retryParameters),8);case 8:a.mimeType=c.h,k(c,5);break;case 6:E(c);case 5:if(s=a.id||JSON.stringify(a),e.V.has(s)){c.A(3);break}a.loop&&!a.overlay&&W("Loop is only supported in overlay interstitials",a),a.overlay||(n=!0),e.V.add(s),e.I.add(a),u=!1,a.pre&&null==e.m?u=!0:0!=a.startTime||a.canJump?null!=e.m&&((l=a.startTime-e.m)>0&&l<=10&&(u=!0)):u=!0,u&&(!e.G.has(a)&&Rp(a)&&e.G.set(a,e.j.preload(a.uri,null,a.mimeType||void 0)),Op(e,a));case 3:i=r.next(),c.A(2);break;case 4:n&&Mp(e),function(e){if(!e.ma&&e.I.size){if(e.J.D(e.g,"playing",e.X),e.J.D(e.g,"timeupdate",e.X),e.J.D(e.g,"seeked",e.oa),e.J.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!Lp()){var t=e.g,n=function(){-1!=e.R&&(e.$(),-1!=e.R&&(e.R=t.requestVideoFrameCallback(n)))};e.R=t.requestVideoFrameCallback(n)}else e.S.Ea(.025);e.O&&e.O.Ea(1),e.ma=!0}}(e),T(c)}}))}function kp(e,t,n){t=void 0!==t&&t,n=void 0===n?null:n;var r=0,i=null;if(e.I.size&&null!=e.m){var a=e.g.ended,o=Array.from(e.I).sort((function(e,t){return t.startTime-e.startTime})),s=o;for(s=t?o.filter((function(e){return e.pre})):a?o.filter((function(e){return e.post})):o.filter((function(e){return!e.pre&&!e.post})),s=(o=g(s)).next();!s.done;s=o.next()){s=s.value;var u=!1;if(t)u=s.pre;else if(a)u=s.post;else if(!s.pre&&!s.post){var l=e.m-Math.round(1e3*s.startTime)/1e3,c=1;e.N.allowStartInMiddleOfInterstitial&&s.endTime&&s.endTime!=1/0&&(c=s.endTime-s.startTime),(l>0||0==l&&0==e.m)&&(l<=c||!s.canJump)&&(u=!(null==n&&e.C&&!e.C.pre&&!e.C.post&&e.C.startTime>=s.startTime))}u&&(!e.C||s.startTime>=e.C.startTime)&&(r==(n||0)?i=s:i&&!s.canJump&&Math.round(1e3*s.startTime)/1e3-Math.round(1e3*i.startTime)/1e3>.001&&(i=s,r=0),r++)}}return i}function Ep(t,n,r,i,a,o){o=void 0===o?0:o,t.C=n,Tp(t),t.B||!t.o||t.h.parentElement||t.o.appendChild(t.h),1==i&&1==r&&(r=Array.from(t.I).filter((function(e){return n.pre?e.pre==n.pre:n.post?e.post==n.post:Math.abs(e.startTime-n.startTime)<.001})).length),n.once&&(o++,t.I.delete(n),Sp(t),n.overlay||Mp(t)),n.mimeType&&(n.mimeType.startsWith("image/")||"text/html"===n.mimeType)?n.overlay?function(t,n,r,i,a){function o(){t.u&&(t.u.stop(),t.u=null),t.o.removeChild(l),Cp(t,n),t.i(new Oi("ad-stopped")),t.l.Pa();var e=kp(t,n.pre,i-a);e?Ep(t,e,r,++i,Date.now(),a):t.K=!1}t.K=!0;var s=n.overlay,u="text/html"==n.mimeType?"iframe":"img",l=document.createElement(u);l.style.objectFit="contain",l.style.position="absolute",l.style.border="none",Ip(t,n),t.i(new Oi("ad-started",(new Map).set("ad",new bp(n,r,i)))),"iframe"==u?l.src=n.uri:(l.src=n.uri,l.onerror=function(e){t.i(new Oi("ad-error",(new Map).set("originalEvent",e))),o()});var c=s.viewport,d=s.topLeft;s=s.size,0==c.x&&0==c.y?(l.width=n.overlay.size.x,l.height=n.overlay.size.y,l.style.bottom="10%",l.style.left="0",l.style.right="0",l.style.width="100%",n.overlay.size.y||"iframe"!=u||(l.style.height="auto")):(l.style.height=s.y/c.y*100+"%",l.style.left=d.x/c.x*100+"%",l.style.top=d.y/c.y*100+"%",l.style.width=s.x/c.x*100+"%"),t.o.appendChild(l);var f=Date.now();t.u&&t.u.stop(),t.u=new xr((function(){n.playoutLimit&&(Date.now()-f)/1e3>n.playoutLimit||n.endTime&&t.g.currentTime>n.endTime?(t.i(new Oi("ad-complete")),o()):t.g.currentTime<n.startTime&&(t.i(new Oi("ad-skipped")),o())})),n.playoutLimit&&!n.endTime?t.u.ia(n.playoutLimit):n.endTime&&t.u.Ea(.025),t.l.D(t.g,"seeked",(function(){var e=t.g.currentTime;(e<n.startTime||n.endTime&&e>n.endTime)&&(t.u&&t.u.stop(),t.i(new Oi("ad-skipped")),o())})),n.clickThroughUrl&&t.l.D(l,"click",(function(){n.clickThroughUrl&&e.open(n.clickThroughUrl,"_blank")}))}(t,n,r,i,o):W("Unsupported interstitial",n):t.B&&n.overlay?W("Unsupported interstitial",n):function(t,n,r,i,a,o){var s,u,l,c,d,f,p,h,g,m,y,v,b,w,A,I,C,M,D,P,R;L((function(O){switch(O.g){case 1:if(s=Date.now(),t.K=!0,u=!1,l=function(){if(!t.B&&!n.overlay&&null==n.resumeOffset)if(n.timelineRange&&n.endTime&&n.endTime!=1/0)t.g.currentTime!=n.endTime&&(t.g.currentTime=n.endTime);else{var e=Date.now();t.g.currentTime+=(e-a)/1e3,a=e}},c=function(e){var s,u;return L((function(c){if(1==c.g){if(l(),s=kp(t,n.pre,i-o),e&&n.groupId)for(;s&&s.groupId==n.groupId;)i++,s=kp(t,n.pre,i-o);return t.u&&(!n.groupId||s&&s.groupId!=n.groupId)&&(t.u.stop(),t.u=null),Cp(t,n),s&&!s.overlay?c.A(2):(n.post&&(t.m=null,t.C=null),t.B?S(c,t.j.detach(),4):S(c,t.j.Ac(),4))}2!=c.g&&(t.B&&(null==(u=n.resumeOffset)&&(u=n.timelineRange&&n.endTime&&n.endTime!=1/0?n.endTime-(t.m||0):(Date.now()-a)/1e3),t.i(new Oi("ad-content-resume-requested",(new Map).set("offset",u)))),t.i(new Oi("ad-stopped")),t.l.Pa(),t.K=!1,t.B?Mp(t):(t.h.style.display="none",l(),t.g.ended||t.g.play())),Tp(t),s&&(t.i(new Oi("ad-stopped")),t.l.Pa(),Ep(t,s,r,++i,a,o)),T(c)}))},d=function(e){return L((function(n){return u?n.return():(u=!0,t.i(new Oi("ad-error",(new Map).set("originalEvent",e))),S(n,c(!1),0))}))},f=function(){return L((function(e){if(1==e.g)return u?e.return():(u=!0,S(e,c(!1),2));t.i(new Oi("ad-complete")),T(e)}))},t.aa=function(){return L((function(e){return u?e.return():(u=!0,t.i(new Oi("ad-skipped")),S(e,c(!0),0))}))},p=new vp(t.h,n,t.aa,r,i,!t.B),t.B||(p.setMuted(t.g.muted),p.setVolume(t.g.volume)),t.i(new Oi("ad-started",(new Map).set("ad",p))),(h=p.canSkipNow())&&t.i(new Oi("ad-skip-state-changed")),t.l.Ba(t.j,"error",d),t.l.D(t.h,"timeupdate",(function(){if(t.h.duration){var e=p.canSkipNow();h!=e&&p.getRemainingTime()>0&&p.getDuration()>0&&t.i(new Oi("ad-skip-state-changed")),h=e,!t.B&&!n.overlay&&null==n.resumeOffset&&n.timelineRange&&n.endTime&&n.endTime!=1/0&&t.g.currentTime!=n.endTime&&t.F.Qa().end>=n.endTime&&(t.g.currentTime=n.endTime)}})),t.l.Ba(t.j,"firstquartile",(function(){l(),t.i(new Oi("ad-first-quartile"))})),t.l.Ba(t.j,"midpoint",(function(){l(),t.i(new Oi("ad-midpoint"))})),t.l.Ba(t.j,"thirdquartile",(function(){l(),t.i(new Oi("ad-third-quartile"))})),t.l.Ba(t.j,"complete",f),t.l.D(t.h,"play",(function(){t.i(new Oi("ad-resumed"))})),t.l.D(t.h,"pause",(function(){var e=t.j.getConfiguration();t.h.currentTime>=e.playRangeEnd?f():t.i(new Oi("ad-paused"))})),t.l.D(t.h,"volumechange",(function(){t.h.muted?t.i(new Oi("ad-muted")):t.i(new Oi("ad-volume-changed"))})),n.clickThroughUrl&&(g=t.o||t.h,t.l.D(g,"click",(function(){n.clickThroughUrl&&(p.isPaused()||p.pause(),e.open(n.clickThroughUrl,"_blank"))}))),!t.B||1!=i){O.A(2);break}return t.i(new Oi("ad-content-pause-requested",(new Map).set("saveLivePosition",!0))),m=new Ii,y=function(e){return L((function(n){if(1==n.g)return"detach"!=e.state?n.A(0):Lp()?S(n,new Promise((function(e){return new xr(e).ia(.1)})),3):n.A(3);m.resolve(),t.l.Ma(t.F,"onstatechange",y),T(n)}))},t.l.D(t.F,"onstatechange",y),S(O,m,2);case 2:return Ip(t,n),t.B||(t.h.style.display="",n.overlay?(t.h.loop=n.loop,v=n.overlay.viewport,b=n.overlay.topLeft,w=n.overlay.size,t.h.style.height=w.y/v.y*100+"%",t.h.style.left=b.x/v.x*100+"%",t.h.style.top=b.y/v.y*100+"%",t.h.style.width=w.x/v.x*100+"%"):(t.g.pause(),null!=n.resumeOffset&&0!=n.resumeOffset&&(t.g.currentTime+=n.resumeOffset),t.h.loop=!1,t.h.style.height="100%",t.h.style.left="0",t.h.style.top="0",t.h.style.width="100%")),x(O,4),Dp(t),n.startTime&&n.endTime&&n.endTime!=1/0&&n.startTime!=n.endTime&&((A=n.endTime-n.startTime)>0&&t.j.configure("playRangeEnd",A)),n.playoutLimit&&!t.u&&(t.u=new xr((function(){t.aa()})).ia(n.playoutLimit),t.j.configure("playRangeEnd",n.playoutLimit)),S(O,t.j.fc(t.h),6);case 6:return I=null,t.N.allowStartInMiddleOfInterstitial&&null!=t.m&&(C=t.m-n.startTime,Math.abs(C)>.25&&(I=C)),t.G.has(n)?S(O,t.G.get(n),10):S(O,t.j.load(n.uri,I,n.mimeType||void 0),8);case 10:return M=O.h,t.G.delete(n),S(O,M?t.j.load(M):t.j.load(n.uri,I,n.mimeType||void 0),8);case 8:n.overlay&&t.g.paused?t.h.pause():t.h.play(),D=(Date.now()-s)/1e3,t.i(new Oi("ads-loaded",(new Map).set("loadTime",D))),t.B&&t.g.play(),n.overlay&&(n.pre||n.post||t.F.W()&&!(n.startTime>0)||(P=function(){var e=t.g.currentTime-n.startTime;Math.abs(e-t.h.currentTime)>.1&&(t.h.currentTime=e)},t.l.Ba(t.h,"playing",P),t.l.D(t.g,"seeking",P)),t.l.D(t.g,"seeked",(function(){var e=t.g.currentTime;(e<n.startTime||n.endTime&&e>n.endTime)&&t.aa()}))),k(O,0);break;case 4:if(R=E(O),!t.K)return O.return();d(R),T(O)}}))}(t,n,r,i,a,o)}function Ip(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),null!=t.currentVideo){var n=t.currentVideo;e.g.style.transformOrigin="top left";var r=!0,i=[],a=n.topLeft.x/n.viewport.x*100;a>0&&a<=100&&(i.push("translateX("+a+"%)"),r=!1),(a=n.topLeft.y/n.viewport.y*100)>0&&a<=100&&(i.push("translateY("+a+"%)"),r=!1),(a=n.size.x/n.viewport.x)<1&&i.push("scaleX("+a+")"),n=n.size.y/n.viewport.y,a<1&&i.push("scaleY("+n+")"),i.length&&(e.g.style.transform=i.join(" ")),r&&(e.g.style.transition="transform 250ms")}e.o&&(t.clickThroughUrl?(e.o.setAttribute("ad-active","true"),e.o.style.pointerEvents=""):e.o.style.pointerEvents="none",t.background&&(e.o.style.background=t.background)),e.H&&(e.H.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Cp(e,t){t&&!t.displayOnBackground||(e.g.style.zIndex=""),t&&null==t.currentVideo||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.o&&(e.o.removeAttribute("ad-active"),e.o.style.pointerEvents="",!t||t.background)&&(e.o.style.background=""),e.H&&(e.H.style.background="")}function Mp(e){for(var t=[],n=g(e.I),r=n.next(),i={};!r.done;i={zc:void 0},r=n.next())(r=r.value).overlay||(i.zc={start:r.startTime,end:null},r.pre?(i.zc.start=0,i.zc.end=null):r.post?(i.zc.start=-1,i.zc.end=null):r.timelineRange&&(i.zc.end=r.endTime),t.find(function(e){return function(t){return e.zc.start==t.start&&e.zc.end==t.end}}(i))||t.push(i.zc));e.i(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",t)))}function Dp(e){e.j.configure(e.F.ci()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),Hi(e.F.Wb(),e.j.Wb())}function Pp(e,t,n){var r,i;return L((function(a){return 1==a.g?(r=Gi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),S(a,e.F.Wb().request(7,r,n).promise,2)):(i=a.h,a.return(i.data))}))}function Rp(e){return!(e=e.mimeType)||!e.startsWith("image/")&&"text/html"!==e}function Lp(){var e=oe().Ua();return"TV"==e||"CONSOLE"==e||"CAST"==e}function Op(e,t){if(!(e.M.has(t)||e.N&&!e.N.allowPreloadOnDomElements)){var n=function(e){var t=document.createElement("link");return t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t),t},r=[];if(t.background){var i=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);i&&r.push(n(i[2]))}t.mimeType&&t.mimeType.startsWith("image/")&&r.push(n(t.uri)),e.M.set(t,r)}}function Np(e,t){if(e.M.has(t)){for(var n=e.M.get(t),r=(n=g(n)).next();!r.done;r=n.next())(r=r.value).parentNode.removeChild(r);e.M.delete(t)}}function jp(e,t,n,r,i){this.h=e,this.j=Ut(this.h.skipOffset),this.g=i,this.i=t,this.l=n,this.o=r,this.m=!1}function Up(e,t,n,r){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=r,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new ne}function _p(e,t){var n,r,i,a,o,s,u,l;L((function(c){return 1==c.g?t.staticResource?(n=Bp(t),e.G.get(n)?c.return():(r={type:9},i=Gi([t.staticResource],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),a=e.K.request(7,i,r),x(c,2),e.G.set(n,[]),S(c,a.promise,4))):c.return():2!=c.g?(o=c.h,s=He(o.data),u=JSON.parse(s),l=u.apps,e.G.set(n,l),k(c,0)):(E(c),e.G.delete(n),void T(c))}))}function Bp(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Fp(e){var t=e.h.currentTime;if(0!=t&&null==e.B){for(var n,r,i=g(e.j),a=i.next();!a.done;a=i.next())for(var o=g((a=a.value).ads),s=o.next();!s.done;s=o.next())if(s=s.value,r){if(s.startTimeInSeconds<t&&s.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=s,n=a;break}}else s.startTimeInSeconds<t&&(r=s,n=a);n&&r&&!e.N.includes(r.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function Vp(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.F,i=r.startTimeInSeconds+.5*r.durationInSeconds,a=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),qp(e,"firstQuartile")):t>=i&&!e.u.includes("midpoint")?(e.u.push("midpoint"),qp(e,"midpoint")):t>=a&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),qp(e,"thirdQuartile")),r=e.g.getRemainingTime(),i=e.g.getDuration(),e.g.canSkipNow()&&r>0&&i>0&&qp(e,"skipStateChanged"),i>0&&(r<=0||r>i)&&Hp(e)}if(!e.g||!e.g.isLinear()){e:for(r=g(e.j),i=r.next();!i.done&&(i=i.value,!e.g||!e.g.isLinear());i=r.next())for(a=0;a<i.ads.length;a++){var o=i.ads[a],s=o.startTimeInSeconds+o.durationInSeconds;if(o.startTimeInSeconds<=t&&s>t){if(e.N.includes(o.adId)){if(e.h.ended)continue;e.h.currentTime=s;break e}Hp(e),e.M=i,e.g=new jp(o,a+1,i.ads.length,!0,e.h),e.F=o,0===a&&qp(e,"breakStart"),Gp(e);break}}if(!e.g)for(i=(r=g(e.j)).next();!i.done&&(i=i.value,!e.g);i=r.next())for(a=0;a<i.nonLinearAdsList.length;a++)if((o=i.nonLinearAdsList[a]).nonLinearAdList.length){s=i.startTimeInSeconds;var u=e.G.get(Bp(o.nonLinearAdList[0]));if(s<=t&&u&&u.length){Hp(e),s=e;for(var l=(u=g(u)).next();!l.done;l=u.next())if((l=l.value).data.source.length){var c=document.createElement("img");c.src=l.data.source[0].url,c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",s.C.appendChild(c)}e.M=i,e.g=new jp(o,a+1,i.ads.length,!1,e.h),e.F=o,0===a&&qp(e,"breakStart"),Gp(e);break}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function Hp(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;qp(e,void 0!==t&&t?"skip":"complete");for(var n=(t=g(e.m)).next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],(t=e.g.getPositionInSequence())===(n=e.g.getSequenceLength())&&qp(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function Gp(e){var t=!1;e.h.paused?t=!0:(qp(e,"impression"),qp(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&qp(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||qp(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(qp(e,"impression"),qp(e,"start"),t=!1):qp(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){qp(e,"pause")}});for(var n=g(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function qp(e,t){var n=e.F.trackingEvents.find((function(e){return e.eventType==t}));if(n||(n=e.M.adBreakTrackingEvents.find((function(e){return e.eventType==t}))),n)for(var r={type:10},i=(n=g(n.beaconUrls)).next();!i.done;i=n.next())(i=i.value)&&""!=i&&((i=Gi([i],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",e.K.request(7,i,r));switch(t){case"impression":e.i(new Oi("ad-impression"));break;case"start":e.i(new Oi("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new Oi("ad-muted"));break;case"unmute":e.i(new Oi("ad-volume-changed"));break;case"resume":e.i(new Oi("ad-resumed"));break;case"pause":e.i(new Oi("ad-paused"));break;case"firstQuartile":e.i(new Oi("ad-first-quartile"));break;case"midpoint":e.i(new Oi("ad-midpoint"));break;case"thirdQuartile":e.i(new Oi("ad-third-quartile"));break;case"complete":e.i(new Oi("ad-complete")),e.i(new Oi("ad-stopped"));break;case"skip":e.i(new Oi("ad-skipped")),e.i(new Oi("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Oi("ad-skip-state-changed"))}}function Kp(e,t){this.g=e,this.i=null,this.h=t}function zp(e,t,n,r){var i=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=r,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new ne,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new Oi("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.i(new Oi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}}))}(i,e)})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){i.C.length?i.j.resolve(i.C):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),i.m=new Kp(e,i.l),i.B&&(i.m.i=i.B),i.i(new Oi("ad-started",(new Map).set("ad",i.m))),i.u.setAttribute("ad-active","true")})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){i.u.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){i.B=e.getStreamData().adProgressData,i.m&&(i.m.i=i.B)})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){i.i(new Oi("ad-first-quartile"))})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){i.i(new Oi("ad-midpoint"))})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){i.i(new Oi("ad-third-quartile"))})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){i.i(new Oi("ad-complete")),i.i(new Oi("ad-stopped")),i.u.removeAttribute("ad-active"),i.m=null})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){i.i(new Oi("ad-skipped")),i.i(new Oi("ad-stopped"))})),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=g(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.F=e,i.i(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}function Wp(){Ui.call(this),this.h=this.i=this.j=this.g=null,this.m=new up,this.o=navigator.language,this.l=null}function Xp(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}function Yp(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Oi){var n={};for(r in t)(e=t[r])&&"object"==typeof e?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(e=(n=g(Object.getOwnPropertyNames(t))).next();!e.done;e=n.next())r.add(e.value);for(n={},e=(r=g(r)).next();!e.done;e=r.next())n[e=e.value]=t[e];t={__type__:"Error",contents:n}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=g(Jo(t))).next();!n.done;n=t.next())e=(n=n.value).end,r.start.push(n.start),r.end.push(e);t=r}else t=ArrayBuffer.isView(t)&&1===t.BYTES_PER_ELEMENT?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return t}}))}function Jp(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n}))}(i=cp.prototype).needsSkipUI=function(){return!1},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return!0},i.isUsingAnotherMediaElement=function(){return!0},i.getDuration=function(){return this.g.getDuration()},i.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.h.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.h.getAdSkippableState()},i.skip=function(){return this.h.skip()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.resume()},i.getVolume=function(){return this.h.getVolume()},i.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},i.isMuted=function(){return 0==this.h.getVolume()},i.isLinear=function(){return this.g.isLinear()},i.resize=function(e,t){this.h.resize(e,t)},i.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return this.g.getMediaUrl()},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.g=null},V("shaka.ads.ClientSideAd",cp),cp.prototype.release=cp.prototype.release,cp.prototype.getPodIndex=cp.prototype.getPodIndex,cp.prototype.getTimeOffset=cp.prototype.getTimeOffset,cp.prototype.getMediaUrl=cp.prototype.getMediaUrl,cp.prototype.getAdvertiserName=cp.prototype.getAdvertiserName,cp.prototype.getCreativeAdId=cp.prototype.getCreativeAdId,cp.prototype.getAdId=cp.prototype.getAdId,cp.prototype.getVastAdId=cp.prototype.getVastAdId,cp.prototype.getVastMediaWidth=cp.prototype.getVastMediaWidth,cp.prototype.getVastMediaHeight=cp.prototype.getVastMediaHeight,cp.prototype.getVastMediaBitrate=cp.prototype.getVastMediaBitrate,cp.prototype.getDescription=cp.prototype.getDescription,cp.prototype.getTitle=cp.prototype.getTitle,cp.prototype.getPositionInSequence=cp.prototype.getPositionInSequence,cp.prototype.getSequenceLength=cp.prototype.getSequenceLength,cp.prototype.setMuted=cp.prototype.setMuted,cp.prototype.resize=cp.prototype.resize,cp.prototype.isLinear=cp.prototype.isLinear,cp.prototype.isMuted=cp.prototype.isMuted,cp.prototype.setVolume=cp.prototype.setVolume,cp.prototype.getVolume=cp.prototype.getVolume,cp.prototype.play=cp.prototype.play,cp.prototype.pause=cp.prototype.pause,cp.prototype.skip=cp.prototype.skip,cp.prototype.canSkipNow=cp.prototype.canSkipNow,cp.prototype.getTimeUntilSkippable=cp.prototype.getTimeUntilSkippable,cp.prototype.isSkippable=cp.prototype.isSkippable,cp.prototype.isPaused=cp.prototype.isPaused,cp.prototype.getRemainingTime=cp.prototype.getRemainingTime,cp.prototype.getMinSuggestedDuration=cp.prototype.getMinSuggestedDuration,cp.prototype.getDuration=cp.prototype.getDuration,cp.prototype.isUsingAnotherMediaElement=cp.prototype.isUsingAnotherMediaElement,cp.prototype.hasCustomClick=cp.prototype.hasCustomClick,cp.prototype.isClientRendering=cp.prototype.isClientRendering,cp.prototype.needsSkipUI=cp.prototype.needsSkipUI,V("shaka.ads.Utils",dp),dp.ADS_LOADED="ads-loaded",dp.AD_STARTED="ad-started",dp.AD_FIRST_QUARTILE="ad-first-quartile",dp.AD_MIDPOINT="ad-midpoint",dp.AD_THIRD_QUARTILE="ad-third-quartile",dp.AD_COMPLETE="ad-complete",dp.AD_STOPPED="ad-stopped",dp.AD_SKIPPED="ad-skipped",dp.AD_VOLUME_CHANGED="ad-volume-changed",dp.AD_MUTED="ad-muted",dp.AD_PAUSED="ad-paused",dp.AD_RESUMED="ad-resumed",dp.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",dp.CUEPOINTS_CHANGED="ad-cue-points-changed",dp.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",dp.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",dp.AD_CLICKED="ad-clicked",dp.AD_PROGRESS="ad-progress",dp.AD_BUFFERING="ad-buffering",dp.AD_IMPRESSION="ad-impression",dp.AD_DURATION_CHANGED="ad-duration-changed",dp.AD_CLOSED="ad-closed",dp.AD_LOADED="ad-loaded",dp.ALL_ADS_COMPLETED="all-ads-completed",dp.AD_LINEAR_CHANGED="ad-linear-changed",dp.AD_METADATA="ad-metadata",dp.AD_RECOVERABLE_ERROR="ad-recoverable-error",dp.AD_ERROR="ad-error",dp.AD_BREAK_READY="ad-break-ready",dp.AD_INTERACTION="ad-interaction",dp.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",dp.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",dp.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",hp.prototype.configure=function(e){this.o=e},hp.prototype.stop=function(){this.g&&this.g.stop(),this.u&&es(this.u)},hp.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()},(i=vp.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return null!=this.h.clickThroughUrl},i.isUsingAnotherMediaElement=function(){return this.u},i.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.i&&null!=this.l?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},i.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},i.canSkipNow=function(){return this.i&&0==this.getTimeUntilSkippable()},i.skip=function(){this.canSkipNow()&&this.B()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return null==this.C},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.o},i.getPositionInSequence=function(){return this.m},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return""},i.getAdId=function(){return this.h.id||""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return this.h.uri},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.g=null},V("shaka.ads.InterstitialAd",vp),vp.prototype.release=vp.prototype.release,vp.prototype.getPodIndex=vp.prototype.getPodIndex,vp.prototype.getTimeOffset=vp.prototype.getTimeOffset,vp.prototype.getMediaUrl=vp.prototype.getMediaUrl,vp.prototype.getAdvertiserName=vp.prototype.getAdvertiserName,vp.prototype.getCreativeAdId=vp.prototype.getCreativeAdId,vp.prototype.getAdId=vp.prototype.getAdId,vp.prototype.getVastAdId=vp.prototype.getVastAdId,vp.prototype.getVastMediaWidth=vp.prototype.getVastMediaWidth,vp.prototype.getVastMediaHeight=vp.prototype.getVastMediaHeight,vp.prototype.getVastMediaBitrate=vp.prototype.getVastMediaBitrate,vp.prototype.getDescription=vp.prototype.getDescription,vp.prototype.getTitle=vp.prototype.getTitle,vp.prototype.getPositionInSequence=vp.prototype.getPositionInSequence,vp.prototype.getSequenceLength=vp.prototype.getSequenceLength,vp.prototype.setMuted=vp.prototype.setMuted,vp.prototype.resize=vp.prototype.resize,vp.prototype.isLinear=vp.prototype.isLinear,vp.prototype.isMuted=vp.prototype.isMuted,vp.prototype.setVolume=vp.prototype.setVolume,vp.prototype.getVolume=vp.prototype.getVolume,vp.prototype.play=vp.prototype.play,vp.prototype.pause=vp.prototype.pause,vp.prototype.skip=vp.prototype.skip,vp.prototype.canSkipNow=vp.prototype.canSkipNow,vp.prototype.getTimeUntilSkippable=vp.prototype.getTimeUntilSkippable,vp.prototype.isSkippable=vp.prototype.isSkippable,vp.prototype.isPaused=vp.prototype.isPaused,vp.prototype.getRemainingTime=vp.prototype.getRemainingTime,vp.prototype.getMinSuggestedDuration=vp.prototype.getMinSuggestedDuration,vp.prototype.getDuration=vp.prototype.getDuration,vp.prototype.isUsingAnotherMediaElement=vp.prototype.isUsingAnotherMediaElement,vp.prototype.hasCustomClick=vp.prototype.hasCustomClick,vp.prototype.isClientRendering=vp.prototype.isClientRendering,vp.prototype.needsSkipUI=vp.prototype.needsSkipUI,(i=bp.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return null!=this.g.clickThroughUrl},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return-1},i.isPaused=function(){return!1},i.isSkippable=function(){return!1},i.getTimeUntilSkippable=function(){return 0},i.canSkipNow=function(){return!1},i.skip=function(){},i.pause=function(){},i.play=function(){},i.getVolume=function(){return 1},i.setVolume=function(){},i.isMuted=function(){return!1},i.isLinear=function(){return this.i},i.resize=function(){},i.setMuted=function(){},i.getSequenceLength=function(){return this.j},i.getPositionInSequence=function(){return this.h},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.id||""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return this.g.uri},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){},V("shaka.ads.InterstitialStaticAd",bp),bp.prototype.release=bp.prototype.release,bp.prototype.getPodIndex=bp.prototype.getPodIndex,bp.prototype.getTimeOffset=bp.prototype.getTimeOffset,bp.prototype.getMediaUrl=bp.prototype.getMediaUrl,bp.prototype.getAdvertiserName=bp.prototype.getAdvertiserName,bp.prototype.getCreativeAdId=bp.prototype.getCreativeAdId,bp.prototype.getAdId=bp.prototype.getAdId,bp.prototype.getVastAdId=bp.prototype.getVastAdId,bp.prototype.getVastMediaWidth=bp.prototype.getVastMediaWidth,bp.prototype.getVastMediaHeight=bp.prototype.getVastMediaHeight,bp.prototype.getVastMediaBitrate=bp.prototype.getVastMediaBitrate,bp.prototype.getDescription=bp.prototype.getDescription,bp.prototype.getTitle=bp.prototype.getTitle,bp.prototype.getPositionInSequence=bp.prototype.getPositionInSequence,bp.prototype.getSequenceLength=bp.prototype.getSequenceLength,bp.prototype.setMuted=bp.prototype.setMuted,bp.prototype.resize=bp.prototype.resize,bp.prototype.isLinear=bp.prototype.isLinear,bp.prototype.isMuted=bp.prototype.isMuted,bp.prototype.setVolume=bp.prototype.setVolume,bp.prototype.getVolume=bp.prototype.getVolume,bp.prototype.play=bp.prototype.play,bp.prototype.pause=bp.prototype.pause,bp.prototype.skip=bp.prototype.skip,bp.prototype.canSkipNow=bp.prototype.canSkipNow,bp.prototype.getTimeUntilSkippable=bp.prototype.getTimeUntilSkippable,bp.prototype.isSkippable=bp.prototype.isSkippable,bp.prototype.isPaused=bp.prototype.isPaused,bp.prototype.getRemainingTime=bp.prototype.getRemainingTime,bp.prototype.getMinSuggestedDuration=bp.prototype.getMinSuggestedDuration,bp.prototype.getDuration=bp.prototype.getDuration,bp.prototype.isUsingAnotherMediaElement=bp.prototype.isUsingAnotherMediaElement,bp.prototype.hasCustomClick=bp.prototype.hasCustomClick,bp.prototype.isClientRendering=bp.prototype.isClientRendering,bp.prototype.needsSkipUI=bp.prototype.needsSkipUI,(i=wp.prototype).configure=function(e){this.N=e,Tp(this)},i.stop=function(){if(this.l&&this.l.Pa(),this.V.clear(),this.I.clear(),this.j.ng(),this.G.size)for(var e=Array.from(this.G.values()),t=(e=g(e)).next();!t.done;t=e.next())(t=t.value)&&t.then((function(e){e&&e.destroy()}));if(this.G.clear(),this.M.size)for(t=(e=g(e=Array.from(this.M.keys()))).next();!t.done;t=e.next())Np(this,t.value);this.M.clear(),this.j.detach(),this.K=!1,this.C=this.m=null,this.B=!0,this.h=this.g,this.H=null,Cp(this),Sp(this),this.o&&es(this.o),this.u&&(this.u.stop(),this.u=null)},i.release=function(){this.stop(),this.J&&this.J.release(),this.l&&this.l.release(),this.S&&(this.S.stop(),this.S=null),this.O&&(this.O.stop(),this.O=null),this.j.destroy()},i.td=function(){return this.j},i.addAdUrlInterstitial=function(e){var t,n,r,i,a,o,s,u,l,c=this;return L((function(d){if(1==d.g)return S(d,Pp(c,e,t={type:12}),2);if(3!=d.g){if(n=d.h,!(r=Gt(n,"VAST,vmap:VMAP")))throw new Be(2,10,10007);if(i=[],"VAST"==r.tagName)return i=fp(r,c.m),d.A(3);if("vmap:VMAP"!=r.tagName)return d.A(3);for(a=function(e){var n,r;return L((function(a){if(1==a.g)return S(a,Pp(c,e.uri,t),2);if(n=a.h,!(r=Gt(n,"VAST")))throw new Be(2,10,10007);i.push.apply(i,m(fp(r,e.time))),T(a)}))},o=[],s=g(function(e){for(var t=[],n=(e=g(Xt(e,"vmap:AdBreak"))).next();!n.done;n=e.next()){var r=n.value,i=r.attributes.timeOffset;i&&(n=null,n="start"==i?null:"end"==i?1/0:Ut(i),(r=Qt(r,"vmap:AdSource"))&&(r=Qt(r,"vmap:AdTagURI"))&&(r=Yt(r))&&t.push({time:n,uri:r}))}return t}(r)),u=s.next();!u.done;u=s.next())l=u.value,o.push(a(l));return o.length?S(d,Promise.all(o),3):d.A(3)}Ap(c,i),T(d)}))},(i=jp.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!1},i.hasCustomClick=function(){return!1},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return this.h.durationInSeconds},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return"number"==typeof this.j},i.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return this.o},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.l?this.l:1},i.getPositionInSequence=function(){return this.i?this.i:1},i.getTitle=function(){return this.h.adTitle},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return this.h.vastAdId||""},i.getAdId=function(){return this.h.adId},i.getCreativeAdId=function(){return this.h.creativeId},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.l=this.i=this.g=this.h=null},V("shaka.ads.MediaTailorAd",jp),jp.prototype.release=jp.prototype.release,jp.prototype.getPodIndex=jp.prototype.getPodIndex,jp.prototype.getTimeOffset=jp.prototype.getTimeOffset,jp.prototype.getMediaUrl=jp.prototype.getMediaUrl,jp.prototype.getAdvertiserName=jp.prototype.getAdvertiserName,jp.prototype.getCreativeAdId=jp.prototype.getCreativeAdId,jp.prototype.getAdId=jp.prototype.getAdId,jp.prototype.getVastAdId=jp.prototype.getVastAdId,jp.prototype.getVastMediaWidth=jp.prototype.getVastMediaWidth,jp.prototype.getVastMediaHeight=jp.prototype.getVastMediaHeight,jp.prototype.getVastMediaBitrate=jp.prototype.getVastMediaBitrate,jp.prototype.getDescription=jp.prototype.getDescription,jp.prototype.getTitle=jp.prototype.getTitle,jp.prototype.getPositionInSequence=jp.prototype.getPositionInSequence,jp.prototype.getSequenceLength=jp.prototype.getSequenceLength,jp.prototype.setMuted=jp.prototype.setMuted,jp.prototype.resize=jp.prototype.resize,jp.prototype.isLinear=jp.prototype.isLinear,jp.prototype.isMuted=jp.prototype.isMuted,jp.prototype.setVolume=jp.prototype.setVolume,jp.prototype.getVolume=jp.prototype.getVolume,jp.prototype.play=jp.prototype.play,jp.prototype.pause=jp.prototype.pause,jp.prototype.skip=jp.prototype.skip,jp.prototype.canSkipNow=jp.prototype.canSkipNow,jp.prototype.getTimeUntilSkippable=jp.prototype.getTimeUntilSkippable,jp.prototype.isSkippable=jp.prototype.isSkippable,jp.prototype.isPaused=jp.prototype.isPaused,jp.prototype.getRemainingTime=jp.prototype.getRemainingTime,jp.prototype.getMinSuggestedDuration=jp.prototype.getMinSuggestedDuration,jp.prototype.getDuration=jp.prototype.getDuration,jp.prototype.isUsingAnotherMediaElement=jp.prototype.isUsingAnotherMediaElement,jp.prototype.hasCustomClick=jp.prototype.hasCustomClick,jp.prototype.isClientRendering=jp.prototype.isClientRendering,jp.prototype.needsSkipUI=jp.prototype.needsSkipUI,Up.prototype.stop=function(){for(var e=g(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);Hp(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},Up.prototype.release=function(){this.stop(),this.o&&this.o.release()},Up.prototype.onManifestUpdated=function(e){this.J=e,""!=this.H&&(function(e,t,n){var r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b;L((function(w){if(1==w.g)return r={type:8},i=Gi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),a=e.K.request(7,i,r),x(w,2),S(w,a.promise,4);if(2!=w.g){if(o=w.h,s=[],u=He(o.data),(l=JSON.parse(u)).avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,c=g(e.j),d=c.next();!d.done;d=c.next())for(f=d.value,p=g(f.nonLinearAdsList),h=p.next();!h.done;h=p.next())for(m=h.value,y=g(m.nonLinearAdList),v=y.next();!v.done;v=y.next())b=v.value,_p(e,b);s=e.getCuePoints(),e.i(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",s)))}}else e.j.length&&e.i(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",s))),Hp(e),e.j=[];return n&&(e.J||s.length>0)&&function(e){Vp(e),e.J||(Fp(e),e.o.D(e.h,"seeked",(function(){Fp(e)})),e.o.D(e.h,"ended",(function(){Hp(e)}))),e.o.D(e.h,"timeupdate",(function(){Vp(e)}))}(e),k(w,0)}E(w),T(w)}))}(this,this.H,this.O),this.O=!1)},Up.prototype.getCuePoints=function(){for(var e=[],t=g(this.j),n=t.next();!n.done;n=t.next())for(var r=(n=g(n.value.ads)).next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds});return e},(i=Kp.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!1},i.hasCustomClick=function(){return!0},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return this.i?this.i.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},i.isPaused=function(){return this.h.paused},i.isSkippable=function(){return this.g.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.h.currentTime+=this.getRemainingTime()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.play()},i.getVolume=function(){return this.h.volume},i.setVolume=function(e){this.h.volume=e},i.isMuted=function(){return this.h.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.h.muted=e},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.i=this.g=null},V("shaka.ads.ServerSideAd",Kp),Kp.prototype.release=Kp.prototype.release,Kp.prototype.getPodIndex=Kp.prototype.getPodIndex,Kp.prototype.getTimeOffset=Kp.prototype.getTimeOffset,Kp.prototype.getMediaUrl=Kp.prototype.getMediaUrl,Kp.prototype.getAdvertiserName=Kp.prototype.getAdvertiserName,Kp.prototype.getCreativeAdId=Kp.prototype.getCreativeAdId,Kp.prototype.getAdId=Kp.prototype.getAdId,Kp.prototype.getVastAdId=Kp.prototype.getVastAdId,Kp.prototype.getVastMediaWidth=Kp.prototype.getVastMediaWidth,Kp.prototype.getVastMediaHeight=Kp.prototype.getVastMediaHeight,Kp.prototype.getVastMediaBitrate=Kp.prototype.getVastMediaBitrate,Kp.prototype.getDescription=Kp.prototype.getDescription,Kp.prototype.getTitle=Kp.prototype.getTitle,Kp.prototype.getPositionInSequence=Kp.prototype.getPositionInSequence,Kp.prototype.getSequenceLength=Kp.prototype.getSequenceLength,Kp.prototype.setMuted=Kp.prototype.setMuted,Kp.prototype.resize=Kp.prototype.resize,Kp.prototype.isLinear=Kp.prototype.isLinear,Kp.prototype.isMuted=Kp.prototype.isMuted,Kp.prototype.setVolume=Kp.prototype.setVolume,Kp.prototype.getVolume=Kp.prototype.getVolume,Kp.prototype.play=Kp.prototype.play,Kp.prototype.pause=Kp.prototype.pause,Kp.prototype.skip=Kp.prototype.skip,Kp.prototype.canSkipNow=Kp.prototype.canSkipNow,Kp.prototype.getTimeUntilSkippable=Kp.prototype.getTimeUntilSkippable,Kp.prototype.isSkippable=Kp.prototype.isSkippable,Kp.prototype.isPaused=Kp.prototype.isPaused,Kp.prototype.getRemainingTime=Kp.prototype.getRemainingTime,Kp.prototype.getMinSuggestedDuration=Kp.prototype.getMinSuggestedDuration,Kp.prototype.getDuration=Kp.prototype.getDuration,Kp.prototype.isUsingAnotherMediaElement=Kp.prototype.isUsingAnotherMediaElement,Kp.prototype.hasCustomClick=Kp.prototype.hasCustomClick,Kp.prototype.isClientRendering=Kp.prototype.isClientRendering,Kp.prototype.needsSkipUI=Kp.prototype.needsSkipUI,(i=zp.prototype).configure=function(){},i.stop=function(){this.C="",this.o=null,this.F=[]},i.release=function(){this.stop(),this.h&&this.h.release()},i.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},i.getCuePoints=function(){return this.F},p(Wp,Ui),(i=Wp.prototype).setLocale=function(e){this.o=e},i.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},i.initInterstitial=function(e,t,n){var r=this;this.g&&this.g.release(),this.g=new wp(e,t,n,(function(e){return Xp(r,e)})),this.g.configure(this.l)},i.initClientSide=function(t,n,r){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Be(2,10,1e4);this.j&&this.j.release(),this.j=new hp(t,n,this.o,r,(function(e){return Xp(i,e)})),this.j.configure(this.l)},i.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Ui.prototype.release.call(this)},i.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Oi("ad-stopped")),this.dispatchEvent(new Oi("ad-content-attach-requested")),this.m=new up},i.requestClientSideAds=function(e){if(!this.j)throw new Be(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},i.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new Be(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},i.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new Up(e,t,n,(function(e){return Xp(r,e)}))},i.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new Be(1,10,10005);var r=this.i;return n=void 0===n?"":n,r.l?e=Promise.reject(new Be(1,10,10004)):(r.l=new Ii,function(e,t,n){var r,i,a,o,s,u,l,c,d,f,p,h;L((function(g){if(1==g.g)return r={type:7},(i=Gi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",n&&(a=JSON.stringify(n),i.body=Ke(a)),o=e.K.request(7,i,r),x(g,2),S(g,o.promise,4);if(2!=g.g){if(s=g.h,u=He(s.data),!(l=JSON.parse(u)).manifestUrl||!l.trackingUrl)throw Error("Insufficient data from MediaTailor.");return c=new me(t),d=new me(l.trackingUrl),e.H=c.resolve(d).toString(),f=Date.now()/1e3,p=f-e.R,e.i(new Oi("ads-loaded",(new Map).set("loadTime",p))),h=new me(l.manifestUrl),e.l.resolve(c.resolve(h).toString()),e.l=null,k(g,0)}if(E(g),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,g.return();e.l.resolve(e.I),e.l=null,T(g)}))}(r,e,t),r.I=n||"",r.R=Date.now()/1e3,e=r.l),e},i.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new Be(1,10,10005);var t=this.i;t.H=e,t.i(new Oi("ads-loaded",(new Map).set("loadTime",0)))},i.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new Be(2,10,10002);this.h&&this.h.release(),this.h=new zp(t,n,this.o,(function(e){return Xp(r,e)})),this.h.configure(this.l)},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.h)throw new Be(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&W('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.2",(n=this.h).j?e=Promise.reject(new Be(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new Ii,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new Be(1,10,10003);(e.mpt||e.mpv)&&W('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.2",this.h.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){return de("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},i.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},i.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:lp(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},i.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},i.onDashTimedMetadata=function(e){this.h&&"urn:google:dai:2018"==e.schemeIdUri&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},i.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},i.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&xp(this.g,n))},i.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var r=n.schemeIdUri;if("urn:mpeg:dash:event:alternativeMPD:insert:2025"==r||"urn:mpeg:dash:event:alternativeMPD:replace:2025"==r){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t="urn:mpeg:dash:event:alternativeMPD:replace:2025"==n.schemeIdUri,r="urn:mpeg:dash:event:alternativeMPD:insert:2025"==n.schemeIdUri,t||r)){for(var i,a=n.startTime,o=n.endTime,s=null,u=0,l=g(n.eventNode.children),c=l.next();!c.done;c=l.next())if("AlternativeMPD"==(c=c.value).tagName){if(c=c.attributes.uri){i=c;break}}else if("InsertPresentation"==c.tagName||"ReplacePresentation"==c.tagName){var d=c.attributes.url;if(d){i=Xe(d),(l=en(c,"maxDuration",un))&&(s=l/n.timescale),(l=en(c,"returnOffset",un))&&(u=l/n.timescale),t&&u&&(o=a+u);break}}i&&Ap(e,[{id:n.id,groupId:null,startTime:a,endTime:o,uri:i,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:r?u:null,playoutLimit:s,once:!1,pre:!1,post:!1,timelineRange:t&&!r,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else("urn:mpeg:dash:event:2012"==r||"urn:scte:dash:scte214-events"==r)&&n.eventNode&&Qt(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&function(e,t){var n=Qt(t.eventNode,"OverlayEvent"),r=n.attributes.uri,i=n.attributes.mimeType,a="true"==n.attributes.loop,o=en(n,"z",un);if(r&&0!=o){var s=null,u=Qt(n,"Background");if(u){var l=u.attributes.uri;s=l?"center / contain no-repeat url('"+l+"')":Jt(u)}u=1920,l=1080;var c=Qt(n,"Viewport");if(c){if(null==(u=en(c,"x",un)))return;if(null==(l=en(c,"y",un)))return}var d={viewport:{x:u,y:l},topLeft:{x:0,y:0},size:{x:u,y:l}},f=Qt(n,"Overlay");if(c&&f){var p=Qt(f,"TopLeft"),h=Qt(f,"Size");if(p&&h){if(null==(f=en(p,"x",un)))return;if(null==(p=en(p,"y",un)))return;var g=en(h,"x",un);if(null==g)return;if(null==(h=en(h,"y",un)))return;d.topLeft.x=f,d.topLeft.y=p,d.size.x=g,d.size.y=h}}if(f=null,n=Qt(n,"Squeeze"),c&&n&&(h=Qt(n,"TopLeft"),n=Qt(n,"Size"),h&&n)){if(null==(c=en(h,"x",un)))return;if(null==(f=en(h,"y",un)))return;if(null==(h=en(n,"x",un)))return;if(null==(n=en(n,"y",un)))return;f={viewport:{x:u,y:l},topLeft:{x:c,y:f},size:{x:h,y:n}}}Ap(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:r,mimeType:i,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:a,overlay:d,displayOnBackground:-1==o,currentVideo:f,background:s,clickThroughUrl:null}])}}(this.g,n))}},i.addCustomInterstitial=function(e){if(!this.g)throw new Be(1,10,10006);Ap(this.g,[e])},i.addAdUrlInterstitial=function(e){if(!this.g)throw new Be(1,10,10006);return this.g.addAdUrlInterstitial(e)},i.getInterstitialPlayer=function(){if(!this.g)throw new Be(1,10,10006);return this.g.td()},V("shaka.ads.AdManager",Wp),Wp.prototype.getInterstitialPlayer=Wp.prototype.getInterstitialPlayer,Wp.prototype.addAdUrlInterstitial=Wp.prototype.addAdUrlInterstitial,Wp.prototype.addCustomInterstitial=Wp.prototype.addCustomInterstitial,Wp.prototype.onDASHInterstitialMetadata=Wp.prototype.onDASHInterstitialMetadata,Wp.prototype.onHLSInterstitialMetadata=Wp.prototype.onHLSInterstitialMetadata,Wp.prototype.onCueMetadataChange=Wp.prototype.onCueMetadataChange,Wp.prototype.onHlsTimedMetadata=Wp.prototype.onHlsTimedMetadata,Wp.prototype.onDashTimedMetadata=Wp.prototype.onDashTimedMetadata,Wp.prototype.onManifestUpdated=Wp.prototype.onManifestUpdated,Wp.prototype.getStats=Wp.prototype.getStats,Wp.prototype.getCuePoints=Wp.prototype.getCuePoints,Wp.prototype.getServerSideCuePoints=Wp.prototype.getServerSideCuePoints,Wp.prototype.replaceServerSideAdTagParameters=Wp.prototype.replaceServerSideAdTagParameters,Wp.prototype.requestServerSideStream=Wp.prototype.requestServerSideStream,Wp.prototype.initServerSide=Wp.prototype.initServerSide,Wp.prototype.addMediaTailorTrackingUrl=Wp.prototype.addMediaTailorTrackingUrl,Wp.prototype.requestMediaTailorStream=Wp.prototype.requestMediaTailorStream,Wp.prototype.initMediaTailor=Wp.prototype.initMediaTailor,Wp.prototype.updateClientSideAdsRenderingSettings=Wp.prototype.updateClientSideAdsRenderingSettings,Wp.prototype.requestClientSideAds=Wp.prototype.requestClientSideAds,Wp.prototype.onAssetUnload=Wp.prototype.onAssetUnload,Wp.prototype.release=Wp.prototype.release,Wp.prototype.initClientSide=Wp.prototype.initClientSide,Wp.prototype.initInterstitial=Wp.prototype.initInterstitial,Wp.prototype.configure=Wp.prototype.configure,Wp.prototype.setLocale=Wp.prototype.setLocale,Wp.ADS_LOADED="ads-loaded",Wp.AD_STARTED="ad-started",Wp.AD_FIRST_QUARTILE="ad-first-quartile",Wp.AD_MIDPOINT="ad-midpoint",Wp.AD_THIRD_QUARTILE="ad-third-quartile",Wp.AD_COMPLETE="ad-complete",Wp.AD_STOPPED="ad-stopped",Wp.AD_SKIPPED="ad-skipped",Wp.AD_VOLUME_CHANGED="ad-volume-changed",Wp.AD_MUTED="ad-muted",Wp.AD_PAUSED="ad-paused",Wp.AD_RESUMED="ad-resumed",Wp.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Wp.CUEPOINTS_CHANGED="ad-cue-points-changed",Wp.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Wp.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Wp.AD_CLICKED="ad-clicked",Wp.AD_PROGRESS="ad-progress",Wp.AD_BUFFERING="ad-buffering",Wp.AD_IMPRESSION="ad-impression",Wp.AD_DURATION_CHANGED="ad-duration-changed",Wp.AD_CLOSED="ad-closed",Wp.AD_LOADED="ad-loaded",Wp.ALL_ADS_COMPLETED="all-ads-completed",Wp.AD_LINEAR_CHANGED="ad-linear-changed",Wp.AD_METADATA="ad-metadata",Wp.AD_RECOVERABLE_ERROR="ad-recoverable-error",Wp.AD_ERROR="ad-error",Wp.AD_BREAK_READY="ad-break-ready",Wp.AD_INTERACTION="ad-interaction",Wp.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Wp.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Wp.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",op=function(){return new Wp};var $p="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Qp="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Zp=["loop","playbackRate"],eh=["pause","play"],th=(new Map).set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1),nh=(new Map).set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),rh=(new Map).set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),ih=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],ah=[["isTextTrackVisible","setTextTrackVisibility"]],oh="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),sh="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function uh(e,t,n,r,i,a,o){var s=this;this.H=e,this.K=o,this.l=new xr(t),this.M=n,this.u=!1,this.B=r,this.G=i,this.N=a,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return fh(s)},this.F=function(e,t){switch((e=Jp(t)).type){case"event":var n=e.targetName,r=Ni(e.event);s.B(n,r);break;case"update":for(r in n=e.update)for(var i in e=s.g[r]||{},n[r])e[i]=n[r][i];s.u&&(s.M(),s.u=!1);break;case"asyncComplete":if(i=e.id,r=e.error,t=e.res,e=s.h.get(i),s.h.delete(i),e)if(r){for(n in i=new Be(r.severity,r.category,r.code),r)i[n]=r[n];e.reject(i)}else e.resolve(t)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,bh.add(this)}function lh(e,t){var n=e.N();yh=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),fh(e),hh(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function ch(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new Be(2,8,n,t))}function dh(e){var t=yh;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function fh(e){var t=!!yh&&"connected"==yh.status;if(e.i&&!t){for(var n in e.G(),e.g)e.g[n]={};ph(e)}e.i=t,e.J=t?yh.receiver.friendlyName:"",e.l.Jb()}function ph(e){if(e.h)for(var t=g(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var r=e.h.get(n);e.h.delete(n),r.reject(new Be(1,7,7e3))}}function hh(e,t){t=Yp(t);var n=yh;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),Y)}catch(r){throw t=new Be(2,8,8005,r),n=new Oi("error",(new Map).set("detail",t)),e.B("player",n),e.qd(),t}}(i=uh.prototype).destroy=function(){return bh.delete(this),ph(this),yh&&dh(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},i.wb=function(){return this.i},i.$g=function(){return this.J},i.init=function(){if(this.H.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Jb();var t=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=g(bh),n=t.next();!n.done;n=t.next()){var r=e;(n=n.value).j=new Ii,n.u=!0,lh(n,r)}}),(function(e){for(var t=g(bh),n=t.next();!n.done;n=t.next())n=n.value,mh="available"==e,n.l.Jb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),mh&&this.l.ia(gh),(t=yh)&&t.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Ii,this.u=!0,lh(this,t)):yh=null}else e.__onGCastApiAvailable!==wh&&(vh=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=wh)},i.mh=function(e){this.o=e,this.i&&hh(this,{type:"appData",appData:this.o})},i.cast=function(){var e=this;return L((function(t){if(!e.m)throw new Be(1,8,8e3);if(!mh)throw new Be(1,8,8001);if(e.i)throw new Be(1,8,8002);return e.j=new Ii,chrome.cast.requestSession((function(t){return lh(e,t)}),(function(t){return ch(e,t)})),S(t,e.j,0)}))},i.qd=function(){if(this.i){if(ph(this),yh){dh(this);try{yh.stop((function(){}),(function(){}))}catch(e){}yh=null}fh(this)}},i.get=function(e,t){var n=this;if("video"==e){if(eh.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(m(O.apply(0,arguments))))}}else if("player"==e){if(rh.has(t)&&!this.get("player","isLive")())return function(){};if(oh.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(m(O.apply(0,arguments))))};if(sh.includes(t))return function(){return n.Mk.apply(n,[e,t].concat(m(O.apply(0,arguments))))};if(th.has(t)||nh.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,hh(this,{type:"set",targetName:e,property:t,value:n})},i.Fi=function(e,t){hh(this,{type:"call",targetName:e,methodName:t,args:O.apply(2,arguments)})},i.Mk=function(e,t){var n=O.apply(2,arguments),r=new Ii,i=this.I.toString();this.I++,this.h.set(i,r);try{hh(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(e){r.reject(e)}return r};var gh=.02,mh=!1,yh=null,vh=null,bh=new Set;function wh(t){if(vh?e.__onGCastApiAvailable=vh:delete e.__onGCastApiAvailable,vh=null,t)for(var n=g(bh),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Sh(t,n,r,i){i=void 0!==i&&i,Ui.call(this);var a=this;this.i=t,this.h=n,this.l=this.o=this.m=this.u=this.j=null,this.I=r,this.H=i,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,e.chrome?(this.g=new uh(r,(function(){return Ah(a)}),(function(){return kh(a)}),(function(e,t){return Mh(a,e,t)}),(function(){return Eh(a)}),(function(){return xh(a)}),i),function(e){e.g.init(),e.l=new ne;for(var t=g($p),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,(function(t){e.g.wb()||(t=Ni(t),e.m.dispatchEvent(t))}));for(var r in ji)e.l.D(e.h,ji[r],(function(t){e.g.wb()||e.o.dispatchEvent(t)}));for(var i in e.j={},t={},e.i)(t={ce:t.ce}).ce=i,Object.defineProperty(e.j,t.ce,{configurable:!1,enumerable:!0,get:function(t){return function(){return Ih(e,t.ce)}}(t),set:function(t){return function(n){var r=t.ce;e.g.wb()?e.g.set("video",r,n):e.i[r]=n}}(t)});e.u={},Th(e,(function(t){Object.defineProperty(e.u,t,{configurable:!1,enumerable:!0,get:function(){return Ch(e,t)}})})),function(e){var t=new Map;Th(e,(function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.G.set(n,r):e.G.set(r,n)):t.set(r,n)}))}(e),e.m=new Ui,e.m.Fe=e.j,e.o=new Ui,e.o.Fe=e.u,e.l.D(e.h,"unloading",(function(){e.g&&e.g.wb()||Dh(e)}))}(this)):(this.j=this.i,this.u=this.h)}function Th(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!a.has(e)}var r,i=e.h,a=new Set;for(r in i)n(r)&&(a.add(r),t(r,i[r]));for(e=Object.getPrototypeOf(i),r=Object.getPrototypeOf({});e&&e!=r;){for(var o=g(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())n(s=s.value)&&(a.add(s),t(s,i[s]));e=Object.getPrototypeOf(e)}}function xh(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=g(Zp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),r=(n=g(ih)).next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(r=(n=g(ah)).next();!r.done;r=n.next())r=(i=r.value)[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function Ah(e){var t=new Oi("caststatuschanged");e.dispatchEvent(t)}function kh(e){var t=new Oi(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function Eh(e){for(var t=g(ih),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.F,a=e.C,o=e.B;Dh(e);var s=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var u,l=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime")),(r=e.g.get("player","getTextTracks")())&&r.length&&(u=r.find((function(e){return e.active})));var c=e.g.get("player","isTextTrackVisible")();s&&(e.i.autoplay=!1,t=e.h.load(s,n));var d={};for(r=(n=g(Zp)).next();!r.done;r=n.next())r=r.value,d[r]=e.g.get("video",r);t.then((function(){if(e.i){for(var t=g(i),n=t.next();!n.done;n=t.next()){var r;n=n.value,(r=e.td()).Me.apply(r,m(n))}for(r=(t=g(a)).next();!r.done;r=t.next()){var f;r=r.value,(f=e.td()).Od.apply(f,m(r))}for(t=(f=g(o)).next();!t.done;t=f.next()){var p;t=t.value,(p=e.td()).Le.apply(p,m(t))}for(f=(p=g(Zp)).next();!f.done;f=p.next())f=f.value,e.i[f]=d[f];for(f=(p=g(ah)).next();!f.done;f=p.next())f=(t=f.value)[1],t=e.g.get("player",t[0])(),e.h[f](t);e.h.qh(c),u&&e.h.jh(u.language,u.roles,u.forced),e.i.autoplay=l,s&&e.i.play()}}),(function(t){t=new Oi("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)}))}function Ih(e,t){if("addEventListener"==t)return function(t,n,r){return e.m.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.m.removeEventListener(t,n,r)};if(e.g.wb()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.wb()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function Ch(e,t,n){if(n=void 0!==n&&n,e.G.has(t)&&(t=e.G.get(t)),"addEventListener"==t)return function(t,n,r){return e.o.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.o.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.j};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Wb()};if("getDrmEngine"==t)return function(){return e.h.F};if("getAdManager"==t)return function(){return e.h.Yh()};if("getQueueManager"==t)return function(){return e.h.ei()};if("setVideoContainer"==t)return function(t){return e.h.Ti(t)};if(!n){if("addThumbnailsTrack"==t)return function(){var n=O.apply(0,arguments);return e.F.push(n),Ch(e,t,!0).apply(null,m(n))};if("addTextTrackAsync"==t)return function(){var n=O.apply(0,arguments);return e.C.push(n),Ch(e,t,!0).apply(null,m(n))};if("addChaptersTrack"==t)return function(){var n=O.apply(0,arguments);return e.B.push(n),Ch(e,t,!0).apply(null,m(n))}}if(e.g.wb()){if("getManifest"==t||"drmInfo"==t)return function(){return W(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return W(t+"() does not work while casting!"),Promise.resolve()};if("getChapters"==t)return function(){return W(t+"() does not work while casting!"),[]}}return e.g.wb()&&0==Object.keys(e.g.g.video).length&&(th.has(t)||nh.has(t))||!e.g.wb()?e.h[t].bind(e.h):e.g.get("player",t)}function Mh(e,t,n){e.g.wb()&&("video"==t?e.m.dispatchEvent(n):"player"==t&&("unloading"==n.type&&Dh(e),e.o.dispatchEvent(n)))}function Dh(e){e.F=[],e.C=[],e.B=[]}function Ph(e,t,n,r){Ui.call(this);var i=this;this.h=e,this.g=t,this.j=new ne,this.I={video:e,player:t},this.G=n||function(){},this.J=r||function(e){return e},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new xr((function(){Nh(i)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Rh(e)},t.onSenderDisconnected=function(){return Rh(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Bh(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Bh(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(t){return function(e,t){var n=Jp(t.data);switch(n.type){case"PLAY":e.h.play(),Fh(e);break;case"PAUSE":e.h.pause(),Fh(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.h.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.h.play(),Fh(e)):r&&"PLAYBACK_PAUSE"==r&&(e.h.pause(),Fh(e));break;case"STOP":e.g.Ac().then((function(){e.g&&Fh(e)}));break;case"GET_STATUS":Uh(e,Number(n.requestId));break;case"VOLUME":t=(r=n.volume).level,r=r.muted;var i=e.h.volume,a=e.h.muted;null!=t&&(e.h.volume=Number(t)),null!=r&&(e.h.muted=r),i==e.h.volume&&a==e.h.muted||Fh(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,r=n.currentTime,i=e.J(t.contentId),a=n.autoplay||!0,e.G(t.customData),a&&(e.h.autoplay=!0),e.g.load(i,r).then((function(){e.g&&Uh(e)})).catch((function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),Bh(e,{requestId:Number(n.requestId),type:r},e.u)}));break;default:Bh(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=Jp(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,function(e,t,n){var r,i,a,o,s,u,l,c,d,f,p,h,y,v,b,w,A,I,C;L((function(M){switch(M.g){case 1:for(r in t.player)i=t.player[r],e.g[r](i);return e.G(n),a=e.h.autoplay,t.manifest?(e.h.autoplay=!1,x(M,5),S(M,e.g.load(t.manifest,t.startTime),7)):S(M,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(o=g(t.addThumbnailsTrackCalls),s=o.next();!s.done;s=o.next())u=s.value,e.g.Me.apply(e.g,m(u));if(t.addTextTrackAsyncCalls)for(l=g(t.addTextTrackAsyncCalls),c=l.next();!c.done;c=l.next())d=c.value,e.g.Od.apply(e.g,m(d));if(t.addChaptersTrackCalls)for(f=g(t.addChaptersTrackCalls),p=f.next();!p.done;p=f.next())h=p.value,e.g.Le.apply(e.g,m(h));k(M,3);break;case 5:return y=E(M),v=(new Map).set("detail",y),b=new Oi("error",v),e.g&&e.g.dispatchEvent(b),M.return();case 3:if(!e.g)return M.return();for(w in t.video)A=t.video[w],e.h[w]=A;for(I in t.playerAfterLoad)C=t.playerAfterLoad[I],e.g[I](C);e.h.autoplay=a,t.manifest&&(e.h.play(),Fh(e)),T(M)}}))}(e,n.initState,n.appData),Nh(e);break;case"appData":e.G(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.I[r][i]=n;break;case"call":(r=e.I[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.m=0,e.C=!1);var a=n.id,o=t.senderId;n=(t=e.I[r])[i].apply(t,n.args),"player"==r&&"load"==i&&(n=n.then((function(){e.B=!0}))),n.then((function(t){return _h(e,o,a,null,t)}),(function(t){return _h(e,o,a,t,null)}))}}(e,t)},t.start();for(var n=(t=g($p)).next();!n.done;n=t.next())e.j.D(e.h,n.value,(function(t){return Oh(e,"video",t)}));for(var r in ji)e.j.D(e.g,ji[r],(function(t){return Oh(e,"player",t)}));e.j.D(e.h,"loadeddata",(function(){e.C=!0})),e.j.D(e.g,"loading",(function(){e.o=!1,Lh(e)})),e.j.D(e.h,"playing",(function(){e.o=!1,Lh(e)})),e.j.D(e.h,"pause",(function(){Lh(e)})),e.j.D(e.g,"unloading",(function(){e.o=!0,Lh(e)})),e.j.D(e.h,"ended",(function(){new xr((function(){e.h&&e.h.ended&&(e.o=!0,Lh(e))})).ia(Hh)}))}(this)}function Rh(e){e.m=0,e.B=!0,e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Lh(e)}function Lh(e){var t;L((function(n){return 1==n.g?S(n,Promise.resolve(),2):e.g?(t=new Oi("caststatuschanged"),e.dispatchEvent(t),jh(e)||Fh(e),void T(n)):n.return()}))}function Oh(e,t,n){e.g&&(Nh(e),Bh(e,{type:"event",targetName:t,event:n},e.l))}function Nh(e){e.F.ia(Vh);for(var t={video:{},player:{}},n=g(Qp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.h[r];e.g.W()&&rh.forEach((function(n,r){e.m%n==0&&(t.player[r]=e.g[r]())})),th.forEach((function(n,r){e.m%n==0&&(t.player[r]=e.g[r]())})),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Bh(e,{type:"update",update:t},e.l),nh.forEach((function(t,n){e.m%t==0&&((t={player:{}}).player[n]=e.g[n](),Bh(e,{type:"update",update:t},e.l))})),e.C&&(e.m+=1),jh(e)}function jh(e){return!(!e.B||!e.h.duration&&!e.g.W())&&(Uh(e),e.B=!1,!0)}function Uh(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Fh(e,void 0===t?0:t,n)}function _h(e,t,n,r,i){e.g&&Bh(e,{type:"asyncComplete",id:n,error:r,res:i},e.l,t)}function Bh(e,t,n,r){e.H&&(e=Yp(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Fh(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?Gh:e.g.Ng()?Kh:e.h.paused?zh:qh,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(r.media=n),Bh(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.u)}p(Sh,Ui),(i=Sh.prototype).destroy=function(e){return this.g&&void 0!==e&&e&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,Ui.prototype.release.call(this),Promise.all(e)},i.ck=function(){return this.j},i.td=function(){return this.u},i.lj=function(){return!!this.g&&(this.g.m&&mh)},i.wb=function(){return!!this.g&&this.g.wb()},i.$g=function(){return this.g?this.g.$g():""},i.cast=function(){var e=this;return L((function(t){return 1==t.g?e.g?S(t,e.g.cast(),2):t.return():e.h?S(t,e.h.Ac(),0):t.return()}))},i.mh=function(e){this.g&&this.g.mh(e)},i.cl=function(){var e;this.g&&((e=this.g).i&&chrome.cast.requestSession((function(t){return lh(e,t)}),(function(t){return ch(e,t)})))},i.qd=function(){this.g&&this.g.qd()},i.mj=function(e,t){t=void 0!==t&&t;var n=this;return L((function(r){if(1==r.g)return e==n.I&&t==n.H?r.return():(n.I=e,n.H=t,n.g?(n.g.qd(),S(r,n.g.destroy(),2)):r.return());n.g=null,n.g=new uh(e,(function(){return Ah(n)}),(function(){return kh(n)}),(function(e,t){return Mh(n,e,t)}),(function(){return Eh(n)}),(function(){return xh(n)}),t),n.g.init(),T(r)}))},V("shaka.cast.CastProxy",Sh),Sh.prototype.changeReceiverId=Sh.prototype.mj,Sh.prototype.forceDisconnect=Sh.prototype.qd,Sh.prototype.suggestDisconnect=Sh.prototype.cl,Sh.prototype.setAppData=Sh.prototype.mh,Sh.prototype.cast=Sh.prototype.cast,Sh.prototype.receiverName=Sh.prototype.$g,Sh.prototype.isCasting=Sh.prototype.wb,Sh.prototype.canCast=Sh.prototype.lj,Sh.prototype.getPlayer=Sh.prototype.td,Sh.prototype.getVideo=Sh.prototype.ck,Sh.prototype.destroy=Sh.prototype.destroy,p(Ph,Ui),(i=Ph.prototype).isConnected=function(){return this.H},i.jk=function(){return this.o},i.Yk=function(e){this.i=e},i.qj=function(){this.i=null},i.Zk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.Xk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.Wk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return L((function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.g&&(e.push(t.g.destroy()),t.g=null),t.F&&(t.F.stop(),t.F=null),t.h=null,t.I=null,t.G=null,t.H=!1,t.o=!0,t.l=null,t.u=null,Ui.prototype.release.call(t),S(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),T(n)}))},V("shaka.cast.CastReceiver",Ph),Ph.prototype.destroy=Ph.prototype.destroy,Ph.prototype.setContentArtist=Ph.prototype.Wk,Ph.prototype.setContentImage=Ph.prototype.Xk,Ph.prototype.setContentTitle=Ph.prototype.Zk,Ph.prototype.clearContentMetadata=Ph.prototype.qj,Ph.prototype.setContentMetadata=Ph.prototype.Yk,Ph.prototype.isIdle=Ph.prototype.jk,Ph.prototype.isConnected=Ph.prototype.isConnected;var Vh=.5,Hh=5,Gh="IDLE",qh="PLAYING",Kh="BUFFERING",zh="PAUSED";function Wh(e,t,n,r,i){if(r>=i)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}for(s=n.length-1;s>=0;s--)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}if(-1===a||-1===o)return null;for(var u=s=!1,l="white",c="black",d=Xh(r,i,s,u,l,c);a<=o;a++){for(var f=n[a],p=-1,h=-1,g=0;g<f.length;g++)if(null!=f[g]&&""!==f[g].g.trim()){p=g;break}for(g=f.length-1;g>=0;g--)if(null!=f[g]&&""!==f[g].g.trim()){h=g;break}if(-1===p||-1===h)f=Yh(r,i),e.nestedCues.push(f);else{for(;p<=h;p++)if(g=f[p]){var m=g.l,y=g.i,v=g.j,b=g.h;m==s&&y==u&&v==l&&b==c||(d.payload&&e.nestedCues.push(d),d=Xh(r,i,m,y,v,b),s=m,u=y,l=v,c=b),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=Yh(r,i),e.nestedCues.push(d)),d=Xh(r,i,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Xh(e,t,n,r,i,a){return e=new Tn(e,t,""),n&&e.textDecoration.push(zn),r&&(e.fontStyle=qn),e.color=i,e.backgroundColor=a,e}function Yh(e,t){return(e=new Tn(e,t,"")).lineBreak=!0,e}function Jh(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function $h(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,Zh(this)}function Qh(e,t,n){var r="CC"+(1+(e.F<<1|e.C)),i=new Tn(t,n,"");i.lineInterpretation=1;var a=sg.get(e.g);return a&&(i.line=a),null!=e.u&&null!=e.B&&(i.position=10+Math.min(70,10*e.u)+2.5*e.B),(t=Wh(i,r,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(a=sg.get(e.g+3-t.cue.nestedCues.length))&&(i.line=a),t}function Zh(e){ng(e,0,15),e.g=1}function eg(e,t,n){if(!(n<32||n>127)){var r="";switch(t){case 0:r=rg.has(n)?rg.get(n):String.fromCharCode(n);break;case 1:r=ig.get(n);break;case 2:e.i[e.g].pop(),r=ag.get(n);break;case 3:e.i[e.g].pop(),r=og.get(n)}r&&e.i[e.g].push(new Jh(r,e.m,e.j,e.o,e.l))}}function tg(e,t,n,r){if(!(n<0||t<0))if(t>=n)for(--r;r>=0;r--)e.i[t+r]=e.i[n+r].map((function(e){return e}));else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map((function(e){return e}))}function ng(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var rg=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),ig=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),ag=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),og=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),sg=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function ug(e,t){this.h=0,this.o=new $h(e,t),this.i=new $h(e,t),this.g=this.j=new $h(e,t),this.l=0,this.m=null}function lg(e,t,n){e.g=e.i;var r=e.g,i=null;return 3!==e.h&&4!==e.h&&(i=Qh(r,e.l,n),(n=e.i).g=n.h>0?n.h:0,ng(n,0,15),(n=e.j).g=n.h>0?n.h:0,ng(n,0,15),r.g=15),e.h=3,r.h=t,i}function cg(e){e.h=1,e.g=e.j,e.g.h=0}function dg(e){X("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var fg="black green blue cyan red yellow magenta black".split(" "),pg="white green blue cyan red yellow magenta white_italics".split(" ");function hg(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",gg(this)}function gg(e){e.i=[];for(var t=0;t<16;t++)e.i.push(mg())}function mg(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function yg(e,t){vg(e)&&(e.i[e.h][e.g]=new Jh(t,e.F,e.B,e.u,e.C),e.g++)}function vg(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}function bg(e,t,n){var r=new Tn(e.j,t,"");r.textAlign=0===e.G?"left":1===e.G?"right":Dn;var i=r.region;switch(e.J&&(i.id+="svc"+e.J),i.id+="win"+e.N,i.height=e.o,i.width=e.m,i.heightUnits=2,i.widthUnits=2,i.viewportAnchorX=e.I,i.viewportAnchorY=e.M,i.viewportAnchorUnits=e.K?Dt:2,e.H){case 0:i.regionAnchorX=0,i.regionAnchorY=0;break;case 1:i.regionAnchorX=50,i.regionAnchorY=0;break;case 2:i.regionAnchorX=100,i.regionAnchorY=0;break;case 3:i.regionAnchorX=0,i.regionAnchorY=50;break;case 4:i.regionAnchorX=50,i.regionAnchorY=50;break;case 5:i.regionAnchorX=100,i.regionAnchorY=50;break;case 6:i.regionAnchorX=0,i.regionAnchorY=100;break;case 7:i.regionAnchorX=50,i.regionAnchorY=100;break;case 8:i.regionAnchorX=100,i.regionAnchorY=100}return(n=Wh(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function wg(){this.i=[],this.h=null,this.g=0}function Sg(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Tg(e.h)),e.h=null,e.g=0))}function Tg(e){this.g=0,this.h=e}function xg(e){if(!e.Ia())throw new Be(2,2,3e3);return e.h[e.g++]}function Ag(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function kg(e,t,n,r){if(!e.g)return[];if(24==n)return n=xg(t).value,r=xg(t).value,n=[n,r].map((function(e){return("0"+(255&e).toString(16)).slice(-2)})).join(""),yg(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var i=null;switch(n){case 8:!vg(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(i=bg(t,r,e.i)),t.h+1>=t.o?function(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=mg()}(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(i=bg(t,r,e.i)),t.i[t.h]=mg(),t.g=0;break;case 12:t.isVisible()&&(i=bg(t,r,e.i)),gg(t),t.h=0,t.g=0}return i?[i]:[]}function Eg(e,t,n,r){if(n>=128&&n<=135)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=xg(t).value,t=[];for(var i=(n=g(Ig(e,n))).next();!i.done;i=n.next()){if((i=e.h[i.value]).isVisible()){var a=bg(i,r,e.i);a&&t.push(a)}gg(i)}return t}if(137===n)for(n=(t=g(Ig(e,t=xg(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=r),n.display();else{if(138===n){for(n=xg(t).value,t=null,i=(n=g(Ig(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=bg(i,r,e.i)),i.l=!1;return t?[t]:[]}if(139===n){for(n=xg(t).value,t=null,i=(n=g(Ig(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()?t=bg(i,r,e.i):i.j=r,i.l=!i.l;return t?[t]:[]}if(140===n)return Cg(e,t=xg(t).value,r);if(143===n)return r=Cg(e,255,r),Mg(e),r;if(144===n)t.skip(1),r=xg(t).value,e.g&&(e.g.B=(128&r)>0,e.g.F=(64&r)>0);else if(145===n)r=xg(t).value,n=xg(t).value,t.skip(1),e.g&&(t=Dg((48&n)>>4,(12&n)>>2,3&n),e.g.C=Dg((48&r)>>4,(12&r)>>2,3&r),e.g.u=t);else if(146===n)r=xg(t).value,t=xg(t).value,e.g&&((e=e.g).h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=xg(t).value,t.skip(1),e.g&&(e.g.G=3&r);else if(n>=152&&n<=159){n=(15&n)-8,(i=null!==e.h[n])||((a=new hg(n,e.i)).j=r,e.h[n]=a),r=xg(t).value,a=xg(t).value;var o=xg(t).value,s=xg(t).value,u=xg(t).value;t=xg(t).value,i&&0==(7&t)||((t=e.h[n]).h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),(t=e.h[n]).l=(32&r)>0,t.M=127&a,t.I=o,t.H=(240&s)>>4,t.K=(128&a)>0,t.o=1+(15&s),t.m=1+(63&u),e.g=e.h[n]}}}return[]}function Ig(e,t){for(var n=[],r=0;r<8;r++)1==(1&t)&&e.h[r]&&n.push(r),t>>=1;return n}function Cg(e,t,n){for(var r=[],i=(t=g(Ig(e,t))).next();!i.done;i=t.next()){i=i.value;var a=e.h[i];a.isVisible()&&(a=bg(a,n,e.i))&&r.push(a),e.h[i]=null}return r}function Mg(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Dg(e,t,n){var r={0:0,1:0,2:1,3:1};return Rg[(e=r[e])<<2|(t=r[t])<<1|(n=r[n])]}hg.prototype.isVisible=function(){return this.l},hg.prototype.display=function(){this.l=!0},Tg.prototype.Ia=function(){return this.g<this.h.length},Tg.prototype.Oa=function(){return this.g},Tg.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Be(2,2,3e3);this.g+=e},Tg.prototype.Ki=function(e){if(this.g-e<0)throw new Be(2,2,3e3);this.g-=e};var Pg=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),Rg="black blue green cyan red magenta yellow white".split(" ");function Lg(){this.h=[],this.g=[],this.i=new wg,this.l=0,this.m=new Map([["CC1",new ug(0,0)],["CC2",new ug(0,1)],["CC3",new ug(1,0)],["CC4",new ug(1,1)]]),this.u=this.o=0,this.j=new Map,this.C=!0,this.B=new Set,Og(this)}function Og(e){e.o=0,e.u=0;for(var t=g(e.m.values()),n=t.next();!n.done;n=t.next())(n=n.value).h=0,n.g=n.j,n.m=null,Zh(n.i),Zh(n.j),Zh(n.o);e.C=!0}function Ng(e,t){var n=t.type;if(16==(112&t.Cb)){var r=t.Cb>>3&1;0===n?e.o=r:e.u=r}if(r="CC"+(1+(n<<1|(n?e.u:e.o))),n=e.m.get(r),255===t.Cb&&255===t.hc||!t.Cb&&!t.hc||!Ug(t.Cb)||!Ug(t.hc))return++e.l>=45&&Og(e),null;e.l=0,t.Cb&=127,t.hc&=127;var i=t.Cb;if(i>=1&&i<=15||!t.Cb&&!t.hc)return null;if(i=null,16==(112&t.Cb))e:{if(e.B.add(r),r=t.Cb,e=t.hc,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1],r="white",i=!1;var a=null,o=e>95?e-96:e-64;o<=13?r=pg[Math.floor(o/2)]:o<=15?i=!0:a=Math.floor((o-16)/2),e=1==(1&e),4!==n.h&&(o=n.g,3===n.h&&t!==o.g&&(tg(o,n=1+t-o.h,1+o.g-o.h,o.h),ng(o,0,n-1),ng(o,t+1,15-t)),o.g=t,o.m=e,o.j=i,o.l=r,o.u=a,o.o="black")}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",eg(n.g,0,32),r=!1,"white_italics"===(t=pg[(14&e)>>1])&&(t="white",r=!0),n.g.m=1==(1&e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",0==(7&r)&&(t=fg[(14&e)>>1]),n.g.o=t;else if(17==(247&r)&&48==(240&e))eg(n.g,1,e);else if(18==(246&r)&&32==(224&e))eg(n.g,1&r?3:2,e);else{if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.hc){case 32:cg(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:r=lg(n,2,e);break;case 38:r=lg(n,3,e);break;case 39:r=lg(n,4,e);break;case 40:eg(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Zh(n.o),dg(n);break;case 43:dg(n);break;case 44:t=n.i,r=null,4!==n.h&&(r=Qh(t,n.l,e)),ng(t,0,15);break;case 45:t=n.g,3!==n.h?r=null:(r=Qh(t,n.l,e),tg(t,(i=t.g-t.h+1)-1,i,t.h),ng(t,0,i-1),ng(t,t.g,15-t.g),n.l=e);break;case 46:ng(n.j,0,15);break;case 47:t=null,4!==n.h&&(t=Qh(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,cg(n),n.l=e,r=t}i=r;break e}(23==r||31==r)&&e>=33&&e<=35&&(n.g.B=e-32)}i=null}else e=t.hc,eg(n.g,0,t.Cb),eg(n.g,0,e);return i}function jg(e,t){var n=[];try{for(;t.Ia();){var r=xg(t).value,i=(224&r)>>5,a=31&r;if(7===i&&0!=a&&(i=63&xg(t).value),0!=i){e.B.add("svc"+i),e.j.has(i)||e.j.set(i,new Ag(i));for(var o=e.j.get(i),s=t.Oa();t.Oa()-s<a;){i=o;var u=t,l=xg(u),c=l.value,d=l.pts;if(16===c)c=c<<16|xg(u).value;if(c>=0&&c<=31)var f=kg(i,u,c,d);else if(c>=128&&c<=159)f=Eg(i,u,c,d);else{if(c>=4096&&c<=4127)i=u,(u=255&c)>=8&&u<=15?i.skip(1):u>=16&&u<=23?i.skip(2):u>=24&&u<=31&&i.skip(3);else if(c>=4224&&c<=4255)i=u,(u=255&c)>=128&&u<=135?i.skip(4):u>=136&&u<=143&&i.skip(5);else if(c>=32&&c<=127)u=c,i.g&&yg(i.g,127===u?"♪":String.fromCharCode(u));else if(c>=160&&c<=255)i.g&&yg(i.g,String.fromCharCode(c));else if(c>=4128&&c<=4223){if(u=255&c,i.g)if(Pg.has(u)){var p=Pg.get(u);yg(i.g,p)}else yg(i.g,"_")}else c>=4256&&c<=4351&&i.g&&yg(i.g,160!=(255&c)?"_":"[CC]");f=[]}n.push.apply(n,m(f))}}}}catch(e){if(!(e instanceof Be&&3e3===e.code))throw e;X("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Ug(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function _g(e){for(var t=[],n=e,r=e=0;r<n.length;)2==e&&3==n[r]?(e=0,(n=[].concat(m(n))).splice(r,1),n=new Uint8Array(n)):0==n[r]?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;255==e[r];)n+=255,r++;n+=e[r++];for(var i=0;255==e[r];)i+=255,r++;i+=e[r++],4==n&&t.push(e.subarray(r,r+i)),r+=i}return t}function Bg(){this.j=new Map,this.i=this.h=0,this.g=Vg}function Fg(e,t,n,r,i,a,o,s,u){var l=0,c=a,d=s.map((function(e){return e.hh}));for((d=[].concat.apply([],m(d))).length&&(c=d[0].sampleSize||a),t.skip(o+s[0].mg);t.Ia();){o=t.U();var f=t.Y(),p=null;switch(p=!1,s=1,e.g){case Hg:p=6==(p=31&f);break;case Gg:s=2,t.skip(1),p=39==(p=f>>1&63)||40==p;break;case qg:s=2,t.skip(1),p=23==(p=f>>1&63)||24==p;break;default:return}if(p)for(f=0,l<d.length&&(f=d[l].Cf||0),f=(n+f)/r,p=(s=g(_g(s=t.Tb(o-s,!1)))).next();!p.done;p=s.next())u.push({packet:p.value,pts:f});else try{t.skip(o-s)}catch(e){break}0==(c-=o+4)&&(n=l<d.length?n+(d[l].ih||i):n+i,c=++l<d.length&&d[l].sampleSize||a)}}Lg.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Og(this);for(var t=(e=g(this.j.values())).next();!t.done;t=e.next())Mg(t.value)},Lg.prototype.extract=function(e,t){if(this.C){for(var n=g(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.C=!1}if(!((e=new na(e,0)).getLength()<8)&&181===e.Y()&&49===e.Ca()&&1195456820===e.U()&&3===e.Y()&&0!=(64&(n=e.Y())))for(n&=31,e.skip(1),r=0;r<n;r++){var i=e.Y(),a=(4&i)>>2,o=e.Y(),s=e.Y();a&&(0===(i&=3)||1===i?this.h.push({pts:t,type:i,Cb:o,hc:s,order:this.h.length}):(this.g.push({pts:t,type:i,value:o,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}},Lg.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=g(this.h),r=n.next();!r.done;r=n.next())(r=Ng(this,r.value))&&t.push(r);for(r=(n=g(this.g)).next();!r.done;r=n.next())Sg(this.i,r.value);for(r=(n=g(this.i.i)).next();!r.done;r=n.next())r=jg(this,r.value),t.push.apply(t,m(r));return this.i.i=[],this.h=[],this.g=[],t},Lg.prototype.getStreams=function(){return Array.from(this.B)},V("shaka.cea.CeaDecoder",Lg),Ct=function(){return new Lg},Bg.prototype.init=function(e){function t(e){e=e.name,Kg.has(e)&&(n.g=Kg.get(e))}var n=this,r=[],i=[];if((new aa).box("moov",oa).box("mvex",oa).T("trex",(function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.U(),t=t.U(),n.h=e,n.i=t})).box("trak",oa).T("tkhd",(function(e){var t=e.reader;1==(e=e.version)?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.U();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.Ca(),t.Ca(),t.Ca(),t.Ca(),r.push(n)})).box("mdia",oa).T("mdhd",(function(e){e=ro(e.reader,e.version),i.push(e.timescale)})).box("minf",oa).box("stbl",oa).T("stsd",sa).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",ua).box("sinf",oa).box("frma",(function(e){e=oo(e.reader).codec,Kg.has(e)&&(n.g=Kg.get(e))})).parse(e,!0,!0),!r.length||!i.length||r.length!=i.length)throw new Be(2,2,2010);this.g==Vg&&W("Unable to determine bitstream format for CEA parsing!"),r.forEach((function(e,t){n.j.set(e,i[t])}))},Bg.prototype.parse=function(e){var t=this;if(this.g==Vg)return[];var n=[],r=0,i=[];return(new aa).box("moof",(function(e){r=e.start,i=[],oa(e)})).box("traf",(function(e){i.push({baseMediaDecodeTime:null,Td:t.h,Ud:t.i,Bi:[],timescale:9e4}),oa(e)})).T("trun",(function(e){var t=i[i.length-1];e=io(e.reader,e.version,e.flags),t.Bi.push(e)})).T("tfhd",(function(e){var n=i[i.length-1];e=to(e.reader,e.flags),n.Td=e.Td||t.h,n.Ud=e.Ud||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))})).T("tfdt",(function(e){var t=i[i.length-1];e=no(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime})).box("mdat",(function(e){for(var a=r-e.start-8,o=e.reader.Oa(),s=g(i),u=s.next();!u.done;u=s.next())null===(u=u.value).baseMediaDecodeTime?W("Unable to find base media decode time for CEA captions!"):(e.reader.seek(o),Fg(t,e.reader,u.baseMediaDecodeTime,u.timescale,u.Td,u.Ud,a,u.Bi,n))})).parse(e,!1,!0),n},V("shaka.cea.Mp4CeaParser",Bg);var Vg=0,Hg=1,Gg=2,qg=3,Kg=(new Map).set("avc1",Hg).set("avc3",Hg).set("dvav",Hg).set("dva1",Hg).set("hev1",Gg).set("hvc1",Gg).set("dvh1",Gg).set("dvhe",Gg).set("vvc1",qg).set("vvi1",qg).set("dvc1",qg).set("dvi1",qg);function zg(){this.g=null}function Wg(e){return(e=function(e){var t=0,n=Ue(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,0!=(1&i)||i+e>n.byteLength){n=[];break e}var a=Ne(n,e,i);t.push({type:r,value:a}),e+=i}n=t}return n}(e=Ze(Yt(e))).filter((function(e){return e.type===Yg}))[0])&&(e=qt(e=Ge(e.value,!0),"WRMHEADER"))?e:null}function Xg(e){try{var t=Wg(e);if(t)e:{for(var n=g($t(t,"DATA")),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.children)for(var a=g(i.children),o=a.next();!o.done;o=a.next()){var s=o.value;if("LA_URL"==s.tagName){var u=Yt(s);break e}}}u=""}else u="";return u}catch(e){return""}}kt("video/mp4",(function(){return new Bg})),zg.prototype.init=function(){},zg.prototype.parse=function(e){this.g?this.g.clearData():this.g=new As;var t=[];if(!Cs(e=Ne(e)))return t;var n=(e=this.g.parse(e)).Vd(),r=e.$e();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(r=(n=g(r)).next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&null!=r.time)for(var i=g(_g(r.data)),a=i.next();!a.done;a=i.next())t.push({packet:a.value,pts:r.time});return t},V("shaka.cea.TsCeaParser",zg),kt("video/mp2t",(function(){return new zg}));var Yg=1;function Jg(){this.g=new Map}function $g(t,n,r,i){var a=function(e,t){for(var n=[],r=(t=g(t)).next();!r.done;r=t.next())(r=Zg(e,r.value))&&n.push(r);return n}(t,n),o=null;t=[];var s=[];n=null;var u=new Set(a.map((function(e){return e.keyId})));u.delete(null);var l="cenc";if(u.size>1)throw new Be(2,4,4010);if(!r){if((s=a.filter((function(e){return"urn:mpeg:dash:sea:2012"==e.Gd}))).length>1)throw new Be(2,4,4050);s.length&&(n=function(t){if(!e.crypto||!e.crypto.subtle)throw W("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Be(2,4,4042);var n=Zt(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new Be(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new Be(2,4,4051);if(!(n=Zt(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new Be(2,4,4051);if(t=n.attributes.IV,n=Xe(n.attributes.keyUriTemplate),!t||!n)throw new Be(2,4,4051);if(16!=(t=et(t.substr(2))).byteLength)throw new Be(2,4,4048);return{rk:n,iv:t}}(s[0])),(s=a.find((function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Gd})))&&s.encryptionScheme&&(l=s.encryptionScheme),(s=a.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Gd?(o=e.init||o,!1):"urn:mpeg:dash:sea:2012"!=e.Gd}))).length&&(0==(t=function(e,t,n,r,i){for(var a=[],o=(n=g(n)).next();!o.done;o=n.next()){var s=r[(o=o.value).Gd];if(s){var u;if((u=Zt(o.node,"urn:microsoft:playready","pro"))&&Yt(u)){u=Ze(u=Yt(u));var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:ya(u,l,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(l=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===o.Gd){l=o;var c=i;if(0==c.size)l=null;else{var d=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);l=[{initData:ya(new Uint8Array([]),d,c,1),initDataType:"cenc",keyId:l.keyId}]}}u=it(s,t,o.init||e||u||l),(s=em.get(s))&&(u.licenseServerUri=s(o)),(o=Zt(o.node,"https://dashif.org/CPS","Certurl"))&&(o=Yt(o))||(o=""),u.serverCertificateUri=o,a.push(u)}}return a}(o,l,s,i,u)).length&&(t=[it("",l,o)]))}if(a.length&&!n&&(r||!s.length))for(t=[],i=(r=g(Object.values(i))).next();!i.done;i=r.next())"org.w3.clearkey"!=(i=i.value)&&t.push(it(i,l,o));if(u=Array.from(u)[0]||null)for(r=(l=g(t)).next();!r.done;r=l.next())for(i=(r=g(r.value.initData)).next();!i.done;i=r.next())i.value.keyId=u;return{Sh:u,Cm:o,drmInfos:t,dg:n,Xh:!0}}function Qg(e){var t=Zt(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=Yt(t)))return t;if((t=Zt(e.node,"urn:microsoft:playready","pro"))&&Yt(t))return Xg(t);if((e=Zt(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=Yt(e))){t=Ze(e),e=8;var n=(t=Ue(t)).getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),Xg(e=qt("<pro>"+(e=$e(e=Ne(t,e+4)))+"</pro>"))}return""}function Zg(e,t){var n=t.attributes.schemeIdUri,r=tn(t,"urn:mpeg:cenc:2013","default_KID"),i=nn(t,"urn:mpeg:cenc:2013","pssh").map(Jt),a=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase()).includes(" "))throw new Be(2,4,4009);var o=[];try{o=i.map((function(t){if(!e.g.has(t)){var n=Ze(t);e.g.set(t,n)}return{initDataType:"cenc",initData:e.g.get(t),keyId:null}}))}catch(e){throw new Be(2,4,4007)}return{node:t,Gd:n,keyId:r,init:o.length>0?o:null,encryptionScheme:a}}Jg.prototype.release=function(){this.g.clear()};var em=(new Map).set("com.apple.fps",(function(t){if("apple"===e.shakaMediaKeysPolyfill)throw new Be(2,4,4054);return(t=Zt(t.node,"https://dashif.org/CPS","Laurl"))&&(t=Yt(t))?t:""})).set("com.widevine.alpha",(function(e){var t=Zt(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Yt(t))?t:(e=Zt(e.node,"urn:microsoft","laurl"))&&Xe(e.attributes.licenseUrl)||""})).set("com.microsoft.playready",Qg).set("com.microsoft.playready.recommendation",Qg).set("com.microsoft.playready.software",Qg).set("com.microsoft.playready.hardware",Qg).set("org.w3.clearkey",(function(e){var t=Zt(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Yt(t))?t:(e=Zt(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=Yt(e))?e:""}));function tm(t,n,r,i,a,o){var s=(new Map).set("RepresentationID",n).set("Number",r).set("SubNumber",i).set("Bandwidth",a).set("Time",o);return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,r,i){if("$$"==t)return"$";var a=s.get(n);if(null==a)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&"bigint"!=typeof a&&(Math.abs(a-Math.round(a))>=.2&&W("Calculated $Time$ values must be close to integers"),a=Math.round(a)),i){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t}))}function nm(e,t){var n=im(e,t,"timescale"),r=1;n&&(r=ln(n)||1);var i=(n=ln((n=im(e,t,"duration"))||""))?n/r:null,a=im(e,t,"startNumber"),o=Number(im(e,t,"presentationTimeOffset"))||0,s=cn(a||"");if(null!=a&&null!=s||(s=1),a=null,t=am(e,t,"SegmentTimeline")){t=Xt(t,"S"),a=r,e=e.na.duration||1/0;for(var u=s,l=[],c=-o,d=0;d<t.length;++d){var f=t[d],p=t[d+1],h=en(f,"t",cn),g=en(f,"d",cn),m=en(f,"r",un);if(f=en(f,"k",un)||0,null!=h&&(h-=o),g){if(h=null!=h?h:c,(m=m||0)<0)if(p){if(null==(p=en(p,"t",cn)))break;if(h>=p)break;m=Math.ceil((p-h)/g)-1}else{if(e==1/0)break;if(h/a>=e)break;m=Math.ceil((e*a-h)/g)-1}for(l.length>0&&h!=c&&(l[l.length-1].end=h/a),p=0;p<=m;++p)c=h+g,l.push({start:h/a,end:c/a,Eh:h,uc:f,Sk:l.length+u}),h=c}}a=l}return{timescale:r,Mf:n,fb:i,qe:s,Ib:o/r||0,gd:o,timeline:a}}function rm(e,t){return[t(e.L),t(e.qa),t(e.sa)].filter(Er)}function im(e,t,n){t=rm(e,t),e=null;for(var r=(t=g(t)).next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function am(e,t,n){t=rm(e,t),e=null;for(var r=(t=g(t)).next();!r.done&&!(e=Qt(r.value,n));r=t.next());return e}function om(e,t,n,r,i,a){if(a=void 0===a?0:a,tn(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,r,i,a){for(var o=tn(e,"http://www.w3.org/1999/xlink","href"),s=tn(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=g(Object.keys(e.attributes)),l=u.next();!l.done;l=u.next()){var c=(l=l.value).split(":"),d=Kt("http://www.w3.org/1999/xlink");c[0]==d&&delete e.attributes[l]}if(a>=5)return Mi(new Be(2,4,4028));if("onLoad"!=s)return Mi(new Be(2,4,4027));var f=rt([r],[o]);return i.request(0,Gi(f,t)).Xa((function(r){if(!(r=Gt(r.data,e.tagName)))return Mi(new Be(2,4,4001,o));for(e.children=[];r.children.length;){var s=r.children.shift();e.children.push(s)}for(var u=(s=g(Object.keys(r.attributes))).next();!u.done;u=s.next())u=u.value,e.attributes[u]=r.attributes[u];return om(e,t,n,f[0],i,a+1)}))}(e,t,n,r,i,a);return n&&(o=o.Xa(void 0,(function(){return om(e,t,n,r,i,a)}))),o}o=[];for(var s=g(Wt(e)),u=s.next(),l={};!u.done;l={Qd:void 0},u=s.next())l.Qd=u.value,"urn:mpeg:dash:resolve-to-zero:2013"==tn(l.Qd,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.Qd}}(l)):"SegmentTimeline"!=l.Qd.tagName&&o.push(om(l.Qd,t,n,r,i,a));return Li(o).Xa((function(){return e}))}function sm(e,t,n,r,i,a,o){var s,u=(new aa).T("sidx",(function(e){s=function(e,t,n,r,i,a,o){var s=[];o.reader.skip(4);var u=o.reader.U();if(0==u)throw new Be(2,3,3005);if(0==o.version)var l=o.reader.U(),c=o.reader.U();else l=o.reader.Dd(),c=o.reader.Dd();o.reader.skip(2);var d=o.reader.Ca();for(e=e+o.size+c,c=0;c<d;c++){var f=o.reader.U(),p=(2147483648&f)>>>31;f&=2147483647;var h=o.reader.U();if(o.reader.skip(4),1==p)throw new Be(2,3,3006);s.push(new Fo(l/u+n,(l+h)/u+n,(function(){return a}),e,e+f-1,t,n,r,i)),l+=h,e+=f}return o.parser.stop(),s}(t,r,i,a,o,n,e)}));if(e&&u.parse(e),s)return s;throw new Be(2,3,3004)}function um(e){this.h=Ue(e),this.g=new na(this.h,0)}function lm(e){var t=cm(e);if(t.length>7)throw new Be(2,3,3002);for(var n=0,r=(t=g(t)).next();!r.done;r=t.next())n=256*n+r.value;t=cm(e);e:{for(var i=(r=g(dm)).next();!i.done;i=r.next())if(Le(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.Oa();else{if(8==t.length&&224&t[1])throw new Be(2,3,3001);for(i=r=0;i<t.length;i++){var a=t[i];r=0==i?a&(1<<8-t.length)-1:256*r+a}t=r}return t=e.g.Oa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Oa(),r=Ue(e.h,e.g.Oa(),t),e.g.skip(t),new fm(n,r)}function cm(e){var t=e.g.Oa(),n=e.g.Y();if(0==n)throw new Be(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ne(e.h,t,n)}um.prototype.Ia=function(){return this.g.Ia()};var dm=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function fm(e,t){this.id=e,this.g=t}function pm(e){if(e.g.byteLength>8)throw new Be(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Be(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function hm(e){var t=new um(e.g);if(179!=(e=lm(t)).id)throw new Be(2,3,3013);if(e=pm(e),183!=(t=lm(t)).id)throw new Be(2,3,3012);t=new um(t.g);for(var n=0;t.Ia();){var r=lm(t);if(241==r.id){n=pm(r);break}}return{jl:e,Kk:n}}function gm(e,t,n){if(!(t=am(e,t,"Initialization")))return null;var r=e.L.cb(),i=t.attributes.sourceURL;i&&(r=rt(r,[Xe(i)],e.Lb())),i=0;var a=null;return(t=en(t,"range",sn))&&(i=t.start,a=t.end),(n=new _o((function(){return r}),i,a,Sm(e),null,null,n,e.qa.encrypted)).codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.ef&&(n.g=e.na.start+e.na.duration),n}function mm(e,t,n){var r=Number(im(e,vm,"presentationTimeOffset"))||0,i=im(e,vm,"timescale"),a=1;i&&(a=ln(i)||1);var o=r/a||0,s=gm(e,vm,n);!function(e,t){if(wm(e,t),!bm(e))throw new Be(2,4,4002)}(e,s);var u=Vt(e);return{endTime:-1,timeline:-1,Sc:function(){var e=am(u,vm,"RepresentationIndex"),n=u.L.cb();return e&&(e=Xe(e.attributes.sourceURL))&&(n=rt(n,[e],u.Lb())),e=bm(u),ym(u,t,s,n,e.start,e.end,o)},timescale:a}}function ym(e,t,n,r,i,a,o){var s,u,l,c,d,f,p,h,m,y,v,b,w,T,x,A,k,E;return L((function(I){if(1==I.g)return s=e.presentationTimeline,u=!e.Eb||!e.na.ef,l=e.na.start,c=e.na.duration,d=e.L.mimeType.split("/")[1],p=null,h=[(f=t)(r,i,a,!1),"webm"==d?f(n.P(),n.startByte,n.endByte,!0):null],f=null,S(I,Promise.all(h),2);if(m=I.h,y=m[0],v=m[1]||null,null,w=l-o,T=l,x=c?l+c:1/0,"mp4"==d)var C=sm(y,i,r,n,w,T,x);else{C=y;var M=new um(v);if(440786851!=lm(M).id)throw new Be(2,3,3008);var D=lm(M);if(408125543!=D.id)throw new Be(2,3,3009);M=D.g.byteOffset,D=new um(D.g);for(var P=null;D.Ia();){var R=lm(D);if(357149030==R.id){P=R;break}}if(!P)throw new Be(2,3,3010);for(P=new um(P.g),R=1e6,D=null;P.Ia();){var L=lm(P);if(2807729==L.id)R=pm(L);else if(17545==L.id)if(4==L.g.byteLength)D=L.g.getFloat32(0);else{if(8!=L.g.byteLength)throw new Be(2,3,3003);D=L.g.getFloat64(0)}}if(null==D)throw new Be(2,3,3011);if(D*=P=R/1e9,475249515!=(C=lm(new um(C))).id)throw new Be(2,3,3007);C=function(e,t,n,r,i,a,o,s,u){function l(){return i}var c=[];e=new um(e.g);for(var d=null,f=null;e.Ia();){var p=lm(e);if(187==p.id){var h=hm(p);h&&(p=n*h.jl,h=t+h.Kk,null!=d&&c.push(new Fo(d+o,p+o,l,f,h-1,a,o,s,u)),d=p,f=h)}}return null!=d&&c.push(new Fo(d+o,r+o,l,f,null,a,o,s,u)),c}(C,M,P,D,r,n,w,T,x)}for(A=g(b=C),k=A.next();!k.done;k=A.next())(E=k.value).codecs=e.L.codecs,E.mimeType=e.L.mimeType,E.bandwidth=e.bandwidth;return s.ie(b),p=new Pu(b),u&&p.pd(T,x,!0),I.return(p)}))}function vm(e){return e.Hd}function bm(e){var t=am(e,vm,"RepresentationIndex");return e=sn((e=im(e,vm,"indexRange"))||""),t&&(e=en(t,"range",sn,e)),e}function wm(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=lt&&"mp4"!=n&&"webm"!=n)throw new Be(2,4,4006);if("webm"==n&&!t)throw new Be(2,4,4005)}function Sm(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.uf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function Tm(e,t,n){var r=gm(e,xm,n),i=function(e){var t=function(e){return[e.L.yc,e.qa.yc,e.sa.yc].filter(Er).map((function(e){return Xt(e,"SegmentURL")})).reduce((function(e,t){return e.length>0?e:t})).map((function(t){return t.attributes.indexRange&&!e.Kg&&(e.Kg=!0),{zk:Xe(t.attributes.media),start:(t=en(t,"mediaRange",sn,{start:0,end:null})).start,end:t.end}}))}(e),n=(e=nm(e,xm)).qe;0==n&&(n=1);var r=0;return e.fb?r=e.fb*(n-1):e.timeline&&e.timeline.length>0&&(r=e.timeline[0].start),{fb:e.fb,startTime:r,qe:n,Ib:e.Ib,timescale:e.timescale,timeline:e.timeline,yd:t}}(e);if(!i.fb&&!i.timeline&&i.yd.length>1)throw new Be(2,4,4002);if(!i.fb&&!e.na.duration&&!i.timeline&&1==i.yd.length)throw new Be(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new Be(2,4,4002);var a=null,o=null;e.sa.id&&e.L.id&&(o=t.get(e.sa.id+","+e.L.id))&&(a=o.segmentIndex);var s=function(e,t,n,r,i,a,o,s,u,l){var c=r.yd.length;r.timeline&&r.timeline.length!=r.yd.length&&(c=Math.min(r.timeline.length,r.yd.length));for(var d=e-r.Ib,f=t?e+t:1/0,p=[],h=r.startTime,g={},m=0;m<c;g={Of:void 0,Df:void 0},m++){g.Df=r.yd[m];var y=h;h=void 0,h=null!=r.fb?y+r.fb:r.timeline?r.timeline[m].end:y+t,g.Of=null,(g=new Fo(e+y,e+h,function(e){return function(){return null==e.Of&&(e.Of=rt(n(),[e.Df.zk],l())),e.Of}}(g),g.Df.start,g.Df.end,i,d,e,f,[],"",null,null,Go,a)).codecs=s,g.mimeType=o,g.bandwidth=u,p.push(g)}return p}(e.na.start,e.na.duration,e.L.cb,i,r,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Lb);return t=!a,a?a.fe(s,e.presentationTimeline.Hb()):a=new Pu(s),e.presentationTimeline.ie(s),e.Eb&&e.na.ef||a.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),o&&(o.segmentIndex=a),{endTime:-1,timeline:-1,Sc:function(){return a&&0!=a.getNumReferences()||a.nf(s),Promise.resolve(a)},timescale:i.timescale}}function xm(e){return e.yc}function Am(t,n,r,i,a,o,s,u,l,c){l||t.L.cf||(t.L.cf=im(t,km,"initialization"));var d=t.L.cf?function(e,t){var n=e.L.cf;if(n||(n=im(e,km,"initialization")),!n)return null;n=Xe(n);var r=e.L.originalId,i=e.bandwidth||null,a=e.L.cb,o=e.Lb;return(t=new _o((function(){var e=tm(n,r,null,null,i,null);return rt(a(),[e],o())}),0,null,Sm(e),null,null,t,e.qa.encrypted)).codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.ef&&(t.g=e.na.start+e.na.duration),t}(t,s):null,f=function(e){var t=nm(e,km),n=im(e,km,"media"),r=im(e,km,"index"),i=im(e,km,"k"),a=0;return i&&(a=parseInt(i,10)),{Mf:t.Mf,fb:t.fb,timescale:t.timescale,qe:t.qe,Ib:t.Ib,gd:t.gd,timeline:t.timeline,$b:n&&Xe(n),ae:r,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,Ak:a}}(t);!function(e){var t=e.ae?1:0;if(t+=e.timeline?1:0,0==(t+=e.fb?1:0))throw new Be(2,4,4002);if(1!=t&&(e.ae&&(e.timeline=null),e.Mf=null,e.fb=null),!e.ae&&!e.$b)throw new Be(2,4,4002)}(f);var p=Vt(t);if(f.ae)return wm(t,d),{endTime:-1,timeline:-1,Sc:function(){var e=tm(f.ae,p.L.originalId,null,null,p.bandwidth||null,null);return e=rt(p.L.cb(),[e]),ym(p,n,d,e,0,null,f.Ib)},timescale:f.timescale};if(f.fb)return i||"image"===t.qa.contentType||"text"===t.qa.contentType||(i=t.na.start,c=t.sa.id,r=t.na.duration,c=(c=null!=c&&o.get(c)||r)?i+c:1/0,t.presentationTimeline.Sg(f.fb),t.presentationTimeline.zi(i,c)),{endTime:-1,timeline:-1,Sc:function(){return function(t,n,r,i,a,o,s,u){function l(r){var a=r-v,s=a*y,l=n.Mf,c=a*l;"BigInt"in e&&c>Number.MAX_SAFE_INTEGER&&(c=BigInt(a)*BigInt(l)),a=(s+=p)+y,l=Math.min(a,d());var f=[],h=n.Ak;if(h)for(var g=(l-s)/h,m={},k=0;k<h;m={Wi:void 0},k++){var E=s+g*k,I=E+g;m.Wi=k,(m=new Fo(E,I,function(e){return function(){var t=tm(b,S,r,e.Wi,w,c);return rt(T(),[t],x())}}(m),0,null,i,A,p,d(),[],"",null,null,Go,o)).codecs=t.L.codecs,m.mimeType=t.L.mimeType,0==u?k>0&&m.wd():k%u!=0&&m.wd(),f.push(m)}return(s=new Fo(s,l,(function(){if(h)return[];var e=tm(b,S,r,null,w,c);return rt(T(),[e],x())}),0,null,i,A,p,d(),f,"",null,null,Go,o,f.length>0)).codecs=t.L.codecs,s.mimeType=t.L.mimeType,s.bandwidth=t.bandwidth,s.j=a,s}function c(){var e=[Math.max(f.Hb(),p),Math.min(f.Hc(),d())].map((function(e){return e-p}));return e=[Math.ceil(e[0]/y),Math.ceil(e[1]/y)-1],t.L.rb&&e[1]++,e.map((function(e){return e+v}))}function d(){var e=null!=h&&a.get(h)||m;return e?p+e:1/0}var f=t.presentationTimeline,p=t.na.start,h=t.sa.id,m=t.na.duration,y=n.fb,v=n.qe,b=n.$b,w=t.bandwidth||null,S=t.L.originalId,T=t.L.cb,x=t.Lb,A=p-n.Ib,k=c();r=t.Eb?Math.max(k[0],k[1]-r+1):k[0],s=s||k[1],k=[];for(var E=r;E<=s;++E){var I=l(E);k.push(I)}var C=new Pu(k);if(k=f.Hc()<d(),E=f.W(),k||E){var M=Math.max(r,s+1);r=y,t.L.rb&&(r=.1),C.Nf(r,(function(){var e=f.Hb();C.Ya(e);var t=g(c());t.next(),t=t.next().value;for(var n=[];M<=t;){var r=l(M);n.push(r),M++}return e>d()&&!n.length?null:n}))}return Promise.resolve(C)}(p,f,a,d,o,s,u,t.L.Ef)},timescale:f.timescale};var h=null;i=i=null,t.sa.id&&t.L.id&&(i=t.sa.id+","+t.L.id,i=r.get(i))&&(h=i.segmentIndex);var m=t.na.start,y=t.na.duration?m+t.na.duration:1/0;if(h)Im(c=h,f,m,y,d,t.Eb),c.Ya(t.presentationTimeline.Hb());else{if(r=0,l=-1,null!=t.sa.id&&null!=t.L.id){var v=c.get(t.sa.id);if(v)l=v.timeline;else for(v=(c=g(c.values())).next();!v.done;v=c.next()){if(v=v.value,Math.abs(f.Ib-v.endTime)<=dt&&v.bh.includes(t.L.id)){l=v.timeline;break}v.timeline>=r&&(r=v.timeline+1)}}-1==l&&(l=r),h=new Em(t.Eb,f,t.L.originalId,t.bandwidth,t.L.cb,t.Lb,m,y,d,s,t.L.Ef,l)}return f.timeline&&"image"!==t.qa.contentType&&"text"!==t.qa.contentType&&t.presentationTimeline.Ai(h.h?h.h.timeline:[],m),i&&t.Eb&&(i.segmentIndex=h),i=(i=(i=f.timeline)&&i[i.length-1])?i.end+f.Ib:-1,c=-1,h instanceof Em&&(c=h.Te()),{endTime:i,timeline:c,Sc:function(){return h instanceof Em&&0==h.getNumReferences()&&Im(h,f,m,y,d,t.Eb),Promise.resolve(h)},timescale:f.timescale}}function km(e){return e.Nc}function Em(e,t,n,r,i,a,o,s,u,l,c,d){Pu.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=r,this.G=i,this.J=a,this.j=o,this.l=s,this.u=u,this.B=l,this.I=c,this.K=d,Cm(this)}function Im(e,t,n,r,i,a){if(function(e,t){if(e.u!==t){e.u=t;for(var n=(e=g(e.g)).next();!n.done;n=e.next())(n=n.value)&&Ho(n,t)}}(e,i),e.F=a,e.h){if(e.h.gd!==t.gd&&(e.h.timeline=t.timeline,e.h.gd=t.gd,e.h.Ib=t.Ib),e.h.$b!==t.$b&&(e.h.$b=t.$b),(n=e.h.timeline).length){var o=n[n.length-1];t=t.timeline.filter((function(e){return e.end>o.end}))}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,m(t)),e.l!==r&&(e.l=r)}else e.h=t,e.j=n,e.l=r;Cm(e)}function Cm(e){if(e.h&&!e.o){for(var t=[],n=g(e.h.timeline),r=n.next();!r.done;r=n.next())(r=r.value).start>=e.l||r.end<=0||t.push(r);e.h.timeline=t,e.Ya(e.j)}}function Mm(e,t,n,r,i,a,o,s){return e=tm(e,t,n,a,r||null,i),rt(o(),[e],s()).map((function(e){return e.toString()}))}function Dm(e){this.o=null,this.B=e,this.H=new _i,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}function Pm(e,t){var n,r,i,a,o,s,u;return L((function(l){return 1==l.g?(n=rt(e.i,[Rm(e,t)]),r=Gi(n,e.o.retryParameters),i=e.B.networkingEngine.request(8,r),Bi(e.H,i),x(l,2),S(l,i.promise,4)):2!=l.g?(a=l.h,o=He(a.data),1==(s=JSON.parse(o)).VERSION&&function(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new xr((function(){Pm(e,r)})),(n=t.TTL)&&(e.F=n);e.g.ia(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}(e,s,a.uri),k(l,0)):(u=E(l))&&7001==u.code?l.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new xr((function(){Pm(e,t)})),e.g.ia(e.F),void T(l))}))}function Rm(e,t){if(!e.m.length)return t;t=new me(t);var n=e.C||e.m[0],r=Math.round(e.B.getBandwidthEstimate()),i=t.g;return"DASH"==e.u?(i.add("_DASH_pathway",n),i.add("_DASH_throughput",String(r))):"HLS"==e.u&&(i.add("_HLS_pathway",n),i.add("_HLS_throughput",String(r))),Pe(i)&&we(t,i),t.toString()}function Lm(e,t,n,r){var i=e.l.get(t);i||(i=new Map),i.set(n,r),e.l.set(t,i)}function Om(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var r=[],i=g(e.m),a=i.next(),o={};!a.done;o={Bd:void 0},a=i.next())if(o.Bd=a.value,a=t.get(o.Bd))r.push({Xg:o.Bd,location:a});else if(a=e.G.find(function(e){return function(t){return t.Ll==e.Bd}}(o))){var s=t.get(a["BASE-ID"]);s&&(a["URI-REPLACEMENT"].hj?(ve(s=new me(s),a["URI-REPLACEMENT"].hj),r.push({Xg:o.Bd,location:s.toString()})):r.push({Xg:o.Bd,location:s}))}for(i=Date.now(),a=(o=g(e.j.keys())).next();!a.done;a=o.next())a=a.value,i>(s=e.j.get(a))&&e.j.delete(a);if((r=r.filter((function(t){for(var n=g(e.j.keys()),r=n.next();!r.done;r=n.next())if(r.value.includes(new me(t.location).Db))return!1;return!0}))).length&&(e.C=r[0].Xg),!(r=r.map((function(e){return e.location}))).length&&e.h)for(o=(i=g(e.h.split(","))).next();!o.done;o=i.next())(o=t.get(o.value))&&(e.C=e.h,r.push(o));if(!r.length)for(i=(t=g(t.values())).next();!i.done;i=t.next())r.push(i.value);return n?r:rt(e.i,r)}function Nm(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}function jm(e,t){for(var n=[],r=[],i=[],a=[],o=(e=g(e)).next();!o.done;o=e.next()){var s=o.value;o=new Map(s.audioStreams.map((function(e){return[ly(e),e]})));var u=new Map(s.videoStreams.map((function(e){return[uy(e),e]}))),l=new Map(s.textStreams.map((function(e){return[cy(e),e]})));if(s=new Map(s.imageStreams.map((function(e){return[dy(e),e]}))),t){var c=ry(lt);l.set(cy(c),c),c=ry("image"),s.set(dy(c),c)}n.push(o),r.push(u),i.push(l),a.push(s)}return{Mh:n,fj:r,bj:i,ji:a}}function Um(e){var t,n,r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,T,x,A,k,E,I,C,M,D,P;return L((function(R){switch(R.g){case 1:if(t=ct,1==e.length)return R.return(e[0]);for(n=e.map((function(e){return new Map(e.filter((function(e){return e.type===t.ka})).map((function(e){return[ly(e),e]})))})),r=e.map((function(e){return new Map(e.filter((function(e){return e.type===t.Aa})).map((function(e){return[uy(e),e]})))})),i=e.map((function(e){return new Map(e.filter((function(e){return e.type===t.Na})).map((function(e){return[cy(e),e]})))})),a=e.map((function(e){return new Map(e.filter((function(e){return e.type===t.Uf})).map((function(e){return[dy(e),e]})))})),o=g(i),s=o.next();!s.done;s=o.next())u=s.value,l=ny(t.Na),u.set(cy(l),l);for(c=g(a),d=c.next();!d.done;d=c.next())f=d.value,p=ny(t.Uf),f.set(dy(p),p);return S(R,_m(h=new Nm,[],n,0,Gm,Km,0),2);case 2:return m=R.h,S(R,_m(h,[],r,0,Gm,Km,0),3);case 3:return y=R.h,S(R,_m(h,[],i,0,Gm,Km,0),4);case 4:return v=R.h,S(R,_m(h,[],a,0,Gm,Km,0),5);case 5:if(b=R.h,w=0,y.length&&m.length)for(k=g(m),E=k.next();!E.done;E=k.next())for(I=E.value,C=g(y),M=C.next();!M.done;M=C.next())D=M.value,P=w++,D.variantIds.push(P),I.variantIds.push(P);else for(T=y.concat(m),x=g(T),A=x.next();!A.done;A=x.next())A.value.variantIds=[w++];return R.return(y.concat(m).concat(v).concat(b))}}))}function _m(e,t,n,r,i,a,o){var s,u,l,c,d,f,p,h,m,y,v,b,w,T,x,A,k,E;return L((function(I){switch(I.g){case 1:for(s=[],u=0;u<n.length;u++)u>=r?s.push(new Set(n[u].values())):s.push(new Set);l=g(t),c=l.next();case 2:if(c.done){I.A(4);break}return d=c.value,S(I,function(e,t,n,r,i,a,o){return L((function(s){return 1==s.g?(zm(e,n,t,o>0),t.matchedStreams?t.segmentIndex?S(s,Bm(t,r+o),2):s.A(2):s.return(!1)):(Vm(t,r,i,a,o),s.return(!0))}))}(e,d,n,r,a,s,o),5);case 5:if(!I.h)throw new Be(2,4,4037);c=l.next(),I.A(2);break;case 4:for(f=g(s),p=f.next();!p.done;p=f.next())for(h=p.value,m=g(h),y=m.next();!y.done;y=m.next())v=y.value,(b=Fm(e,t,v,n,i,a,s))&&t.push(b);for(w=g(s),T=w.next();!T.done;T=w.next())for(x=T.value,A=g(x),k=A.next(),E={};!k.done;E={sh:void 0},k=A.next())if(E.sh=k.value,!sy(E.sh)&&t.some(function(e){return function(t){return Ym(e.sh,t)}}(E)))throw new Be(2,4,4037);return I.return(t)}}))}function Bm(e,t){var n,r,i,a,o,s;return L((function(u){if(1==u.g){for(n=[],r=e.matchedStreams,i=t;i<r.length;i++)a=r[i],n.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&n.push(a.trickModeVideo.createSegmentIndex()),a.dependencyStream&&!a.dependencyStream.segmentIndex&&n.push(a.dependencyStream.createSegmentIndex());return S(u,Promise.all(n),2)}if(e.segmentIndex instanceof Nu)for(o=t;o<r.length;o++)(s=r[o]).segmentIndex&&e.segmentIndex.h.push(s.segmentIndex);T(u)}))}function Fm(e,t,n,r,i,a,o){if(sy(n))return null;var s=i(n);return zm(e,r,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return L((function(e){return s.segmentIndex?e.A(0):(s.segmentIndex=new Nu,S(e,Bm(s,0),0))}))},s.closeSegmentIndex=function(){if(s.segmentIndex&&(s.segmentIndex.release(),s.segmentIndex=null),s.matchedStreams)for(var e=g(s.matchedStreams),n=e.next();!n.done;n=e.next()){var r;if(r=(n=n.value).segmentIndex){e:{for(var i=(r=g(t)).next();!i.done;i=r.next())if((i=i.value)!==s&&i.segmentIndex&&i.matchedStreams&&i.matchedStreams.includes(n)){r=!0;break e}r=!1}r=!r}r&&(n.segmentIndex.release(),n.segmentIndex=null)}}),s.matchedStreams&&s.matchedStreams.length?(Vm(s,0,a,o,0),s):null}function Vm(e,t,n,r,i){var a=e.matchedStreams;for(t+=i;t<a.length;t++){var o=a[t];n(e,o);var s=!0;if("audio"==e.type&&0==Lr(e.language,o.language)&&(s=!1),s&&((s=r[t-i])&&s.delete(o),o.fullMimeTypes))for(s=(o=g(o.fullMimeTypes.values())).next();!s.done;s=o.next())e.fullMimeTypes.add(s.value)}}function Hm(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function Gm(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function qm(e,t){function n(e,t){e||(e=[]);for(var n=(t=g(t)).next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=g(t.keyIds),i=r.next();!i.done;i=r.next())e.keyIds.add(i.value);if(null==e.originalId?e.originalId=t.originalId:(r=t.originalId||"")&&!e.originalId.endsWith(r)&&(e.originalId+=","+r),r=bi(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Be(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=(r=g(t.closedCaptions)).next();!i.done;i=r.next()){var a=g(i.value);i=a.next().value,a=a.next().value,e.closedCaptions.set(i,a)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Hm(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var t=new Nu,n=g(e.trickModeVideo.matchedStreams),r=n.next();!r.done;r=n.next())t.h.push(r.value.segmentIndex);return e.trickModeVideo.segmentIndex=t,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),qm(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),qm(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=Hm(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var t=new Nu,n=g(e.dependencyStream.matchedStreams),r=n.next();!r.done;r=n.next())t.h.push(r.value.segmentIndex);return e.dependencyStream.segmentIndex=t,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),qm(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),qm(e.dependencyStream,t))}function Km(e,t){var n=e.roles;n||(n=[]);for(var r=g(t.roles),i=r.next();!i.done;i=r.next())i=i.value,n.includes(i)||n.push(i);for(e.roles=n,r=(n=g(t.keyIds)).next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,m(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=g(t.closedCaptions)).next();!n.done;n=t.next())n=(r=g(n.value)).next().value,r=r.next().value,e.closedCaptions.set(n,r)}function zm(e,t,n,r){r=void 0!==r&&r?n.matchedStreams:[];for(var i=(t=g(t)).next();!i.done;i=t.next()){if(!(i=Wm(e,i.value,n)))return;r.push(i)}n.matchedStreams=r}function Wm(e,t,n){var r={audio:ly,video:uy,text:cy,image:dy}[n.type],i=null,a=r(n);if(t.has(a))i=t.get(a);else{a={audio:function(e,t){return Ym(e,t)},video:function(e,t){return Ym(e,t)},text:Jm,image:$m}[n.type];for(var o={audio:Qm,video:Zm,text:ey,image:ty}[n.type],s=g(t.values()),u=s.next();!u.done;u=s.next())!a(n,u=u.value)||n.fastSwitching!=u.fastSwitching||i&&!o(n,i,u)||(i=u)}return e.o&&!sy(i)&&t.delete(r(i)),i}function Xm(e,t){return e.mimeType==t.mimeType&&py(e.codecs)===py(t.codecs)}function Ym(e,t){return!(e.drmInfos&&!vi(e.drmInfos,t.drmInfos))}function Jm(e,t){return!t.language||e.forced===t.forced&&0!=Lr(e.language,t.language)&&t.kind==e.kind}function $m(){return!0}function Qm(e,t,n){var r=ay(e,t,n);if(r===hy)return!0;if(r===my)return!1;r=Lr(e.language,t.language);var i=Lr(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter((function(t){return e.roles.includes(t)})),(i=n.roles.filter((function(t){return e.roles.includes(t)}))).length>r.length)return!0;if(i.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=iy(e.channelsCount,t.channelsCount,n.channelsCount))==hy||r!=my&&((r=iy(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==hy||r!=my&&!(!e.bandwidth||oy(e.bandwidth,t.bandwidth,n.bandwidth)!=hy)))}function Zm(e,t,n){var r=ay(e,t,n);if(r===hy)return!0;if(r===my)return!1;if((r=iy(e.width*e.height,t.width*t.height,n.width*n.height))==hy)return!0;if(r==my)return!1;if(e.frameRate){if((r=iy(e.frameRate,t.frameRate,n.frameRate))==hy)return!0;if(r==my)return!1}return!(!e.bandwidth||oy(e.bandwidth,t.bandwidth,n.bandwidth)!=hy)}function ey(e,t,n){var r=Lr(e.language,t.language),i=Lr(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter((function(t){return e.roles.includes(t)})),(i=n.roles.filter((function(t){return e.roles.includes(t)}))).length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function ty(e,t,n){return iy(e.width*e.height,t.width*t.height,n.width*n.height)==hy}function ny(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function ry(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pu([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function iy(e,t,n){if(t==e&&e!=n)return my;if(n==e&&e!=t)return hy;if(t>e){if(n<=e||n-e<t-e)return hy;if(n-e>t-e)return my}else{if(n>e)return my;if(e-n<e-t)return hy;if(e-n>e-t)return my}return gy}function ay(e,t,n){var r=e.mimeType===t.mimeType&&e.codecs===t.codecs,i=e.mimeType===n.mimeType&&e.codecs===n.codecs;return r&&!i?my:!r&&i?hy:(t=Xm(e,t),e=Xm(e,n),t&&!e?my:!t&&e?hy:gy)}function oy(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?hy:t<e?my:gy}function sy(e){switch(e.type){case lt:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function uy(e){return fy([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function ly(e){return fy([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function cy(e){return fy([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function dy(e){return fy([e.width,e.codecs,e.mimeType])}function fy(e){return JSON.stringify(e)}function py(e){if(!yy.has(e)){var t=sr(e);yy.set(e,t)}return yy.get(e)}p(Em,Pu),(i=Em.prototype).getNumReferences=function(){return this.h?this.h.timeline.length:0},i.release=function(){Pu.prototype.release.call(this),this.h=null},i.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.j<=e;r+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.getNumReferences()&&this.release())}},i.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var i=t[r],a=i.start+this.j;if(i=r<n?t[r+1].start+this.j:this.l===1/0?i.end+this.j:this.l,e>=a&&e<i)return r+this.i}return null},i.get=function(e){var t=this;if((e-=this.i)<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=(n=this.h.timeline[e]).Sk,i=n.Eh+this.h.gd,a=this.j-this.h.Ib,o=this.j+n.end,s=o;e===this.getNumReferences()-1&&this.l!==1/0&&(s=this.F&&Math.abs(s-this.l)>.1?Math.min(s,this.l):this.l);var u=this.h.codecs,l=this.h.mimeType,c=this.h.bandwidth,d=[],f=!1;if(n.uc&&this.h&&this.h.$b&&(f=this.h.$b.includes("$SubNumber$")),f){f=(n.end-n.start)/n.uc;for(var p={},h=0;h<n.uc;p={Pf:void 0,Xi:void 0},h++){var g=n.start+f*h,m=g+f;p.Xi=h,p.Pf=null,(p=new Fo(this.j+g,this.j+m,function(e){return function(){return t.h?(null==e.Pf&&(e.Pf=Mm(t.h.$b,t.H,r,t.C,i,e.Xi,t.G,t.J)),e.Pf):[]}}(p),0,null,this.u,a,this.j,this.l,[],"",null,null,Go,this.B)).codecs=u,p.mimeType=l,p.bandwidth=c,0==this.I?h>0&&p.wd():h%this.I!=0&&p.wd(),d.push(p)}}(n=new Fo(this.j+n.start,s,(function(){return d.length>0||!t.h?[]:Mm(t.h.$b,t.H,r,t.C,i,null,t.G,t.J)}),0,null,this.u,a,this.j,this.l,d,"",null,null,Go,this.B,d.length>0)).codecs=u,n.mimeType=l,n.j=o,n.bandwidth=c,this.g[e]=n}return n},i.Fb=function(e){Cm(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}},i.Te=function(){return this.K},Dm.prototype.configure=function(e){this.o=e},Dm.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.H.destroy()},Dm.prototype.setManifestType=function(e){this.u=e},Dm.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},(i=Nm.prototype).release=function(){for(var e=g(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},i.bk=function(){return this.l},i.Ig=function(){return this.j.slice()},i.Gj=function(){return this.i},i.Th=function(e,t){if(e){if("audio"==e.type)for(var n=g(this.h),r=n.next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter((function(t){return t!==e}));else if("video"==e.type)for(r=(n=g(this.g)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter((function(t){return t!==e})),r.trickModeVideo&&(r.trickModeVideo.matchedStreams=r.trickModeVideo.matchedStreams.filter((function(t){return t!==e}))),r.dependencyStream&&(r.dependencyStream.matchedStreams=r.dependencyStream.matchedStreams.filter((function(t){return t!==e})));else if(e.type==lt)for(r=(n=g(this.j)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter((function(t){return t!==e}));else if("image"==e.type)for(r=(n=g(this.i)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter((function(t){return t!==e}));e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}},i.hg=function(e,t,n){n=void 0!==n&&n;var r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,x,A,k,E,I,C,M,D,P,R,O,N,j,U,_,B=this;return L((function(L){if(1==L.g){if(r=ct,!t&&1==e.length)return i=jm(e,!1),a=i.Mh,o=i.fj,s=i.bj,u=i.ji,B.h=Array.from(a[0].values()),B.g=Array.from(o[0].values()),B.j=Array.from(s[0].values()),B.i=Array.from(u[0].values()),L.A(2);for(l=n?B.m.size:0,c=-1,d=0;d<e.length;d++)f=e[d],B.m.has(f.id)||(B.m.add(f.id),-1==c&&(c=d));return-1==c?L.return():(p=jm(e,!0),h=p.Mh,m=p.fj,y=p.bj,v=p.ji,S(L,Promise.all([_m(B,B.h,h,c,Hm,qm,l),_m(B,B.g,m,c,Hm,qm,l),_m(B,B.j,y,c,Hm,qm,l),_m(B,B.i,v,c,Hm,qm,l)]),2))}if(b=0,w=[],B.g.length&&B.h.length)for(M=g(B.h),D=M.next();!D.done;D=M.next())for(P=D.value,R=g(B.g),O=R.next();!O.done;O=R.next())N=O.value,j=bi(P.drmInfos,N.drmInfos),P.drmInfos.length&&N.drmInfos.length&&!j.length||(U=(P.bandwidth||0)+(N.bandwidth||0),P.dependencyStream&&(U+=P.dependencyStream.bandwidth||0),N.dependencyStream&&(U+=N.dependencyStream.bandwidth||0),_=b++,w.push({id:_,language:P.language,disabledUntilTime:0,primary:P.primary,audio:P,video:N,bandwidth:U,drmInfos:j,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(x=B.g.length?B.g:B.h,A=g(x),k=A.next();!k.done;k=A.next())E=k.value,I=b++,C=E.bandwidth||0,E.dependencyStream&&(C+=E.dependencyStream.bandwidth||0),w.push({id:I,language:E.language,disabledUntilTime:0,primary:E.primary,audio:E.type==r.ka?E:null,video:E.type==r.Aa?E:null,bandwidth:C,drmInfos:E.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});B.l=w,T(L)}))},i.Ri=function(e){this.o=e},V("shaka.util.PeriodCombiner",Nm),Nm.prototype.setUseStreamOnce=Nm.prototype.Ri,Nm.prototype.combinePeriods=Nm.prototype.hg,Nm.prototype.deleteStream=Nm.prototype.Th,Nm.prototype.getImageStreams=Nm.prototype.Gj,Nm.prototype.getTextStreams=Nm.prototype.Ig,Nm.prototype.getVariants=Nm.prototype.bk;var hy=1,gy=0,my=-1,yy=new Map;function vy(e,t){try{return function(e,t){var n=new DOMParser,r=by.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(e){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}(qe(e),t)}catch(e){return null}}var by=new ae((function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function wy(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Fa=1,this.H=[],this.l={qf:"",type:"",profiles:[],qc:null,rb:0,cb:null,le:0},this.u=new Map,this.C=new Map,this.o=new Map,this.F=new Map,this.ya=new Map,this.m=new Nm,this.K=0,this.Da=new H(5),this.M=new xr((function(){e.J&&!e.g.continueLoadingWhenPaused&&(e.I.Ma(e.J,"timeupdate"),e.J.paused)?e.I.Ba(e.J,"timeupdate",(function(){return Ny(e)})):Ny(e)})),this.R=new _i,this.O=null,this.G=[],this.aa=1/0,this.wa=!1,this.i=null,this.N=0,this.S=!1,this.I=new ne,this.J=null,this.V=!1,this.$="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.xa=new Jg}function Sy(e){var t,n,r,i,a,o,s,u,l,c,d;return L((function(f){return 1==f.g?(t=4,n="MPD",r=function(e){var t=e.l.le;if(!e.l.qf||!t||!e.H.length)return[];var n=Date.now()/1e3,r=e.H.filter((function(e){return!(e=cn(e.attributes.ttl))||t+e>n})).map(Jt).filter(Er);return r.length?rt(e.B,r):[]}(e),i=e.B,r.length?(i=r,n="Patch",t=6):e.B.length>1&&e.i&&((a=Om(e.i,"Location",!0)).length&&(i=a)),o=Gi(i,e.g.retryParameters),s=Date.now(),S(f,Hy(e,o,0,{type:t}),2)):3!=f.g?(u=f.h,e.j?(u.uri&&u.uri!=u.originalUri&&!e.B.includes(u.uri)&&e.B.unshift(u.uri),l=new me(u.uri),e.$=l.g.toString(),S(f,function(e,t,n,r){var i,a,o,s,u,l,c,d;return L((function(f){if(1==f.g){if(i=t,(a=e.g.dash.manifestPreprocessor)!=tc){if(de("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),!(o=vy(i,r)))throw new Be(2,4,4001,n);a(o),i=Ke(o.outerHTML)}if(!(s=Gt(i,r)))throw new Be(2,4,4001,n);return(u=e.g.dash.manifestPreprocessorTXml)!=nc&&u(s),"Patch"===r?f.return(function(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h,y,v,b,w,x,A,k,E,I,C,M;return L((function(D){if(1==D.g){if(n=t.attributes.mpdId,r=en(t,"originalPublishTime",an),!n||n!==e.l.qf||r!==e.l.le)throw e.H=[],new Be(1,4,4052);for(i=[],a=[],o=new Set,s=g(Wt(t)),u=s.next();!u.done;u=s.next())if(l=u.value,c=hn(l.attributes.sel||""),d=c[c.length-1],f=Jt(l)||"","MPD"===d.name)if("mediaPresentationDuration"===d.Bc){var P=on(Jt(l)||"");if(null!=P){e.l.qc=P;for(var R=g(e.u.values()),L=R.next();!L.done;L=R.next())L.value.qc=P}}else if("type"===d.Bc){for(e.h.presentationTimeline.cd("static"==f),e.l.type=f,R=(P=g(e.u.values())).next();!R.done;R=P.next())R.value.Eb="dynamic"==f;"static"==f&&(e.K=-1)}else"publishTime"===d.Bc?e.l.le=an(f)||0:null===d.Bc&&"add"===l.tagName&&a.push(l);else if("PatchLocation"===d.name)gn(e.H,l);else if("Period"===d.name)"add"===l.tagName?a.push(l):"remove"===l.tagName&&d.id&&ky(e,d.id);else if("SegmentTemplate"===d.name){if((P=(R=hn(l.attributes.sel||""))[R.length-1]).Bc){R=Ey(e,R),L=Jt(l)||"";for(var O=g(R),N=O.next();!N.done;N=O.next())yn((N=e.u.get(N.value)).L.Nc,l.tagName,P.Bc,L);P=R}else P=[];for(p=g(P),h=p.next();!h.done;h=p.next())y=h.value,o.add(y)}else if("SegmentTimeline"===d.name||"S"===d.name){for(P=hn(l.attributes.sel||""),L=(R=g(P=Ey(e,P))).next();!L.done;L=R.next())gn(O=Xt(L=am(L=e.u.get(L.value),km,"SegmentTimeline"),"S"),l),L.children=O;for(v=g(P),b=v.next();!b.done;b=v.next())w=b.value,o.add(w)}for(x=g(o),A=x.next();!A.done;A=x.next())k=A.value,Iy(e,k);for(E=g(a),I=E.next();!I.done;I=E.next())C=I.value,i.push.apply(i,m(Ay(e,C)));return i.length?(e.h.periodCount+=i.length,e.h.gapCount=e.N,S(D,xy(e,i,!0),2)):D.A(2)}"static"==e.l.type&&(M=e.l.qc,e.h.presentationTimeline.Ab(M||1/0)),T(D)}))}(e,s)):e.g.dash.disableXlinkProcessing?f.return(Ty(e,s,n)):(l=e.g.dash.xlinkFailGracefully,c=om(s,e.g.retryParameters,l,n,e.j.networkingEngine),Bi(e.R,c),S(f,c.promise,2))}return d=f.h,f.return(Ty(e,d,n))}))}(e,u.data,u.uri,n),3)):f.return(0)):(c=Date.now(),d=(c-s)/1e3,e.Da.sample(1,d),e.ma.clear(),f.return(d))}))}function Ty(e,t,n){var r,i,a,o,s,u,l,c,d,f,p,h,y,v,b,w,A,I,C,M,D,P,R,O,N,j,U,_,B,F,V,H,G,q,K,z,X,Y,J,$,Q,Z,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,de;return L((function(fe){switch(fe.g){case 1:for(e.i&&e.i.l.clear(),r=[n],i=[],a=new Map,o=Xt(t,"Location"),s=g(o),u=s.next();!u.done;u=s.next())l=u.value,c=l.attributes.serviceLocation,(d=Jt(l))&&(f=rt(r,[d])[0],c&&(e.i?Lm(e.i,"Location",c,f):a.set(c,f)),i.push(f));if(e.i?(p=Om(e.i,"Location",!0)).length>0&&(r=e.B=p):i.length&&(r=e.B=i),e.l.qf=t.attributes.id||"",e.l.le=en(t,"publishTime",an)||0,e.H=Xt(t,"PatchLocation"),h=Promise.resolve(),(y=Qt(t,"ContentSteering"))&&e.j)for(v=y.attributes.defaultServiceLocation,e.i?(e.i.i=r,e.i.h=v):(e.i=new Dm(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=r,e.i.h=v,(b=Jt(y))&&(en(y,"queryBeforeStart",fn,!1)?h=Pm(e.i,b):Pm(e.i,b))),w=g(a.keys()),A=w.next();!A.done;A=w.next())I=A.value,C=a.get(I),Lm(e.i,"Location",I,C);if(M=Xt(t,"BaseURL"),D=!1,e.i)for(P=g(M),R=P.next();!R.done;R=P.next())O=R.value,N=O.attributes.serviceLocation,j=Jt(O),N&&j&&(Lm(e.i,"BaseURL",N,j),D=!0);if(e.X.splice(0),D&&e.i||(U=M.map(Jt),e.X.push.apply(e.X,m(rt(r,U)))),_=e.i,B=e.X,F=function(){return _&&D?Om(_,"BaseURL"):B.slice()},e.l.cb=F,V=0,M&&M.length&&(V=en(M[0],"availabilityTimeOffset",dn)||0),e.l.rb=V,e.K=en(t,"minimumUpdatePeriod",on,-1),H=en(t,"availabilityStartTime",an),G=en(t,"timeShiftBufferDepth",on),q=e.g.dash.ignoreSuggestedPresentationDelay,K=null,q||(K=en(t,"suggestedPresentationDelay",on)),z=e.g.dash.ignoreMaxSegmentDuration,X=null,z||(X=en(t,"maxSegmentDuration",on)),Y=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&"static"==Y),e.l.type=Y,e.h)for(J=e.h.presentationTimeline,$=J.Hb(),Q=g(e.o.values()),Z=Q.next();!Z.done;Z=Q.next())(ee=Z.value).segmentIndex&&ee.segmentIndex.Ya($);else te=e.g.dash.ignoreMinBufferTime,ne=0,te||(ne=en(t,"minBufferTime",on)||0),0,re=null!=K?Math.min(K,G||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(1.5*ne,G||1/0),J=new uu(H,re,e.g.dash.autoCorrectDrift);return J.cd("static"==Y),J.W()&&!isNaN(e.g.availabilityWindowOverride)&&(G=e.g.availabilityWindowOverride),null==G&&(G=1/0),J.Hf(G),ie=t.attributes.profiles||"",e.l.profiles=ie.split(","),ae={Eb:"static"!=Y,presentationTimeline:J,sa:null,na:null,qa:null,L:null,bandwidth:0,Kg:!1,rb:V,qc:null,profiles:ie.split(","),roles:null,Lb:function(){return""}},S(fe,h,2);case 2:return e.N=0,oe=Dy(e,ae,F,t,!1),se=oe.duration,ue=oe.periods,("static"!=Y||e.V)&&oe.Vh||J.Ab(se||1/0),e.S&&e.wa&&J.Oi(e.aa),J.Sg(X||1),e.S&&e.wa&&(le=null!=K?K:e.g.defaultPresentationDelay,J.nh(le)),e.h?(e.h.periodCount=ue.length,e.h.gapCount=e.N,S(fe,xy(e,ue,!1),4)):S(fe,e.m.hg(ue,ae.Eb),6);case 6:if(e.h={presentationTimeline:J,variants:e.m.l,textStreams:e.m.Ig(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Cy(t),nextUrl:My(t),periodCount:ue.length,gapCount:e.N,isLowLatency:e.S,startTime:null},!J.ej()){fe.A(7);break}return ce=Xt(t,"UTCTiming"),S(fe,function(e,t,n){var r,i,a,o,s,u,l,c;return L((function(d){switch(d.g){case 1:r=n.map((function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}})),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),a=g(r),o=a.next();case 2:if(o.done){d.A(4);break}switch(s=o.value,x(d,5),u=s.scheme,l=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),d.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":W("NTP UTCTiming scheme is not supported");break;default:W("Unrecognized scheme in UTCTiming element",u)}d.A(9);break;case 7:return S(d,_y(e,t,l,"HEAD"),10);case 10:return d.return(d.h);case 8:return S(d,_y(e,t,l,"GET"),11);case 11:return d.return(d.h);case 9:k(d,3);break;case 5:E(d);case 3:o=a.next(),d.A(2);break;case 4:return W("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}}))}(e,F,ce),8);case 8:if(de=fe.h,!e.j)return fe.return();J.Pi(de);case 7:J.lf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),function(e){for(var t=Array.from(e.F.keys()).filter((function(t){return!e.G.includes(t)})),n=(t=g(t)).next();!n.done;n=t.next()){n=n.value;for(var r=!0,i=g(e.F.get(n)),a=i.next();!a.done;a=i.next()){a=a.value;var o=e.o.get(a);o&&(o.segmentIndex&&0!=o.segmentIndex.getNumReferences()?r=!1:(e.m&&e.m.Th(o,n),e.o.delete(a)))}r&&e.F.delete(n)}}(e),function(e,t){t=new Set(t.map((function(e){return e.id})));for(var n=g(e.C.keys()),r=n.next();!r.done;r=n.next())r=r.value,t.has(r)||e.C.delete(r)}(e,ue),T(fe)}}))}function xy(e,t,n){var r;return L((function(i){if(1==i.g)return S(i,e.m.hg(t,!0,n),2);e.h.variants=e.m.l,(r=e.m.Ig()).length>0&&(e.h.textStreams=r),e.h.imageStreams=e.m.i,e.j.filter(e.h),T(i)}))}function Ay(e,t){return Dy(e,{Eb:"dynamic"==e.l.type,presentationTimeline:e.h.presentationTimeline,sa:null,na:null,qa:null,L:null,bandwidth:0,Kg:!1,rb:e.l.rb,profiles:e.l.profiles,qc:e.l.qc,roles:null,Lb:function(){return""}},e.l.cb,t,!0).periods}function ky(e,t){e.h.periodCount--;for(var n=g(e.u.keys()),r=n.next();!r.done;r=n.next())if((r=r.value).startsWith(t)){am(e.u.get(r),km,"SegmentTimeline").children=[],Iy(e,r),e.u.delete(r)}e.G=e.G.filter((function(e){return e!==t}))}function Ey(e,t){for(var n="",r="",i=-1,a="",o=(t=g(t)).next();!o.done;o=t.next())"Period"===(o=o.value).name?n=o.id:"AdaptationSet"===o.name?(r=o.id,null!==o.position&&(i=o.position)):"Representation"===o.name&&(a=o.id);if(t=[],a)t.push(n+","+a);else if(r)for(i=g(e.u.values()),e=i.next();!e.done;e=i.next())(e=e.value).sa.id===n&&e.qa.id===r&&e.L.id&&t.push(n+","+e.L.id);else if(i>-1)for(r=g(e.u.values()),e=r.next();!e.done;e=r.next())(e=e.value).sa.id===n&&e.qa.position===i&&e.L.id&&t.push(n+","+e.L.id);return t}function Iy(e,t){var n=e.u.get(t),r=e.o.get(t);r.segmentIndex&&r.segmentIndex.Ya(e.h.presentationTimeline.Hb());try{var i=Am(n,(function(t,n,r,i){return Fy(e,t,n,r,i)}),e.o,!0,e.g.dash.initialSegmentLimit,e.ya,n.L.aesKey,null,!0,e.C);r.createSegmentIndex=function(){return L((function(e){if(1==e.g)return r.segmentIndex?e.A(0):S(e,i.Sc(),3);r.segmentIndex=e.h,T(e)}))}}catch(e){if((t=n.L.contentType)!=lt&&"application"!=t&&"image"!=t||4002!=e.code)throw e}}function Cy(e){var t=Qt(e,"ServiceDescription");if(!t)return null;if(e=Qt(t,"Latency"),t=Qt(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function My(e){if(!(e=Xt(e,"SupplementalProperty")).length)return null;for(var t=(e=g(e)).next();!t.done;t=e.next())if("urn:mpeg:dash:chaining:2016"==(t=t.value).attributes.schemeIdUri)return t.attributes.value;return null}function Dy(e,t,n,r,i){var a=t.qc;a||(a=en(r,"mediaPresentationDuration",on),e.l.qc=a);var o=0;e.h&&e.h.presentationTimeline&&e.V&&(o=e.h.presentationTimeline.Xb());var s=[],u=o;r=Xt(r,"Period");for(var l=0;l<r.length;l++){var c=r[l],d=r[l+1],f=en(c,"start",on,u),p=c.attributes.id,h=en(c,"duration",on);f=0==l&&0==f&&e.V?o:f;var m=null;if(d){var y=en(d,"start",on);null!=y&&(m=y-f+o)}else null!=a&&(m=a-f+o);if(y=dt,m&&h&&Math.abs(m-h)>y&&m>h&&e.N++,null==m&&(m=h),!(null!==e.O&&null!==p&&null!==f&&f<e.O)||e.G.includes(p)||l+1==r.length){if(null!==f&&(null===e.O||f>e.O)&&(e.O=f),u=Py(e,t,n,{start:f,duration:m,node:c,ef:null==m||!d}),s.push(u),t.sa.id&&m&&e.ya.set(t.sa.id,m),null==m){u=null;break}u=f+m}}if(i)for(n=(t=g(s)).next();!n.done;n=t.next())n=n.value.id,e.G.includes(n)||e.G.push(n);else e.G=s.map((function(e){return e.id}));return null!=a?{periods:s,duration:a+o,Vh:!1}:{periods:s,duration:u,Vh:!0}}function Py(e,t,n,r){t.sa=Uy(e,r.node,null,n),t.na=r,t.sa.rb=t.rb,t.sa.id||(t.sa.id="__shaka_period_"+r.start);var i=Xt(r.node,"EventStream");n=t.presentationTimeline.Hb();for(var a=(i=g(i)).next();!a.done;a=i.next())By(e,r.start,r.duration,a.value,n);for(i=(n=g(n=Xt(r.node,"SupplementalProperty"))).next();!i.done;i=n.next())"urn:mpeg:dash:urlparam:2014"==(i=i.value).attributes.schemeIdUri&&(i=Oy(e,i))&&(t.Lb=i);if(n=Xt(r.node,"AdaptationSet").map((function(n,r){return Ly(e,t,r,n)})).filter(Er),t.Eb){i=[];for(var o=(a=g(n)).next();!o.done;o=a.next())for(var s=(o=g(o.value.Ok)).next();!s.done;s=o.next())i.push(s.value);if(i.length!=new Set(i).size)throw new Be(2,4,4018)}for(i=new Map,o=(a=g(n)).next();!o.done;o=a.next())for(s=(o=g(o.value.uj)).next();!s.done;s=o.next()){var u=g(s.value);s=u.next().value,u=u.next().value,i.set(s,u)}if(i.size)for(a=null,s=(o=g(n)).next();!s.done;s=o.next()){u=[];for(var l=g((s=s.value).streams),c=l.next(),d={};!c.done;d={uh:void 0},c=l.next())if(d.uh=c.value,i.has(d.uh.originalId)){a||(a=Xt(r.node,"AdaptationSet").map((function(n,r){return Ly(e,t,r,n)})).filter(Er));for(var f=(c=g(a)).next();!f.done;f=c.next())(f=f.value.streams.find(function(e){return function(t){return t.originalId==e.uh.originalId}}(d)))&&(f.dependencyStream=i.get(f.originalId),f.originalId+=f.dependencyStream.originalId,u.push(f))}u.length&&s.streams.push.apply(s.streams,m(u))}if(r=n.filter((function(e){return!e.Dh})),n=n.filter((function(e){return e.Dh})),!e.g.disableIFrames)for(i=(n=g(n)).next();!i.done;i=n.next())for(a=(i=i.value).Dh.split(" "),s=(o=g(r)).next();!s.done;s=o.next())if(s=s.value,a.includes(s.id))for(u=(s=g(s.streams)).next();!u.done;u=s.next())oi(u.value,i.streams);if(n=Ry(e.g.disableAudio,r,"audio"),i=Ry(e.g.disableVideo,r,"video"),a=Ry(e.g.disableText,r,lt),r=Ry(e.g.disableThumbnails,r,"image"),0===i.length&&0===n.length)throw new Be(2,4,4004);return{id:t.sa.id,audioStreams:n,videoStreams:i,textStreams:a,imageStreams:r}}function Ry(e,t,n){return e||!t.length?[]:t.reduce((function(e,t){return t.contentType!=n||e.push.apply(e,m(t.streams)),e}),[])}function Ly(t,n,r,i){function a(e){var r=e.attributes["dvb:fontFamily"];e=e.attributes["dvb:url"],r&&e&&(e=rt(n.qa.cb(),[e],n.Lb()),t.j.addFont(r,e[0]))}function o(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.qa=Uy(t,i,n.sa,null),n.qa.position=r;var u=!1,l=(r=Xt(i,"Role")).map((function(e){return e.attributes.value})).filter(Er),c=void 0,d=n.qa.contentType==lt;d&&(c="subtitle");for(var f=(r=g(r)).next();!f.done;f=r.next()){var p=(f=f.value).attributes.schemeIdUri;if(null==p||"urn:mpeg:dash:role:2011"==p)switch(f=f.attributes.value,f){case"main":u=!0;break;case"caption":case"subtitle":c=f}}var h=Xt(i,"EssentialProperty");r=null;var y=!1;f=null,p=!1;for(var v=(h=g(h)).next();!v.done;v=h.next()){var b=(v=v.value).attributes.schemeIdUri;if("http://dashif.org/guidelines/trickmode"==b)r=v.attributes.value;else if("urn:mpeg:mpegB:cicp:TransferCharacteristics"==b)var w=s(parseInt(v.attributes.value,10));else if("urn:mpeg:mpegB:cicp:ColourPrimaries"==b)var x=o(parseInt(v.attributes.value,10));else"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=b&&("urn:mpeg:dash:ssr:2023"==b&&t.g.dash.enableFastSwitching?y=!0:"urn:dvb:dash:fontdownload:2014"==b?a(v):"urn:mpeg:dash:urlparam:2014"==b&&(f=Oy(t,v))||(p=!0))}if(p)return null;var A=null;for(h=(p=g(p=Xt(i,"SupplementalProperty"))).next();!h.done;h=p.next())"http://dashif.org/guidelines/last-segment-number"==(v=(h=h.value).attributes.schemeIdUri)?A=parseInt(h.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==v?w=s(parseInt(h.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==v?x=o(parseInt(h.attributes.value,10)):"urn:dvb:dash:fontdownload:2014"==v?a(h):"urn:mpeg:dash:urlparam:2014"==v&&(f=Oy(t,h));f&&(n.Lb=f),f=Xt(i,"Accessibility");var k,E=new Map;for(p=(f=g(f)).next();!p.done;p=f.next())if(p=(h=p.value).attributes.schemeIdUri,h=h.attributes.value,"urn:scte:dash:cc:cea-608:2015"!=p||t.g.disableText)if("urn:scte:dash:cc:cea-708:2015"!=p||t.g.disableText)"urn:mpeg:dash:role:2011"==p?null!=h&&(l.push(h),"captions"==h&&(c="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==p&&("1"==h?k="visually impaired":"2"==h?k="hard of hearing":"9"==h&&(k="spoken subtitles"));else if(p=1,null!=h)for(v=(h=g(h.split(";"))).next();!v.done;v=h.next()){b=v.value;var I=v=void 0;b.includes("=")?(v="svc"+(b=b.split("="))[0],I=b[1].split(",")[0].split(":").pop()):(v="svc"+p,p++,I=b),E.set(v,Rr(I))}else E.set("svc1","und");else if(p=1,null!=h)for(b=(v=g(h=h.split(";"))).next();!b.done;b=v.next()){I=b.value;var C=b=void 0;I.includes("=")?(b=(I=I.split("="))[0].startsWith("CC")?I[0]:"CC"+I[0],C=I[1]||"und"):(b="CC"+p,2==h.length?p+=2:p++,C=I),E.set(b,Rr(C))}else E.set("CC1","und");f=Xt(i,"ContentProtection");var M=$g(t.xa,f,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI);n.qa.encrypted=f.length>0;var D=Rr(n.qa.language||"und"),P=n.qa.label,R=new Map;if(i=Xt(i,"Representation"),!t.g.ignoreSupplementalCodecs){for(f=[],h=(p=g(i)).next();!h.done;h=p.next())(h=tn(v=h.value,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&((v=Ft(v)).attributes.codecs=h.split(" ").join(","),v.attributes.id&&(v.attributes.supplementalId=v.attributes.id+"_supplementalCodecs"),f.push(v));i.push.apply(i,m(f))}if(0==(f=i.map((function(r){var i=function(t,n,r,i,a,o,s,u,l,c,d,f){n.L=Uy(t,c,n.qa,null);var p=n.L.id;if(t.aa=Math.min(t.aa,n.L.rb),t.S=t.aa>0,!function(e){var t=e.Hd?1:0;return t+=e.yc?1:0,0==(t+=e.Nc?1:0)?e.contentType==lt||"application"==e.contentType:(1!=t&&(e.Hd&&(e.yc=null),e.Nc=null),!0)}(n.L))return null;var h=n.na.start;n.bandwidth=en(c,"bandwidth",ln)||0,n.roles=u;var g=Xt(c,"SupplementalProperty"),m=Xt(c,"EssentialProperty"),y=Xt(c,"ContentProtection");c=null;var v,b,w=m.find((function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri}));(w||(w=g.find((function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri}))))&&(c=Oy(t,w)),c&&(n.Lb=c),w=n.L.contentType,c=w==lt||"application"==w,w="image"==w,y.length&&(n.qa.encrypted=!0);try{var x=void 0;if(r.dg){var A=n.L.cb,k=n.Lb,E=Gi(rt(A(),[r.dg.rk],k()),t.g.retryParameters);x={bitsKey:128,blockCipherMode:"CBC",iv:r.dg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,r,i;return L((function(a){if(1==a.g)return S(a,Hy(t,E,6),2);if(3!=a.g){if(!(n=a.h).data||16!=n.data.byteLength)throw new Be(2,4,4049);return r={name:"AES-CBC"},i=x,S(a,e.crypto.subtle.importKey("raw",n.data,r,!0,["decrypt"]),3)}i.cryptoKey=a.h,x.fetchKey=void 0,T(a)}))}}}if(n.L.aesKey=x,A=function(e,n,r,i){return Fy(t,e,n,r,i)},n.L.Hd)var I=mm(n,A,x);else if(n.L.yc)I=Tm(n,t.o,x);else if(n.L.Nc)I=Am(n,A,t.o,!!t.h,t.g.dash.initialSegmentLimit,t.ya,x,f,!1,t.C);else{var C=n.na.duration||0,M=n.L.cb,D=n.L.mimeType,P=n.L.codecs;I={endTime:-1,timeline:-1,Sc:function(){var e=Lu(h,C,M());return e.Fb((function(e){e.mimeType=D,e.codecs=P})),Promise.resolve(e)},timescale:1}}}catch(e){if((c||w)&&4002==e.code)return null;throw e}if(f=function(e,t,n,r,i){var a=$g(e,t,r,i);if(n.Xh)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==a.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=a.drmInfos),n.Xh=!1;else if(a.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter((function(e){return a.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new Be(2,4,4008);return a.Sh||n.Sh}(t.xa,y,r,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI),f=new Set(f?[f]:[]),y=!1,g.some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value}))&&(y=!0),g=!1,c&&(g=u.includes("forced_subtitle")||u.includes("forced-subtitle")),w&&((m=m.find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)})))&&(v=m.attributes.value),!v))return null;c=n.L.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(b="PQ"),m=n.L.id?n.sa.id+","+n.L.id:"",t.H.length&&p&&t.u.set(n.sa.id+","+p,function(e){function t(e){return e?((e=Vt(e)).Hd=null,e.yc=null,e.Nc=bn(e.Nc),e.zf=null,e):null}return(e=Vt(e)).sa=t(e.sa),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=Vt(e.na),e.na.node=null),e}(n)),n.L.zf&&function(e,t,n,r){if(!e.ma.has(t)){e.ma.add(t);var i,a=en(t,"presentationTime",cn)||0,o=Qt(t,"UTCTiming");(i=o&&o.attributes.schemeIdUri)&&(i=!("urn:mpeg:dash:utc:http-ntp:2014"===(o=o.attributes.schemeIdUri)||"urn:mpeg:dash:utc:ntp:2014"===o||"urn:mpeg:dash:utc:sntp:2014"===o)),i?t=1e3*(en(t,"wallClockTime",an)||0):t=ds(t=en(t,"wallClockTime",cn)||0),a=(n=new Date(t-a/n.timescale*1e3)).getTime()/1e3,isNaN(a)||(r.o||r.oh(a),r=new Oi("prft",r=(new Map).set("detail",{wallClockTime:t,programStartDate:n})),e.j.onEvent(r))}}(t,n.L.zf,I,n.presentationTimeline),-1!=I.endTime&&null!=n.sa.id&&null!=n.L.id&&((p=t.C.get(n.sa.id))?(p.endTime=I.endTime,p.bh.includes(n.L.id)||p.bh.push(n.L.id),t.C.set(n.sa.id,p)):t.C.set(n.sa.id,{endTime:I.endTime,timeline:I.timeline,bh:[n.L.id]}));var R=m&&t.o.has(m)?t.o.get(m):{id:t.Fa++,originalId:n.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){R.segmentIndex&&(R.segmentIndex.release(),R.segmentIndex=null)},segmentIndex:null,mimeType:n.L.mimeType,codecs:c,frameRate:n.L.frameRate,pixelAspectRatio:n.L.pixelAspectRatio,bandwidth:n.bandwidth,width:n.L.width,height:n.L.height,kind:i,encrypted:r.drmInfos.length>0,drmInfos:r.drmInfos,keyIds:f,language:a,originalLanguage:n.qa.language,label:o,type:n.qa.contentType,primary:s,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:n.L.emsgSchemeIdUris,roles:u,forced:g,channelsCount:n.L.uf,audioSamplingRate:n.L.audioSamplingRate,spatialAudio:y,closedCaptions:l,hdr:b,colorGamut:void 0,videoLayout:void 0,tilesLayout:v,accessibilityPurpose:d,external:!1,fastSwitching:!1,fullMimeTypes:new Set([rr(n.L.mimeType,n.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return R.createSegmentIndex=function(){var e;return L((function(t){if(1==t.g)return R.segmentIndex?t.A(0):(e=R,S(t,I.Sc(),3));e.segmentIndex=t.h,T(t)}))},m&&n.Eb&&!t.o.has(m)&&(n=n.sa.id||"",t.F.has(n)||t.F.set(n,[]),t.o.set(m,R),t.F.get(n).push(m)),R}(t,n,M,c,D,P,u,l,E,r,k,A);return i&&(i.hdr=i.hdr||w,i.colorGamut=i.colorGamut||x,i.fastSwitching=y,r=r.attributes.dependencyId)?(i.baseOriginalId=r,R.set(r,i),null):i})).filter((function(e){return!!e}))).length&&0==R.size){if(r="image"==n.qa.contentType,t.g.dash.ignoreEmptyAdaptationSet||d||r)return null;throw new Be(2,4,4003)}if(!n.qa.contentType||"application"==n.qa.contentType)for(n.qa.contentType=Vy(f[0].mimeType,f[0].codecs),p=(d=g(f)).next();!p.done;p=d.next())p.value.type=n.qa.contentType;for(d=n.qa.id||"__fake__"+t.Fa++,h=(p=g(f)).next();!h.done;h=p.next()){for(h=h.value,b=(v=g(M.drmInfos)).next();!b.done;b=v.next())(b=b.value).keyIds=b.keyIds&&h.keyIds?new Set([].concat(m(b.keyIds),m(h.keyIds))):b.keyIds||h.keyIds;t.g.enableAudioGroups&&(h.groupId=d)}return i=i.map((function(e){return e.attributes.supplementalId||e.attributes.id})).filter(Er),{id:d,contentType:n.qa.contentType,language:D,Dm:u,streams:f,drmInfos:M.drmInfos,Dh:r,Ok:i,uj:R}}function Oy(e,t){if((t=Zt(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&en(t,"useMPDUrlQuery",fn,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return"$querypart$"==n?e.$:n.split("&").map((function(t){if("$querypart$"==t)return e.$;var n=/\$query:(.*?)\$/g.exec(t);if(n&&2==n.length){n=n[1];var r=new Me(e.$).get(n);if(r.length)return n+"="+r[0]}return t})).join("&")}}return null}function Ny(e){var t,n;return L((function(r){switch(r.g){case 1:return t=0,x(r,2),S(r,Sy(e),4);case 4:t=r.h,k(r,3);break;case 2:if(n=E(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),jy(e,t),T(r)}}))}function jy(e,t){if(!(e.K<0)){var n=e.K;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.M.ia(Math.max(n-t,G(e.Da)))}}function Uy(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,uf:null,audioSamplingRate:null,rb:0,Ef:1,encrypted:!1},r=r||n.cb;var i,a=t.attributes.id,o=t.attributes.supplementalId,s=Xt(t,"BaseURL"),u=!1;if(e.i)for(var l=g(s),c=l.next();!c.done;c=l.next()){var d=c.value;c=d.attributes.serviceLocation,d=Jt(d),c&&d&&(Lm(e.i,a,c,d),u=!0)}u&&e.i||(i=s.map(Jt));var f=e.i;e=t.attributes.contentType||n.contentType,l=t.attributes.mimeType||n.mimeType,c=il([t.attributes.codecs||n.codecs]).join(","),d=en(t,"frameRate",pn)||n.frameRate;var p=t.attributes.sar||n.pixelAspectRatio,h=function(e,t){t=t.slice();for(var n=(e=g(e)).next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}(Xt(t,"InbandEventStream"),n.emsgSchemeIdUris),m=Xt(t,"AudioChannelConfiguration");m=function(e){for(var t=(e=g(e)).next();!t.done;t=e.next()){var n=(t=t.value).attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(t,10)))continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],!(t=parseInt(t,16)))continue;for(var r=0,i=0;i<n.length;i++)t&1<<i&&(r+=n[i]);if(r)return r;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),!(t=parseInt(t,16)))continue;for(i=r=0;i<n.length;i++)t&1<<i&&(r+=n[i]);if(r)return r;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}(m)||n.uf;var y=en(t,"audioSamplingRate",cn)||n.audioSamplingRate;e||(e=Vy(l,c));var v=Qt(t,"SegmentBase"),b=Qt(t,"SegmentTemplate"),w=v&&en(v,"availabilityTimeOffset",dn)||0,S=b&&en(b,"availabilityTimeOffset",dn)||0,T=s&&s.length&&en(s[0],"availabilityTimeOffset",dn)||0;w=n.rb+T+w+S,S=null,(T=Qt(t,"SegmentSequenceProperties"))&&(T=en(T,"cadence",ln))&&(S=T),T=t.attributes.label;var x=Xt(t,"Label");return x&&x.length&&(Yt(x=x[0])&&(T=Yt(x))),{cb:function(){return rt(r(),s.length?f&&u?Om(f,a):i||[]:[])},Hd:v||n.Hd,yc:Qt(t,"SegmentList")||n.yc,Nc:b||n.Nc,zf:Qt(t,"ProducerReferenceTime")||n.zf,width:en(t,"width",cn)||n.width,height:en(t,"height",cn)||n.height,contentType:e,mimeType:l,codecs:c,frameRate:d,pixelAspectRatio:p,emsgSchemeIdUris:h,id:o||a,originalId:a,language:t.attributes.lang,uf:m,audioSamplingRate:y,rb:w,cf:null,Ef:S||n.Ef,label:T||null,encrypted:!1}}function _y(e,t,n,r){var i,a,o,s,u,l,c;return L((function(d){if(1==d.g)return i=[Xe(n)],a=rt(t(),i),(o=Gi(a,e.g.retryParameters)).method=r,s=e.j.networkingEngine.request(4,o,{isPreload:e.oa()}),Bi(e.R,s),S(d,s.promise,2);if(u=d.h,"HEAD"==r){if(!u.headers||!u.headers.date)return d.return(0);l=u.headers.date}else l=He(u.data);return c=Date.parse(l),isNaN(c)?d.return(0):d.return(c-Date.now())}))}function By(e,t,n,r,i){for(var a=r.attributes.schemeIdUri||"",o=r.attributes.value||"",s=en(r,"timescale",cn)||1,u=en(r,"presentationTimeOffset",cn)||0,l=(r=g(Xt(r,"Event"))).next();!l.done;l=r.next()){var c=en(l=l.value,"presentationTime",cn)||0,d=en(l,"duration",cn)||0;d=(c=Math.max((c-u)/s+t,t))+d/s,null!=n&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<i||(l={schemeIdUri:a,value:o,startTime:c,endTime:d,id:l.attributes.id||"",timescale:s,eventElement:vn(l),eventNode:bn(l)},e.j.onTimelineRegionAdded(l))}}function Fy(e,t,n,r,i){var a,o,s,u;return L((function(l){return 1==l.g?(a=Xi,o=i?0:1,s=ol(t,n,r,e.g.retryParameters),S(l,Hy(e,s,a,{type:o}),2)):(u=l.h,l.return(u.data))}))}function Vy(e,t){return yr(t=rr(e,t))?lt:e.split("/")[0]}function Hy(e,t,n,r){return r||(r={}),r.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,r),Bi(e.R,t),t.promise}function Gy(){}(i=wy.prototype).configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.M.Jb(),this.i&&this.i.configure(this.g),this.m&&this.m.Ri(this.g.dash.useStreamOnceInPeriodFlattening)},i.start=function(e,t){var n,r=this;return L((function(i){if(1==i.g)return r.wa=t.isLowLatencyMode(),r.B=[e],r.j=t,S(i,Sy(r),2);if(n=i.h,r.j&&jy(r,n),!r.j)throw new Be(2,7,7001);return i.return(r.h)}))},i.stop=function(){for(var e=g(this.o.values()),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.F.clear(),this.u.clear(),this.C.clear(),this.l={qf:"",type:"",profiles:[],qc:null,rb:0,cb:null,le:0},this.m=null,null!=this.M&&(this.M.stop(),this.M=null),this.i&&this.i.destroy(),this.I&&(this.I.release(),this.I=null),this.ma.clear(),this.xa.release(),this.R.destroy()},i.update=function(){var e,t=this;return L((function(n){return 1==n.g?(x(n,2),S(n,Sy(t),4)):2!=n.g?k(n,0):(e=E(n),t.j&&e?(t.j.onError(e),void T(n)):n.return())}))},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Hc();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,jy(this,0))}}},i.banLocation=function(e){this.i&&this.i.banLocation(e)},i.setMediaElement=function(e){this.J=e},V("shaka.dash.DashParser",wy),Qa("application/dash+xml",(function(){return new wy})),Qa("video/vnd.mpeg.dash.mpd",(function(){return new wy})),V("shaka.dependencies",Gy),Gy.has=function(e){return zy.has(e)},Gy.add=function(e,t){if(!Ky[e])throw Error(e+" is not supported");e==qy?de("mux.js","mux.js is no longer used in Shaka Player."):zy.set(e,(function(){return t}))};var qy="muxjs",Ky={Em:qy,ISOBoxer:"ISOBoxer"};Gy.Allowed=Ky;var zy=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);function Wy(){this.j=new ae((function(){return["Oculus","Quest"].some((function(e){return navigator.userAgent.includes(e.toLowerCase())}))?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase()?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"})),this.l=new ae((function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"}))}function Xy(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function Yy(){Wy.call(this),this.g=new ae((function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})),this.h=new ae((function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"}))}function Jy(){if(!$y())throw Error("Not a Chromecast device!");Wy.call(this),this.h=new ae((function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null})),this.g=new ae((function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return(e=e.toLowerCase()).includes("android")?Qy:e.includes("fuchsia")?Zy:ev}))}function $y(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}(i=Wy.prototype).cc=function(){return!!navigator.mediaCapabilities},i.Ua=function(){return this.j.value()},i.Ha=function(){return this.l.value()},i.Ed=function(){return!1},i.Gi=function(){return!1},i.df=function(){return!1},i.Hi=function(){return!1},i.oe=function(){return!1},i.fd=function(){return!0},i.Pc=function(){return!0},i.re=function(){return!0},i.Mi=function(){return 0},i.jc=function(){return Promise.resolve({width:1/0,height:1/0})},i.Ui=function(){return!1},i.rh=function(){return!1},i.Wa=function(e){var t=this.Ua();return"TV"!==t&&"CONSOLE"!==t&&"CAST"!==t||(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},i.xh=function(){return!!e.indexedDB},i.Ei=function(){return[]},i.sd=function(t){return void 0!==e.matchMedia&&e.matchMedia("(color-gamut: p3)").matches?t?"HLG":"PQ":"SDR"},i.aj=function(){return!1},i.si=function(){return!1},i.gh=function(){return!1},i.Kf=function(){return!0},i.ti=function(){return!1},i.$i=function(){return!0},i.ed=function(){return!1},i.Rg=function(e){return"com.apple.fps"===e},i.Jf=function(){return!0},i.toString=function(){return"Device: "+this.Nb()+" v"+this.za()+"; Type: "+this.Ua()},p(Yy,Wy),(i=Yy.prototype).za=function(){return this.g.value()},i.Nb=function(){return"Apple Browser"},i.Ua=function(){return this.h.value()},i.Ha=function(){return"WEBKIT"},i.cc=function(){return!1},i.Ed=function(e,t){return"audio"===t},i.df=function(){return!0},i.Hi=function(e){return"audio"===e},i.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},i.aj=function(){return!0},i.Jf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(se=function(){return new Yy}),p(Jy,Wy),(i=Jy.prototype).za=function(){return this.h.value()},i.Nb=function(){return"Chromecast with "+this.g.value()},i.Ua=function(){return"CAST"},i.Ha=function(){return"CHROMIUM"},i.cc=function(){return Wy.prototype.cc.call(this)&&this.g.value()!==ev},i.Pc=function(){return this.g.value()!==ev},i.Mi=function(){switch(this.g.value()){case Qy:return 0;case Zy:return 3;default:return 1}},i.jc=function(){var t,n,r,i;return L((function(a){switch(a.g){case 1:if(t=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,n={width:1280,height:720},x(a,2),!(r=t)){a.A(4);break}return S(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:r=a.h;case 4:if(r){n.width=3840,n.height=2160,a.A(6);break}if(!(i=t)){a.A(7);break}return S(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:i=a.h;case 7:i&&(n.width=1920,n.height=1080);case 6:k(a,3);break;case 2:z("Failed to check canDisplayType:",E(a));case 3:return a.return(n)}}))},i.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},i.xh=function(){return!1},i.ed=function(){return!0};var Qy="Android",Zy="Fuchsia",ev="Linux";function tv(){Wy.call(this);var e=this;this.i=new ae((function(){var e=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return e?parseInt(e[2],10):null})),this.g=new ae((function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"})),this.h=new ae((function(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("win32")})),this.u=new ae((function(){return!navigator.userAgent.match(/Edge?\//)||!e.h.value()})),this.o=new ae((function(){return navigator.userAgent.includes("sony.hbbtv.tv")})),this.m=new ae((function(){return navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase():!!navigator.userAgent.includes("Android")}))}function nv(){Wy.apply(this,arguments)}function rv(){Wy.call(this),this.g=new ae((function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null}))}function iv(){Wy.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}function av(){Wy.apply(this,arguments)}function ov(){Wy.call(this),this.i=new ae((function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")})),this.h=new ae((function(){return navigator.userAgent.includes("SOPOpenBrowser")})),this.g=new ae((function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}))}function sv(){Wy.call(this);var e=this;this.h=function(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(t){t=JSON.parse(t),e.g=t.rj["tv.model.supportHDR"]||t.rj["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({Bm:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(e){W("WebOS: getConfigs call failed",e)}}if($y()&&(se=function(){return new Jy}),p(tv,Wy),(i=tv.prototype).za=function(){return this.i.value()},i.Nb=function(){return this.g.value()},i.Ed=function(e){return!!wi(e)&&("Edge"===this.g.value()&&this.h.value())},i.Gi=function(){return"Edge"===this.g.value()&&this.h.value()},i.df=function(){return"Edge"===this.g.value()&&this.h.value()},i.Pc=function(){return this.u.value()},i.Wa=function(e){if(Wy.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},i.gh=function(){return"Edge"===this.g.value()||this.o.value()},i.ed=function(){if("GECKO"===this.Ha()){var e=this.za();return null!==e?e>=100:Wy.prototype.ed.call(this)}return Wy.prototype.ed.call(this)},i.Rg=function(e){return"GECKO"===this.Ha()?e.startsWith("com.microsoft.playready.recommendation"):Wy.prototype.Rg.call(this,e)},ue=function(){return new tv},p(nv,Wy),(i=nv.prototype).za=function(){return null},i.Nb=function(){return"Hisense"},i.Ua=function(){return"TV"},i.cc=function(){return!1},i.jc=function(){var t={width:1920,height:1080},n=null;if(e.Hisense_Get4KSupportState)try{n=e.Hisense_Get4KSupportState()}catch(e){}return null==n&&(n=navigator.userAgent.includes("UHD")),n&&(t.width=3840,t.height=2160),Promise.resolve(t)},i.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(se=function(){return new nv}),p(rv,Wy),(i=rv.prototype).Nb=function(){return"PlayStation"},i.Ua=function(){return"CONSOLE"},i.Ha=function(){return"WEBKIT"},i.za=function(){return this.g.value()},i.cc=function(){return!1},i.fd=function(){return!1},i.Pc=function(){return!1},i.rh=function(){return 4===this.za()},i.jc=function(){var t,n,r,i;return L((function(a){switch(a.g){case 1:return t={width:1920,height:1080},n=!1,x(a,2),S(a,e.msdk.device.getDisplayInfo(),4);case 4:r=a.h,n="4K"===r.resolution,k(a,3);break;case 2:return E(a),x(a,5),S(a,e.msdk.device.getDisplayInfoImmediate(),7);case 7:i=a.h,n="4K"===i.resolution,k(a,3);break;case 5:W("PlayStation: Failed to get the display info:",E(a));case 3:return n&&(t.width=3840,t.height=2160),a.return(t)}}))},i.Wa=function(e){return Wy.prototype.Wa.call(this,e),4===this.za()&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},i.gh=function(){return 4===this.za()},i.Kf=function(){return 4!==this.za()},navigator.userAgent.includes("PlayStation")&&(se=function(){return new rv}),p(iv,Wy),(i=iv.prototype).za=function(){return this.g},i.Nb=function(){return"Tizen"},i.Ha=function(){return"CHROMIUM"},i.Ua=function(){return"TV"},i.Ed=function(){return!0},i.oe=function(){return 3===this.za()},i.cc=function(){return!1},i.fd=function(){var e=this.za();return null!==e?e>=4:Wy.prototype.fd.call(this)},i.Pc=function(){return!1},i.re=function(){return this.g&&this.h?5===this.g?this.h>=5:this.g>5:Wy.prototype.re.call(this)},i.jc=function(){var t=e.devicePixelRatio;t={width:e.screen.width*t>1920?3840:1920,height:e.screen.height*t>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var n=webapis.systeminfo.getMaxVideoResolution();t.width=n.width,t.height=n.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(t.width=7680,t.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(t.width=3840,t.height=2160)}catch(e){W("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},i.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=2!==this.za(),3===this.za()&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},i.Ei=function(){var e=[];return null!==this.g&&this.g<5&&e.push("opus"),e},i.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch(t){return Wy.prototype.sd.call(this,e)}return"SDR"},i.si=function(){return!0},i.ti=function(){return 3===this.za()},navigator.userAgent.includes("Tizen")&&(se=function(){return new iv}),p(av,Wy),av.prototype.za=function(){return null},av.prototype.Nb=function(){return"Vizio"},av.prototype.Ua=function(){return"TV"},av.prototype.cc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(se=function(){return new av}),p(ov,Wy),(i=ov.prototype).za=function(){return this.g.value()},i.Nb=function(){return"WebKit STB"},i.Ua=function(){return"TV"},i.Ha=function(){return"WEBKIT"},i.cc=function(){return!1},i.fd=function(){var e=this.g.value();return null===e||e>=15},i.Ed=function(){return this.h.value()},i.jc=function(){return Promise.resolve({width:e.screen.width*e.devicePixelRatio,height:e.screen.height*e.devicePixelRatio})},i.Kf=function(){return!this.i.value()},i.Jf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(se=function(){return new ov}),p(sv,Wy),(i=sv.prototype).za=function(){return this.h},i.Nb=function(){return"WebOS"},i.Ua=function(){return"TV"},i.Ha=function(){return"CHROMIUM"},i.cc=function(){return!1},i.fd=function(){var e=this.za();return null!==e?e>3:Wy.prototype.fd.call(this)},i.Pc=function(){var e=this.za();return null!==e?e>6:Wy.prototype.Pc.call(this)},i.re=function(){var e=this.za();return null!==e?e>3:Wy.prototype.re.call(this)},i.jc=function(){var t={width:1920,height:1080};try{var n=JSON.parse(e.PalmSystem.deviceInfo);t.width=Math.max(1920,n.screenWidth),t.height=Math.max(1080,n.screenHeight)}catch(e){W("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},i.Wa=function(e){return Wy.prototype.Wa.call(this,e),3===this.za()&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},i.sd=function(e){return null==this.g?(W("WebOS: getConfigs call haven't finished"),Wy.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"},i.$i=function(){return!1},i.ed=function(){var e=this.za();return null!==e?e>=6:Wy.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var uv=new sv;se=function(){return uv}}function lv(){Wy.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}function cv(){var e=null;try{e="undefined"!=typeof Windows?Windows:chrome.webview.hostObjects.sync.Windows}catch(e){}return e}function dv(e,t,n){this.type=e,this.ea=t,this.segments=n||null}function fv(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=void 0===r?null:r}function pv(e,t){return t?e.toString():(t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function hv(e,t){return(e=e.attributes.filter((function(e){return e.name==t}))).length?e[0]:null}function gv(e,t,n){return(e=hv(e,t))?e.value:n||null}function mv(e,t){if(!(e=hv(e,t)))throw new Be(2,4,4023,t);return e.value}function yv(e,t,n){n=void 0===n?[]:n,this.ea=t,this.g=e,this.uc=n}function vv(e,t){this.name=e,this.value=t}function bv(e,t){return e.filter((function(e){return e.name==t}))}function wv(e,t){return e.filter((function(e){return mv(e,"TYPE")==t}))}function Sv(e,t){for(var n=(e=g(e)).next();!n.done;n=e.next())if((n=n.value).name===t)return n;return null}function Tv(e,t,n){return n=void 0===n?0:n,(e=Sv(e,t))?Number(e.value):n}function xv(e,t,n){return t?Av(e,[t],n):[]}function Av(e,t,n){if(!t.length)return[];var r=t;return n&&n.size&&(r=t.map((function(e){return kv(e,n)}))),rt(e,r)}function kv(e,t){if(!t||!t.size)return e;var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var r=(n=g(n)).next();!r.done;r=n.next()){var i=(r=r.value).slice(2,r.length-1),a=t.get(i);if(!a)throw new Be(2,4,4039,i);e=e.replace(r,a)}return e}function Ev(){this.g=0}function Iv(e,t){var n=(t=(t=He(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new Be(2,4,4015);t=0;for(var r=!0,i=g(n),a=i.next();!a.done;a=i.next())if(a=a.value,/^#(?!EXT)/m.test(a)||r)r=!1;else{if(a=Cv(e,a),--e.g,Mv.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(r=!0)}for(i=[],r=!0,a=0;a<n.length;a++){var o=n[a],s=n[a+1];if(/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Cv(e,o),Dv.includes(o.name)){if(1!=t)throw new Be(2,4,4017);o=n.splice(a,n.length-a),n=[],r=[],a=[],s=null;for(var u=(o=g(o)).next();!u.done;u=o.next())u=u.value,/^(#EXT)/.test(u)?(u=Cv(e,u),Mv.includes(u.name)?i.push(u):"EXT-X-MAP"==u.name?s=u:"EXT-X-PART"==u.name?a.push(u):"EXT-X-PRELOAD-HINT"==u.name?"PART"==gv(u,"TYPE")?a.push(u):"MAP"==gv(u,"TYPE")&&(u.name="EXT-X-MAP",s=u):r.push(u)):/^#(?!EXT)/m.test(u)||(u=u.trim(),s&&r.push(s),n.push(new yv(u,r,a)),r=[],a=[]);return a.length&&(s&&r.push(s),n.push(new yv("",r,a))),new dv(t,i,n)}i.push(o),"EXT-X-STREAM-INF"==o.name&&(o.attributes.push(new vv("URI",s)),r=!0)}}return new dv(t,i)}function Cv(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Be(2,4,4016,t);t=n[1];var r,i=n[2];if(n=[],i){var a;(a=Ot(i=new Rt(i),/^([^,=]+)(?:,|$)/g))&&(r=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Ot(i,o);)n.push(new vv(a[1],a[2]||a[3])),Lt(i)}return new fv(e,t,n,r)}p(lv,Wy),(i=lv.prototype).za=function(){return this.h},i.Nb=function(){return"Xbox"},i.Ua=function(){return"CONSOLE"},i.Ha=function(){return this.g?"EDGE":"CHROMIUM"},i.Ed=function(){return!0},i.df=function(){return!0},i.Ui=function(){return this.g},i.jc=function(){var e={width:1920,height:1080},t=cv();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,r=t.Media.Protection.ProtectionCapabilityResult;t=null;do{t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(t===r.maybe);t===r.probably&&(e.width=3840,e.height=2160)}catch(e){W("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},i.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},i.xh=function(){return!1},(navigator.userAgent.includes("Xbox One")||null!==cv())&&(se=function(){return new lv}),fv.prototype.toString=function(e){var t="#"+this.name,n=this.attributes?this.attributes.filter((function(t){return!e||!e.has(t.name)})).map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&n.unshift(this.value),n.length>0&&(t+=":"+n.join(",")),t};var Mv="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),Dv="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function Pv(){}function Rv(e,t){try{var n=Lv(e);return Pi({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(e){return Mi(e)}}function Lv(t){var n=t.split(":");if(n.length<2||"data"!=n[0])throw new Be(2,1,1004,t);if((n=n.slice(1).join(":").split(",")).length<2)throw new Be(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var i=!1;return n.length>1&&"base64"==n[n.length-1]&&(i=!0,n.pop()),{data:i?Ze(t):Ke(t),contentType:r}}function Ov(){var t=this;this.g=this.h=null,this.G=1,this.B=new Map,this.M=new Map,this.C=new Map,this.C.set("video",new Map),this.C.set("audio",new Map),this.C.set(lt,new Map),this.C.set("image",new Map),this.tc=(new Map).set("com.apple.streamingkeydelivery",(function(n,r,i){return function(t,n,r,i){var a,o,s,u,l;return L((function(c){if(1==c.g){if("video/mp2t"==r)throw new Be(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new Be(2,4,4041);if(a=mv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(a))return c.return(null);o="cenc","SAMPLE-AES"==a&&(o="cbcs"),s=mv(n,"URI"),u=it("com.apple.fps",o,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],s);var d=new me(s).Db.replace(/-/g,"").toLowerCase();return(l=32===d.length&&/^[0-9a-f]+$/.test(d)?d:null)||!i?c.A(2):S(c,xb(t,i),3)}return 2!=c.g&&(l=c.h),l&&u.keyIds.add(l),c.return(u)}))}(t,n,r,i)})).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",(function(e){var n=mv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";"SAMPLE-AES"==n&&(r="cbcs");var i=mv(e,"URI");n=Lv(i.split("?")[0]),i=i.split("?")[0],t.I.has(i)||(n=Ne(n.data),t.I.set(i,n)),r=it("com.widevine.alpha",r,[{initDataType:"cenc",initData:t.I.get(i)}]),(e=gv(e,"KEYID"))&&r.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(r)}else e=Promise.resolve(null);return e})).set("com.microsoft.playready",(function(e){var t=mv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),n=it("com.microsoft.playready",n,[{initDataType:"cenc",initData:t=ya(e=Ne((e=Lv((e=mv(e,"URI")).split("?")[0])).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]),(e=qt(["<PLAYREADY>",Qe(e),"</PLAYREADY>"].join("\n")))&&(n.licenseServerUri=Xg(e)),n=Promise.resolve(n)}else n=Promise.resolve(null);return n})).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",(function(e){var n=mv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";"SAMPLE-AES"==n&&(r="cbcs");var i=mv(e,"URI");n=Lv(i.split("?")[0]),i=i.split("?")[0],t.I.has(i)||(n=Ne(n.data),t.I.set(i,n)),r=it("com.huawei.wiseplay",r,[{initDataType:"cenc",initData:t.I.get(i)}]),(e=gv(e,"KEYID"))&&r.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(r)}else e=Promise.resolve(null);return e})),this.ob=new Set,this.i=new Map,this.l=null,this.H="",this.Ta=new Ev,this.N=-1,this.ma=1/0,this.aa=this.xc=this.kb=!1,this.F=new xr((function(){t.X&&!t.g.continueLoadingWhenPaused&&(t.V.Ma(t.X,"timeupdate"),t.X.paused)?t.V.Ba(t.X,"timeupdate",(function(){return yb(t)})):yb(t)})),this.Fa=Pb,this.m=null,this.ib=0,this.o=1/0,this.ab=this.Sa=this.S=0,this.$=new _i,this.J=new Map,this.K=new Map,this.Da=new Map,this.wa=new Map,this.O=new Map,this.xa=new Map,this.ya=new Map,this.wc=this.oa=!1,this.Zb=new H(5),this.j=null,this.R=!0,this.V=new ne,this.u=this.X=null,this.ac=function(){return!1},this.I=new Map}function Nv(e,t){return vb(e)?e.C.get(t.type):t.mf}function jv(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h,y,v,b,w,A,I,C,M,D,P,R,O,N,j,U,_,B,F,V,H,G,q;return L((function(L){switch(L.g){case 1:if(t.stream.isAudioMuxedInVideo)return L.return();for(n=[],r=g(t.P()),i=r.next();!i.done;i=r.next())a=i.value,o=new me(a),s=o.g,t.Re&&(t.Qb>=0&&s.add("_HLS_msn",String(t.Qb)),t.Rb>=0&&s.add("_HLS_part",String(t.Rb))),t.Se&&s.add("_HLS_skip","YES"),Pe(s)&&we(o,Se(s.toString())),n.push(o.toString());return x(L,2),S(L,mb(e,n,!0).promise,4);case 4:u=L.h,k(L,3);break;case 2:throw l=E(L),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return L.return();if(1!=(c=Iv(e.Ta,u.data)).type)throw new Be(2,4,4017);return(d=u.uri)==u.originalUri||t.P().includes(d)||t.Af.push(d),f=bv(c.ea,"EXT-X-DEFINE"),p=Vv(e,f,d),h=t.stream,y=Nv(e,t),S(L,nb(e,c,h.mimeType,t.P,p),5);case 5:for(v=L.h,b=v.keyIds,w=v.drmInfos,A=v.encrypted,I=v.Lh,h.encrypted||!A||I||(h.encrypted=!0),function(e,t){return e.size===t.size&&[].concat(m(e)).every((function(e){return t.has(e)}))}(h.keyIds,b)||(h.keyIds=b,h.drmInfos=w,e.h.newDrmInfo(h)),C=db(e,c,y,p,t.P,t.type),M=C.segments,(D=C.bandwidth)&&(h.bandwidth=D),P=Hu(h),R=g(M),O=R.next();!O.done;O=R.next())(N=O.value).ba&&(N.ba.xd=P);h.segmentIndex.fe(M,e.l.Hb()),M.length&&(j=Tv(c.ea,"EXT-X-MEDIA-SEQUENCE",0),_=(U=Sv(c.ea,"EXT-X-SKIP"))?Number(gv(U,"SKIPPED-SEGMENTS")):0,B=eb(j,M),F=B.Qb,V=B.Rb,t.Qb=F+_,t.Rb=V,H=y.get(j),h.segmentIndex.Ya(H)),(G=Ru(h.segmentIndex))&&(t.Wc=G.startTime,q=M[M.length-1],t.Lc=q.endTime),Sv(c.ea,"EXT-X-ENDLIST")&&(t.Yd=!0),ab(e,c),cb(e,c.ea,h.type,p,t.P),T(L)}}))}function Uv(e,t,n){n=void 0!==n&&n;for(var r=-1==e.N,i=g(t),a=i.next();!a.done;a=i.next()){var o=(a=a.value).stream.segmentIndex,s=Nv(e,a);if(o=Ru(o))for(var u=(s=g(s)).next();!u.done;u=s.next()){var l=(u=g(u.value)).next().value;if(u.next().value==o.startTime){r&&(e.N=Math.max(e.N,l)),a.og=l;break}}}if(!(e.N<0))for(r=(t=g(t)).next();!r.done;r=t.next())(Qv(e,(r=r.value).type)||n)&&(i=r.stream.segmentIndex)&&((a=e.N-r.og)>0&&(i.g.splice(0,a),i=Ru(i))&&(i=-i.startTime,r.stream.segmentIndex.offset(i),_v(e,r,i)))}function _v(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.Lc+=n;for(var r=g(e=Nv(e,t)),i=r.next();!i.done;i=r.next()){var a=g(i.value);i=a.next().value,a=a.next().value,e.set(i,a+n)}t.P()}}function Bv(e,t,n){var r,i,a,o,s;return L((function(u){switch(u.g){case 1:return t?(r=Xi,i=ol(t.P(),t.Ic(),t.Fc(),e.g.retryParameters),S(u,wb(e,i,r,{type:t instanceof Fo?1:0}).promise,2)):u.return({mimeType:null,data:null});case 2:if(a=u.h,o=a.data,!t.aesKey){u.A(3);break}return S(u,al(o,t.aesKey,n),4);case 4:o=u.h;case 3:return t instanceof Fo?t.pe(o,!0):t.pe(o),(s=a.headers["content-type"])&&(s=s.split(";")[0].toLowerCase()),u.return({mimeType:s,data:o})}}))}function Fv(e){if(vb(e)){if(e.Fa==Lb){for(var t=1/0,n=1/0,r=g(e.i.values()),i=r.next();!i.done;i=r.next())(i=i.value).stream.segmentIndex&&"text"!=i.stream.type&&!i.stream.isAudioMuxedInVideo&&(t=Math.min(t,i.Lc),n=Math.min(n,i.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Hf(t)}}else e.l.Ab(Yv(e));if(!e.l.o)for(n=(t=g(e.i.values())).next();!n.done;n=t.next())!(n=n.value).stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=Ru(n.stream.segmentIndex))&&n.h&&e.l.oh(n.h);e.l.lf()}function Vv(e,t,n){n=new me(n).g;for(var r=new Map,i=(t=g(t)).next();!i.done;i=t.next()){var a=i.value,o=gv(a,"NAME"),s=gv(a,"VALUE");i=gv(a,"QUERYPARAM"),a=gv(a,"IMPORT"),o&&s&&(r.has(o)||r.set(o,s)),i&&(o=n.get(i)[0])&&!r.has(o)&&r.set(i,o),a&&(i=e.B.get(a))&&r.set(a,i)}return r}function Hv(e){var t=new Set([rr(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Fb((function(n){n.mimeType&&t.add(rr(n.mimeType,e.codecs))})),e.fullMimeTypes=t}function Gv(e,t,n){for(var r={audio:[],video:[]},i=new Map,a=[],o=!1,s=!1,u=g(t),l=u.next();!l.done;l=u.next()){var c=l.value;l=gv(c,"AUDIO");var d=gv(c,"VIDEO"),f=l||d;f&&(a.includes(f)||a.push(f),(c=gv(c,"PATHWAY-ID"))&&i.set(f,c),l?o=!0:d&&(s=!0))}a.length&&n.length&&function(e,t,n){for(var r={},i=(t=g(t=t.filter((function(e){var t=gv(e,"URI")||"";return"SUBTITLES"!=(e=gv(e,"TYPE"))&&(""!=t||"AUDIO"==e)})))).next();!i.done;i=t.next()){var a=pv(i=i.value,!e.j);r[a]?r[a].push(i):r[a]=[i]}for(var o in r)zv(e,r[o],n,!1)}(e,n=n.filter((function(e){return a.includes(mv(e,"GROUP-ID"))})),i),n=(i=a.sort().join(","))&&e.M.has(i)?e.M.get(i):[],o?r.audio.push.apply(r.audio,m(n)):s&&r.video.push.apply(r.video,m(n)),s=!1;var p=t.map((function(e){return mv(e,"URI")}));return o=r.audio.find((function(e){return e&&e.P().find((function(e){return p.includes(e)}))})),u=st("video",n=qv(e,t[0])),(l=st("audio",n))&&!u?(o="audio",s=r.audio.length>0&&!r.audio.some((function(e){return e.stream.isAudioMuxedInVideo}))):!r.audio.length&&!r.video.length&&l&&u?(o="video",n=[[u,l].join()]):r.audio.length&&o?(o="audio",s=!0):o=r.video.length&&!r.audio.length?"audio":"video",s||(t=function(e,t,n,r){for(var i=e.G++,a=[],o=g(t),s=o.next();!s.done;s=o.next()){var u=s.value;s=mv(u,"URI"),u=gv(u,"PATHWAY-ID"),e.j&&u&&Lm(e.j,i,u,s),a.push(s)}if(o=a.sort().join(",")+n.sort().join(","),e.i.has(o))return e.i.get(o);s=a.join(",");e:{if(t=gv(t[0],"CLOSED-CAPTIONS"),"video"==r){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if("NONE"!=t){t=e.J.get(t);break e}e.R=!1}else if(!t&&e.J.size)for(t=(t=g(e.J.keys())).next();!t.done;t=t.next()){t=e.J.get(t.value);break e}}t=null}return n=ot(r,n),r=Xv(e,i,a,n,r,null,!1,s,null,t,null,!1,null,!1),e.i.set(o,r),r}(e,t,n,o),i&&e.g.enableAudioGroups&&(t.stream.groupId=i),"audio"==t.stream.type&&"audio"===o&&r.audio.some((function(e){return e.stream.isAudioMuxedInVideo}))&&(e=r.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),r[t.stream.type]=[t]),r}function qv(e,t){return t=gv(t,"CODECS")||"",e.aa=t.length>0,e.aa||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),il(t.split(/\s*,\s*/))}function Kv(e,t,n,r,i,a,o,s,u,l,c,d){for(var f=g(n),p=f.next();!p.done;p=f.next())gb(p.value.stream,i,a,o,s,u,null);for(i=e.g.disableVideo,n.length&&!i||(n=[null]),i&&(t=t.filter((function(e){return!e.stream.isAudioMuxedInVideo}))),i=e.g.disableAudio,t.length&&!i||(t=[null]),i=[],a=(t=g(t)).next();!a.done;a=t.next())for(a=a.value,s=(o=g(n)).next();!s.done;s=o.next()){var h=s.value;(s=a?a.stream:null)&&(s.drmInfos=l,s.keyIds=c),(u=h?h.stream:null)&&(u.drmInfos=l,u.keyIds=c,e.g.disableIFrames||oi(u,d)),u&&!s&&(u.bandwidth=r),!u&&s&&(s.bandwidth=r),f=a?a.stream.drmInfos:null,p=h?h.stream.drmInfos:null,h=h?h.P().sort().join(","):"";var m=a?a.P().sort().join(","):"",y=[];s&&s.codecs&&y.push(s.codecs),u&&u.codecs&&y.push(u.codecs),h=[h,m,y.sort()].join("-"),s&&u&&!vi(f,p)||e.ob.has(h)||(s={id:e.G++,language:s?s.language:"und",disabledUntilTime:0,primary:!!s&&s.primary||!!u&&u.primary,audio:s,video:u,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.push(s),e.ob.add(h))}return i}function zv(e,t,n,r){r=void 0===r||r;for(var i=[],a=[],o=new Map,s=g(t),u=s.next(),l={};!u.done;l={ii:void 0},u=s.next())u=u.value,l.ii=++e.G,l=function(e){return function(){return"shaka://hls-muxed"+e.ii}}(l),l=r?mv(u,"URI"):gv(u,"URI")||l(),u=mv(u,"GROUP-ID"),i.push(l),a.push(u),o.set(u,l);if(r=a.sort().join(","),u=t[0],t="",(s=function(e){return"subtitles"==(e=mv(e,"TYPE").toLowerCase())&&(e=lt),e}(u))==lt)t=gv(u,"CODECS")||"";else for(l=(a=g(a)).next();!l.done;l=a.next())if(l=l.value,e.K.has(l)){t=e.K.get(l);break}if(a=i.sort().join(","),e.i.has(a))return e.i.get(a);if(l=e.G++,e.j)for(var c=(o=g(o)).next();!c.done;c=o.next()){var d=g(c.value);c=d.next().value,d=d.next().value,(c=n.get(c))&&Lm(e.j,l,c,d)}n=gv(u,"LANGUAGE"),o=gv(u,"NAME"),c="YES"==gv(u,"DEFAULT"),d="audio"==s?function(e){return(e=gv(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}(u):null;var f="audio"==s&&function(e){return!!(e=gv(e,"CHANNELS"))&&2==(e=e.split("/")).length&&("JOC"===e[1]||e[1].includes("ATMOS"))}(u),p=gv(u,"CHARACTERISTICS"),h="YES"==gv(u,"FORCED");return u="audio"==s?function(e){return(e=gv(e,"SAMPLE-RATE"))?parseInt(e,10):null}(u):null,(i=Xv(e,l,i,t,s,n,c,o,d,null,p,h,u,f)).stream&&e.g.enableAudioGroups&&(i.stream.groupId=r),e.M.has(r)?e.M.get(r).push(i):e.M.set(r,[i]),e.i.set(a,i),i}function Wv(e,t){var n="video",r=mv(t,"URI"),i=gv(t,"CODECS")||"";if("mjpg"==i&&(n="image"),e.i.has(r))return e.i.get(r);var a=gv(t,"LANGUAGE"),o=gv(t,"NAME"),s=gv(t,"CHARACTERISTICS");return n=Xv(e,e.G++,[r],i,n,a,!1,o,null,null,s,!1,null,!1),a=g((i=gv(t,"RESOLUTION"))?i.split("x"):[null,null]),i=a.next().value,a=a.next().value,n.stream.width=Number(i)||void 0,n.stream.height=Number(a)||void 0,(t=gv(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(r,n),n}function Xv(e,t,n,r,i,a,o,s,u,l,c,d,f,p){function h(t){var n,h,v,w,A,I,C,M,D,P,R,O,N,j,U,_,B,F;return L((function(L){switch(L.g){case 1:return n=ct,x(L,2),S(L,t.promise,4);case 4:if(h=L.h,t.aborted)return L.return();if((v=h.uri)!=h.originalUri&&(b.P().includes(v)||b.Af.push(v)),1!=(w=Iv(e.Ta,h.data)).type)throw new Be(2,4,4017);return A=bv(w.ea,"EXT-X-DEFINE"),I=Vv(e,A,v),C=!1,(!e.aa&&e.g.hls.disableCodecGuessing||e.R&&i==n.Aa&&!e.g.hls.disableClosedCaptionsDetection)&&w.segments.length>0&&(e.R=!1,C=!0),M=!e.aa&&e.g.hls.disableCodecGuessing,D=vb(e),S(L,Zv(e,0,I,w,m,r,i,a,o,s,u,l,c,d,f,p,void 0,C,M),5);case 5:if(P=L.h,t.aborted)return L.return();R=P.stream,ib(e,w),vb(e)&&!D&&ob(e,w),b.Wc=P.Wc,b.Lc=P.Lc,b.Se=P.Se,b.Re=P.Re,b.Yd=P.Yd,b.mf=P.mf,b.Qb=P.Qb,b.Rb=P.Rb,y.segmentIndex=R.segmentIndex,y.encrypted=R.encrypted,y.drmInfos=R.drmInfos,y.keyIds=R.keyIds,y.mimeType=R.mimeType,y.bandwidth=y.bandwidth||R.bandwidth,y.codecs=y.codecs||R.codecs,y.closedCaptions=y.closedCaptions||R.closedCaptions,y.width=y.width||R.width,y.height=y.height||R.height,y.hdr=y.hdr||R.hdr,y.colorGamut=y.colorGamut||R.colorGamut,y.frameRate=y.frameRate||R.frameRate,"und"==y.language&&"und"!=R.language&&(y.language=R.language),y.language=y.language||R.language,y.channelsCount=y.channelsCount||R.channelsCount,y.audioSamplingRate=y.audioSamplingRate||R.audioSamplingRate,Hv(y),y.drmInfos.length&&e.h.newDrmInfo(y),O=!1,(!l&&y.closedCaptions||l&&y.closedCaptions&&l.size!=y.closedCaptions.size)&&(O=!0),e.m&&O&&e.h.makeTextStreamsForClosedCaptions(e.m),i==n.Na&&(N=Ru(R.segmentIndex))&&N.ba&&(y.mimeType="application/mp4",Hv(y)),j=Hu(y),y.segmentIndex.Fb((function(e){e.ba&&(e.ba.xd=j)})),function(e){if(!e.m)return!1;for(var t=[],n=[],r=(e=g(e.m.variants)).next();!r.done;r=e.next())(r=r.value).video&&t.push(r.video),r.audio&&n.push(r.audio);return!(t.length>0&&!t.some((function(e){return e.segmentIndex}))||n.length>0&&!n.some((function(e){return e.segmentIndex})))}(e)&&(e.xc?$v(e,[b]):(e.xc=!0,U=Array.from(e.i.values()),_=U.filter((function(e){return e.stream.segmentIndex})),$v(e,_),Fv(e),(B=e.o)>0&&e.F.ia(B))),cb(e,w.ea,y.type,I,m),e.m&&(e.m.startTime=e.u),k(L,0);break;case 2:if(F=E(L),y.closeSegmentIndex(),7001===F.code)return L.return();if(!e.h.disableStream(y))throw F;T(L)}}))}function m(){return e.j&&n.length>1?Om(e.j,t):b.Af.concat(Av([e.H],n,e.B))}var y=tb(e,r,i,a,o,s,u,l,c,d,f,p);n.some((function(e){return e.startsWith("shaka://hls-muxed")}))&&(y.isAudioMuxedInVideo=!0,y.mimeType="video/mp2t",Hv(y));var v,b={stream:y,type:i,Af:[],Wc:0,Lc:0,mf:new Map,Se:!1,Re:!1,Yd:!1,og:-1,Qb:-1,Rb:-1,P:m},w=null;return y.createSegmentIndex=function(){return w||(y.isAudioMuxedInVideo?(y.segmentIndex=new Pu([]),Promise.resolve()):(v=mb(e,b.P(),!0),w=new Promise((function(e){e(h(v))}))))},y.closeSegmentIndex=function(){w&&!y.segmentIndex&&v.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),w=null},b}function Yv(e){for(var t=1/0,n=(e=g(e.i.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Lc));return t}function Jv(e,t){for(var n=[],r=(t=g(t)).next();!r.done;r=t.next())(r=r.value).segmentIndex&&r.segmentIndex.Fb((function(e){n.push(e)}));e.l.ie(n)}function $v(e,t){if(!vb(e))for(var n=Yv(e),r=g(t),i=r.next();!i.done;i=r.next())i.value.stream.segmentIndex.pd(0,n);Jv(e,t.map((function(e){return e.stream}))),n=(r=Array.from(e.i.values()).filter((function(e){return e.stream.segmentIndex}))).some((function(e){return"audio"==e.stream.type})),i=r.some((function(e){return"video"==e.stream.type})),r=vb(e)&&!e.kb,n=!vb(e)&&e.kb&&!(n&&i),e.g.hls.ignoreManifestProgramDateTime||r||n?Uv(e,t,r):(function(e,t){if(e.ma==1/0)for(var n=(t=g(t)).next();!n.done;n=t.next())null!=(n=Ru(n.value.stream.segmentIndex))&&null!=n.h&&(e.ma=Math.min(e.ma,n.h));if((t=e.ma)!=1/0)for(var r=(n=g(e.i.values())).next();!r.done;r=n.next())if(!Qv(e,(r=r.value).type)){var i=r.stream.segmentIndex;if(null!=i){var a=Ru(i);if(a)if(null==a.h)z("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.P(),"Expect AV sync issues!");else for(_v(e,r,a.h-t-a.startTime),i=(r=g(i)).next();!i.done;i=r.next())i.value.yh(t)}}}(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&Uv(e,t))}function Qv(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function Zv(e,t,n,r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b){var w,T,A,I,C,M,D,P,R,O,N,j,U,_,B,F,V,H,G,q,K,z,W,X,Y,J,$,Q,Z;return v=void 0===v||v,b=void 0===b||b,L((function(t){switch(t.g){case 1:if(w=r.segments||[],T=w.every((function(e){return!!Sv(e.ea,"EXT-X-GAP")})),!w.length||T)throw new Be(2,4,4053);if(function(e,t){var n=Sv(t.ea,"EXT-X-PLAYLIST-TYPE");t=Sv(t.ea,"EXT-X-ENDLIST"),t=n&&"VOD"==n.value||t,n=n&&"EVENT"==n.value&&!t,n=!t&&!n,bb(e,t?Pb:n?Lb:Rb)}(e,r),vb(e)&&ab(e,r),A=vb(e)?e.C.get(o):new Map,I=db(e,r,A,n,i,o),C=I.segments,M=I.bandwidth,N=O=R=P=D=null,!(C.length>0&&v)){t.A(2);break}return S(t,function(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h,m,y,v;return L((function(b){if(1==b.g)return n=nl(e.g.hls.mediaPlaylistFullMimeType),t.length?(r=hb(e,t),i=r.segment,a=r.segmentIndex,o=i.P(),(s=Ec(o[0]))&&(u=Ab.get(s))?b.return(nl(u)):S(b,Promise.all([Bv(e,i.ba,0),Bv(e,i,a)]),2)):b.return(n);if(l=b.h,c=l[1].mimeType,d=l[0].data,f=l[1].data,p="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),h=["audio/mp4","video/mp4","video/iso.segment"],!(m=i.ba||h.includes(c))&&Cs(Ne(f))){var w=f,T=e.g.disableAudio,x=e.g.disableVideo,A=e.g.disableText,k=Ne(w),E=(new As).parse(k),I=E.Vd();k=E.Jg();var C=[],M=!1,D=!1;if(!T)switch(I.audio){case"aac":case"aac-loas":E.ub().length&&(C.push("mp4a.40.2"),M=!0);break;case"mp3":E.ub().length&&(C.push("mp4a.40.34"),M=!0);break;case"ac3":E.ub().length&&(C.push("ac-3"),M=!0);break;case"ec3":E.ub().length&&(C.push("ec-3"),M=!0);break;case"opus":E.ub().length&&(C.push("opus"),M=!0)}if(!x)switch(I.video){case"avc":k.codec?C.push(k.codec):C.push("avc1.42E01E"),D=!0;break;case"hvc":k.codec?C.push(k.codec):C.push("hvc1.1.6.L93.90"),D=!0;break;case"av1":C.push("av01.0.01M.08"),D=!0}if(C.length){if(T=M&&!D,x=new Map,D&&!A){for((A=new At("video/mp2t")).xf(w),D=(w=g(A.Vf())).next();!D.done;D=w.next())D=D.value,x.set(D,D);A.Nd()}k={type:T?"audio":"video",mimeType:"video/mp2t",codecs:C.join(", "),language:null,height:k.height,width:k.width,channelCount:null,sampleRate:null,closedCaptions:x,ve:null,colorGamut:null,frameRate:k.frameRate}}else k=null;if(y=k)return b.return(y)}else if((m||p.includes(s))&&(v=rl(d,f,e.g.disableText)))return b.return(v);return c?b.return(nl(c)):b.return(n)}))}(e,C),3);case 3:j=t.h,o!=j.type&&vb(e)&&(e.C.set(j.type,e.C.get(o)),e.C.set(o,new Map)),o=j.type,s=j.language,c=j.channelCount,h=j.sampleRate,e.g.disableText||(d=j.closedCaptions),P=j.height,D=j.width,R=j.ve,O=j.colorGamut,N=j.frameRate,b&&(y=j.mimeType,a=j.codecs);case 2:if(y){t.A(4);break}return S(t,function(e,t,n,r){var i,a,o,s,u,l,c,d,f,p,h,g,m;return L((function(y){switch(y.g){case 1:return i=Xi,a=hb(e,r),2==(o=a.segment).status?y.return(pb(t)):(u=o.P(),(l=Ec(u[0]))&&(c=Mb.get(t),(d=c.get(l))||(d=Ab.get(l)))?y.return(d):(s=fb(t,n))?y.return(s):(p=1,h=Gi(u,e.g.retryParameters),x(y,2),h.method="HEAD",S(y,wb(e,h,i,{type:p}).promise,4)));case 4:g=y.h,f=g.headers["content-type"],k(y,3);break;case 2:if(!(m=E(y))||1002!=m.code&&1001!=m.code){y.A(3);break}return h.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(h.headers.Range="bytes=0-0"),S(y,wb(e,h,i,{type:p}).promise,6);case 6:g=y.h,f=g.headers["content-type"];case 3:if(!f){y.A(7);break}if("application/octet-stream"!=(s=f.toLowerCase().split(";")[0])){y.A(8);break}if(g.data.byteLength){y.A(9);break}return h.method="GET",S(y,wb(e,h,i,{type:p}).promise,10);case 10:g=y.h;case 9:Cs(Ne(g.data))&&(s="video/mp2t");case 8:if("application/octet-stream"!=s)return y.return(s);case 7:return y.return(pb(t))}}))}(e,o,a,C),5);case 5:y=t.h,o!=lt||a||"application/mp4"!=y||!C[0]||C[0].ba||(y="text/vtt");case 4:return S(t,nb(e,r,y,i,n),6);case 6:if(U=t.h,_=U.drmInfos,B=U.keyIds,F=U.encrypted,V=U.Lh,F&&!_.length&&!V)throw new Be(2,4,4026);return(H=tb(e,a,o,s,u,l,c,d,f,p,h,m)).encrypted=F&&!V,H.drmInfos=_,H.keyIds=B,H.mimeType=y,M&&(H.bandwidth=M),Hv(H),"video"==o&&(D||P||R||O)&&gb(H,D,P,N,R,null,O),vb(e)&&ab(e,r),G=C[0].startTime,q=C[C.length-1],K=q.endTime,z=new Pu(C),H.segmentIndex=z,X=!!(W=Sv(r.ea,"EXT-X-SERVER-CONTROL"))&&null!=hv(W,"CAN-SKIP-UNTIL"),Y=!!W&&null!=hv(W,"CAN-BLOCK-RELOAD"),J=Tv(r.ea,"EXT-X-MEDIA-SEQUENCE",0),$=eb(J,C),Q=$.Qb,Z=$.Rb,t.return({stream:H,type:o,Af:[],P:i,Wc:G,Lc:K,Se:X,Re:Y,Yd:!1,og:-1,Qb:Q,Rb:Z,mf:A})}}))}function eb(e,t){e=e+t.length-1;var n=-1;if(!t.length)return{Qb:++e,Rb:n};var r=(t=t[t.length-1]).g;return t.g.length?(n=r.length-1,r[r.length-1].isPreload()||(e++,n=0),{Qb:e,Rb:n}):(e++,t.o&&(n=0),{Qb:e,Rb:n})}function tb(e,t,n,r,i,a,o,s,u,l,c,d){var f=fb(n,t)||pb(n),p=[];if(u)for(var h=(u=g(u.split(","))).next();!h.done;h=u.next())p.push(h.value);return u=void 0,h=null,n==lt?u=p.includes("public.accessibility.transcribes-spoken-dialog")&&p.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":p.includes("public.accessibility.describes-video")&&(h="visually impaired"),p.length||"subtitle"!==u||p.push("subtitle"),Hv(e={id:e.G++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:f,codecs:t,kind:n==lt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Rr(r||"und"),originalLanguage:r,label:a,type:n,primary:i,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:l,channelsCount:o,audioSamplingRate:c,spatialAudio:d,closedCaptions:s,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:h,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}),e}function nb(e,t,n,r,i){var a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,T,x,A,k,E,I,C,M,D,P,R,O,N,j;return L((function(L){switch(L.g){case 1:if(a=new Map,!e.g.ignoreDrmInfo&&t.segments)for(o=g(t.segments),s=o.next();!s.done;s=o.next())if(u=s.value,l=bv(u.ea,"EXT-X-KEY"),c=null,l.length)for(c=sb(e,t,u.ea,r,i),d=g(l),f=d.next();!f.done;f=d.next())p=f.value,a.set(p,c);m=h=!1,y=[],v=new Set,b=g(a),w=b.next();case 2:if(w.done){L.A(4);break}if(T=w.value,x=g(T),A=x.next().value,k=x.next().value,I=k,"NONE"==(C=mv(E=A,"METHOD"))){L.A(3);break}if(h=!0,M=gv(E,"KEYFORMAT")||"identity",D=null,Sb(C)){m=!0,L.A(3);break}if("identity"==M)return S(L,Tb(e,E,n,r,I,i),11);if(!(P=e.tc.get(M))){R=null,L.A(9);break}return S(L,P(E,n,I),10);case 10:R=L.h;case 9:D=R,L.A(6);break;case 11:D=L.h;case 6:if(D){if(D.keyIds)for(O=g(D.keyIds),N=O.next();!N.done;N=O.next())j=N.value,v.add(j);y.push(D)}case 3:w=b.next(),L.A(2);break;case 4:return L.return({drmInfos:y,keyIds:v,encrypted:h,Lh:m})}}))}function rb(t,n,r,i,a){if(!e.crypto||!e.crypto.subtle)throw W("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new Be(2,4,4042);var o=0,s=gv(n,"IV","");if(s){var u=et(s.substr(2));if(16!=u.byteLength)throw new Be(2,4,4048)}else o=Tv(r.ea,"EXT-X-MEDIA-SEQUENCE",0);var l=xv(i(),mv(n,"URI"),a),c=l.sort().join("");if(r=n.toString()+"-"+o+"-"+c,!t.wa.has(r)){var d={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:o};switch(mv(n,"METHOD")){case"AES-256":d.bitsKey=256;break;case"AES-256-CTR":d.bitsKey=256,d.blockCipherMode="CTR"}d.fetchKey=function(){var n,r,i,a;return L((function(o){if(1==o.g)return t.O.has(c)||(n=Gi(l,t.g.retryParameters),r=wb(t,n,6).promise,t.O.set(c,r)),S(o,t.O.get(c),2);if(3!=o.g){if(!(i=o.h).data||i.data.byteLength!=d.bitsKey/8)throw new Be(2,4,4049);return a={name:"CTR"==d.blockCipherMode?"AES-CTR":"AES-CBC",length:d.bitsKey},S(o,e.crypto.subtle.importKey("raw",i.data,a,!0,["decrypt"]),3)}d.cryptoKey=o.h,d.fetchKey=void 0,T(o)}))},t.wa.set(r,d)}return t.wa.get(r)}function ib(e,t){null==e.u&&(t=Sv(t.ea,"EXT-X-START"))&&(e.u=Number(mv(t,"TIME-OFFSET")))}function ab(e,t){var n=1/0,r=t.segments;if(r.length)for(var i=r.length-1;i>=0;){var a=Sv(r[i].ea,"EXTINF");if(a){n=Number(a.value.split(",")[0]);break}i--}if(!(r=Sv(t.ea,"EXT-X-TARGETDURATION")))throw new Be(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(i=Sv(t.ea,"EXT-X-PART-INF"))&&(e.S=Number(mv(i,"PART-TARGET"))),t=Sv(t.ea,"EXT-X-SERVER-CONTROL"),e.oa&&e.S?(e.o=e.wc?5*e.S<=n?Math.min(e.S,e.o):Math.min(n,e.o):Math.min(e.S,e.o),e.ab=t?Number(mv(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?hv(t,"HOLD-BACK"):null,e.Sa=n?Number(n.value):0),e.ib=Math.max(r,e.ib)}function ob(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.ab)n=e.ab;else if(e.Sa)n=e.Sa;else for(var r=t.segments.length,i=r-Math.min(r,e.g.hls.liveSegmentsDelay);i<r;i++){var a=Sv(t.segments[i].ea,"EXTINF");n=a?n+Number(a.value.split(",")[0]):n+e.ib}e.u&&e.u<0&&(n=Math.min(-e.u,n),e.u+=n),e.l.Qi(0),e.l.nh(n),e.l.cd(!1)}function sb(e,t,n,r,i){var a=Sv(n,"EXT-X-MAP");if(!a)return null;var o=mv(a,"URI"),s=xv(r(),o,i);if(o=[s.toString(),gv(a,"BYTERANGE","")].join("-"),!e.Da.has(o)){for(var u=void 0,l=null,c=!1,d=(n=g(n)).next();!d.done;d=n.next())"EXT-X-KEY"==(d=d.value).name?Sb(c=mv(d,"METHOD"))&&d.id<a.id?(c=!1,u=rb(e,d,t,r,i)):c="NONE"!=c:"EXT-X-BYTERANGE"==d.name&&d.id<a.id&&(l=d);t=function(e,t,n,r,i){var a=0,o=null;return!(t=gv(t,"BYTERANGE"))&&n&&(t=n.value),t&&(a=t.split("@"),o=Number(a[0]),a=Number(a[1]),o=a+o-1,r&&((n=o+1-a)%16&&(o+=16-n%16))),new _o((function(){return e}),a,o,null,null,null,r,i)}(s,a,l,u,c),e.Da.set(o,t)}return e.Da.get(o)}function ub(t,n,r,i,a,o,s,u,l,c){var d=i.ea,f=Sv(d,"EXTINF"),p=0,h=0,m=null;i.uc.length&&(t.m.isLowLatency=!0);var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var v=Sv(d,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=an(v.value),t.kb=!0)}var b=Go;if(Sv(d,"EXT-X-GAP")&&(t.m.gapCount++,b=2),!f){if(0==i.uc.length)throw new Be(2,4,4024,"EXTINF");if(!t.oa)return null}var w=[];v=!1;var S=null,T=!1,x=!1;if(t.oa&&i.uc.length){p=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var A=y,k={},E=0;E<i.uc.length;k={Qf:void 0,ke:void 0},E++){var I=i.uc[E],C=0==E?r:w[w.length-1],M=0==E?a:C.endTime,D=Number(gv(I,"DURATION"))||t.S;if(D){var P=M+D,R=0,L=null;if("EXT-X-PRELOAD-HINT"==I.name?(R=(R=gv(I,"BYTERANGE-START"))?Number(R):0,(C=gv(I,"BYTERANGE-LENGTH"))?L=R+Number(C)-1:R&&(L=Number.MAX_SAFE_INTEGER)):(R=(L=g(lb(C,R=gv(I,"BYTERANGE")))).next().value,L=L.next().value),k.ke=gv(I,"URI"),k.ke){C=Go,"YES"==gv(I,"GAP")&&(t.m.gapCount++,C=2,T=!0),k.Qf=null;var O=function(e){return function(){return null==e.Qf&&(e.Qf=xv(u(),e.ke,o)),e.Qf}}(k);p&&R>=0&&null!=L&&(S=O,v=!0),M=new Fo(M,P,O,R,L,n,0,0,1/0,[],"",null,A,C,c),"EXT-X-PRELOAD-HINT"==I.name&&(M.Qg(),x=!0),"YES"!=gv(I,"INDEPENDENT")&&E>0&&M.wd(),(I=l)||(w.length&&w[0].mimeType?I=w[0].mimeType:k.ke&&(k=Ec(k.ke),I=Mb.get(s).get(k)||null)),I&&(M.mimeType=I,Db.has(I)&&(M.ba=null)),w.push(M),A&&(A+=D)}}}}if(f){if(0==(f=Number(f.value.split(",")[0])))return null;p=a+f}else{if(!w.length)return null;p=w[w.length-1].endTime}v&&(T||0!=w[0].startByte?(v=!1,S=null):w=[]),(f=Sv(d,"EXT-X-BYTERANGE"))?(h=(m=g(lb(r,f.value))).next().value,m=m.next().value):w.length&&(h=w[0].startByte,m=w[w.length-1].endByte),r="",f=null,"image"==s&&(r="1x1",s=Sv(d,"EXT-X-TILES"))&&(r=mv(s,"LAYOUT"),(s=gv(s,"DURATION"))&&(f=Number(s)));var N=null;return n=new Fo(a,p,(function(){return S?S():(null==N&&(N=xv(u(),i.g,o)),N||[])}),h,m,n,0,0,1/0,w,r,f,y,b,c,w.length>0&&!!i.g),l&&(n.mimeType=l,Db.has(l)&&(n.ba=null)),v&&(t.wc=!0,n.oi(),x&&n.Qg()),n}function lb(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),r=(n=n[1]?Number(n[1]):e.endByte+1)+t-1),[n,r]}function cb(e,t,n,r,i){if("video"==n||"audio"==n){var a=e.l.m;if(a&&!Qv(e,n))for(t=(t=bv(t,"EXT-X-DATERANGE")).filter((function(e){return null!=hv(e,"START-DATE")})).sort((function(e,t){return(e=mv(e,"START-DATE"))<(t=mv(t,"START-DATE"))?-1:e>t?1:0})),n=0;n<t.length;n++){var o=t[n];try{var s=an(mv(o,"START-DATE"));if(!isNaN(s)){var u=Math.max(0,s-a),l=null,c=gv(o,"END-DATE");if(c){var d=an(c);if(!isNaN(d)&&(l=d-a)<0)continue}if(null==l){var f=gv(o,"DURATION")||gv(o,"PLANNED-DURATION");if(f){var p=parseFloat(f);if(isNaN(p)||(l=u+p),s-a+p<0)continue}}var h=gv(o,"CLASS")||"com.apple.quicktime.HLS",m="YES"==gv(o,"END-ON-NEXT");if(null==l&&m){for(var y=n+1;y<t.length;y++){if(h==(gv(t[y],"CLASS")||"com.apple.quicktime.HLS")){var v=an(mv(t[y],"START-DATE"));if(!isNaN(v)&&v&&v>s){l=Math.max(0,v-a);break}}}if(null==l)continue}y=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var b=[],w=g(o.attributes),S=w.next();!S.done;S=w.next()){var T=S.value;if(!y.includes(T.name)){var x=kv(T.value,r);"X-ASSET-URI"!=T.name&&"X-ASSET-LIST"!=T.name||(x=xv(i(),T.value,r)[0]),b.push({key:T.name,description:"",data:x,mimeType:null,pictureType:null})}}b.length>1&&e.h.onMetadata(h,u,l,b)}}catch(e){}}}}function db(e,t,n,r,i,a){function o(e){if(!(e=Ec(e)))return null;var t=Mb.get(a).get(e);return t||(t=Ab.get(e)),t}var s=t.segments,u=null,l=null,c=null,d=null,f=void 0,p=Tv(t.ea,"EXT-X-DISCONTINUITY-SEQUENCE",-1),h=Tv(t.ea,"EXT-X-MEDIA-SEQUENCE",0),m=Sv(t.ea,"EXT-X-SKIP"),y=m?Number(gv(m,"SKIPPED-SEGMENTS")):0,v=h+y,b=0;vb(e)&&n.has(v)&&(b=n.get(v)),0===b&&e.Fa==Lb&&n.size>0&&!n.has(v)&&null!=e.l.i&&(b=e.l.Hb());var w=[],S=null;m=[];for(var T=0;T<s.length;T++){var x=s[T];(v=Sv(x.ea,"EXT-X-MAP"))&&v.id!==l&&(u=sb(e,t,x.ea,i,r),l=v.id);var A="";(v=x.g)&&(A=Ec(v)),A!==d&&(c=o(v),d=A),A=0==T?b:S.endTime,v=h+y+T,Sv(x.ea,"EXT-X-DISCONTINUITY")&&(p++,S&&S.ba&&(S.ba.g=A));for(var k=g(x.ea),E=k.next();!E.done;E=k.next())"EXT-X-KEY"==(E=E.value).name&&(f=Sb(mv(E,"METHOD"))?rb(e,E,t,i,r):void 0);if(n.set(v,A),A=ub(e,u,S,x,A,r,a,i,c,f)){if((S=Tv(x.ea,"EXT-X-BITRATE"))?(m.push({bitrate:S,duration:A.endTime-A.startTime}),A.bandwidth=S):A.endByte?(x=Vo(A))&&(x=8*x/(S=A.endTime-A.startTime)/1e3,m.push({bitrate:x,duration:S}),A.bandwidth=x):m.length&&((S=m.pop()).duration+=A.endTime-A.startTime,m.push(S),A.bandwidth=S.bitrate),A.bandwidth)for(x=(S=g(A.g)).next();!x.done;x=S.next())x.value.bandwidth=A.bandwidth;S=A,A.i=p,Qv(e,a)&&null!=e.N&&v<e.N||w.push(A)}}if(t=void 0,m.length&&(t=m.reduce((function(e,t){return e+t.duration}),0),t=Math.round(m.reduce((function(e,t){return e+t.bitrate*t.duration}),0)/t*1e3)),m=w.some((function(e){return null!=e.h})))for(n={},r=0;r<w.length;n={We:void 0,Ve:void 0,Oe:void 0,Zc:void 0,Ne:void 0},r++)if(n.Zc=w[r],null==n.Zc.h)for(n.Ve=0,n.We=r,i=function(e){return function(){var t=w[e.We];if(t){if(null!=t.h)return t.h+e.Ve;e.Ve-=t.endTime-t.startTime,e.We+=1}return null}}(n),n.Ne=0,n.Oe=r,s=function(e){return function(){var t=w[e.Oe];if(t){if(t!=e.Zc&&(e.Ne+=t.endTime-t.startTime),null!=t.h)return t.h+e.Ne;--e.Oe}return null}}(n);null==n.Zc.h;)n.Zc.h=s(),null==n.Zc.h&&(n.Zc.h=i());if(m)for(r=(n=g(w)).next();!r.done;r=n.next())for(r=(i=r.value).h,s=(i=g(i.g)).next();!s.done;s=i.next())(s=s.value).h=r,r+=s.endTime-s.startTime;if(n=e.ma,m&&n!=1/0&&!Qv(e,a))for(m=(e=g(w)).next();!m.done;m=e.next())m.value.yh(n);return{segments:w,bandwidth:t}}function fb(e,t){if(e==lt){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function pb(e){return e==lt?"text/vtt":Mb.get(e).get("mp4")}function hb(e,t){for(var n=t[e=vb(e)?Math.trunc((t.length-1)/2):0];2==n.Jc()&&e+1<t.length;)n=t[++e];return{segment:n,segmentIndex:e}}function gb(e,t,n,r,i,a,o){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=i||void 0,e.videoLayout=a||void 0,e.colorGamut=o||void 0)}function mb(e,t,n){return wb(e,Gi(t,e.g.retryParameters),0,{type:n?2:3})}function yb(e){var t,n,r,i,a,o;return L((function(s){switch(s.g){case 1:return e.h?(x(s,2),t=Date.now(),S(s,e.update(),4)):s.return();case 4:n=Date.now(),vb(e)&&(r=(n-t)/1e3,e.Zb.sample(1,r),i=e.g.updatePeriod>0?e.g.updatePeriod:e.o,a=Math.max(0,i-G(e.Zb)),e.F.ia(a)),k(s,3);break;case 2:if(o=E(s),!e.h)return s.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(o),s.return();o.severity=1,e.h.onError(o),e.F.ia(.1);case 3:if(!e.h)return s.return();e.h.onManifestUpdated(),T(s)}}))}function vb(e){return e.Fa!=Pb}function bb(e,t){e.Fa=t,e.l&&e.l.cd(!vb(e)),vb(e)||e.F.stop()}function wb(e,t,n,r){if(!e.$)throw new Be(2,7,7001);return r||(r={}),r.isPreload=e.ac(),t=e.h.networkingEngine.request(n,t,r),Bi(e.$,t),t}function Sb(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function Tb(t,n,r,i,a,o){var s,u,l,c,d,f,p,h,g,m,y;return L((function(v){switch(v.g){case 1:if("video/mp2t"==r)throw new Be(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new Be(2,4,4041);if(s=mv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(s))return v.return(null);if((u=xv(i(),mv(n,"URI"),o))[0].startsWith("data:text/plain;base64,")){l=tt(Ze(u[0].split("data:text/plain;base64,").pop())),v.A(2);break}return c=u.sort().join(""),t.xa.has(c)||(d=Gi(u,t.g.retryParameters),f=wb(t,d,6).promise,t.xa.set(c,f)),S(v,t.xa.get(c),3);case 3:p=v.h,l=tt(p.data);case 2:if(h="00000000000000000000000000000000",!a){v.A(4);break}return S(v,xb(t,a),5);case 5:(g=v.h)&&(h=g);case 4:return(m=new Map).set(h,l),y="cenc","SAMPLE-AES"==s&&(y="cbcs"),v.return(at(m,y))}}))}function xb(e,t){var n,r,i;return L((function(a){return 1==a.g?(n=null,e.ya.has(t)?(n=e.ya.get(t),a.A(2)):(r=ol(t.P(),t.Ic(),t.Fc(),e.g.retryParameters),S(a,wb(e,r,Xi,{type:0}).promise,3))):(2!=a.g&&(i=a.h,t.pe(i.data),n=function(e){var t=null;return(new aa).box("moov",oa).box("trak",oa).box("mdia",oa).box("minf",oa).box("stbl",oa).T("stsd",sa).box("encv",ua).box("enca",la).box("sinf",oa).box("schi",oa).T("tenc",(function(e){(e=e.reader).Y(),e.Y(),e.Y(),e.Y(),e=e.Tb(16,!1),t=tt(e)})).parse(e,!0),t}(i.data),e.ya.set(t,n)),a.return(n))}))}V("shaka.net.DataUriPlugin",Pv),Pv.parse=Rv,Vi("data",Rv),(i=Ov.prototype).configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.ac=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.W()&&this.F.Jb()},i.start=function(e,t){var n,r=this;return L((function(i){return 1==i.g?(r.h=t,r.oa=t.isLowLatencyMode(),S(i,mb(r,[e]).promise,2)):3!=i.g?(n=i.h,r.H=n.uri,S(i,function(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h,y,v,b,w,A,k,I,C,M,D,P,R,O,N,j,U,_,B,F,V,H,G,q,K,z,W,X,Y,J,$;return L((function(Z){switch(Z.g){case 1:return n=ct,r=Iv(e.Ta,t),i=bv(r.ea,"EXT-X-DEFINE"),a=[],o=[],s=[],e.l=new uu(null,0),e.l.cd(!0),u=function(){return[e.H]},l=null,c=new Map,1==r.type?(e.R=!1,F=bv(r.ea,"EXT-X-DEFINE"),c=Vv(e,F,e.H),l=n.Aa,V="",H=new Map,S(Z,Zv(e,e.G++,c,r,u,"",l,V,!0,"Media Playlist",null,H,null,!1,null,!1),7)):(function(e,t){for(var n=new me(e.H).g,r=(t=g(t)).next();!r.done;r=t.next()){var i=r.value;r=gv(i,"NAME");var a=gv(i,"VALUE");i=gv(i,"QUERYPARAM"),r&&a&&(e.B.has(r)||e.B.set(r,a)),i&&(r=n.get(i)[0])&&!e.B.has(r)&&e.B.set(i,r)}}(e,i),d=bv(r.ea,"EXT-X-MEDIA"),f=bv(r.ea,"EXT-X-STREAM-INF"),p=bv(r.ea,"EXT-X-IMAGE-STREAM-INF"),h=bv(r.ea,"EXT-X-I-FRAME-STREAM-INF"),y=bv(r.ea,"EXT-X-SESSION-KEY"),v=bv(r.ea,"EXT-X-SESSION-DATA"),b=bv(r.ea,"EXT-X-CONTENT-STEERING"),function(e,t){for(var n=(t=g(t)).next();!n.done;n=t.next()){var r=n.value,i=gv(r,"DATA-ID");n=gv(r,"URI");var a=gv(r,"LANGUAGE");r=gv(r,"VALUE"),i=(new Map).set("id",i),n&&i.set("uri",xv([e.H],n,e.B)[0]),a&&i.set("language",a),r&&i.set("value",r),n=new Oi("sessiondata",i),e.h&&e.h.onEvent(n)}}(e,v),S(Z,function(e,t){var n,r,i,a,o,s;return L((function(u){if(!e.h||!e.g)return u.return();for(r=g(t),i=r.next();!i.done;i=r.next())if(a=i.value,o=gv(a,"PATHWAY-ID"),s=gv(a,"SERVER-URI"),o&&s){e.j=new Dm(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=o,n=Pm(e.j,s);break}return S(u,n,0)}))}(e,b),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(w=[],A=g(f),k=A.next(),I={};!k.done;I={Yi:void 0},k=A.next())C=k.value,(M=gv(C,"SUPPLEMENTAL-CODECS"))&&(I.Yi=M.split(/\s*,\s*/).map((function(e){return e.split("/")[0]})),D=C.attributes.map(function(e){return function(t){var n=t.name,r=t.value;return"CODECS"==n&&(r=e.Yi.join(","),(t=t.value.split(",")).length>1&&(t=st("audio",t))&&(r+=","+t)),new vv(n,r)}}(I)),w.push(new fv(C.id,C.name,D,null)));for(f.push.apply(f,m(w)),P=[],R=g(h),O=R.next(),N={};!O.done;N={Zi:void 0},O=R.next())j=O.value,(U=gv(j,"SUPPLEMENTAL-CODECS"))&&(N.Zi=U.split(/\s*,\s*/).map((function(e){return e.split("/")[0]})),_=j.attributes.map(function(e){return function(t){var n=t.name;return t=t.value,"CODECS"==n&&(t=e.Zi.join(",")),new vv(n,t)}}(N)),P.push(new fv(j.id,j.name,_,null)));h.push.apply(h,m(P))}return function(e,t){for(var n=(t=g(t)).next();!n.done;n=t.next()){var r=n.value,i=gv(r,"AUDIO");n=gv(r,"VIDEO");var a=gv(r,"SUBTITLES");if(r=qv(e,r),a){var o=st(lt,r);e.K.set(a,o),Q(r,o)}i&&((a=st("audio",r))||(a=e.g.hls.defaultAudioCodec),e.K.set(i,a)),n&&((i=st("video",r))||(i=e.g.hls.defaultVideoCodec),e.K.set(n,i))}}(e,f),function(e,t){t=wv(t,"CLOSED-CAPTIONS"),e.R=0==t.length;for(var n=(t=g(t)).next();!n.done;n=t.next()){var r=n.value,i=gv(r,"LANGUAGE");n=Rr(i||"und"),i||(i=gv(r,"NAME"))&&(n=i),i=mv(r,"GROUP-ID"),r=mv(r,"INSTREAM-ID").replace("SERVICE","svc"),e.J.get(i)||e.J.set(i,new Map),e.J.get(i).set(r,n)}}(e,d),B=function(e,t){return t.map((function(t){return"video"!==(t=Wv(e,t)).stream.type?null:t.stream})).filter((function(e){return e}))}(e,h),S(Z,function(e,t,n,r,i,a,o){var s,u,l,c,d,f,p,h,y,v,b,w,T,x,A,k,E,I,C,M,D,P,R,O,N,j,U,_,B,F,V,H,G,q,K,z;return L((function(L){switch(L.g){case 1:if(s=[],u=new Set,e.g.ignoreDrmInfo||!(n.length>0)){L.A(2);break}l=g(n),c=l.next();case 3:if(c.done){L.A(2);break}if(d=c.value,f=mv(d,"METHOD"),p=gv(d,"KEYFORMAT")||"identity",h=null,"NONE"==f){L.A(4);break}if(Sb(f)){y=xv(i(),mv(d,"URI"),a),v=y.sort().join(""),e.O.has(v)||(b=Gi(y,e.g.retryParameters),w=wb(e,b,6).promise,e.O.set(v,w)),L.A(4);break}if("identity"==p)return S(L,Tb(e,d,"",i,null,a),12);if(!(T=e.tc.get(p))){x=null,L.A(10);break}return S(L,T(d,"",null),11);case 11:x=L.h;case 10:h=x,L.A(6);break;case 12:h=L.h;case 6:if(h){if(h.keyIds)for(A=g(h.keyIds),k=A.next();!k.done;k=A.next())E=k.value,u.add(E);s.push(h)}case 4:c=l.next(),L.A(3);break;case 2:for(I={},C=g(t),M=C.next();!M.done;M=C.next())D=M.value,P=pv(D,!e.j),I[P]?I[P].push(D):I[P]=[D];for(O in R=[],I)N=I[O],j=N[0],U=gv(j,"FRAME-RATE"),_=Number(gv(j,"AVERAGE-BANDWIDTH"))||Number(mv(j,"BANDWIDTH")),B=gv(j,"RESOLUTION"),F=g(B?B.split("x"):[null,null]),V=F.next().value,H=F.next().value,G=gv(j,"VIDEO-RANGE"),(q=gv(j,"REQ-VIDEO-LAYOUT"))&&q.includes(",")&&(K=q.split(",").filter((function(e){return"CH-STEREO"==e||"CH-MONO"==e})),q=K[0]),q=q||"CH-MONO",z=Gv(e,N,r),R.push.apply(R,m(Kv(e,z.audio,z.video,_,V,H,U,G,q,s,u,o)));return L.return(R.filter((function(e){return null!=e})))}}))}(e,f,y,d,u,e.B,B),5);case 5:return a=Z.h,o=function(e,t){var n=wv(t,"SUBTITLES");t=n.map((function(t){if(e.g.disableText)return null;try{return zv(e,[t],new Map).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}));for(var r=(n=g(n)).next();!r.done;r=n.next()){var i=mv(r.value,"GROUP-ID");if((r=e.K.get(i))&&(i=e.M.get(i)))for(var a=(i=g(i)).next();!a.done;a=i.next())(a=a.value).stream.codecs=r,a.stream.mimeType=fb(lt,r)||pb(lt),Hv(a.stream)}return t.filter((function(e){return e}))}(e,d),S(Z,function(e,t,n){var r,i;return L((function(a){return 1==a.g?(r=t.map((function(t){var n,r;return L((function(i){if(1==i.g)return e.g.disableThumbnails?i.return(null):(x(i,2),S(i,function(e,t){var n,r,i,a,o,s,u,l,c,d;return L((function(f){return 1==f.g?(n=mv(t,"URI"),r=gv(t,"CODECS","jpeg")||"",e.i.has(n)?f.return(e.i.get(n)):(i=gv(t,"LANGUAGE"),a=gv(t,"NAME"),o=gv(t,"CHARACTERISTICS"),s=Xv(e,e.G++,[n],r,"image",i,!1,a,null,null,o,!1,null,!1),(u=gv(t,"RESOLUTION"))?S(f,s.stream.createSegmentIndex(),3):f.A(2))):(2!=f.g&&(l=Ru(s.stream.segmentIndex),(c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1])),s.stream.closeSegmentIndex()),(d=gv(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(d)),e.i.set(n,s),f.return(s))}))}(e,t),4));if(2!=i.g)return n=i.h,i.return(n.stream);if(r=E(i),e.g.hls.ignoreImageStreamFailures)return i.return(null);throw r}))})).concat(n.map((function(t){if(e.g.disableThumbnails)return null;try{var n=Wv(e,t);return"image"!==n.stream.type?null:n.stream}catch(t){if(e.g.hls.ignoreImageStreamFailures)return null;throw t}}))),S(a,Promise.all(r),2)):(i=a.h,a.return(i.filter((function(e){return e}))))}))}(e,p,h),6);case 6:s=Z.h,Z.A(3);break;case 7:G=Z.h,e.i.set(e.H,G),G.stream&&(q=Hu(G.stream),G.stream.segmentIndex.Fb((function(e){e.ba&&(e.ba.xd=q)}))),l=G.stream.type,K=!0,(e.g.disableAudio&&"audio"==G.type||e.g.disableVideo&&"video"==G.type&&!G.stream.codecs.includes(","))&&(K=!1),K&&a.push({id:0,language:Rr(V||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==G.type?G.stream:null,video:"video"==G.type?G.stream:null,bandwidth:G.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new Be(2,7,7001);if(ib(e,r),1==r.type&&(vb(e)&&(ob(e,r),z=e.o,e.F.ia(z)),W=Array.from(e.i.values()),$v(e,W),Fv(e),cb(e,r.ea,l,c,u)),e.m={presentationTimeline:e.l,variants:a,textStreams:o,imageStreams:s,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.aa||!e.g.hls.disableCodecGuessing){Z.A(8);break}for(X=[],Y=g(e.m.variants),J=Y.next();!J.done;J=Y.next())($=J.value).audio&&""===$.audio.codecs&&X.push($.audio.createSegmentIndex()),$.video&&""===$.video.codecs&&X.push($.video.createSegmentIndex());return S(Z,Promise.all(X),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),T(Z)}}))}(r,n.data),3)):i.return(r.m)}))},i.stop=function(){this.F&&(this.F.stop(),this.F=null);var e=[];return this.$&&(e.push(this.$.destroy()),this.$=null),this.g=this.h=null,this.ob.clear(),this.m=null,this.i.clear(),this.M.clear(),this.K.clear(),this.B.clear(),this.Da.clear(),this.wa.clear(),this.O.clear(),this.xa.clear(),this.ya.clear(),this.I.clear(),this.j&&this.j.destroy(),this.V&&(this.V.release(),this.V=null),Promise.all(e)},i.update=function(){var e,t,n,r,i,a,o,s,u,l,c=this;return L((function(d){if(1==d.g){if(!vb(c))return d.return();for(e=[],t=Array.from(c.i.values()),c.o=1/0,c.m.gapCount=0,n=t.filter((function(e){return e.stream.segmentIndex})),r=g(n),i=r.next();!i.done;i=r.next())a=i.value,e.push(jv(c,a));return S(d,Promise.all(e),2)}for(Jv(c,n.map((function(e){return e.stream}))),o=n.some((function(e){return 0==e.Yd})),n.length&&!o&&bb(c,Pb),o&&Fv(c),s=g(n),u=s.next();!u.done;u=s.next())(l=u.value).stream.isAudioMuxedInVideo||!l.stream.segmentIndex||Ru(l.stream.segmentIndex)||c.h.disableStream(l.stream);T(d)}))},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(e){this.j&&this.j.banLocation(e)},i.setMediaElement=function(e){this.X=e},V("shaka.hls.HlsParser",Ov);var Ab=(new Map).set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),kb=(new Map).set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),Eb=(new Map).set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),Ib=(new Map).set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),Cb=(new Map).set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Mb=(new Map).set("audio",kb).set("video",Eb).set("text",Ib).set("image",Cb),Db=new Set(["video/mp2t"].concat(m(pr))),Pb="VOD",Rb="EVENT",Lb="LIVE";function Ob(e){return Xg(e)}Qa("application/x-mpegurl",(function(){return new Ov})),Qa("application/vnd.apple.mpegurl",(function(){return new Ov}));var Nb=(new Map).set("com.microsoft.playready",Ob).set("com.microsoft.playready.recommendation",Ob).set("com.microsoft.playready.software",Ob).set("com.microsoft.playready.hardware",Ob);function jb(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new H(5),this.o=new xr((function(){!function(e){var t;L((function(n){switch(n.g){case 1:return x(n,2),S(n,Ub(e),4);case 4:k(n,3);break;case 2:t=E(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();T(n)}}))}(e)})),this.C=new _i,this.m=new Map,this.B=function(){return!1}}function Ub(e){var t,n,r,i,a,o,s;return L((function(u){if(1==u.g)return t=Gi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),i=n.request(0,t,{type:5,isPreload:e.B()}),Bi(e.C,i),S(u,i.promise,2);if(a=u.h,!e.h)return u.return();a.uri&&!e.l.includes(a.uri)&&e.l.unshift(a.uri);var l=a.uri,c=a.data,d=e.g.mss.manifestPreprocessor;if(d!=tc){if(de("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),!(c=vy(c,"SmoothStreamingMedia")))throw new Be(2,4,4046,l);d(c),c=Ke(c.outerHTML)}var f=Gt(c,"SmoothStreamingMedia");if(!f)throw new Be(2,4,4046,l);if((l=e.g.mss.manifestPreprocessorTXml)!=nc&&l(f),e.i||(e.i=new uu(null,0)),l=en(f,"IsLive",fn,!1))throw new Be(2,4,4047);e.i.cd(!l),d=en(f,"TimeScale",cn,1e7),c=en(f,"DVRWindowLength",cn),l&&(0===c||isNaN(c))&&(c=1/0);var p,h=en(f,"CanSeek",fn,!1);for(0===c&&h&&(c=1/0),h=null,c&&c>0&&(h=c/d),l&&!isNaN(e.g.availabilityWindowOverride)&&(h=e.g.availabilityWindowOverride),null==h&&(h=1/0),e.i.Hf(h),c=en(f,"Duration",cn,1/0),l||e.i.Ab(c/d),l={variants:[],textStreams:[],timescale:d,duration:c/d},h=Xt(f,"Protection"),d=e.g.mss.keySystemsBySystemId,c=[],p=(h=g(h)).next();!p.done;p=h.next())c=c.concat(Xt(p.value,"ProtectionHeader"));if(c.length){for(h=[],p=0;p<c.length;p++){var y=c[p],v=y.attributes.SystemID.toLowerCase(),b=d[v];if(b){var w;e:{if(w=Wg(y))for(var x=(w=g($t(w,"DATA"))).next();!x.done;x=w.next())if(x=Qt(x.value,"KID")){w=Ze(Yt(x)),w=tt(w=new Uint8Array([w[3],w[2],w[1],w[0],w[5],w[4],w[7],w[6]].concat(m(w.slice(8)))));break e}w=null}v=it(b,"cenc",v=[{initData:ya(x=Ze(Yt(y)),v=et(v.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:w}]),w&&v.keyIds.add(w),(b=Nb.get(b))&&(v.licenseServerUri=b(y)),h.push(v)}}d=h}else d=[];for(p=d,h=[],d=[],c=[],y=(f=g(f=Xt(f,"StreamIndex"))).next();!y.done;y=f.next()){b=Xt(y=y.value,"QualityLevel"),v=l.timescale,w=l.duration,x=Xt(y,"c");for(var A=[],k=0,E=0;E<x.length;++E){var I=x[E],C=x[E+1],M=en(I,"t",cn),D=en(I,"d",cn);if(I=en(I,"r",un),!D)break;if(M=null!=M?M:k,(I=I||0)&&I--,I<0)if(C){if(null==(C=en(C,"t",cn)))break;if(M>=C)break;I=Math.ceil((C-M)/D)-1}else{if(w==1/0)break;if(M/v>=w)break;I=Math.ceil((w*v-M)/D)-1}for(C=0;C<=I;++C)k=M+D,A.push({start:M/v,end:k/v,Eh:M}),M=k}for(v=A,w=(b=g(b)).next();!w.done;w=b.next())(w=_b(e,y,w.value,v,p,l))&&("audio"!=w.type||e.g.disableAudio?"video"!=w.type||e.g.disableVideo?w.type!=lt||e.g.disableText||c.push(w):d.push(w):h.push(w))}for(f=[],p=(h=g(h.length>0?h:[null])).next();!p.done;p=h.next())for(p=p.value,A=(y=g(d.length>0?d:[null])).next();!A.done;A=y.next())v=(b=f).push,w=e,x=p,A=A.value,E=0,x&&x.bandwidth&&x.bandwidth>0&&(E+=x.bandwidth),A&&A.bandwidth&&A.bandwidth>0&&(E+=A.bandwidth),w={id:w.u++,language:x?x.language:"und",disabledUntilTime:0,primary:!!x&&x.primary||!!A&&A.primary,audio:x,video:A,bandwidth:E,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(b,w);l.variants=f,l.textStreams=c,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.lf()),Promise.resolve(),o=Date.now(),s=(o-r)/1e3,e.F.sample(1,s),T(u)}))}function _b(e,t,n,r,i,a){var o=t.attributes.Type;if("audio"!==o&&"video"!==o&&"text"!==o)return W("Ignoring unrecognized type:",o),null;var s=t.attributes.Language,u=e.u++,l=en(n,"Bitrate",ln),c=en(n,"MaxWidth",ln),d=en(n,"MaxHeight",ln),f=en(n,"Channels",ln),p=en(n,"SamplingRate",ln),h=a.duration;r.length&&(h=r[r.length-1].end-r[0].start);var m=e.i.getDuration();e.i.Ab(Math.min(h,m));var y={id:u,originalId:t.attributes.Name||String(u),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:d||void 0,kind:"",encrypted:i.length>0,drmInfos:i,keyIds:new Set,language:Rr(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:f,audioSamplingRate:p,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:h,timescale:a.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((i=t.attributes.Subtype)&&((i=Fb.get(i))&&y.roles.push(i),"main"===i&&(y.primary=!0)),null!==(i=n.attributes.FourCC)&&""!==i||(i=t.attributes.FourCC),!i)if("audio"===o)i="AAC";else if("video"===o)return W('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!Bb.includes(i.toUpperCase()))return W("Codec not supported:",i),null;switch(n=function(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=i[e],"AACH"===n?(n=new Uint8Array(4),e=i[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,(t=new Uint16Array(2))[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):((n=new Uint8Array(2))[0]=16|r>>1,n[1]=r<<7|t<<3,(t=new Uint16Array(1))[0]=(n[0]<<8)+n[1],t[0].toString(16))}(n,o,i,y),y.mssPrivateData.codecPrivateData=n,o){case"audio":if(!n)return W("Quality unsupported without CodecPrivateData",o),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=function(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}(i,n);break;case"video":if(!n)return W("Quality unsupported without CodecPrivateData",o),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=function(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}(n);break;case"text":y.type=lt,y.mimeType="application/mp4",("TTML"===i||"DFXP"===i)&&(y.codecs="stpp")}return y.fullMimeTypes.add(rr(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var n=e.m.get(y.id);else n=[],"video"==y.type&&(n=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n=co(new lo([n={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Bb:n,Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:null,stream:y}])),e.m.set(y.id,n);return n=function(e,t,n,r,i){var a=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];for(var o=(i=g(i)).next(),s={};!o.done;s={Lf:void 0},o=i.next())s.Lf=o.value,r.push(new Fo(s.Lf.start,s.Lf.end,function(t){return function(){return rt(e.l,[a.replace("{start time}",String(t.Lf.Eh))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return r}(e,new _o((function(){return[]}),0,null,Hu(y),y.mssPrivateData.timescale,n,null,y.encrypted),y,t,r),y.segmentIndex=new Pu(n),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}(i=jb.prototype).configure=function(e,t){this.g=e,t&&(this.B=t)},i.start=function(e,t){var n=this;return L((function(r){if(1==r.g)return n.l=[e],n.h=t,S(r,Ub(n),2);if(!n.h)throw new Be(2,7,7001);return r.return(n.j)}))},i.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},i.update=function(){var e,t=this;return L((function(n){return 1==n.g?(x(n,2),S(n,Ub(t),4)):2!=n.g?k(n,0):(e=E(n),t.h&&e?(t.h.onError(e),void T(n)):n.return())}))},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},V("shaka.mss.MssParser",jb);var Bb="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Fb=(new Map).set("CAPT","main").set("SUBT","alternate").set("DESC","main");function Vb(e,t,n,r,i,a,o){if(n>=200&&n<=299&&202!=n||304==n)return{uri:i||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:a};a=null;try{a=qe(t)}catch(e){}throw new Be(401==n||403==n?2:1,1,1001,r,n,a,e,o,i||r)}function Hb(){}function Gb(e,t,n,r,i,a){var o=new Xb;try{ea(t.headers).forEach((function(e,t){o.append(t,e)}))}catch(t){return Mi(new Be(1,1,1002,e,t,n))}var s=new zb,u={Ph:!1,cj:!1};if(e=new Ci(e=function(e,t,n,r,i,a,o,s,u){var l,c,d,f,p,h,g,m,y,v,b,w,A,I;return L((function(C){switch(C.g){case 1:return l=Kb,c=Wb,f=new ArrayBuffer(0),h=p=0,g={},m=Date.now(),x(C,2),S(C,l(e,r),4);case 4:if(d=C.h,g=function(e){var t={};return e.forEach((function(e,n){t[n.trim()]=e})),t}(d.headers),o(g),"HEAD"==r.method){C.A(5);break}return v=(y=d.headers.get("Content-Length"))?parseInt(y,10):0,d.body?(b=d.clone().body.getReader(),new c({start:function(e){function t(){var n,r,i,o;return L((function(l){switch(l.g){case 1:return x(l,2),S(l,b.read(),4);case 4:n=l.h,k(l,3);break;case 2:return E(l),l.return();case 3:if(n.done){l.A(5);break}if(p+=n.value.byteLength,!s){l.A(5);break}return S(l,s(n.value),5);case 5:r=Date.now(),i=p-h,(r-m>100&&i>=u||n.done)&&(o=n.done?0:v-p,a(r-m,i,o),h=p,m=r),n.done?e.close():(e.enqueue(n.value),t()),T(l)}}))}t()}}),S(C,d.arrayBuffer(),8)):S(C,d.arrayBuffer(),9);case 8:f=C.h,C.A(5);break;case 9:f=C.h,w=Date.now(),a(w-m,f.byteLength,0);case 5:t.headers.Range&&(2==(A=t.headers.Range.replace("bytes=","").split("-").filter((function(e){return e})).map((function(e){return parseInt(e,10)}))).length&&f.byteLength!=A[1]-A[0]+1&&W("Payload length does not match range requested bytes",t,d)),k(C,3);break;case 2:if(I=E(C),i.Ph)throw new Be(1,1,7001,e,n);if(i.cj)throw new Be(1,1,1003,e,n);throw new Be(1,1,1002,e,I,n);case 3:return C.return(Vb(g,f,d.status,e,d.url,t,n))}}))}(e,t,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,r,i,t.streamDataCallback,a.minBytesForProgressEvents||0),(function(){return u.Ph=!0,s.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var l=new xr((function(){u.cj=!0,s.abort()}));l.ia(t/1e3),e.finally((function(){l.stop()}))}return e}function qb(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!!e.Response&&(!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController))}Qa("application/vnd.ms-sstr+xml",(function(){return new jb})),V("shaka.net.HttpFetchPlugin",Hb),Hb.isSupported=qb,Hb.parse=Gb;var Kb=e.fetch,zb=e.AbortController,Wb=e.ReadableStream,Xb=e.Headers;function Yb(){}function Jb(e,t,n,r,i,a){var o=new $b,s=Date.now(),u=0;return new Ci(new Promise((function(l,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials;var d={};for(var f in o.onabort=function(){c(new Be(1,1,7001,e,n))},o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.HEADERS_RECEIVED){for(var e=o.getAllResponseHeaders().trim().split("\r\n"),t={},n=(e=g(e)).next();!n.done;n=e.next())t[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");i(d=t)}},o.onload=function(i){var a=o.response;try{r(Date.now()-s,i.loaded-u,0);var f=Vb(d,a,o.status,e,o.responseURL,t,n);l(f)}catch(e){c(e)}},o.onerror=function(t){c(new Be(1,1,1002,e,t,n))},o.ontimeout=function(){c(new Be(1,1,1003,e,n))},o.onprogress=function(e){var t=Date.now(),n=a.minBytesForProgressEvents||0,i=e.loaded-u;(t-s>100&&i>=n||e.lengthComputable&&e.loaded==e.total)&&(r(t-s,i,4==o.readyState?0:e.total-e.loaded),u=e.loaded,s=t)},t.headers)try{o.setRequestHeader(f.toLowerCase(),t.headers[f])}catch(t){throw new Be(1,1,1002,e,t,n)}o.send(t.body)})),(function(){return o.abort(),Promise.resolve()}))}qb()&&(Vi("http",Gb,2,!0),Vi("https",Gb,2,!0),Vi("blob",Gb,2,!0)),V("shaka.net.HttpXHRPlugin",Yb),Yb.parse=Jb;var $b=e.XMLHttpRequest;function Qb(e,t,n,r,i){this.g=e,this.i=t,this.groupId=n,this.h=r,this.j=i}function Zb(e){var t=e.Yb(!1);return t?Qe(t):e.P().map((function(e){return"{"+encodeURI(e.split("#xywh=")[0])+"}"})).join("")+":"+e.startByte+":"+e.endByte}function ew(e,t){return ol(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function tw(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function nw(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}function rw(e){return 0==e.i?0:e.j/e.i}function iw(e){var t=this;this.u=e,this.i=new Map,this.h=new $i((function(){return aw(t).catch((function(){}))})),this.j=[],this.o=function(){},this.m=function(){},this.g=new tw,this.l=!1}function aw(e){e.l=!0;var t=e.j.map((function(e){return e()}));return e.j=[],Promise.all(t)}function ow(e,t,n,r,i,a){Qi(e.h);var o=(e.i.get(t)||Promise.resolve()).then((function(){if(e.h.g)throw new Be(2,9,7001);if(i){var t=Ne(n);for(var o in(t=new ma(t)).data){var s=Number(o);e.m(t.data[s],t.g[s])}}return e.g.close(r,n.byteLength),e.o(rw(e.g),e.g.g),a(n)}));e.i.set(t,o)}function sw(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Ii,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function uw(e,t){return new Promise((function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var e;return L((function(r){if(1==r.g)return null==i.result?(n(),r.return()):(e=i.result,S(r,t(e.key,e.value,e),2));e.continue(),T(r)}))}}))}function lw(e){this.h=e,this.g=[]}function cw(e,t){return dw(e,t,"readwrite")}function dw(e,t,n){var r=new sw(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then((function(){Q(e.g,r)}),(function(){Q(e.g,r)})),r}function fw(e,t,n){this.h=new lw(e),this.i=t,this.g=n}function pw(e){return Promise.reject(new Be(2,9,9011,"Cannot add new value to "+e))}function hw(e,t,n,r){t=(e=cw(e.h,t)).store();for(var i=(n=g(n)).next(),a={};!i.done;a={Pg:void 0},i=n.next())a.Pg=i.value,t.delete(a.Pg).onsuccess=function(e){return function(){return r(e.Pg)}}(a);return e.promise()}function gw(e,t,n){var r,i,a,o,s,u,l;return L((function(c){if(1==c.g){for(r=dw(e.h,t,"readonly"),i=r.store(),a={},o=[],s=g(n),u=s.next(),l={};!u.done;l={Bf:void 0,gf:void 0},u=s.next())l.gf=u.value,l.Bf=i.get(l.gf),l.Bf.onsuccess=function(e){return function(){null==e.Bf.result&&o.push(e.gf),a[e.gf]=e.Bf.result}}(l);return S(c,r.promise(),2)}if(o.length)throw new Be(2,9,9012,"Could not find values for "+o);return c.return(n.map((function(e){return a[e]})))}))}function mw(e){this.g=new lw(e)}function yw(){this.g=new Map}function vw(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,r){e.hasFixedKeySpace()||t||(t={path:{Pb:n,bb:r},bb:e})}))})),t)return t;throw new Be(2,9,9013,"Could not find a cell that supports add-operations")}function bw(e,t,n){if(!(e=e.g.get(t)))throw new Be(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Be(2,9,9013,"Could not find cell with name "+n);return t}function ww(e,t){Sw.set(e,t)}Vi("http",Jb,1,!0),Vi("https",Jb,1,!0),Vi("blob",Jb,1,!0),tw.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}},iw.prototype.destroy=function(){return this.h.destroy()},iw.prototype.queue=function(e,t,n,r,i){var a=this;Qi(this.h);var o=(this.i.get(e)||Promise.resolve()).then((function(){var e,o,s,u,l,c,d;return L((function(f){if(1==f.g)return S(f,function(e,t){var n,r,i,a;return L((function(o){return 1==o.g?(n=Xi,r=e.u.request(n,t),i=function(){return r.abort()},e.j.push(i),S(o,r.promise,2)):(a=o.h,Q(e.j,i),o.return(a.data))}))}(a,t),2);if(e=f.h,a.h.g)throw new Be(2,9,7001);if(r)for(u in o=Ne(e),(s=new ma(o)).data)l=Number(u),c=s.data[l],d=s.g[l],a.m(c,d);return a.g.close(n,e.byteLength),a.o(rw(a.g),a.g.g),f.return(i(e))}))}));return this.i.set(e,o),o},sw.prototype.abort=function(){var e=this;return L((function(t){if(1==t.g){try{e.i.abort()}catch(e){}return x(t,2),S(t,e.g,4)}if(2!=t.g)return k(t,0);E(t),T(t)}))},sw.prototype.store=function(){return this.h},sw.prototype.promise=function(){return this.g},lw.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(i=fw.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return pw(this.i)},i.removeSegments=function(e,t){return hw(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return L((function(r){return 1==r.g?S(r,gw(n,n.i,e),2):(t=r.h,r.return(t.map((function(e){return n.Rh(e)}))))}))},i.addManifests=function(){return pw(this.g)},i.updateManifest=function(){return Promise.reject(new Be(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=cw(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},i.removeManifests=function(e,t){return hw(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return L((function(r){return 1==r.g?S(r,gw(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map((function(e){return n.Rd(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return L((function(r){return 1==r.g?(e=dw(n.h,n.g,"readonly"),t=new Map,S(r,uw(e,(function(e,r){var i;return L((function(a){if(1==a.g)return S(a,n.Rd(r),2);i=a.h,t.set(e,i),T(a)}))})),2)):3!=r.g?S(r,e.promise(),3):r.return(t)}))},i.Rh=function(e){return e},i.Rd=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,r,i,a,o,s,u,l=this;return L((function(c){if(1==c.g){for(n=cw(l.h,e),r=n.store(),i=[],a=g(t),o=a.next(),s={};!o.done;s={dh:void 0},o=a.next())u=o.value,s.dh=r.add(u),s.dh.onsuccess=function(e){return function(){i.push(e.dh.result)}}(s);return S(c,n.promise(),2)}return c.return(i)}))},mw.prototype.destroy=function(){return this.g.destroy()},mw.prototype.getAll=function(){var e,t,n=this;return L((function(r){return 1==r.g?(e=dw(n.g,"session-ids","readonly"),t=[],S(r,uw(e,(function(e,n){t.push(n)})),2)):3!=r.g?S(r,e.promise(),3):r.return(t)}))},mw.prototype.add=function(e){for(var t=cw(this.g,"session-ids"),n=t.store(),r=(e=g(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},mw.prototype.remove=function(e){var t,n=this;return L((function(r){return 1==r.g?S(r,uw(t=cw(n.g,"session-ids"),(function(t,n,r){e.includes(n.sessionId)&&r.delete()})),2):S(r,t.promise(),0)}))},yw.prototype.destroy=function(){for(var e=[],t=g(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},yw.prototype.init=function(){var e=this;Sw.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=g(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},V("shaka.offline.StorageMuxer",yw),yw.unregister=function(e){Sw.delete(e)},yw.register=ww,yw.prototype.destroy=yw.prototype.destroy;var Sw=new Map;function Tw(){fw.apply(this,arguments)}function xw(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=g(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(r=(n=g(e)).next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var i=g(e),a=i.next();!a.done;a=i.next())a.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,a=(i=g(t)).next();!a.done;a=i.next())a.value.variantIds.push(r);if(e.length&&t.length)for(r=(t=g(t)).next();!r.done;r=t.next())for(r=r.value,a=(i=g(e)).next();!a.done;a=i.next()){a=a.value;var o=n++;r.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=g(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map((function(n){return function(e,t,n){var r=e.initSegmentUri?Aw(e.initSegmentUri):null,i=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=Aw(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:a,timestampOffset:i,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}(n,e.startTime,t)}))}function Aw(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Be(2,9,9004,"Could not parse uri "+e)}function kw(){fw.apply(this,arguments)}function Ew(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function Iw(){fw.apply(this,arguments)}function Cw(){this.m=this.j=this.i=this.h=this.g=this.l=null}p(Tw,fw),Tw.prototype.updateManifestExpiration=function(e,t){var n,r,i,a=this;return L((function(o){return n=cw(a.h,a.g),r=n.store(),i=new Ii,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new Be(2,9,9012,"Could not find values for "+e))},S(o,Promise.all([n.promise(),i]),0)}))},Tw.prototype.Rd=function(e){var t,n,r,i,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,a=xw(e.periods[n],i),t.push(a);return S(s,Um(t),2)}return o=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))},Tw.prototype.Rh=function(e){return{data:e.data}},p(kw,fw),kw.prototype.Rd=function(e){var t,n,r,i,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var u=e.periods[n],l=[],c=g(u.streams),d=c.next();!d.done;d=c.next())0!=(d=d.value).variantIds.length&&l.push(Ew(d,u.startTime,u.startTime+i));a=l,t.push(a)}return S(s,Um(t),2)}return o=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})}))},p(Iw,fw),(i=Iw.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var r=(e=cw(e.h,e.g)).store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}(this,e,t)},i.Rd=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=Cw.prototype).init=function(){var t=this,n=new Ii,r=!1,i=new xr((function(){r=!0,n.reject(new Be(2,9,9017))}));"number"==typeof Mw&&Mw>0&&i.ia(Mw);var a=e.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!r){i.stop();var e=a.result;t.l=e;var o=e.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new Tw(e,"segment","manifest"):null,t.g=o,o=(o=e.objectStoreNames).contains("manifest-v2")&&o.contains("segment-v2")?new kw(e,"segment-v2","manifest-v2"):null,t.h=o,o=(o=e.objectStoreNames).contains("manifest-v3")&&o.contains("segment-v3")?new kw(e,"segment-v3","manifest-v3"):null,t.i=o,o=(o=e.objectStoreNames).contains("manifest-v5")&&o.contains("segment-v5")?new Iw(e,"segment-v5","manifest-v5"):null,t.j=o,e=e.objectStoreNames.contains("session-ids")?new mw(e):null,t.m=e,n.resolve()}},a.onupgradeneeded=function(){for(var e=a.result,t=g(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},a.onerror=function(e){r||(i.stop(),n.reject(new Be(2,9,9001,a.error)),e.preventDefault())},n},i.destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return S(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),T(t)}}))},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return L((function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return S(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return S(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return S(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return S(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),S(n,function(){var t=new Ii,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Be(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,S(n,t.init(),0)}}))};var Mw=5;function Dw(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function Pw(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new Dw(t,n,r,Number(e[4])):null}function Rw(e,t){this.h=e,this.g=t}function Lw(e,t){var n=new uu(null,0);n.Ab(t.duration);var r=t.streams.filter((function(e){return"audio"==e.type})),i=t.streams.filter((function(e){return"video"==e.type}));r=function(e,t,n,r){for(var i=new Set,a=g(t),o=a.next();!o.done;o=a.next())for(var s=(o=g(o.value.variantIds)).next();!s.done;s=o.next())i.add(s.value);for(a=g(n),o=a.next();!o.done;o=a.next())for(o=g(o.value.variantIds),s=o.next();!s.done;s=o.next())i.add(s.value);for(a=new Map,i=g(i),o=i.next();!o.done;o=i.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=g(t),i=t.next();!i.done;i=t.next())for(o=i.value,i=Ow(e,o,r),o=g(o.variantIds),s=o.next();!s.done;s=o.next())(s=a.get(s.value)).language=i.language,s.primary=s.primary||i.primary,s.audio=i;for(n=g(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=Ow(e,i,r),i=g(i.variantIds),o=i.next();!o.done;o=i.next())(o=a.get(o.value)).primary=o.primary||t.primary,o.video=t;return a}(e,r,i,n),i=t.streams.filter((function(e){return e.type==lt})).map((function(t){return Ow(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Ow(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=g(r.values()),u=s.next();!u.done;u=s.next())(u=u.value).audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:a,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function Ow(e,t,n){var r=t.segments.map((function(n){return function(e,t,n){var r=new Dw("segment",e.h,e.g,t.dataKey);return(e=new Fo(t.startTime,t.endTime,(function(){return[r.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new Dw("segment",e.h,e.g,t);return new _o((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")).mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.If(t.thumbnailSprite),e}(e,n,t)}));return n.ie(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pu(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([rr(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function Nw(){this.g=null}function jw(){}function Uw(e,t){var n=Pw(e);return n&&"manifest"==n.g?e=Pi(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t}):e=n&&"segment"==n.g?function(e,t,n){var r=new yw;return Pi(void 0).Xa((function(){return r.init()})).Xa((function(){return bw(r,t.Pb(),t.bb())})).Xa((function(e){return e.getSegments([t.key()])})).Xa((function(e){return{uri:t,data:e[0].data,headers:{},originalRequest:n}})).finally((function(){return r.destroy()}))}(n.key(),n,t):Mi(new Be(2,1,9004,e)),e}function _w(e,t,n){var r,i,a,o,s,u;return L((function(l){switch(l.g){case 1:r=[];for(var c=[],d=g(n),f=d.next();!f.done;f=d.next()){f=f.value;for(var p=!1,h=g(c),m=h.next();!m.done;m=h.next())if(Bw((m=m.value).info,f)){m.sessionIds.push(f.sessionId),p=!0;break}p||c.push({info:f,sessionIds:[f.sessionId]})}i=g(c),a=i.next();case 2:if(a.done){l.A(4);break}return o=a.value,s=function(e,t,n){var r,i;return L((function(a){switch(a.g){case 1:return r=new va({sc:t,onError:function(){},vf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),x(a,2),r.configure(e),S(a,function(e,t,n,r,i,a){var o,s,u,l,c;return L((function(d){return 1==d.g?(o=[],a.length&&o.push(a[0].contentType),i.length&&o.push(i[0].contentType),s=function(e){return(e=it(t,e,null)).licenseServerUri=n,e.serverCertificate=r,e.persistentStateRequired=!0,e.sessionType="persistent-license",e},(u=li(o)).video&&(l=s(a[0].encryptionScheme||""),u.video.drmInfos.push(l)),u.audio&&(c=s(i[0].encryptionScheme||""),u.audio.drmInfos.push(c)),S(d,Kr([u],!0,e.O,[]),2)):(Qi(e.l),d.return(ka(e,[u])))}))}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:k(a,3);break;case 2:return E(a),S(a,r.destroy(),5);case 5:return a.return([]);case 3:return i=[],S(a,Promise.all(n.sessionIds.map((function(e){return L((function(t){return 1==t.g?(x(t,2),S(t,function(e,t){var n,r,i;return L((function(a){return 1==a.g?S(a,Ca(e,t,{initData:null,initDataType:null}),2):3!=a.g?(n=a.h)?(r=[],(i=e.i.get(n))&&(i.Kb=new Ii,r.push(i.Kb)),r.push(n.remove()),S(a,Promise.all(r),3)):a.return():(e.i.delete(n),void T(a))}))}(r,e),4)):2!=t.g?(i.push(e),k(t,0)):(E(t),void T(t))}))}))),6);case 6:return S(a,r.destroy(),7);case 7:return a.return(i)}}))}(e,t,o),S(l,s,5);case 5:u=l.h,r=r.concat(u),a=i.next(),l.A(2);break;case 4:return l.return(r)}}))}function Bw(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Z(e.audioCapabilities,t.audioCapabilities,n)&&Z(e.videoCapabilities,t.videoCapabilities,n)}function Fw(e,t){var n=Lw(new Rw(e.Pb(),e.bb()),t),r=t.appMetadata||{};return n=Vw(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function Vw(e){for(var t=[],n=ni(e.variants),r=(n=g(n)).next();!r.done;r=n.next())t.push(Yr(r.value));for(n=(e=g(e.textStreams)).next();!n.done;n=e.next())t.push(Jr(n.value));return t}function Hw(){this.g=new Map}function Gw(e,t){var n=t.audio,r=t.video;if(n&&!r&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&r&&e.g.set(r.id,r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,a=r.bandwidth||t.bandwidth-i;a<=0&&(a=t.bandwidth),e.g.set(n.id,i),e.g.set(r.id,a)}}function qw(e,t){e.g.set(t.id,t.bandwidth||2048)}function Kw(e,t){return null==(e=e.g.get(t))&&(e=0),e}function zw(e){var t=this;if(e&&e.constructor!=Yd)throw new Be(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Wb()):(this.h=Ql(),this.g=new Fi,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new $i((function(){var e,r,i,a,o;return L((function(s){switch(s.g){case 1:return S(s,Promise.all(t.l.map((function(e){return aw(e)}))),2);case 2:for(e=function(){},r=[],i=g(t.i),a=i.next();!a.done;a=i.next())o=a.value,r.push(o.then(e,e));return S(s,Promise.all(r),3);case 3:if(!n){s.A(4);break}return S(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,T(s)}}))})),this.m=1e9}function Ww(){if(Xy(oe()))e:{for(var e=g(Sw.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Xw(e){var t,n,r;return L((function(i){switch(i.g){case 1:return S(i,(t=new yw).init(),2);case 2:return S(i,vw(t),3);case 3:return n=i.h,r=new Dw("manifest",n.path.Pb,n.path.bb,e),S(i,t.destroy(),4);case 4:return S(i,(new zw).remove(r.toString()),0)}}))}function Yw(e,t,n,r,i,a){var o,s,u,l,c,d,f,p,h,m,y;return L((function(v){switch(v.g){case 1:for(o=!1,x(v,2),s=!0,u=g(n.streams),l=u.next();!l.done;l=u.next())for(c=l.value,d=g(c.segments),f=d.next();!f.done;f=d.next())p=f.value,null!=(h=p.pendingSegmentRefId?r[p.pendingSegmentRefId]:null)&&(p.dataKey=h,p.pendingSegmentRefId=void 0),null!=(h=p.pendingInitSegmentRefId?r[p.pendingInitSegmentRefId]:null)&&(p.initSegmentKey=h,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);return n.size+=i,s&&(n.isIncomplete=!1),S(v,e.updateManifest(t,n),4);case 4:o=!0,a(),k(v,0);break;case 2:return m=E(v),S(v,Xw(t),5);case 5:if(o){v.A(6);break}return y=Object.values(r),S(v,e.removeSegments(y,(function(){})),6);case 6:throw m}}))}function Jw(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function $w(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Qw(e,t,n,r){if(t.expiration=n.Wd(),n=Aa(n),t.sessionIds=r?n:[],Jw(e)&&r&&!n.length)throw new Be(2,9,9007)}function Zw(e,t){for(var n=[],r=g(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:rr(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:rr(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function eS(e,t,n){return L((function(r){return S(r,function(e,t,n,r){var i,a,o;return L((function(s){return 1==s.g?r.drmInfo?(i=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new Be(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),a=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Zw(r,!1),videoCapabilities:Zw(r,!0)}})),S(s,_w(t,e,a),2)):s.return():3!=s.g?(o=s.h,S(s,i.remove(o),3)):S(s,i.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.g,e.h.drm,n,t),0)}))}function tS(e,t,n){function r(){}var i=function(e){for(var t=new Set,n=(e=g(e.streams)).next();!n.done;n=e.next())for(var r=(n=g(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey);return Array.from(t)}(n);return Fw(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function nS(e,t){var n;return L((function(r){switch(r.g){case 1:return x(r,2),S(r,kc(t,e.g,e.h.streaming.retryParameters),4);case 4:n=r.h,k(r,3);break;case 2:E(r);case 3:if(n)return r.return(n);throw new Be(1,2,2011,t)}}))}function rS(e,t,n,r,i,a){var o={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,mssPrivateData:r.mssPrivateData,external:r.external,fastSwitching:r.fastSwitching,isAudioMuxedInVideo:r.isAudioMuxedInVideo},s=i.offline.numberOfParallelDownloads,u=0===s?r.id:0;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r,t),r=e.segmentIndex.get(++t)}(r,n.presentationTimeline.Hb(),(function(n,i){var l=Zb(n),c=void 0;if(!a.has(l)){var d=n.endTime-n.startTime;d=Kw(t,r.id)*d,d=nw(e.g,d),a.set(l,new Qb(n,d,u,!1,i))}n.ba&&(c=Zb(n.ba),a.has(c)||(d=.5*Kw(t,r.id),d=nw(e.g,d),a.set(c,new Qb(n.ba,d,u,!0,i)))),o.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:l,dataKey:0,mimeType:n.mimeType,codecs:n.codecs,thumbnailSprite:n.thumbnailSprite}),0!==s&&(u=(u+1)%s)})),o}function iS(e){if(e.j.g)throw new Be(2,9,7001)}function aS(){if(!Ww())throw new Be(2,9,9e3)}function oS(e,t){return L((function(n){return 1==n.g?(e.i.push(t),A(n,2),S(n,t,4)):2!=n.g?n.return(n.h):(I(n),Q(e.i,t),C(n,0))}))}function sS(e){for(var t=new Set,n=g(e.variants),r=n.next();!r.done;r=n.next())(r=r.value).audio&&t.add(r.audio),r.video&&t.add(r.video);for(r=(n=g(e.textStreams)).next();!r.done;r=n.next())t.add(r.value);for(n=(e=g(e.imageStreams)).next();!n.done;n=e.next())t.add(n.value);return t}V("shaka.offline.indexeddb.StorageMechanismOpenTimeout",Mw),ww("idb",(function(){return oe().xh()?new Cw:null})),Dw.prototype.Pb=function(){return this.i},Dw.prototype.bb=function(){return this.h},Dw.prototype.key=function(){return this.l},Dw.prototype.toString=function(){return this.j},(i=Nw.prototype).configure=function(){},i.start=function(e,t){var n,r,i,a,o,s,u=this;return L((function(l){switch(l.g){case 1:if(n=Pw(e),u.g=n,null==n||"manifest"!=n.g)throw new Be(2,1,9004,e);return r=new yw,A(l,2),S(l,r.init(),4);case 4:return S(l,bw(r,n.Pb(),n.bb()),5);case 5:return S(l,l.h.getManifests([n.key()]),6);case 6:return i=l.h,a=i[0],o=new Rw(n.Pb(),n.bb()),s=Lw(o,a),t.makeTextStreamsForClosedCaptions(s),l.return(s);case 2:return I(l),S(l,r.destroy(),7);case 7:C(l,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,r,i,a,o,s,u,l=this;return L((function(c){switch(c.g){case 1:return n=l.g,r=new yw,x(c,2,3),S(c,r.init(),5);case 5:return S(c,bw(r,n.Pb(),n.bb()),6);case 6:return S(c,(i=c.h).getManifests([n.key()]),7);case 7:if(a=c.h,o=a[0],s=o.sessionIds.includes(e),u=null==o.expiration||o.expiration>t,!s||!u){c.A(3);break}return S(c,i.updateManifestExpiration(n.key(),t),3);case 3:return I(c),S(c,r.destroy(),10);case 10:C(c,0);break;case 2:E(c),c.A(3)}}))},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},Qa("application/x-offline-manifest",(function(){return new Nw})),V("shaka.offline.OfflineScheme",jw),jw.plugin=Uw,Vi("offline",Uw),(i=zw.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Ul(e,t)),ec(this.h,e)},i.getConfiguration=function(){var e=Ql();return ec(e,this.h,Ql()),e},i.Wb=function(){return this.g},i.store=function(e,t,n,r,i){var a=this,o=this.getConfiguration(),s=new iw(this.g);return this.l.push(s),(t=new Ci(t=function(e,t,n,r,i,a,o,s){var u,l,c,d,f,p,h,m,y,v,b,w,A,M,D,P,R,O,N,j,U,_,B;return L((function(F){switch(F.g){case 1:return aS(),l=u=null,c=new yw,p=f=d=null,x(F,2,3),S(F,a(),5);case 5:return u=F.h,S(F,function(e,t,n,r){var i,a,o,s,u;return L((function(l){if(1==l.g)return i=null,a=e.g,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(r.manifest),iS(e),S(l,n.start(t,o),2);if(3!=l.g)return s=l.h,iS(e),u=sS(s),S(l,Promise.all(Zi(u,(function(e){return e.createSegmentIndex()}))),3);if(iS(e),i)throw i;return l.return(s)}))}(e,t,u,o),6);case 6:if(h=F.h,iS(e),!(!h.presentationTimeline.W()&&!h.presentationTimeline.Vc()))throw new Be(2,9,9005,t);m=g(r),y=m.next();case 7:if(y.done){F.A(9);break}return v=y.value,S(F,function(e,t,n){var r,i,a,o,s,u,l,c,d,f,p,h,m,y,v;return L((function(b){switch(b.g){case 1:return S(b,nS(e,t),2);case 2:if("text/vtt"!=(r=b.h))throw new Be(1,2,2017,t);return S(b,function(e,t,n){var r,i,a;return L((function(o){return 1==o.g?(r=Xi,(i=Gi([e],n)).method="GET",S(o,t.request(r,i).promise,2)):(a=o.h,o.return(a.data))}))}(t,e.g,e.h.streaming.retryParameters),3);case 3:if(i=b.h,!(a=mr(r)))throw new Be(2,2,2014,r);for(o=a(),s={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},u=Ne(i),l=o.parseMedia(u,s,t,[]),c=[],d=g(l),f=d.next(),p={};!f.done;p={Rf:void 0,od:void 0},f=d.next())p.od=f.value,p.Rf=null,h=function(e){return function(){return null==e.Rf&&(e.Rf=rt([t],[e.od.payload])),e.Rf||[]}}(p),m=new Fo(p.od.startTime,p.od.endTime,h,0,null,null,0,0,1/0),p.od.payload.includes("#xywh")&&(4===(y=p.od.payload.split("#xywh=")[1].split(",")).length&&m.If({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)})),c.push(m);if(v=r,!c.length){b.A(4);break}return S(b,kc(c[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:v=b.h;case 4:return b.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pu(c),mimeType:v||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rr(v||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}}))}(e,v,h),10);case 10:b=F.h,h.imageStreams.push(b),iS(e),y=m.next(),F.A(7);break;case 9:w=g(i),A=w.next();case 11:return A.done?(ja(o.drm.clearKeys,h.variants),P=h.variants.some((function(e){if(e.audio)for(var t=g(e.audio.drmInfos),n=t.next();!n.done;n=t.next())if(n.value.licenseServerUri.startsWith("data:"))return!0;if(e.video)for(t=(e=g(e.video.drmInfos)).next();!t.done;t=e.next())if(t.value.licenseServerUri.startsWith("data:"))return!0;return!1})),R=o.offline.usePersistentLicense,P&&(R=!1),S(F,e.md(h,(function(e){p=p||e}),o,R),15)):(M=A.value,S(F,function(e,t,n,r,i,a,o){var s,u;return L((function(l){if(1==l.g)return a?l.A(2):S(l,nS(e,n),3);if(2!=l.g&&(a=l.h),s={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Lu(0,t.presentationTimeline.getDuration(),[n]),mimeType:a||"",codecs:o||"",kind:i,encrypted:!1,drmInfos:[],keyIds:new Set,language:r,originalLanguage:r,label:null,type:lt,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rr(a||"",o||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},u=rr(s.mimeType,s.codecs),!yr(u))throw new Be(2,2,2014,a);return l.return(s)}))}(e,h,M.uri,M.language,M.kind,M.mime,M.codecs),14));case 14:D=F.h,h.textStreams.push(D),iS(e),A=w.next(),F.A(11);break;case 15:if(l=F.h,iS(e),p)throw p;return S(F,function(e,t,n,r){var i,a,o,s,u,l,c,d,f,p,h,m,y,v,b,w,A,I,C,M,D,P,R,O,N,j,U,_,B;return L((function(L){switch(L.g){case 1:return i={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return Fr(e,t,n)}))}(e,n.restrictions,i),S(L,Hr(t,e,r,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(a=[],o=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,u=n.preferredAudioCodecs,l=n.preferredTextFormats,Br(e,s,u,o,l),c=g(e.variants),d=c.next();!d.done;d=c.next())f=d.value,a.push(Yr(f));for(p=g(e.textStreams),h=p.next();!h.done;h=p.next())m=h.value,a.push(Jr(m));for(y=g(e.imageStreams),v=y.next();!v.done;v=y.next())b=v.value,a.push($r(b));return S(L,n.offline.trackSelectionCallback(a),3);case 3:for(w=L.h,A=e.presentationTimeline.getDuration(),I=0,C=g(w),M=C.next();!M.done;M=C.next())D=M.value,P=D.bandwidth*A/8,I+=P;return x(L,4),S(L,n.offline.downloadSizeCallback(I),6);case 6:if(!L.h)throw new Be(2,9,9014);k(L,5);break;case 4:if((R=E(L))instanceof Be)throw R;throw new Be(2,9,9015);case 5:for(O=new Set,N=new Set,j=new Set,U=g(w),_=U.next();!_.done;_=U.next())"variant"==(B=_.value).type&&O.add(B.id),"text"==B.type&&N.add(B.id),"image"==B.type&&j.add(B.id);e.variants=e.variants.filter((function(e){return O.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return N.has(e.id)})),e.imageStreams=e.imageStreams.filter((function(e){return j.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=g(t),r=n.next();!r.done;r=n.next())for(var i=(r=g(t)).next();!i.done;i=r.next());for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(e),r=n.next();!r.done;r=n.next());}(e),T(L)}}))}(h,l,o,R),16);case 16:return S(F,c.init(),17);case 17:return iS(e),S(F,vw(c),18);case 18:return d=F.h,iS(e),O=function(e,t,n,r,i,a,o){var s=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=Vw(t),appMetadata:n,isIncomplete:!1}}(n,t,r),u=i.offline.progressCallback;!function(e,t,n){e.o=t,e.m=n}(a,(function(e,t){s.size=t,u(s,e)}),(function(t,n){l&&o&&c==n&&xa(e,"cenc",t)}));var l=Jw(t)&&!$w(t),c=null;l&&(c=uS.get(e.g.keySystem));for(var d=new Hw,f=g(t.textStreams),p=f.next();!p.done;p=f.next())d.g.set(p.value.id,52);for(f=g(t.imageStreams),p=f.next();!p.done;p=f.next())qw(d,p.value);for(f=g(t.variants),p=f.next();!p.done;p=f.next())Gw(d,p.value);return a=function(e,t,n,r){for(var i=new Map,a=sS(n),o=new Map,s=(a=g(a)).next();!s.done;s=a.next()){var u=rS(e,t,n,s=s.value,r,i);o.set(s.id,u)}for(e=g(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),Ch:Array.from(i.values())}}(a,d,t,i),i=a.streams,a=a.Ch,(d=e.g)&&o&&(d.initData=[]),{tk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Wd(),streams:i,sessionIds:o?Aa(e):[],drmInfo:d,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Ch:a}}(l,h,t,n,o,s,R),N=O.tk,j=O.Ch,S(F,d.bb.addManifests([N]),19);case 19:if(U=F.h,iS(e),f=U[0],iS(e),p)throw p;return S(F,function(e,t,n,r,i,a,o,s,u,l){var c,d,f,p,h,m,y,v,b,w,A;return L((function(I){switch(I.g){case 1:if(c={},d=0,f=function(){if(e.j.g||i.l)throw new Be(2,9,7001)},p=function(e,t){var p,h,m,y,v,b,w,x,A;return L((function(k){if(1==k.g){for(p=g(e),h=p.next(),m={};!h.done;m={kc:void 0},h=p.next())m.kc=h.value,f(),y=ew(m.kc,a),v=m.kc.i,b=m.kc.h,w=function(e){return function(t){var n,r,i,a;return L((function(s){switch(s.g){case 1:if(n=e.kc.g,r=n.Yb(!1),!n.aesKey||r){s.A(2);break}return S(s,al(t,n.aesKey,e.kc.j),3);case 3:t=s.h;case 2:return i=Zb(n),S(s,o.addSegments([{data:t}]),4);case 4:a=s.h,f(),c[i]=a[0],d+=t.byteLength,T(s)}}))}}(m),x=m.kc.g,(A=x.Yb(!1))?ow(i,m.kc.groupId,A,v,b,w):i.queue(m.kc.groupId,y,v,b,w);return S(k,function(e){return L((function(t){return 1==t.g?S(t,Promise.all(e.i.values()),2):t.return(e.g.g)}))}(i),2)}return f(),!t||i.l?k.A(0):(Qw(s,r,u,l),S(k,o.updateManifest(n,r),0))}))},h=!1,x(I,2),!Jw(s)||!h||$w(s)){I.A(4);break}return S(I,p(t.filter((function(e){return e.h})),!0),5);case 5:return f(),t=t.filter((function(e){return!e.h})),m=c,y=d,c={},d=0,S(I,Yw(o,n,r,m,y,(function(){return iS(e)})),6);case 6:f();case 4:if(h){I.A(7);break}return S(I,p(t,!1),8);case 8:return f(),v=c,b=d,c={},d=0,S(I,Yw(o,n,r,v,b,(function(){return f()})),9);case 9:f();case 7:k(I,0);break;case 2:return w=E(I),A=Object.values(c),S(I,o.removeSegments(A,(function(){})),10);case 10:throw w}}))}(e,j,f,N,s,o,d.bb,h,l,R),20);case 20:return iS(e),Qw(h,N,l,R),S(F,d.bb.updateManifest(f,N),21);case 21:return iS(e),_=new Dw("manifest",d.path.Pb,d.path.bb,f),F.return(Fw(_,N));case 3:return I(F),S(F,c.destroy(),22);case 22:if(!u){F.A(23);break}return S(F,u.stop(),23);case 23:if(!l){F.A(25);break}return S(F,l.destroy(),25);case 25:C(F,0);break;case 2:if(B=E(F),null==f){F.A(27);break}return S(F,Xw(f),27);case 27:throw p||B}}))}(this,e,t||{},r||[],i||[],(function(){var t;return L((function(r){return 1==r.g?n?r.A(2):S(r,kc(e,a.g,o.manifest.retryParameters),3):(2!=r.g&&(n=r.h),t=Za(e,n||null),r.return(t()))}))}),o,s),(function(){return aw(s)}))).finally((function(){Q(a.l,s)})),function(e,t){var n=t.promise;return e.i.push(n),t.finally((function(){Q(e.i,n)}))}(this,t)},i.remove=function(e){return oS(this,function(e,t){var n,r,i,a,o,s;return L((function(u){switch(u.g){case 1:if(aS(),null==(n=Pw(t))||"manifest"!=n.g)throw new Be(2,9,9004,t);return r=n,i=new yw,A(u,2),S(u,i.init(),4);case 4:return S(u,bw(i,r.Pb(),r.bb()),5);case 5:return S(u,(a=u.h).getManifests([r.key()]),6);case 6:return o=u.h,s=o[0],S(u,Promise.all([eS(e,s,i),tS(a,r,s)]),2);case 2:return I(u),S(u,i.destroy(),8);case 8:C(u,0)}}))}(this,e))},i.Nk=function(){return oS(this,function(e){var t,n,r,i,a,o,s,u,l,c;return L((function(d){switch(d.g){case 1:return aS(),t=e.g,n=e.h.drm,r=new yw,i=!1,A(d,2),S(d,r.init(),4);case 4:a=[],function(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}(r,(function(e){return a.push(e)})),o=g(a),s=o.next();case 5:if(s.done){d.A(2);break}return S(d,(u=s.value).getAll(),8);case 8:return l=d.h,S(d,_w(n,t,l),9);case 9:return c=d.h,S(d,u.remove(c),10);case 10:c.length!=l.length&&(i=!0),s=o.next(),d.A(5);break;case 2:return I(d),S(d,r.destroy(),11);case 11:C(d,3);break;case 3:return d.return(!i)}}))}(this))},i.list=function(){return oS(this,L((function(r){switch(r.g){case 1:return aS(),e=[],t=new yw,A(r,2),S(r,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,r){t({Pb:n,bb:r},e)}))}))}(t,(function(t,r){n=n.then((function(){return L((function(n){if(1==n.g)return S(n,r.getAllManifests(),2);n.h.forEach((function(n,r){n=Fw(new Dw("manifest",t.Pb,t.bb,r),n),e.push(n)})),T(n)}))}))})),S(r,n,2);case 2:return I(r),S(r,t.destroy(),6);case 6:C(r,3);break;case 3:return r.return(e)}})));var e,t,n},i.md=function(e,t,n,r){var i,a=this;return L((function(o){return 1==o.g?((i=new va({sc:a.g,onError:t,vf:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(n.drm),S(o,function(e,t,n){return e.oa=!0,e.C=new Map,e.R=n,wa(e,t,!1)}(i,e.variants,r),2)):3!=o.g?S(o,Ta(i),3):o.return(i)}))},V("shaka.offline.Storage",zw),zw.deleteAll=function(){var e;return L((function(t){return 1==t.g?(e=new yw,A(t,2),S(t,function(e){var t,n;return L((function(r){return 1==r.g?(t=Array.from(e.g.values()),(n=t.length>0)||Sw.forEach((function(e){(e=e())&&t.push(e)})),S(r,Promise.all(t.map((function(e){return e.erase()}))),2)):n?r.A(0):S(r,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.g?(I(t),S(t,e.destroy(),5)):C(t,0)}))},zw.prototype.list=zw.prototype.list,zw.prototype.removeEmeSessions=zw.prototype.Nk,zw.prototype.remove=zw.prototype.remove,zw.prototype.store=zw.prototype.store,zw.prototype.getNetworkingEngine=zw.prototype.Wb,zw.prototype.getConfiguration=zw.prototype.getConfiguration,zw.prototype.configure=zw.prototype.configure,zw.prototype.destroy=zw.prototype.destroy,zw.support=Ww;var uS=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");function lS(){}function cS(e,t){for(e={priority:t||0,callback:e},t=0;t<pS.length;t++)if(pS[t].priority<e.priority)return void pS.splice(t,0,e);pS.push(e)}Qd("offline",Ww),V("shaka.polyfill",lS),lS.register=cS,lS.installAll=function(){for(var e=g(pS),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(e){W("Error installing polyfill!",e)}}};var dS,fS,pS=[];function hS(){}function gS(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=g(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())mS(t.value)}function mS(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function yS(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function vS(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(W("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function bS(e){if(!e)return!1;var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function wS(e,t){return!(e&&e!=t&&("cbcs"!=e&&"cbcs-1-9"!=e||!oe().ed()))}function SS(){}function TS(){oe().Kf()&&!dS&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(dS=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=xS,navigator.emeEncryptionSchemePolyfilled=!0)}function xS(e,t){var n,r=this;return L((function(i){return 1==i.g?S(i,dS.call(r,e,t),2):(n=i.h,bS(n)?(navigator.requestMediaKeySystemAccess=dS,i.return(n)):(navigator.requestMediaKeySystemAccess=AS,i.return(AS.call(r,e,t))))}))}function AS(e,t){var n,r,i,a,o,s,u,l,c,d,f,p,h=this;return L((function(m){if(1==m.g){for(n=vS(e),r=[],i=g(t),a=i.next();!a.done;a=i.next())o=a.value,s=kS(o.videoCapabilities,n),u=kS(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!u.length||((l=Object.assign({},o)).videoCapabilities=s,l.audioCapabilities=u,r.push(l));if(!r.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return S(m,dS.call(h,e,r),2)}return d=m.h,p=f=null,r[0]&&(r[0].videoCapabilities&&(f=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(p=r[0].audioCapabilities[0].encryptionScheme)),m.return(new yS(d,f,p))}))}function kS(e,t){return e?e.filter((function(e){return wS(e.encryptionScheme,t)})):e}function ES(){}function IS(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",CS),document.addEventListener("webkitfullscreenerror",CS),document.addEventListener("mozfullscreenchange",CS),document.addEventListener("mozfullscreenerror",CS),document.addEventListener("MSFullscreenChange",CS),document.addEventListener("MSFullscreenError",CS)}}function CS(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function MS(){}function DS(){oe().Kf()&&!fS&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(fS=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=PS,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function PS(e){var t,n,r=this;return L((function(i){switch(i.g){case 1:return S(i,fS.call(r,e),2);case 2:if(!(t=i.h).supported||!e.keySystemConfiguration)return i.return(t);if(n=t.keySystemAccess,bS(n))return navigator.mediaCapabilities.decodingInfo=fS,i.return(t);if(navigator.mediaCapabilities.decodingInfo=RS,n){i.A(3);break}return S(i,LS(e),4);case 4:return t.keySystemAccess=i.h,i.return(t);case 3:return i.return(RS.call(r,e))}}))}function RS(e){var t,n,r,i,a,o,s,u=this;return L((function(l){switch(l.g){case 1:return n=t=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,i=r.keySystem,n=r.audio&&r.audio.encryptionScheme,t=r.video&&r.video.encryptionScheme,a=vS(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},wS(n,a)&&wS(t,a))?S(l,fS.call(u,e),2):l.return(o);case 2:if((s=l.h).keySystemAccess){s.keySystemAccess=new yS(s.keySystemAccess,t,n),l.A(3);break}if(!e.keySystemConfiguration){l.A(3);break}return S(l,LS(e),5);case 5:s.keySystemAccess=l.h;case 3:return l.return(s)}}))}function LS(e){var t,n;return L((function(r){if(1==r.g){var i=e.keySystemConfiguration,a=[],o=[];return i.audio&&a.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:i.audio.encryptionScheme}),i.video&&o.push({robustness:i.video.robustness||"",contentType:e.video.contentType,encryptionScheme:i.video.encryptionScheme}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},a.length&&(i.audioCapabilities=a),o.length&&(i.videoCapabilities=o),t=i,S(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)}))}function OS(){}function NS(){oe().cc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),OS.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=jS)}function jS(t){var n,r,i,a,o,s,u;return L((function(l){switch(l.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},oe(),r=t.video,i=t.audio,"media-source"!=t.type){if("file"!=t.type)return l.return(n);if(r&&(a=r.contentType,!(""!=ts().canPlayType(a)))||i&&(o=i.contentType,!(""!=ts().canPlayType(o))))return l.return(n);l.A(2);break}if(!Xy())return l.return(n);if(!r){l.A(3);break}return S(l,function(t){var n,r;return L((function(i){return 1==i.g?(n=oe(),"CAST"!==n.Ua()?i.A(2):S(i,function(t){var n,r,i,a;return L((function(o){if(1==o.g){if(!(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return o.return(yt(t.contentType));switch(n=t.contentType,t.width&&t.height&&t.width>1280&&t.height>720&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&((r=Math.round(t.framerate))<24||r>30)&&(n+="; framerate="+t.framerate),t.transferFunction||""){case"":case"srgb":break;case"pq":n+="; eotf=smpte2084";break;case"hlg":n+="; eotf=arib-std-b67";break;default:return o.return(!1)}return i=!1,(a=GS).has(n)?(i=a.get(n),o.A(2)):S(o,cast.__platform__.canDisplayType(n),3)}return 2!=o.g&&(i=o.h,a.set(n,i)),o.return(i)}))}(t),3)):2!=i.g?(r=i.h,i.return(r)):i.return(yt(t.contentType))}))}(r),4);case 4:if(!l.h)return l.return(n);case 3:if(i){var c=oe().Ua(),d=i.contentType;if("CAST"===c&&i.spatialRendering&&(d+="; spatialRendering=true"),!yt(d))return l.return(n)}case 2:return t.keySystemConfiguration?(s=t.keySystemConfiguration,S(l,function(e,t,n){var r,i,a,o,s,u,l,c,d,f,p;return L((function(h){switch(h.g){case 1:if(r=[],i=[],n.audio&&(a={robustness:n.audio.robustness||"",contentType:t.contentType},oe().si()&&t.contentType.includes('codecs="ac-3"')&&(a.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(a.encryptionScheme=n.audio.encryptionScheme),r.push(a)),n.video&&(o={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(o.encryptionScheme=n.video.encryptionScheme),i.push(o)),s={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(s.audioCapabilities=r),i.length&&(s.videoCapabilities=i),u=e?e.contentType:"",l=t?t.contentType:"",c=lr(u)+";"+ur(u),d=lr(l)+";"+ur(l),f=n.keySystem,p=null,x(h,2),Ai.has(c+"#"+d+"#"+f)){p=Ai.get(c+"#"+d+"#"+f)||null,h.A(4);break}return S(h,navigator.requestMediaKeySystemAccess(n.keySystem,[s]),5);case 5:p=h.h,Ai.set(c+"#"+d+"#"+f,p);case 4:k(h,3);break;case 2:E(h);case 3:return h.return(p)}}))}(r,i,s),6)):(n.supported=!0,l.return(n));case 6:(u=l.h)&&(n.supported=!0,n.keySystemAccess=u);case 5:return l.return(n)}}))}lS.Aria=hS,hS.install=gS,cS(gS),yS.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=g(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(n=(t=g(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},yS.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},lS.EmeEncryptionScheme=SS,SS.install=TS,cS(TS),lS.Fullscreen=ES,ES.install=IS,cS(IS),lS.MCapEncryptionScheme=MS,MS.install=DS,cS(DS,-2),lS.MediaCapabilities=OS,OS.install=NS,OS.originalMcap=null;var US,_S,BS,FS,VS,HS,GS=new Map;function qS(){}function KS(){var t=oe(),n="WEBKIT"===t.Ha()?t.za():null;for((e.MediaSource||e.ManagedMediaSource)&&n&&e.MediaSource&&(n<=12?(zS(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):n<=15&&zS()),n=(t=g(t.Ei())).next();!n.done;n=t.next())WS(n.value);(e.MediaSource||e.ManagedMediaSource)&&function(){if(e.MediaSource){var t=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(e){return"mp2t"!=or(e)&&t(e)}}if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=or(e)&&n(e)}}}(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;oe().$i()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex((function(e){return e.startsWith("codecs=")}));if(r<0)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=i.findIndex((function(e){return e.startsWith("vp09")}));return a>=0&&(i[a]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}()}function zS(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,O.apply(0,arguments));return t.abort=function(){},t}}function WS(t){var n=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return ur(e)!=t&&n(e)},e.ManagedMediaSource){var r=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return ur(e)!=t&&r(e)}}}function XS(){}function YS(){screen.orientation&&screen.orientation.unlock||(null!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new JS;screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new Oi("change");n.dispatchEvent(e)}))}())}function JS(){Ui.call(this),this.type="",this.angle=0}function $S(){}function QS(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&e.shakaMediaKeysPolyfill!=uT&&(void 0!==t&&t&&(US=!0,_S=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),BS=HTMLMediaElement.prototype.setMediaKeys,FS=e.MediaKeys,VS=e.MediaKeySystemAccess,HS=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=eT,e.MediaKeys=rT,e.MediaKeySystemAccess=nT,navigator.requestMediaKeySystemAccess=ZS,e.shakaMediaKeysPolyfill=uT,ci.clear(),Ai.clear())}function ZS(e,t){try{var n=new nT(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function eT(e){var t=this.mediaKeys;return t&&t!=e&&iT(t,null),delete this.mediaKeys,(this.mediaKeys=e)?iT(e,this):Promise.resolve()}function tT(e){if(Ue(e=Ne(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ke(e=Ge(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Oe(e),this.dispatchEvent(t)}function nT(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=g(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var a=g(n.audioCapabilities),o=a.next();!o.done;o=a.next())(o=o.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),i=!0));if(n.videoCapabilities)for(a=(n=g(n.videoCapabilities)).next();!a.done;a=n.next())(a=a.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function rT(e){this.h=new WebKitMediaKeys(e),this.g=new ne}function iT(e,t){if(e.g.Pa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",tT);try{return hu(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function aT(e){Ui.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new ne,this.sessionId="",this.expiration=NaN,this.closed=new Ii,this.keyStatuses=new sT,this.onkeystatuseschange=null}function oT(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new Oi("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function sT(){this.size=0,this.g=void 0}cS(NS,-1),lS.MediaSource=qS,qS.install=KS,cS(KS),lS.Orientation=XS,XS.install=YS,p(JS,Ui),JS.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},JS.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},cS(YS),lS.PatchedMediaKeysApple=$S,$S.uninstall=function(){e.shakaMediaKeysPolyfill==uT&&US&&(US=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",_S),HTMLMediaElement.prototype.setMediaKeys=BS,e.MediaKeys=FS,e.MediaKeySystemAccess=VS,navigator.requestMediaKeySystemAccess=HS,_S=HS=BS=VS=FS=null,e.shakaMediaKeysPolyfill="",ci.clear(),Ai.clear())},$S.install=QS,nT.prototype.createMediaKeys=function(){var e=new rT(this.keySystem);return Promise.resolve(e)},nT.prototype.getConfiguration=function(){return this.g},rT.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new aT(this.h,e)},rT.prototype.setServerCertificate=function(){return Promise.resolve(!1)},rT.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},p(aT,Ui),(i=aT.prototype).generateRequest=function(e,t){var n=this;this.h=new Ii;try{var r=this.l.createSession("video/mp4",Ne(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null),e=new Oi("message",e=(new Map).set("messageType",null==n.keyStatuses.Jc()?"license-request":"license-renewal").set("message",Oe(e.message))),n.dispatchEvent(e)})),this.j.D(r,"webkitkeyadded",(function(){n.g&&(oT(n,"usable"),n.g.resolve(),n.g=null)})),this.j.D(r,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:oT(n,"output-not-allowed");break;default:oT(n,"internal-error")}})),oT(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new Ii;try{this.i.update(Ne(e))}catch(e){this.g.reject(e)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Pa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=sT.prototype).Jc=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,xi.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=xi.value();return!(!this.g||!Le(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var uT="apple";function lT(){}function cT(){if(e.MediaKeys){var t=oe();MediaKeys.prototype.setServerCertificate&&t.re()||(MediaKeys.prototype.setServerCertificate=dT)}}function dT(){return Promise.resolve(!1)}function fT(){}function pT(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)ET="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=gT,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=mT,e.MediaKeys=vT,e.MediaKeySystemAccess=yT,e.shakaMediaKeysPolyfill=IT}}function hT(e){return ET?ET+e.charAt(0).toUpperCase()+e.slice(1):e}function gT(e,t){try{var n=new yT(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function mT(e){var t=this.mediaKeys;return t&&t!=e&&bT(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&bT(e,this),Promise.resolve()}function yT(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var a=(t=g(t)).next();!a.done;a=t.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=g(a.audioCapabilities),l=u.next();!l.done;l=u.next())(l=l.value).contentType&&(s=!0,i.canPlayType(l.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(l),r=!0));if(a.videoCapabilities)for(l=(u=g(a.videoCapabilities)).next();!l.done;l=u.next())(l=l.value).contentType&&(s=!0,i.canPlayType(l.contentType,this.g)&&(o.videoCapabilities.push(l),r=!0));if(s||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function vT(e){this.l=e,this.h=null,this.g=new ne,this.i=[],this.j=new Map}function bT(e,t){e.h=t,e.g.Pa();var n=ET;t&&(e.g.D(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Oe(t.initData),e.h.dispatchEvent(n)})),e.g.D(t,n+"keymessage",(function(t){var n=wT(e,t.sessionId);n&&(t=new Oi("message",t=(new Map).set("messageType",null==n.keyStatuses.Jc()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.D(t,n+"keyadded",(function(t){(t=wT(e,t.sessionId))&&t.ready()})),e.g.D(t,n+"keyerror",(function(t){var n=wT(e,t.sessionId);if(n){var r=Error("EME v0.1b key error"),i=t.errorCode;i.systemCode=t.systemCode,r.errorCode=i,!t.sessionId&&n.h?(45==t.systemCode&&(r.message="Unsupported session type."),n.h.reject(r),n.h=null):t.sessionId&&n.g?(n.g.reject(r),n.g=null):(r=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?AT(n,"output-restricted"):AT(n,1==r?"expired":"internal-error"))}})))}function wT(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function ST(e,t,n){Ui.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Ii,this.keyStatuses=new kT,this.onkeystatuseschange=null}function TT(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=Ne(Ke("LOAD_SESSION|"+n));else{var i=Ke("PERSISTENT|");r=nt(i,t)}else r=Ne(t)}catch(e){return Promise.reject(e)}e.h=new Ii;var a=hT("generateKeyRequest");try{e.j[a](e.i,r)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new xr((function(){try{e.j[a](e.i,r)}catch(t){e.h.reject(t),e.h=null}})).ia(.01)}return e.h}function xT(e,t,n){if(e.g)e.g.then((function(){return xT(e,t,n)})).catch((function(){return xT(e,t,n)}));else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=He(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Ze(i.keys[0].k),i=Ze(i.keys[0].kid)}else r=Ne(n),i=null;var a=hT("addKey");try{e.j[a](e.i,r,i,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function AT(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new Oi("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function kT(){this.size=0,this.g=void 0}cS((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||QS())})),lS.PatchedMediaKeysCert=lT,lT.install=cT,cS(cT),lS.PatchedMediaKeysWebkit=fT,fT.install=pT,yT.prototype.createMediaKeys=function(){var e=new vT(this.g);return Promise.resolve(e)},yT.prototype.getConfiguration=function(){return this.h},vT.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new ST(t,this.l,e),this.i.push(e),e},vT.prototype.setServerCertificate=function(){return Promise.resolve(!1)},vT.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},p(ST,Ui),(i=ST.prototype).ready=function(){AT(this,"usable"),this.g&&this.g.resolve(),this.g=null},i.generateRequest=function(e,t){return TT(this,t,null)},i.load=function(e){return"persistent-license"==this.l?TT(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new Ii;return xT(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=hT("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=kT.prototype).Jc=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,xi.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=xi.value();return!(!this.g||!Le(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var ET="",IT="webkit";function CT(){}function MT(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=PT,Object.defineProperty(t,"disablePictureInPicture",{get:LT,set:OT,enumerable:!0,configurable:!0}),document.exitPictureInPicture=RT,document.addEventListener("webkitpresentationmodechanged",DT,!0))}}function DT(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function PT(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function RT(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function LT(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function OT(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function NT(){}function jT(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=UT))}function UT(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function _T(){}function BT(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:FT})}function FT(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function VT(){}function HT(){for(var e=g([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())(t=t.value).prototype.indexOf||(t.prototype.indexOf=GT),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=qT),t.prototype.includes||(t.prototype.includes=KT)}function GT(e,t){return Array.prototype.indexOf.call(this,e,t)}function qT(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function KT(e,t){return-1!==this.indexOf(e,t)}function zT(){}function WT(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}}function XT(){}function YT(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||"number"==typeof ts().webkitDroppedFrameCount)&&(t.getVideoPlaybackQuality=JT)}}function JT(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function $T(){}function QT(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=ZT;else if(6==n)t=ex;else{try{var r=!!ZT(1,2,"")}catch(e){r=!1}r&&(t=ZT)}t&&(e.VTTCue=function(e,n,r){return t(e,n,r)})}}function ZT(t,n,r){return new e.TextTrackCue(t,n,r)}function ex(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function tx(e){Ui.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new ne}function nx(){}cS(pT),lS.PiPWebkit=CT,CT.install=MT,cS(MT),lS.RandomUUID=NT,NT.install=jT,cS(jT),lS.Symbol=_T,_T.install=BT,cS(BT),lS.TypedArray=VT,VT.install=HT,cS(HT),lS.VideoPlayPromise=zT,zT.install=WT,cS(WT),lS.VideoPlaybackQuality=XT,XT.install=YT,cS(YT),lS.VTTCue=$T,$T.install=QT,cS(QT),p(tx,Ui),(i=tx.prototype).destroy=function(){var e=this;return L((function(t){if(1==t.g)return S(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),Ui.prototype.release.call(e),T(t)}))},i.configure=function(e){this.m=e},i.getConfiguration=function(){return this.m},i.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},i.getCurrentItemIndex=function(){return this.j},i.getItems=function(){return this.h.slice()},i.insertItems=function(e){this.h.push.apply(this.h,m(e)),this.dispatchEvent(new Oi("itemsinserted"))},i.removeAllItems=function(){var e,t,n,r,i=this;return L((function(a){if(1==a.g)return i.o.Pa(),i.h.length&&i.j>=0?S(a,i.g.Ac(),2):a.A(2);if(4!=a.g){for(e=[],i.i&&(i.i.preloadManager.j||e.push(i.i.preloadManager.destroy()),i.i=null),i.l&&(i.l.preloadManager.j||e.push(i.l.preloadManager.destroy()),i.l=null),t=g(i.h),n=t.next();!n.done;n=t.next())(r=n.value).preloadManager&&!r.preloadManager.j&&e.push(r.preloadManager.destroy());return e.length?S(a,Promise.all(e),4):a.A(4)}i.h=[],i.j=-1,i.dispatchEvent(new Oi("itemsremoved")),T(a)}))},i.playItem=function(e){var t,n,r,i,a,o,s,u,l,c,d,f,p,h,m,y,v,b=this;return L((function(w){switch(w.g){case 1:if(b.o.Pa(),!b.h.length||e>=b.h.length)throw new Be(2,7,7007);if(t=b.getCurrentItem(),n=b.h[e],b.j!=e&&(b.j=e,b.dispatchEvent(new Oi("currentitemchanged"))),r=b.g.h,(i=b.m?b.m.preloadNextUrlWindow:0)>0&&(a=!1,b.o.D(r,"timeupdate",(function(){var e,t,n,o;return L((function(s){switch(s.g){case 1:if(b.l||b.h.length<=1||a||b.g.W()||!r.duration)return s.return();if(e=b.g.Qa().end-r.currentTime,isNaN(e)){s.A(0);break}if(!(e<=i)){s.A(0);break}if(t=b.m&&b.m.repeatMode,n=null,b.j+1<b.h.length?n=b.h[b.j+1]:1==t&&(n=b.h[0]),!n||n.preloadManager&&!n.preloadManager.j){s.A(0);break}return a=!0,o=null,x(s,5),S(s,b.g.preload(n.manifestUri,n.startTime,n.mimeType,n.config),7);case 7:o=s.h,k(s,6);break;case 5:E(s),o=null;case 6:b.l={item:n,preloadManager:o},a=!1,T(s)}}))}))),b.o.D(b.g,"complete",(function(){var e=b.m&&b.m.repeatMode,t=!1;if(2==e)t=!0;else{var n=b.j+1;n<b.h.length?b.playItem(n):1==e&&(1==b.h.length?t=!0:b.playItem(0))}t&&(r.paused?(r.currentTime=b.g.Qa().start,r.play()):b.o.D(r,"paused",(function(){r.currentTime=b.g.Qa().start,r.play()})))})),o=n.manifestUri,n.preloadManager&&!n.preloadManager.j&&(o=n.preloadManager),s=!1,b.l&&b.l.item==n&&b.l.preloadManager?o=b.l.preloadManager:b.i&&b.i.item==n&&b.i.preloadManager&&(o=b.i.preloadManager,s=!0),!b.i){w.A(2);break}if(s||b.i.preloadManager.j){w.A(3);break}return S(w,b.i.preloadManager.destroy(),3);case 3:b.i=null;case 2:if(!(b.m&&b.m.preloadPrevItem&&t&&b.g.m===np)){w.A(5);break}return u=null,x(w,6),S(w,b.g.dj(),8);case 8:u=w.h,k(w,7);break;case 6:E(w),u=null;case 7:b.i={item:t,preloadManager:u};case 5:return n.config&&(b.g.Ii(),b.g.configure(n.config)),S(w,b.g.load(o,n.startTime,n.mimeType),9);case 9:if(b.l=null,n.extraText)for(l=g(n.extraText),c=l.next();!c.done;c=l.next())(d=c.value).mime?b.g.Od(d.uri,d.language,d.kind,d.mime,d.codecs):b.g.Od(d.uri,d.language,d.kind);if(n.extraThumbnail)for(f=g(n.extraThumbnail),p=f.next();!p.done;p=f.next())h=p.value,b.g.Me(h);if(n.extraChapter)for(m=g(n.extraChapter),y=m.next();!y.done;y=m.next())v=y.value,b.g.Le(v.uri,v.language,v.mime);T(w)}}))},V("shaka.queue.QueueManager",tx),tx.prototype.playItem=tx.prototype.playItem,tx.prototype.removeAllItems=tx.prototype.removeAllItems,tx.prototype.insertItems=tx.prototype.insertItems,tx.prototype.getItems=tx.prototype.getItems,tx.prototype.getCurrentItemIndex=tx.prototype.getCurrentItemIndex,tx.prototype.getCurrentItem=tx.prototype.getCurrentItem,tx.prototype.getConfiguration=tx.prototype.getConfiguration,tx.prototype.configure=tx.prototype.configure,tx.prototype.destroy=tx.prototype.destroy,sp=function(e){return new tx(e)},nx.prototype.parseInit=function(){},nx.prototype.setSequenceMode=function(){},nx.prototype.setManifestType=function(){},nx.prototype.parseMedia=function(e,t){for(var n=null,r=[],i=(e=g(e=He(e).split(/\r?\n/))).next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=rx.exec(i))){var a=ix.exec(i[1]);i=new Tn(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,i[2]),n&&(n.endTime=a,r.push(n)),n=i}return n&&r.push(n),r},V("shaka.text.LrcTextParser",nx),nx.prototype.parseMedia=nx.prototype.parseMedia,nx.prototype.setManifestType=nx.prototype.setManifestType,nx.prototype.setSequenceMode=nx.prototype.setSequenceMode,nx.prototype.parseInit=nx.prototype.parseInit;var rx=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,ix=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function ax(){this.g="UNKNOWN"}function ox(e,t,n,r,i,a,o,s,u,l,c,d,f,p){var h=c;if(zt(t)){if(!d)return null;var m={tagName:"span",children:[Yt(t)],attributes:{},parent:null}}else m=t;for(var y=null,v=g(Ox),b=v.next();!b.done&&!(y=hx(m,"backgroundImage",i,"#",b.value)[0]);b=v.next());v=null;var w=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if((b=rn(m,Ox,"backgroundImage"))&&w.test(b)){if((v=parseInt(b.split(":").pop(),10)-1)>=p.length)return null;v=p[v]}else f&&b&&!b.startsWith("#")&&(w=new me(f),b=new me(b),(b=w.resolve(b).toString())&&(v=b));if(("p"==t.tagName||y||v)&&(d=!0),t=d,b="default"==(m.attributes["xml:space"]||(u?"default":"preserve")),u=[],!(w=m.children.every(zt)))for(var S=g(m.children),T=S.next();!T.done;T=S.next())(T=ox(e,T.value,n,r,i,a,o,s,b,l,m,d,f,p))&&u.push(T);if(i=null!=c,f=Yt(m),f=m.children.length&&f&&/\S/.test(f),!((S=m.attributes.begin||m.attributes.end||m.attributes.dur)||f||"br"==m.tagName||0!=u.length||i&&!b))return null;for(f=(p=mx(m,r)).start,p=p.end;h&&h.tagName&&"tt"!=h.tagName;)f=(p=gx(h,r,f,p)).start,p=p.end,h=h.parent;if(null==f&&(f=0),f+=n.periodStart,p=null==p?1/0:p+n.periodStart,"HLS"!==e.g&&(f=Math.max(f,n.segmentStart),p=Math.min(p,n.segmentEnd)),!S&&u.length>0)for(f=1/0,p=0,r=(n=g(u)).next();!r.done;r=n.next())r=r.value,f=Math.min(f,r.startTime),p=Math.max(p,r.endTime);if("br"==m.tagName)return(e=new Tn(f,p,"")).lineBreak=!0,e;if(n="",w&&(n=Xe(Yt(m)||""),b&&(n=n.replace(/\s+/g," "))),(n=new Tn(f,p,n)).nestedCues=u,d||(n.isContainer=!0),l&&(n.cellResolution=l),l=hx(m,"region",o,"")[0],m.attributes.region&&l&&l.attributes["xml:id"]){var x=l.attributes["xml:id"];n.region=s.filter((function(e){return e.id==x}))[0]}return s=l,c&&i&&!m.attributes.region&&!m.attributes.style&&(s=hx(c,"region",o,"")[0]),function(e,t,n,r,i,a,o,s,u){"rtl"==cx(e,n,r,o,"direction",s=s||u)&&(t.direction="rtl"),"tb"==(u=cx(e,n,r,o,"writingMode",s))||"tblr"==u?t.writingMode="vertical-lr":"tbrl"==u?t.writingMode="vertical-rl":"rltb"==u||"rl"==u?t.direction="rtl":u&&(t.direction=On),(u=cx(e,n,r,o,"textAlign",!0))?(t.positionAlign=Px.get(u),t.lineAlign=Dx.get(u),t.textAlign=Pn[u.toUpperCase()]):t.textAlign=Dn,(u=cx(e,n,r,o,"displayAlign",!0))&&(t.displayAlign=Ln[u.toUpperCase()]);(u=cx(e,n,r,o,"color",s))&&(t.color=ux(u));(u=cx(e,n,r,o,"backgroundColor",s))&&(t.backgroundColor=ux(u));(u=cx(e,n,r,o,"border",s))&&(t.border=u);if(u=cx(e,n,r,o,"fontFamily",s))switch(u){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=u.split(",").filter((function(e){return"default"!=e})).join(",")}(u=cx(e,n,r,o,"fontWeight",s))&&"bold"==u&&(t.fontWeight=Hn),u=cx(e,n,r,o,"wrapOption",s),t.wrapLine=!u||"noWrap"!=u,(u=cx(e,n,r,o,"lineHeight",s))&&u.match(Tx)&&(t.lineHeight=u),(u=cx(e,n,r,o,"fontSize",s))&&(u.match(Tx)||u.match(Sx))&&(t.fontSize=u),(u=cx(e,n,r,o,"fontStyle",s))&&(t.fontStyle=Kn[u.toUpperCase()]);i?(a=i.attributes.imageType||i.attributes.imagetype,u=i.attributes.encoding,i=Yt(i).trim(),"PNG"==a&&"Base64"==u&&i&&(t.backgroundImage="data:image/png;base64,"+i)):a&&(t.backgroundImage=a),(i=cx(e,n,r,o,"textOutline",s))&&((i=i.split(" "))[0].match(Tx)?t.textStrokeColor=t.color:(t.textStrokeColor=ux(i[0]),i.shift()),i[0]&&i[0].match(Tx)?t.textStrokeWidth=i[0]:t.textStrokeColor="");(i=cx(e,n,r,o,"letterSpacing",s))&&i.match(Tx)&&(t.letterSpacing=i),(i=cx(e,n,r,o,"linePadding",s))&&i.match(Tx)&&(t.linePadding=i),(i=cx(e,n,r,o,"opacity",s))&&(t.opacity=parseFloat(i));(i=dx(e,r,o,"textDecoration"))&&lx(t,i),(i=fx(e,n,o,"textDecoration"))&&lx(t,i),(i=cx(e,n,r,o,"textCombine",s))&&(t.textCombineUpright=i);switch(cx(e,n,r,o,"ruby",s)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}(e,n,m,s,y,v,a,t,0==u.length),n}function sx(e,t,n,r){var i=new Mt,a=t.attributes["xml:id"];if(!a)return null;i.id=a,a=null,r&&(a=wx.exec(r)||xx.exec(r)),r=a?Number(a[1]):null,a=a?Number(a[2]):null;var o,s=dx(e,t,n,"extent");if(s){var u=(o=wx.exec(s))||xx.exec(s);null!=u&&(i.width=Number(u[1]),i.height=Number(u[2]),o||(null!=r&&(i.width=100*i.width/r),null!=a&&(i.height=100*i.height/a)),i.widthUnits=o||null!=r?Dt:0,i.heightUnits=o||null!=a?Dt:0)}return(e=dx(e,t,n,"origin"))&&(null!=(u=(o=wx.exec(e))||xx.exec(e))&&(i.viewportAnchorX=Number(u[1]),i.viewportAnchorY=Number(u[2]),o?s||(i.width=100-i.viewportAnchorX,i.widthUnits=Dt,i.height=100-i.viewportAnchorY,i.heightUnits=Dt):(null!=a&&(i.viewportAnchorY=100*i.viewportAnchorY/a),null!=r&&(i.viewportAnchorX=100*i.viewportAnchorX/r)),i.viewportAnchorUnits=o||null!=r?Dt:0)),i}function ux(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&4==(t=t[1].split(",")).length?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function lx(e,t){for(var n=(t=g(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(zn)||e.textDecoration.push(zn);break;case"noUnderline":e.textDecoration.includes(zn)&&Q(e.textDecoration,zn);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Q(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Q(e.textDecoration,"overline")}}function cx(e,t,n,r,i,a){return a=void 0===a||a,(t=fx(e,t,r,i))?t:a?dx(e,n,r,i):null}function dx(e,t,n,r){if(!t)return null;var i=rn(t,Lx,r);return i||px(e,t,n,r)}function fx(e,t,n,r){var i=rn(t,Lx,r);return i||px(e,t,n,r)}function px(e,t,n,r){t=hx(t,"style",n,"");for(var i=null,a=0;a<t.length;a++){var o=tn(t[a],"urn:ebu:tt:style",r);o||(o=rn(t[a],Lx,r)),o||(o=fx(e,t[a],n,r)),o&&(i=o)}return i}function hx(e,t,n,r,i){var a=[];if(!e||n.length<1)return a;var o=e;for(e=null;!e&&!(e=i?tn(o,i,t):o.attributes[t])&&(o=o.parent););if(t=e)for(i=(t=g(t.split(" "))).next();!i.done;i=t.next())for(i=i.value,o=(e=g(n)).next();!o.done;o=e.next())if(r+(o=o.value).attributes["xml:id"]==i){a.push(o);break}return a}function gx(e,t,n,r){return e=mx(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function mx(e,t){var n=yx(e.attributes.begin,t),r=yx(e.attributes.end,t);return e=yx(e.attributes.dur,t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function yx(e,t){var n=null;if(Ax.test(e)){e=Ax.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),a=Number(e[4]);n=(i+=(a+=(Number(e[5])||0)/t.h)/t.frameRate)+60*r+3600*n}else if(kx.test(e))n=vx(kx,e);else if(Ex.test(e))n=vx(Ex,e);else if(Ix.test(e))e=Ix.exec(e),n=Number(e[1])/t.frameRate;else if(Cx.test(e))e=Cx.exec(e),n=Number(e[1])/t.g;else if(Mx.test(e))n=vx(Mx,e);else if(e)throw new Be(2,2,2001,"Could not parse cue time range in TTML");return n}function vx(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function bx(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}gr("application/x-subtitle-lrc",(function(){return new nx})),ax.prototype.parseInit=function(){},ax.prototype.setSequenceMode=function(){},ax.prototype.setManifestType=function(e){this.g=e},ax.prototype.parseMedia=function(e,t,n,r){var i=He(e);if(e=[],""==i)return e;var a=qt(i,"tt",!0);if(!a)throw new Be(2,2,2005,"Failed to parse TTML.");if(!(i=$t(a,"body")[0]))return[];var o=rn(a,Rx,"frameRate"),s=rn(a,Rx,"subFrameRate"),u=rn(a,Rx,"frameRateMultiplier"),l=rn(a,Rx,"tickRate"),c=rn(a,Rx,"cellResolution"),d=a.attributes["xml:space"]||"default",f=rn(a,Lx,"extent");if("default"!=d&&"preserve"!=d)throw new Be(2,2,2005,"Invalid xml:space value: "+d);d="default"==d,o=new bx(o,s,u,l),c=function(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}(c),s=((s=$t(a,"metadata")[0])?s.children:[]).filter((function(e){return"\n"!=e})),u=$t(a,"style"),l=[];for(var p=g(a=$t(a,"region")),h=p.next();!h.done;h=p.next())(h=sx(this,h.value,u,f))&&l.push(h);if(Xt(i,"p").length)throw new Be(2,2,2001,"<p> can only be inside <div> in TTML");for(p=(f=g(Xt(i,"div"))).next();!p.done;p=f.next())if(Xt(p.value,"span").length)throw new Be(2,2,2001,"<span> can only be inside <p> in TTML");return(t=ox(this,i,t,o,s,u,a,l,d,c,null,!1,n,r))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},V("shaka.text.TtmlTextParser",ax),ax.prototype.parseMedia=ax.prototype.parseMedia,ax.prototype.setManifestType=ax.prototype.setManifestType,ax.prototype.setSequenceMode=ax.prototype.setSequenceMode,ax.prototype.parseInit=ax.prototype.parseInit;var wx=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Sx=/^(\d{1,4}(?:\.\d+)?|100)%$/,Tx=/^(\d+px|\d+em|\d*\.?\d+c)$/,xx=/^(\d+)px (\d+)px$/,Ax=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,kx=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Ex=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,Ix=/^(\d*(?:\.\d*)?)f$/,Cx=/^(\d*(?:\.\d*)?)t$/,Mx=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Dx=(new Map).set("left",Un).set("center","center").set("right","end").set("start",Un).set("end","end"),Px=(new Map).set("left","line-left").set("center","center").set("right","line-right"),Rx=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Lx=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Ox=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Nx(){this.g=new ax}function jx(){this.g="UNKNOWN"}function Ux(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?Dn:Pn[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":Mn)):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){return(e=e.filter((function(e){return e.id==t}))).length?e[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=_n[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=jn,e.line=Number(n[1]),n[2]&&(e.lineAlign=_n[n[2].toUpperCase()]))}function _x(){this.g=null}function Bx(e,t,n){var r,i,a;return(new aa).box("payl",ca((function(e){r=He(e)}),!1)).box("iden",ca((function(e){i=He(e)}),!1)).box("sttg",ca((function(e){a=He(e)}),!1)).parse(e),r?function(e,t,n,r,i){if(kn(e=new Tn(r,i,e)),t&&(e.id=t),n)for(t=new Rt(n),n=Nt(t);n;)Ux(e,n,[]),Lt(t),n=Nt(t);return e}(r,i,a,t,n):null}function Fx(){}function Vx(){this.g=new jx}function Hx(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=g((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function Gx(){}function qx(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=Kx(n))&&(e.color=n),(n=t.BackColour)&&(n=Kx(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Hn),t.Italic&&(e.fontStyle=qn),t.Underline&&e.textDecoration.push(zn),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Rn,e.textAlign="start";break;case 2:e.displayAlign=Rn,e.textAlign=Dn;break;case 3:e.displayAlign=Rn,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Dn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Dn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function Kx(e){return(e=parseInt(e.replace("&H",""),16))>=0?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function zx(e){return 3600*((e=Jx.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}gr("application/ttml+xml",(function(){return new ax})),Nx.prototype.parseInit=function(e){var t=!1;if((new aa).box("moov",oa).box("trak",oa).box("mdia",oa).box("minf",oa).box("stbl",oa).T("stsd",sa).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Be(2,2,2007)},Nx.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},Nx.prototype.setManifestType=function(e){this.g.setManifestType(e)},Nx.prototype.parseMedia=function(e,t,n){var r=[],i=null,a=[],o=new Map,s=[];if((new aa).box("moof",oa).box("traf",oa).T("tfhd",(function(e){i=to(e.reader,e.flags).Ud})).T("trun",(function(e){for(var t=(e=g((e=io(e.reader,e.version,e.flags)).hh)).next();!t.done;t=e.next())s.push(t.value.sampleSize||i||0)})).T("subs",(function(e){for(var t=e.reader,n=t.U(),r=-1,i=0;i<n;i++){var a=t.U();r+=a,a=t.Ca();for(var s=[],u=0;u<a;u++)1==e.version?s.push(t.U()):s.push(t.Ca()),t.Y(),t.Y(),t.U();o.set(r,s)}})).box("mdat",ca((function(e){a.push(e)}),!1)).parse(e,!1),0==a.length)throw new Be(2,2,2007);for(var u=nt.apply(Je,m(a)),l=0,c=0;c<s.length;c++){var d=Ne(u,l,s[c]);l+=s[c];var f=o.get(c);if(f&&f.length){d=Ne(d,0,f[0]);for(var p=[],h=f[0],y=1;y<f.length;y++){var v=Ne(e,h,f[y]);v=$e(v),p.push("data:image/png;base64,"+v),h+=f[y]}r=r.concat(this.g.parseMedia(d,t,n,p))}else r=r.concat(this.g.parseMedia(d,t,n,[]))}return r},V("shaka.text.Mp4TtmlParser",Nx),Nx.prototype.parseMedia=Nx.prototype.parseMedia,Nx.prototype.setManifestType=Nx.prototype.setManifestType,Nx.prototype.setSequenceMode=Nx.prototype.setSequenceMode,Nx.prototype.parseInit=Nx.prototype.parseInit,gr('application/mp4; codecs="stpp"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.ttml"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.ttml.im1i"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.ttml.im1t"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.ttml.im2i"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.ttml.im2t"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.ttml.etd1"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.ttml.etd1|im1t"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.ttml.im1t|etd1"',(function(){return new Nx})),gr('application/mp4; codecs="stpp.TTML.im1t"',(function(){return new Nx})),jx.prototype.parseInit=function(){},jx.prototype.setSequenceMode=function(){},jx.prototype.setManifestType=function(e){this.g=e},jx.prototype.parseMedia=function(e,t){var n=(e=(e=He(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Be(2,2,2e3);if(e=t.vttOffset,"HLS"==this.g)if(n[0].includes("X-TIMESTAMP-MAP")){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new Be(2,2,2e3);if(null==(e=Ut(e[1])))throw new Be(2,2,2e3);r=Number(r[1]);for(var i=t.segmentStart-t.periodStart;i>=95443.7176888889;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],i=(r=g(n[0].split("\n"))).next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Rt(i);var a=new Mt;Nt(i),Lt(i);for(var o=Nt(i);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up"),Lt(i),o=Nt(i)}t.push(a)}for(En(r=new Map),i=[],a=(n=g(n.slice(1))).next();!a.done;a=n.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){for(s=[],o=-1,u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),-1!=o&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));for(o=(s=g(s)).next();!o.done;o=s.next()){var l=o.value;o="global",(u=l[0].match(/\((.*)\)/))&&(o=u.pop()),u=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(u=l[1].split(";")),(l=r.get(o))||(l=new Tn(0,0,""));for(var c=!1,d=0;d<u.length;d++){var f=/^\s*([^:]+):\s*(.*)/.exec(u[d]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=p;break;case"color":c=!0,l.color=p;break;case"font-family":c=!0,l.fontFamily=p;break;case"font-size":c=!0,l.fontSize=p;break;case"font-weight":(parseInt(p,10)>=700||"bold"==p)&&(c=!0,l.fontWeight=Hn);break;case"font-style":switch(p){case"normal":c=!0,l.fontStyle=Gn;break;case"italic":c=!0,l.fontStyle=qn;break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(p);break;case"text-combine-upright":c=!0,l.textCombineUpright=p;break;case"text-shadow":c=!0,l.textShadow=p;break;case"white-space":c=!0,l.wrapLine="noWrap"!=p}}}c&&r.set(o,l)}}if(c=e,1==(l=a).length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0]||"REGION"==l[0])a=null;else if(a=null,l[0].includes("--\x3e")||(a=l[0],l.splice(0,1)),o=jt(s=new Rt(l[0])),d=Ot(s,/[ \t]+--\x3e[ \t]+/g),u=jt(s),null==o||null==d||null==u)W("Failed to parse VTT time code. Cue skipped:",a,l),a=null;else{for(o+=c,u+=c,c=l.slice(1).join("\n").trim(),r.has("global")?((l=r.get("global").clone()).startTime=o,l.endTime=u,l.payload=c):l=new Tn(o,u,c),Lt(s),o=Nt(s);o;)Ux(l,o,t),Lt(s),o=Nt(s);kn(l,r),null!=a&&(l.id=a),a=l}a&&i.push(a)}return i},V("shaka.text.VttTextParser",jx),jx.prototype.parseMedia=jx.prototype.parseMedia,jx.prototype.setManifestType=jx.prototype.setManifestType,jx.prototype.setSequenceMode=jx.prototype.setSequenceMode,jx.prototype.parseInit=jx.prototype.parseInit,gr("text/vtt",(function(){return new jx})),gr('text/vtt; codecs="vtt"',(function(){return new jx})),gr('text/vtt; codecs="wvtt"',(function(){return new jx})),_x.prototype.parseInit=function(e){var t=this,n=!1;if((new aa).box("moov",oa).box("trak",oa).box("mdia",oa).T("mdhd",(function(e){e=ro(e.reader,e.version),t.g=e.timescale})).box("minf",oa).box("stbl",oa).T("stsd",sa).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new Be(2,2,2008);if(!n)throw new Be(2,2,2008)},_x.prototype.setSequenceMode=function(){},_x.prototype.setManifestType=function(){},_x.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Be(2,2,2008);var n,r=0,i=[],a=[],o=!1,s=!1,u=!1,l=null;if((new aa).box("moof",oa).box("traf",oa).T("tfdt",(function(e){o=!0,r=no(e.reader,e.version).baseMediaDecodeTime})).T("tfhd",(function(e){l=to(e.reader,e.flags).Td})).T("trun",(function(e){s=!0,i=io(e.reader,e.version,e.flags).hh})).box("mdat",ca((function(e){u=!0,n=e}),!1)).parse(e,!1),!u&&!o&&!s)throw new Be(2,2,2008);e=r;for(var c=new na(n,0),d=g(i),f=d.next();!f.done;f=d.next()){var p=(f=f.value).ih||l,h=f.Cf?r+f.Cf:e;e=h+(p||0);var m=0;do{var y=c.U();m+=y;var v=null;"vttc"==fa(c.U())?y>8&&(v=c.Tb(y-8,!1)):c.skip(y-8),p&&v&&(y=Bx(v,t.periodStart+h/this.g,t.periodStart+e/this.g),a.push(y))}while(f.sampleSize&&m<f.sampleSize)}return a.filter(Er)},V("shaka.text.Mp4VttParser",_x),_x.prototype.parseMedia=_x.prototype.parseMedia,_x.prototype.setManifestType=_x.prototype.setManifestType,_x.prototype.setSequenceMode=_x.prototype.setSequenceMode,_x.prototype.parseInit=_x.prototype.parseInit,gr('application/mp4; codecs="wvtt"',(function(){return new _x})),Fx.prototype.parseInit=function(){},Fx.prototype.setSequenceMode=function(){},Fx.prototype.setManifestType=function(){},Fx.prototype.parseMedia=function(e){var t=He(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=g(t.split("\n\n"))).next();!n.done;n=t.next()){var r=new Rt((n=n.value.split("\n"))[0]),i=jt(r),a=Ot(r,/,/g);if(r=jt(r),null==i||null==a||null==r)throw new Be(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Tn(i,r,n.slice(1).join("\n").trim()))}return e},V("shaka.text.SbvTextParser",Fx),Fx.prototype.parseMedia=Fx.prototype.parseMedia,Fx.prototype.setManifestType=Fx.prototype.setManifestType,Fx.prototype.setSequenceMode=Fx.prototype.setSequenceMode,Fx.prototype.parseInit=Fx.prototype.parseInit,gr("text/x-subviewer",(function(){return new Fx})),Vx.prototype.parseInit=function(){},Vx.prototype.setSequenceMode=function(){},Vx.prototype.setManifestType=function(){},Vx.prototype.parseMedia=function(e,t,n){return e=Ne(Ke(e=Hx(e=He(e)))),this.g.parseMedia(e,t,n,[])},V("shaka.text.SrtTextParser",Vx),Vx.srt2webvtt=Hx,Vx.prototype.parseMedia=Vx.prototype.parseMedia,Vx.prototype.setManifestType=Vx.prototype.setManifestType,Vx.prototype.setSequenceMode=Vx.prototype.setSequenceMode,Vx.prototype.parseInit=Vx.prototype.parseInit,gr("text/srt",(function(){return new Vx})),Gx.prototype.parseInit=function(){},Gx.prototype.setSequenceMode=function(){},Gx.prototype.setManifestType=function(){},Gx.prototype.parseMedia=function(e){var t="",n="",r=null,i=null;for(i=(e=g(i=He(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var a=i.value;i=a,(a=Wx.exec(a))&&(r=a[1],i=a[2]),"V4 Styles"==r||"V4+ Styles"==r?(t=i,t=n?t+"\n"+i:i):"Events"==r&&(n=n?n+"\n"+i:i)}for(r=[],i=null,e=(t=g(t.split(/\r?\n/))).next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(a=Xx.exec(e)))if(e=a[1].trim(),a=a[2].trim(),"Format"==e)i=a.split(Yx);else if("Style"==e){e=a.split(Yx),a={};for(var o=0;o<i.length&&o<e.length;o++)a[i[o]]=e[o];r.push(a)}for(i=[],t=null,a=(n=g(n.split(/\r?\n/))).next(),e={};!a.done;e={Vi:void 0},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=Xx.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(Yx);else if("Dialogue"==a){o=o.split(Yx),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];o=new Tn(s=zx(a.Start),zx(a.End),o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.Vi=a.Style,(e=r.find(function(e){return function(t){return t.Name==e.Vi}}(e)))&&qx(o,e),i.push(o)}return i},V("shaka.text.SsaTextParser",Gx),Gx.prototype.parseMedia=Gx.prototype.parseMedia,Gx.prototype.setManifestType=Gx.prototype.setManifestType,Gx.prototype.setSequenceMode=Gx.prototype.setSequenceMode,Gx.prototype.parseInit=Gx.prototype.parseInit;var Wx=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Xx=/^\s*([^:]+):\s*(.*)/,Yx=/\s*,\s*/,Jx=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function $x(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)>0?{$d:n,ra:e}:null}function Qx(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(60&e[t+2])>>>2;if(r>n.length-1)return null;var i=1+((192&e[t+2])>>>6),a=(1&e[t+2])<<2;return a|=(192&e[t+3])>>>6,{sampleRate:n[r],channelCount:a,codec:"mp4a.40."+i}}function Zx(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var r=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(r<=n)&&((t+=r)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function eA(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function tA(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(n>=3)return null;var r=63&e[t+4],i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+i>e.length)return null;var a=e[t+6]>>5,o=0;2===a?o+=2:(1&a&&1!==a&&(o+=2),4&a&&(o+=2)),o=(e[t+6]<<8|e[t+7])>>12-o&1;var s=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(3&s)<<6|a<<3|o<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][a]+o,Ga:e,ra:i}}function nA(e,t){if(11===e[t]&&119===e[t+1]){var n,r,i=0,a=5;for(t+=a;a>0;){r=e[t];var o=Math.min(a,8),s=8-o;n=(r&(n=4278190080>>>24+s<<s))>>s,i=i?i<<o|n:n,t+=1,a-=o}if(i<16)return!0}return!1}function rA(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function iA(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]<<0))return null;var n=new fs(e.subarray(t+2));hs(n,2),hs(n,3);var r=gs(n,11)+1<<1,i=gs(n,2);if(3==i){i=[24e3,22060,16e3][i=gs(n,2)];var a=3}else i=[48e3,44100,32e3][i],a=gs(n,2);var o=gs(n,3),s=gs(n,1);return n=gs(n,5),t+r>e.byteLength?null:(e=Math.floor(r*i/(16*[1,2,3,6][a])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,i<<6|n<<1|0,0|o<<1|s<<0,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][o]+s,Ga:e,ra:r})}function aA(e){this.j=e,this.h=0,this.g=new Map,this.i=null}gr("text/x-ssa",(function(){return new Gx})),(i=eA.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(cr(t)||"mp4a.40.2")+'"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,r){for(var i=Ne(e),a=cs(i),o=a.length;o<i.length&&!Zx(i,o);o++);if(e=1e3*n.endTime,(a=ls(a)).length&&n&&(a=a.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(e=a.data),!(a=Qx(i,o)))return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount;for(var s=[];o<i.length;){var u=$x(i,o);if(!u)return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null));var l=u.$d+u.ra;o+l<=i.length&&s.push({data:i.subarray(o+u.$d,o+l),size:u.ra,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),o+=l}return i=a.sampleRate,e=Math.floor(e*i/1e3),r=new lo([r={id:t.id,type:"audio",codecs:a.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:s},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=co(r),this.g.set(n,t)),n=this.i!==t,r=mo(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},V("shaka.transmuxer.AacTransmuxer",eA),eA.prototype.transmux=eA.prototype.transmux,eA.prototype.getOriginalMimeType=eA.prototype.getOriginalMimeType,eA.prototype.convertCodecs=eA.prototype.convertCodecs,eA.prototype.isSupported=eA.prototype.isSupported,eA.prototype.destroy=eA.prototype.destroy,Yn("audio/aac",(function(){return new eA("audio/aac")}),Qn),(i=rA.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?oe().oe()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,r){for(var i=cs(e=Ne(e)),a=i.length;a<e.length&&!nA(e,a);a++);var o=1e3*n.endTime;(i=ls(i)).length&&n&&(i=i.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(o=i.data),i=0;for(var s=new Uint8Array([]),u=[];a<e.length;){var l=tA(e,a);if(!l)return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,i=l.sampleRate,s=l.Ga,u.push({data:e.subarray(a,a+l.ra),size:l.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),a+=l.ra}return e=Math.floor(o*i/1e3),r=new lo([r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:s,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:u},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=co(r),this.g.set(n,t)),n=this.i!==t,r=mo(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},V("shaka.transmuxer.Ac3Transmuxer",rA),rA.prototype.transmux=rA.prototype.transmux,rA.prototype.getOriginalMimeType=rA.prototype.getOriginalMimeType,rA.prototype.convertCodecs=rA.prototype.convertCodecs,rA.prototype.isSupported=rA.prototype.isSupported,rA.prototype.destroy=rA.prototype.destroy,Yn("audio/ac3",(function(){return new rA("audio/ac3")}),Qn),(i=aA.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,r){for(var i=cs(e=Ne(e)),a=i.length;a<e.length&&2935!=(e[a]<<8|e[a+1]<<0);a++);var o=1e3*n.endTime;(i=ls(i)).length&&n&&(i=i.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(o=i.data),i=0;for(var s=new Uint8Array([]),u=[];a<e.length;){var l=iA(e,a);if(!l)return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,i=l.sampleRate,s=l.Ga,u.push({data:e.subarray(a,a+l.ra),size:l.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),a+=l.ra}return e=Math.floor(o*i/1e3),r=new lo([r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:s,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:u},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=co(r),this.g.set(n,t)),n=this.i!==t,r=mo(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},V("shaka.transmuxer.Ec3Transmuxer",aA),aA.prototype.transmux=aA.prototype.transmux,aA.prototype.getOriginalMimeType=aA.prototype.getOriginalMimeType,aA.prototype.convertCodecs=aA.prototype.convertCodecs,aA.prototype.isSupported=aA.prototype.isSupported,aA.prototype.destroy=aA.prototype.destroy,Yn("audio/ec3",(function(){return new aA("audio/ec3")}),Qn);var oA=[100,110,122,244,44,83,86,118,128,138,139,134];function sA(e){if(!e.length)return null;var t=e.find((function(e){return 32==e.type})),n=e.find((function(e){return 33==e.type})),r=e.find((function(e){return 34==e.type}));if(!t||!n||!r)return null;var i=function(e){var t=new fs(e,!0);return Ss(t),Ss(t),gs(t,4),gs(t,2),gs(t,6),e=gs(t,3),t=ws(t),{Tg:e+1,Ah:t}}(t.fullData);e=function(e){Ss(e=new fs(e,!0)),Ss(e);var t=0,n=0,r=0,i=0;gs(e,4);var a=gs(e,3);ws(e);for(var o=gs(e,2),s=gs(e,1),u=gs(e,5),l=Ss(e),c=Ss(e),d=Ss(e),f=Ss(e),p=Ss(e),h=Ss(e),g=Ss(e),m=Ss(e),y=Ss(e),v=Ss(e),b=Ss(e),w=[],S=[],T=0;T<a;T++)w.push(ws(e)),S.push(ws(e));if(a>0)for(T=a;T<8;T++)gs(e,2);for(T=0;T<a;T++)w[T]&&gs(e,88),S[T]&&Ss(e);vs(e),3==(w=vs(e))&&gs(e,1),S=vs(e),T=vs(e),ws(e)&&(t+=vs(e),n+=vs(e),r+=vs(e),i+=vs(e));var x=vs(e),A=vs(e),k=vs(e);if(ws(e))for(var E=0;E<=a;E++)vs(e),vs(e),vs(e);else vs(e),vs(e),vs(e);if(vs(e),vs(e),vs(e),vs(e),vs(e),vs(e),ws(e)&&ws(e))for(E=0;E<4;E++)for(var I=0;I<(3===E?2:6);I++)if(ws(e)){var C=Math.min(64,1<<4+(E<<1));E>1&&bs(e);for(var M=0;M<C;M++)bs(e)}else vs(e);for(ws(e),ws(e),ws(e)&&(Ss(e),vs(e),vs(e),ws(e)),E=vs(e),C=I=0;C<E;C++)if(M=!1,0!==C&&(M=ws(e)),M){C===E&&vs(e),ws(e),vs(e);for(var D=M=0;D<=I;D++){var P=ws(e),R=!1;P||(R=ws(e)),(P||R)&&M++}I=M}else{for(I=(D=vs(e))+(M=vs(e)),P=0;P<D;P++)vs(e),ws(e);for(D=0;D<M;D++)vs(e),ws(e)}if(ws(e))for(E=vs(e),I=0;I<E;I++){for(C=0;C<k+4;C++)gs(e,1);gs(e,1)}if(E=k=1,I=!0,C=1,D=M=0,ws(e),ws(e),ws(e)){if(ws(e)){R=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var L=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];(P=Ss(e))>0&&P<=16?(k=R[P-1],E=L[P-1]):255===P&&(k=gs(e,16),E=gs(e,16))}if(ws(e)&&ws(e),ws(e)&&(gs(e,3),ws(e),ws(e)&&(Ss(e),Ss(e),Ss(e))),ws(e)&&(vs(e),vs(e)),ws(e),ws(e),ws(e),(P=ws(e))&&(ys(e),ys(e),ys(e),ys(e)),ws(e)&&(C=gs(e,32),M=gs(e,32),ws(e)&&vs(e),ws(e))){L=!1,P=ws(e),R=ws(e),(P||R)&&((L=ws(e))&&(Ss(e),gs(e,5),ws(e),gs(e,5)),gs(e,4),gs(e,4),L&&gs(e,4),gs(e,5),gs(e,5),gs(e,5));for(var O=0;O<=a;O++){var N=!0,j=1;(I=ws(e))||(N=ws(e));var U=!1;if(N?vs(e):U=ws(e),U||(j=vs(e)+1),P){for(N=0;N<j;N++)vs(e),vs(e),L&&(vs(e),vs(e));ws(e)}if(R){for(N=0;N<j;N++)vs(e),vs(e),L&&(vs(e),vs(e));ws(e)}}}ws(e)&&(ws(e),ws(e),ws(e),D=vs(e),vs(e),vs(e),vs(e),vs(e))}return{yg:b,Eg:o,Fg:s,Dg:u,zg:l,Ag:c,Bg:d,Cg:f,rg:p,sg:h,ug:g,vg:m,wg:y,xg:v,pf:D,gg:w,fg:x,eg:A,width:S-(t+n)*(1===w||2===w?2:1),height:T-(r+i)*(1===w?2:1),Rk:k,Qk:E,qg:M/C,pg:I}}(n.fullData);var a=function(e){var t=new fs(e,!0);Ss(t),Ss(t),vs(t),vs(t),ws(t),ws(t),gs(t,3),ws(t),ws(t),vs(t),vs(t),bs(t),ws(t),ws(t),ws(t)&&vs(t),bs(t),bs(t),ws(t),ws(t),ws(t),ws(t),e=ws(t),t=ws(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Vg:n}}(r.fullData);return t=function(e,t,n,r){var i=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(i[0]=1,i[1]=(3&r.Eg)<<6|(r.Fg?1:0)<<5|31&r.Dg,i[2]=r.zg,i[3]=r.Ag,i[4]=r.Bg,i[5]=r.Cg,i[6]=r.rg,i[7]=r.sg,i[8]=r.ug,i[9]=r.vg,i[10]=r.wg,i[11]=r.xg,i[12]=r.yg,i[13]=240|(3840&r.pf)>>8,i[14]=255&r.pf,i[15]=252|3&r.Vg,i[16]=252|3&r.gg,i[17]=248|7&r.fg,i[18]=248|7&r.eg,i[19]=0,i[20]=parseInt(r.qg,10),i[21]=(3&(r.pg?1:0))<<6|(7&r.Tg)<<3|(r.Ah?1:0)<<2|3,i[22]=3,e=[e,t,n],t=23,n=e.length-1,r=0;r<e.length;r+=1)i.set(new Uint8Array([32+r|(r===n?128:0),0,1]),t),t+=3,i.set(new Uint8Array([e[r].byteLength>>8,255&e[r].byteLength]),t),t+=2,i.set(e[r],t),t+=e[r].byteLength;return i}(t.fullData,n.fullData,r.fullData,{Tg:i.Tg,Ah:i.Ah,Eg:e.Eg,Fg:e.Fg,yg:e.yg,Dg:e.Dg,zg:e.zg,Ag:e.Ag,Bg:e.Bg,Cg:e.Cg,rg:e.rg,sg:e.sg,ug:e.ug,vg:e.vg,wg:e.wg,xg:e.xg,pf:e.pf,gg:e.gg,fg:e.fg,eg:e.eg,Vg:a.Vg,qg:e.qg,pg:e.pg}),{height:e.height,width:e.width,Ra:t,Za:e.Rk,$a:e.Qk}}function uA(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==a){var o=e[t+3]>>6;i=1e3*dA[14*(3===n?3-r:3===r?3:4)+i-1],a=fA[3*(3===n?0:2===n?1:2)+a],n=pA[n][r];var s=hA[r],u=Math.floor(n*i/a+(e[t+2]>>1&1))*s,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&l<=87&&2===r&&i>=224e3&&0===o&&(e[t+3]|=128),{sampleRate:a,channelCount:3===o?1:2,ra:u,Pk:8*n*s}}return null}function lA(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function cA(e,t){if(t+1<e.length&&lA(e,t)){var n=uA(e,t),r=4;return n&&n.ra&&(r=n.ra),(t+=r)===e.length||t+1<e.length&&lA(e,t)}return!1}var dA=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],fA=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],pA=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],hA=[0,1,1,4];function gA(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function mA(e){this.h=e,this.g=null}function yA(e){this.h=e,(this.g=zy.get("ISOBoxer")())&&function(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,(function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,(function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)})))}))}e.g.addBoxProcessor("saio",(function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)})),e.g.addBoxProcessor("saiz",(function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)})),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",(function(){for(var e=!0,n=0;n<16;n++)this.usertype[n]!==bA[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))}))}(this)}function vA(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}(i=gA.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,r){for(var i=Ne(e),a=cs(i).length;a<i.length&&!cA(i,a);a++);var o;for(e=[];a<i.length;){var s=uA(i,a);if(!s)return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null));o||(o=s),a+s.ra<=i.length&&e.push({data:i.subarray(a,a+s.ra),size:s.ra,duration:1152,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),a+=s.ra}return o?(i=9e4*o.Pk/o.sampleRate*this.h,r=new lo([r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:o.sampleRate,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:i,zb:e},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=co(r),this.g.set(n,t)),n=this.i!==t,r=mo(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})):Promise.reject(new Be(2,3,3018,n?n.P()[0]:null))},V("shaka.transmuxer.Mp3Transmuxer",gA),gA.prototype.transmux=gA.prototype.transmux,gA.prototype.getOriginalMimeType=gA.prototype.getOriginalMimeType,gA.prototype.convertCodecs=gA.prototype.convertCodecs,gA.prototype.isSupported=gA.prototype.isSupported,gA.prototype.destroy=gA.prototype.destroy,Yn("audio/mpeg",(function(){return new gA("audio/mpeg")}),Qn),(i=mA.prototype).destroy=function(){},i.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=cr(e).split(","),n=st("audio",t);return t=st("video",t),!(!n||t||"mp3"!=sr(n))&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n,r,i){if(this.g?this.g.clearData():this.g=new As,this.g.Gf(n.i),e=Ne(e),"mp3"!=(e=this.g.parse(e)).Vd().audio||"audio"!=i)return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),i=g(e.ub()),e=i.next();!e.done;e=i.next())if(e=e.value.data)for(t=0;t<e.length;)(r=uA(e,t))?(t+r.ra<=e.length&&(n=nt(n,e.subarray(t,t+r.ra))),t+=r.ra):t++;return Promise.resolve(n)},V("shaka.transmuxer.MpegTsTransmuxer",mA),mA.prototype.transmux=mA.prototype.transmux,mA.prototype.getOriginalMimeType=mA.prototype.getOriginalMimeType,mA.prototype.convertCodecs=mA.prototype.convertCodecs,mA.prototype.isSupported=mA.prototype.isSupported,mA.prototype.destroy=mA.prototype.destroy,Yn("video/mp2t",(function(){return new mA("video/mp2t")}),Zn),(i=yA.prototype).destroy=function(){},i.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?yt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),yt(t)||yt(e)))},i.convertCodecs=function(e,t){return t.replace("mss/","")},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n){if(!n)return Promise.resolve(Ne(e));if(!t.mssPrivateData)return Promise.reject(new Be(2,3,3020,n?n.P()[0]:null));try{var r,i=this.g.parseBuffer(e),a=i.fetch("tfhd");a.track_ID=t.id+1;var o=i.fetch("tfdt"),s=i.fetch("traf");null===o&&((o=this.g.createFullBox("tfdt",s,a)).version=1,o.flags=0,o.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=i.fetch("trun"),l=i.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=i.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=i.fetch("sepiff");if(null!==d){d.type="senc",d.usertype=void 0;var f=i.fetch("saio");if(null===f){(f=this.g.createFullBox("saio",s)).version=0,f.flags=0,f.entry_count=1,f.offset=[0];var p=this.g.createFullBox("saiz",s);if(p.version=0,p.flags=0,p.sample_count=d.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],2&d.flags)for(r=0;r<d.sample_count;r+=1)p.sample_info_size[r]=10+6*d.entry[r].NumberOfEntries;else p.default_sample_info_size=8}}a.flags&=16777214,a.flags|=131072,u.flags|=1;var h=i.fetch("moof");u.data_offset=h.getLength()+8;var g=i.fetch("saio");null!==g&&(g.offset[0]=vA(h,"traf")+vA(s,"senc")+16);var m=Ne(i.write());return Promise.resolve(m)}catch(e){return e instanceof Be?Promise.reject(e):Promise.reject(new Be(2,3,3022,n?n.P()[0]:null))}},V("shaka.transmuxer.MssTransmuxer",yA),yA.prototype.transmux=yA.prototype.transmux,yA.prototype.getOriginalMimeType=yA.prototype.getOriginalMimeType,yA.prototype.convertCodecs=yA.prototype.convertCodecs,yA.prototype.isSupported=yA.prototype.isSupported,yA.prototype.destroy=yA.prototype.destroy;var bA=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function wA(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}Yn("mss/audio/mp4",(function(){return new yA("mss/audio/mp4")}),Qn),Yn("mss/video/mp4",(function(){return new yA("mss/video/mp4")}),Qn),(i=wA.prototype).destroy=function(){this.j.clear(),this.i&&this.i.destroy()},i.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=cr(n).split(",");return n=st("audio",r),r=st("video",r),!(n&&(n=sr(n),!SA.includes(n))||r&&(n=sr(r),!TA.includes(n)))&&(t?yt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),yt(t)||yt(e)))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=cr(t).replace("mp4a.40.34","mp3").split(",").map((function(e){return Wr(e,"audio/mp4")})).map(Xr).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},i.getOriginalMimeType=function(){return this.m},i.transmux=function(e,t,n,r,i){var a=Ne(e);if("audio"==i&&!Cs(a)){for(var o=cs(a),s=o.length;s<a.length;s++)if(cA(a,s))return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null));for(s=o.length;s<a.length;s++)if(Zx(a,s))return this.i||(this.i=new eA("audio/aac")),this.i.transmux(e,t,n,r,i);return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new As,this.h.Gf(n.i);var u=this.h.parse(a),l=[],c=u.Vd();try{var d=null;if("video"==i){switch(c.video){case"avc":var f=[],p=null,h=u.ud(),y=function(e){function t(e){i={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:e.pts,dts:e.dts,nalus:[]}}function n(){if(i&&i.nalus.length&&i.frame){for(var e=[],t=g(i.nalus),n=t.next();!n.done;n=t.next()){var a=(n=n.value).fullData.byteLength,o=new Uint8Array(4);o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=255&a,e.push(o),e.push(n.fullData)}i.data=nt.apply(Je,m(e)),r.push(i)}}for(var r=[],i=null,a=!1,o=0;o<e.length;o++){var s=e[o],u=s.nalus,l=!1;i&&u.length&&!a&&(n(),t(s));for(var c=(u=g(s.nalus)).next();!c.done;c=u.next()){var d=!1;switch((c=c.value).type){case 1:var f=!1;d=!0;var p=c.data;l&&p.length>4&&(2===(p=xs(new fs(p)))||4===p||7===p||9===p)&&(f=!0),f&&i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(s),i.frame=!0,i.isKeyframe=f;break;case 5:d=!0,i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(s),i.frame=!0,i.isKeyframe=!0;break;case 6:d=!0;break;case 7:l=d=!0;break;case 8:d=!0;break;case 9:a=d=!0,i&&i.frame&&(n(),i=null),i||t(s);break;case 12:d=!0;break;default:d=!1}i&&d&&i.nalus.push(c)}}return n(),r}(h);if(!y.length)throw new Be(2,3,3023,n?n.P()[0]:null);for(var v=0;v<y.length;v++){var b=y[v];null==p&&(p=b.dts);var w;w=v+1<y.length?(y[v+1].dts||0)-(b.dts||0):y.length>1?(b.dts||0)-(y[v-1].dts||0):9e4*(n.endTime-n.startTime),f.push({data:b.data,size:b.data.byteLength,duration:w,sb:Math.round((b.pts||0)-(b.dts||0)),flags:{xb:0,mb:0,jb:0,gb:0,hb:b.isKeyframe?2:1,yb:b.isKeyframe?0:1}})}for(var S=[],T=g(h),x=T.next();!x.done;x=T.next())S.push.apply(S,m(x.value.nalus));var A=function(e){if(!e.length)return null;var t=e.find((function(e){return 7==e.type}));if(e=e.find((function(e){return 8==e.type})),!t||!e)return null;var n=new fs(t.data),r=Ss(n);if(Ss(n),Ss(n),ys(n),oA.includes(r)&&(3===(r=vs(n))&&hs(n,1),ys(n),ys(n),hs(n,1),ws(n))){r=3!==r?8:12;for(var i=0;i<r;i++)ws(n)&&Ts(n,i<6?16:64)}if(ys(n),0===(r=vs(n)))vs(n);else if(1===r)for(hs(n,1),ys(n),ys(n),r=vs(n),i=0;i<r;i++)ys(n);ys(n),hs(n,1);var a=vs(n),o=vs(n),s=gs(n,1);0===s&&hs(n,1),hs(n,1);var u=0,l=0,c=0,d=0;if(ws(n)&&(u=vs(n),l=vs(n),c=vs(n),d=vs(n)),i=r=1,ws(n)&&ws(n)){var f=Ss(n);f>0&&f<=16?(r=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][f-1],i=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][f-1]):255===f&&(r=gs(n,16),i=gs(n,16))}return n=(2-s)*(o+1)*16-2*c-2*d,a=16*(a+1)-2*u-2*l,u=[],t=t.fullData,u.push(t.byteLength>>>8&255),u.push(255&t.byteLength),u=u.concat.apply(u,m(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,m(e)),{height:n,width:a,Ra:e=new Uint8Array([1,u[3],u[4],u[5],255,225].concat(u,[1],t)),Za:r,$a:i}}(S);if(!A||null==p)throw new Be(2,3,3018,n?n.P()[0]:null);t.height=A.height,t.width=A.width,d={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:A.Ra,Za:A.Za,$a:A.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:p,zb:f},stream:t};break;case"hvc":var k=[],E=null,I=[],C=u.ud();if(!C.length)throw new Be(2,3,3023,n?n.P()[0]:null);for(var M=0;M<C.length;M++){var D=C[M],P=D.nalus;I.push.apply(I,m(P));for(var R=!1,L=[],O=!1,N=g(P),j=N.next();!j.done;j=N.next()){var U=j.value;switch(U.type){case 1:case 0:var _=O=!0;break;case 19:case 20:case 21:R=_=O=!0;break;case 32:case 33:case 34:_=!0;break;case 35:O=_=!0;break;case 39:case 40:_=!0;break;default:_=!1}if(O&&_){var B=U.fullData.byteLength,F=new Uint8Array(4);F[0]=B>>24&255,F[1]=B>>16&255,F[2]=B>>8&255,F[3]=255&B,L.push(F),L.push(U.fullData)}}var V=L.length?{data:nt.apply(Je,m(L)),isKeyframe:R}:null;if(V){null==E&&null!=D.dts&&(E=D.dts);var H;H=M+1<C.length?(C[M+1].dts||0)-(D.dts||0):C.length>1?(D.dts||0)-(C[M-1].dts||0):9e4*(n.endTime-n.startTime),k.push({data:V.data,size:V.data.byteLength,duration:H,sb:Math.round((D.pts||0)-(D.dts||0)),flags:{xb:0,mb:0,jb:0,gb:0,hb:V.isKeyframe?2:1,yb:V.isKeyframe?0:1}})}}var G=sA(I);if(!G||null==E)throw new Be(2,3,3018,n?n.P()[0]:null);t.height=G.height,t.width=G.width,d={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:G.Ra,Za:G.Za,$a:G.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:E,zb:k},stream:t}}d&&(l.push(d),d=null)}if("audio"==i){switch(c.audio){case"aac":for(var q,K=[],z=null,W=null,X=null,Y=g(u.ub()),J=Y.next();!J.done;J=Y.next()){var $=J.value,Q=$.data;if(Q){var Z=0;if(-1==W&&X)Q=nt(X,$.data),W=null;else if(null!=W&&X){Z=Math.max(0,W);var ee=nt(X,Q.subarray(0,Z));K.push({data:ee,size:ee.byteLength,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),W=X=null}if(!(q=Qx(Q,Z)))throw new Be(2,3,3018,n?n.P()[0]:null);for(t.audioSamplingRate=q.sampleRate,t.channelsCount=q.channelCount,null==z&&null!==$.pts&&(z=$.pts);Z<Q.length;){var te=$x(Q,Z);if(!te){X=Q.subarray(Z,Q.length),W=-1;break}var ne=te.$d+te.ra;0!=(W=Math.max(0,Z+ne-Q.length))?X=Q.subarray(Z+te.$d,Z+ne):Z+ne<=Q.length&&K.push({data:Q.subarray(Z+te.$d,Z+ne),size:te.ra,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),Z+=ne}}}if(!q||null==z){z=9e4*n.startTime;var re=st("audio",t.codecs.split(","));if(!re||!t.channelsCount||!t.audioSamplingRate)throw new Be(2,3,3018,n?n.P()[0]:null);q={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:re};var ie=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(re,t.channelsCount);if(!ie)throw new Be(2,3,3018,n?n.P()[0]:null);for(var ae=z+9e4*(n.endTime-n.startTime),oe=z;oe<ae;)K.push({data:ie,size:ie.byteLength,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),oe+=1024/q.sampleRate*9e4}var se=q.sampleRate,ue=z/9e4*se;d={id:t.id,type:"audio",codecs:q.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:se,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:ue,zb:K},stream:t};break;case"ac3":for(var le=[],ce=0,de=new Uint8Array([]),fe=null,pe=g(u.ub()),he=pe.next();!he.done;he=pe.next()){var ge=he.value,me=ge.data;null==fe&&null!==ge.pts&&(fe=ge.pts);for(var ye=0;ye<me.length;){var ve=tA(me,ye);ve?(t.audioSamplingRate=ve.sampleRate,t.channelsCount=ve.channelCount,ce=ve.sampleRate,de=ve.Ga,le.push({data:me.subarray(ye,ye+ve.ra),size:ve.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),ye+=ve.ra):ye++}}if(0==ce||0==de.byteLength||null==fe)throw new Be(2,3,3018,n?n.P()[0]:null);var be=fe/9e4*ce;d={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:ce,duration:r,Bb:[],Ga:de,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:be,zb:le},stream:t};break;case"ec3":for(var we=[],Se=0,Te=new Uint8Array([]),xe=null,Ae=g(u.ub()),ke=Ae.next();!ke.done;ke=Ae.next()){var Ee=ke.value,Ie=Ee.data;null==xe&&null!==Ee.pts&&(xe=Ee.pts);for(var Ce=0;Ce<Ie.length;){var Me=iA(Ie,Ce);Me?(t.audioSamplingRate=Me.sampleRate,t.channelsCount=Me.channelCount,Se=Me.sampleRate,Te=Me.Ga,we.push({data:Ie.subarray(Ce,Ce+Me.ra),size:Me.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),Ce+=Me.ra):Ce++}}if(0==Se||0==Te.byteLength||null==xe)throw new Be(2,3,3018,n?n.P()[0]:null);var De=xe/9e4*Se;d={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Se,duration:r,Bb:[],Ga:Te,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:De,zb:we},stream:t};break;case"mp3":for(var Pe,Re=[],Le=null,Oe=g(u.ub()),je=Oe.next();!je.done;je=Oe.next()){var Ue=je.value,_e=Ue.data;if(_e){null==Le&&null!==Ue.pts&&(Le=Ue.pts);for(var Fe=0;Fe<_e.length;){var Ve=uA(_e,Fe);Ve?(Pe||(Pe=Ve),Fe+Ve.ra<=_e.length&&Re.push({data:_e.subarray(Fe,Fe+Ve.ra),size:Ve.ra,duration:1152,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),Fe+=Ve.ra):Fe++}}}if(!Pe||null==Le)throw new Be(2,3,3018,n?n.P()[0]:null);var He=Pe.sampleRate,Ge=Le/9e4*He;d={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:He,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Ge,zb:Re},stream:t};break;case"opus":var qe=[],Ke=null,ze=u.H;if(!ze)throw new Be(2,3,3018,n?n.P()[0]:null);var We=[];switch(ze.nj){case 1:case 2:We=[0];break;case 0:We=[255,1,1,0,1];break;case 128:We=[255,2,0,0,1];break;case 3:We=[1,2,1,0,2,1];break;case 4:We=[1,2,2,0,1,2,3];break;case 5:We=[1,3,2,0,4,1,2,3];break;case 6:We=[1,4,2,0,4,1,2,3,5];break;case 7:We=[1,4,2,0,4,1,2,3,5,6];break;case 8:We=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:We=[1,1,2,0,1];break;case 131:We=[1,1,3,0,1,2];break;case 132:We=[1,1,4,0,1,2,3];break;case 133:We=[1,1,5,0,1,2,3,4];break;case 134:We=[1,1,6,0,1,2,3,4,5];break;case 135:We=[1,1,7,0,1,2,3,4,5,6];break;case 136:We=[1,1,8,0,1,2,3,4,5,6,7]}for(var Xe=new Uint8Array([0,ze.channelCount,0,0,ze.sampleRate>>>24&255,ze.sampleRate>>>17&255,ze.sampleRate>>>8&255,ze.sampleRate>>>0&255,0,0].concat(m(We))),Ye=ze.sampleRate,$e=g(u.ub()),Qe=$e.next();!Qe.done;Qe=$e.next()){var Ze=Qe.value,et=Ze.data;null==Ke&&null!==Ze.pts&&(Ke=Ze.pts);for(var tt=0;tt<et.length;){for(var rt=0!=(16&et[tt+1]),it=0!=(8&et[tt+1]),at=tt+2,ot=0;255===et[at];)ot+=255,at+=1;ot+=et[at],at+=1,at+=rt?2:0,at+=it?2:0;var ut=et.slice(at,at+ot);qe.push({data:ut,size:ut.byteLength,duration:960,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),tt=at+ot}}if(0==Xe.byteLength||null==Ke)throw new Be(2,3,3018,n?n.P()[0]:null);t.audioSamplingRate=ze.sampleRate,t.channelsCount=ze.channelCount;var lt=Ke/9e4*Ye;d={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Ye,duration:r,Bb:[],Ga:Xe,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:lt,zb:qe},stream:t}}d&&(l.push(d),d=null)}}catch(e){return e&&3023==e.code?Promise.resolve(new Uint8Array([])):Promise.reject(e)}if(!l.length)return Promise.reject(new Be(2,3,3018,n?n.P()[0]:null));var ct=new lo(l),dt=t.id+"_"+n.i;if(this.j.has(dt))var ft=this.j.get(dt);else ft=co(ct),this.j.set(dt,ft);var pt=this.l!==ft,ht=mo(ct);return this.l=ft,this.g++,Promise.resolve({data:ht,init:pt?ft:null})},V("shaka.transmuxer.TsTransmuxer",wA),wA.prototype.transmux=wA.prototype.transmux,wA.prototype.getOriginalMimeType=wA.prototype.getOriginalMimeType,wA.prototype.convertCodecs=wA.prototype.convertCodecs,wA.prototype.isSupported=wA.prototype.isSupported,wA.prototype.destroy=wA.prototype.destroy;var SA=["aac","ac-3","ec-3","mp3","opus"],TA=["avc","hevc"];function xA(){}Yn("video/mp2t",(function(){return new wA("video/mp2t")}),er),p(xA,Fl),V("shaka.util.FairPlayUtils",xA)}.call(i,e,e,void 0),i.shaka)t[a]=i.shaka[a]}()},384:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},5955:function(e,t,n){"use strict";var r=n(2584),i=n(8662),a=n(6430),o=n(5692);function s(e){return e.call.bind(e)}var u="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,c=s(Object.prototype.toString),d=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(u)var h=s(BigInt.prototype.valueOf);if(l)var g=s(Symbol.prototype.valueOf);function m(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===c(e)}function v(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function w(e){return"[object WeakSet]"===c(e)}function S(e){return"[object ArrayBuffer]"===c(e)}function T(e){return"undefined"!=typeof ArrayBuffer&&(S.working?S(e):e instanceof ArrayBuffer)}function x(e){return"[object DataView]"===c(e)}function A(e){return"undefined"!=typeof DataView&&(x.working?x(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||A(e)},t.isUint8Array=function(e){return"Uint8Array"===a(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===a(e)},t.isUint16Array=function(e){return"Uint16Array"===a(e)},t.isUint32Array=function(e){return"Uint32Array"===a(e)},t.isInt8Array=function(e){return"Int8Array"===a(e)},t.isInt16Array=function(e){return"Int16Array"===a(e)},t.isInt32Array=function(e){return"Int32Array"===a(e)},t.isFloat32Array=function(e){return"Float32Array"===a(e)},t.isFloat64Array=function(e){return"Float64Array"===a(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===a(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===a(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(v.working?v(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},S.working="undefined"!=typeof ArrayBuffer&&S(new ArrayBuffer),t.isArrayBuffer=T,x.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&x(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=A;var k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===c(e)}function I(e){return void 0!==k&&(void 0===E.working&&(E.working=E(new k)),E.working?E(e):e instanceof k)}function C(e){return m(e,d)}function M(e){return m(e,f)}function D(e){return m(e,p)}function P(e){return u&&m(e,h)}function R(e){return l&&m(e,g)}t.isSharedArrayBuffer=I,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=C,t.isStringObject=M,t.isBooleanObject=D,t.isBigIntObject=P,t.isSymbolObject=R,t.isBoxedPrimitive=function(e){return C(e)||M(e)||D(e)||P(e)||R(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(T(e)||I(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9539:function(e,t,n){var r=n(4155),i=n(5108),a=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])v(s)||!x(s)?a+=" "+s:a+=" "+c(s);return a},t.deprecate=function(e,n){if(void 0!==r&&!0===r.noDeprecation)return e;if(void 0===r)return function(){return t.deprecate(e,n).apply(this,arguments)};var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?i.trace(n):i.error(n),a=!0}return e.apply(this,arguments)}};var s={},u=/^$/;if(r.env.NODE_DEBUG){var l=r.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),u=new RegExp("^"+l+"$","i")}function c(e,n){var r={seen:[],stylize:f};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&t._extend(r,n),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=d),p(r,e,r.depth)}function d(e,t){var n=c.styles[t];return n?"["+c.colors[n][0]+"m"+e+"["+c.colors[n][1]+"m":e}function f(e,t){return e}function p(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return w(i)||(i=p(e,i,r)),i}var a=function(e,t){if(S(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),k(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return h(n);if(0===o.length){if(E(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(T(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(A(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return h(n)}var l,c="",d=!1,f=["{","}"];(m(n)&&(d=!0,f=["[","]"]),E(n))&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return T(n)&&(c=" "+RegExp.prototype.toString.call(n)),A(n)&&(c=" "+Date.prototype.toUTCString.call(n)),k(n)&&(c=" "+h(n)),0!==o.length||d&&0!=n.length?r<0?T(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=d?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)P(t,String(o))?a.push(g(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(g(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return g(e,n,r,s,t,d)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,c,f)):f[0]+c+f[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),P(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=v(n)?p(e,u.value,null):p(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),S(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function m(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function v(e){return null===e}function b(e){return"number"==typeof e}function w(e){return"string"==typeof e}function S(e){return void 0===e}function T(e){return x(e)&&"[object RegExp]"===I(e)}function x(e){return"object"==typeof e&&null!==e}function A(e){return x(e)&&"[object Date]"===I(e)}function k(e){return x(e)&&("[object Error]"===I(e)||e instanceof Error)}function E(e){return"function"==typeof e}function I(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(u.test(e)){var n=r.pid;s[e]=function(){var r=t.format.apply(t,arguments);i.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(5955),t.isArray=m,t.isBoolean=y,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=w,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=S,t.isRegExp=T,t.types.isRegExp=T,t.isObject=x,t.isDate=A,t.types.isDate=A,t.isError=k,t.types.isNativeError=k,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(384);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){i.log("%s - %s",D(),t.format.apply(t,arguments))},t.inherits=n(5717),t._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function L(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,a(e))},t.promisify.custom=R,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return i.apply(a,arguments)};e.apply(this,t).then((function(e){r.nextTick(o.bind(null,null,e))}),(function(e){r.nextTick(L.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,a(e)),t}},6430:function(e,t,n){"use strict";var r=n(9804),i=n(6314),a=n(1924),o=a("Object.prototype.toString"),s=n(1405)()&&"symbol"==typeof Symbol.toStringTag,u=i(),l=a("String.prototype.slice"),c={},d=n(4079),f=Object.getPrototypeOf;s&&d&&f&&r(u,(function(e){if("function"==typeof n.g[e]){var t=new n.g[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=f(t),i=d(r,Symbol.toStringTag);if(!i){var a=f(r);i=d(a,Symbol.toStringTag)}c[e]=i.get}}));var p=n(5692);e.exports=function(e){return!!p(e)&&(s?function(e){var t=!1;return r(c,(function(n,r){if(!t)try{var i=n.call(e);i===r&&(t=i)}catch(e){}})),t}(e):l(o(e),8,-1))}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=r(1123),n=r.n(e),i=r(5108);function a(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)}))}}function s(){if(i.log("🔧 Initializing Files integration..."),!window.OCA||!window.OCA.Files||!window.OCA.Files.fileActions)return i.log("⚠️ Files app not available, retrying in 2 seconds..."),void setTimeout(s,2e3);i.log("✅ Files app detected, registering actions..."),OCA.Files.fileActions.registerAction({name:"generateHlsCacheMov",displayName:t("hyper_viewer","Generate HLS Cache"),mime:"video/quicktime",permissions:OC.PERMISSION_UPDATE,iconClass:"icon-category-multimedia",actionHandler:function(e,t){i.log("🚀 Generate HLS Cache action triggered for MOV:",e),i.log("📁 Context:",t),u([{filename:e,context:t}])}}),OCA.Files.fileActions.registerAction({name:"playHlsMov",displayName:t("hyper_viewer","Play with HLS"),mime:"video/quicktime",permissions:OC.PERMISSION_READ,iconClass:"icon-play",actionHandler:function(e,t){return o(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.log("🎬 Play with HLS triggered for MOV:",e),a=(null==t?void 0:t.dir)||(null==t||null===(r=t.fileList)||void 0===r?void 0:r.getCurrentDirectory())||"/",n.next=4,m(e,a,t);case 4:case"end":return n.stop()}}),n)})))()}}),OCA.Files.fileActions.registerAction({name:"generateHlsCacheMp4",displayName:t("hyper_viewer","Generate HLS Cache"),mime:"video/mp4",permissions:OC.PERMISSION_UPDATE,iconClass:"icon-category-multimedia",actionHandler:function(e,t){i.log("🚀 Generate HLS Cache action triggered for MP4:",e),i.log("📁 Context:",t),u([{filename:e,context:t}])}}),OCA.Files.fileActions.registerAction({name:"playHlsMp4",displayName:t("hyper_viewer","Play with HLS"),mime:"video/mp4",permissions:OC.PERMISSION_READ,iconClass:"icon-play",actionHandler:function(e,t){return o(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.log("🎬 Play with HLS triggered for MP4:",e),a=(null==t?void 0:t.dir)||(null==t||null===(r=t.fileList)||void 0===r?void 0:r.getCurrentDirectory())||"/",n.next=4,m(e,a,t);case 4:case"end":return n.stop()}}),n)})))()}}),OCA.Files&&OCA.Files.fileActions&&OCA.Files.fileActions.registerAction&&document.addEventListener("DOMContentLoaded",(function(){setTimeout((function(){window.FileActions&&window.FileActions.register&&window.FileActions.register("all","Generate HLS Cache (Bulk)",OC.PERMISSION_UPDATE,(function(){return OC.imagePath("core","actions/category-multimedia")}),(function(e){i.log("🚀 Bulk HLS Cache generation triggered"),function(){var e=[];if(window.FileList&&window.FileList.getSelectedFiles){window.FileList.getSelectedFiles().forEach((function(t){"video/quicktime"!==t.mimetype&&"video/mp4"!==t.mimetype||e.push({filename:t.name,context:{dir:window.FileList.getCurrentDirectory(),fileInfoModel:t}})}))}if(0===e.length)return void OC.dialogs.alert("No video files selected. Please select MOV or MP4 files.","Generate HLS Cache");i.log("🎬 Bulk processing files:",e.map((function(e){return e.filename}))),u(e)}()}))}),2e3)})),i.log("✅ Hyper Viewer Files integration registered!")}function u(e){i.log("🔧 Opening cache generation dialog for files:",e.map((function(e){return e.filename})));var t=e.map((function(e){return e.filename})).join(", "),n=e.length>1,r='\n\t\t<div class="hyper-viewer-cache-dialog">\n\t\t\t<h3>'.concat(n?"Generate HLS Cache (Bulk)":"Generate HLS Cache","</h3>\n\t\t\t<p><strong>Files to process:</strong> ").concat(t,'</p>\n\t\t\t\n\t\t\t<div class="cache-location-section">\n\t\t\t\t<h4>Cache Location:</h4>\n\t\t\t\t<div class="cache-options">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="cache_location" value="relative" checked>\n\t\t\t\t\t\t<strong>Relative to video file</strong><br>\n\t\t\t\t\t\t<small>Creates <code>.cached_hls/</code> folder next to each video file</small>\n\t\t\t\t\t</label>\n\t\t\t\t\t<br><br>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="cache_location" value="home">\n\t\t\t\t\t\t<strong>User home directory</strong><br>\n\t\t\t\t\t\t<small>Creates <code>~/.cached_hls/</code> in your home folder</small>\n\t\t\t\t\t</label>\n\t\t\t\t\t<br><br>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input type="radio" name="cache_location" value="custom">\n\t\t\t\t\t\t<strong>Custom location</strong><br>\n\t\t\t\t\t\t<input type="text" id="custom_path" placeholder="/mnt/cache/.cached_hls/" style="width: 100%; margin-top: 5px;" disabled>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="processing-options">\n\t\t\t\t<h4>Processing Options:</h4>\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="overwrite_existing" checked>\n\t\t\t\t\tOverwrite existing cache files\n\t\t\t\t</label>\n\t\t\t\t<br>\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" id="notify_completion" checked>\n\t\t\t\t\tNotify when processing is complete\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="progress-section" style="display: none;">\n\t\t\t\t<h4>Processing Progress:</h4>\n\t\t\t\t<div class="progress-bar">\n\t\t\t\t\t<div class="progress-fill" style="width: 0%;"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="progress-text">Preparing...</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<style>\n\t\t.hyper-viewer-cache-dialog {\n\t\t\tpadding: 20px;\n\t\t\tmax-width: 500px;\n\t\t}\n\t\t.cache-options label {\n\t\t\tdisplay: block;\n\t\t\tmargin: 10px 0;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t.cache-options input[type="radio"] {\n\t\t\tmargin-right: 8px;\n\t\t}\n\t\t.processing-options label {\n\t\t\tdisplay: block;\n\t\t\tmargin: 8px 0;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t.progress-bar {\n\t\t\twidth: 100%;\n\t\t\theight: 20px;\n\t\t\tbackground-color: #f0f0f0;\n\t\t\tborder-radius: 10px;\n\t\t\toverflow: hidden;\n\t\t\tmargin: 10px 0;\n\t\t}\n\t\t.progress-fill {\n\t\t\theight: 100%;\n\t\t\tbackground-color: #0082c9;\n\t\t\ttransition: width 0.3s ease;\n\t\t}\n\t\t.progress-text {\n\t\t\ttext-align: center;\n\t\t\tfont-size: 14px;\n\t\t\tcolor: #666;\n\t\t}\n\t\t</style>\n\t');OC.dialogs.confirmHtml(r,"Generate HLS Cache",(function(t){t&&function(e){l.apply(this,arguments)}(e)}),!0),setTimeout((function(){var e=document.querySelector('input[name="cache_location"][value="custom"]'),t=document.getElementById("custom_path");e&&t&&document.querySelectorAll('input[name="cache_location"]').forEach((function(e){e.addEventListener("change",(function(){t.disabled="custom"!==this.value,"custom"===this.value&&t.focus()}))}))}),100)}function l(){return(l=o(regeneratorRuntime.mark((function e(t){var n,r,a,o,s,u,l,p,h,g,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.log("Starting HLS cache generation for:",t.map((function(e){return e.filename}))),s=(null===(n=document.querySelector('input[name="cache_location"]:checked'))||void 0===n?void 0:n.value)||"relative",u=(null===(r=document.getElementById("custom_path"))||void 0===r?void 0:r.value)||"",l=(null===(a=document.getElementById("overwrite_existing"))||void 0===a?void 0:a.checked)||!1,p=(null===(o=document.getElementById("notify_completion"))||void 0===o?void 0:o.checked)||!0,h={cacheLocation:s,customPath:u,overwriteExisting:l,notifyCompletion:p},i.log("Cache generation options:",h),g=t.map((function(e){var t,n,r;return{filename:e.filename,directory:(null===(t=e.context)||void 0===t?void 0:t.dir)||(null===(n=e.context)||void 0===n||null===(r=n.fileList)||void 0===r?void 0:r.getCurrentDirectory())||"/"}})),e.prev=8,d(t.length),e.next=12,fetch(OC.generateUrl("/apps/hyper_viewer/cache/generate"),{method:"POST",headers:{"Content-Type":"application/json",requesttoken:OC.requestToken},body:JSON.stringify({files:g,cacheLocation:h.cacheLocation,customPath:h.customPath,overwriteExisting:h.overwriteExisting,notifyCompletion:h.notifyCompletion})});case 12:return m=e.sent,e.next=15,m.json();case 15:if(!(y=e.sent).success){e.next=22;break}i.log("HLS cache generation started successfully",y),y.jobId&&f(y.jobId,t.length),OC.dialogs.info("Cache generation started for ".concat(t.length," file(s).\n\nLocation: ").concat(c(h),"\n\nProcessing will run in the background. ").concat(p?"You will be notified when complete.":""),"HLS Cache Generation Started"),e.next=23;break;case 22:throw new Error(y.error||"Unknown error occurred");case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),i.error("Failed to start HLS cache generation:",e.t0),OC.dialogs.alert("Failed to start cache generation: ".concat(e.t0.message),"Error");case 29:case"end":return e.stop()}}),e,null,[[8,25]])})))).apply(this,arguments)}function c(e){switch(e.cacheLocation){case"relative":return"Next to each video file (.cached_hls/)";case"home":return"User home directory (~/.cached_hls/)";case"custom":return e.customPath||"Custom location";default:return"Unknown location"}}function d(e){i.log("📊 Starting progress tracking for ".concat(e," files"))}function f(e,t){return p.apply(this,arguments)}function p(){return(p=o(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.log("📈 Tracking progress for job: ".concat(t)),240,r=0,a=function(){var e=o(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(OC.generateUrl("/apps/hyper_viewer/cache/progress"),{method:"POST",headers:{"Content-Type":"application/json",requesttoken:OC.requestToken},body:JSON.stringify({jobId:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(o=e.sent,i.log("📊 Progress update:",o),"completed"!==o.status){e.next=11;break}return i.log("✅ HLS cache generation completed!"),e.abrupt("return");case 11:if("failed"!==o.status){e.next=14;break}return i.error("❌ HLS cache generation failed:",o.message),e.abrupt("return");case 14:++r<240?setTimeout(a,5e3):i.log("⏰ Progress tracking timeout reached"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),i.error("Failed to check progress:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),setTimeout(a,2e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return g.apply(this,arguments)}function g(){return(g=o(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(OC.generateUrl("/apps/hyper_viewer/cache/check"),{method:"POST",headers:{"Content-Type":"application/json",requesttoken:OC.requestToken},body:JSON.stringify({filename:t,directory:n})});case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a.exists?a.cachePath:null);case 10:return e.prev=10,e.t0=e.catch(0),i.error("Failed to check HLS cache:",e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function m(e,t,n){return y.apply(this,arguments)}function y(){return(y=o(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.log("🎬 Checking HLS cache for: ".concat(t)),e.prev=1,e.next=4,h(t,n);case 4:(a=e.sent)?(i.log("✅ HLS cache found at: ".concat(a)),v(t,a,r)):(i.log("❌ No HLS cache found for: ".concat(t)),OC.dialogs.confirm('No HLS cache found for "'.concat(t,'".\n\nWould you like to generate HLS cache now?'),"HLS Cache Not Found",(function(e){e?u([{filename:t,context:r}]):i.log("🎥 Falling back to default video player")}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),i.error("Error checking HLS cache:",e.t0),OC.dialogs.alert("Failed to check HLS cache. Using default video player.","Error");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function v(e,t,n){i.log("🎬 Loading Shaka Player for: ".concat(e)),i.log("📁 Cache path: ".concat(t));var r='\n\t\t<div class="hyper-viewer-player">\n\t\t\t<div class="player-header">\n\t\t\t\t<h3>'.concat(e,'</h3>\n\t\t\t\t<button class="close-player" onclick="closeShakaPlayer()">×</button>\n\t\t\t</div>\n\t\t\t<video id="shaka-video" controls autoplay style="width: 100%; height: 400px; background: #000;">\n\t\t\t\tYour browser does not support the video tag.\n\t\t\t</video>\n\t\t\t<div class="player-info">\n\t\t\t\t<p><strong>HLS Cache:</strong> ').concat(t,'</p>\n\t\t\t\t<p><strong>Status:</strong> <span id="player-status">Loading...</span></p>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<style>\n\t\t.hyper-viewer-player {\n\t\t\tpadding: 20px;\n\t\t\tmax-width: 800px;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t.player-header {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tmargin-bottom: 15px;\n\t\t}\n\t\t.player-header h3 {\n\t\t\tmargin: 0;\n\t\t\tcolor: #333;\n\t\t}\n\t\t.close-player {\n\t\t\tbackground: #ff4444;\n\t\t\tcolor: white;\n\t\t\tborder: none;\n\t\t\tborder-radius: 50%;\n\t\t\twidth: 30px;\n\t\t\theight: 30px;\n\t\t\tcursor: pointer;\n\t\t\tfont-size: 18px;\n\t\t\tline-height: 1;\n\t\t}\n\t\t.close-player:hover {\n\t\t\tbackground: #cc0000;\n\t\t}\n\t\t.player-info {\n\t\t\tmargin-top: 15px;\n\t\t\tpadding: 10px;\n\t\t\tbackground: #f5f5f5;\n\t\t\tborder-radius: 5px;\n\t\t\tfont-size: 14px;\n\t\t}\n\t\t.player-info p {\n\t\t\tmargin: 5px 0;\n\t\t}\n\t\t#player-status {\n\t\t\tfont-weight: bold;\n\t\t\tcolor: #0082c9;\n\t\t}\n\t\t</style>\n\t');OC.dialogs.confirmHtml(r,"Play: ".concat(e),(function(e){i.log("🎬 Shaka Player modal closed")}),!0),setTimeout((function(){!function(e){b.apply(this,arguments)}(t)}),500)}function b(){return(b=o(regeneratorRuntime.mark((function e(t){var r,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=document.getElementById("shaka-video"),a=document.getElementById("player-status"),r){e.next=5;break}return i.error("Video element not found"),e.abrupt("return");case 5:if(e.prev=5,void 0!==n()){e.next=8;break}throw new Error("Shaka Player not loaded");case 8:if(n().polyfill.installAll(),n().Player.isBrowserSupported()){e.next=11;break}throw new Error("Browser not supported by Shaka Player");case 11:return(o=new(n().Player)(r)).addEventListener("error",(function(e){i.error("Shaka Player error:",e.detail),a&&(a.textContent="Error: "+e.detail.message,a.style.color="#ff4444")})),s=OC.generateUrl("/apps/files/ajax/download.php")+"?dir="+encodeURIComponent(t)+"&files="+encodeURIComponent("playlist.m3u8"),i.log("🎬 Loading HLS manifest: ".concat(s)),a&&(a.textContent="Loading HLS stream..."),e.next=18,o.load(s);case 18:i.log("✅ Shaka Player loaded successfully"),a&&(a.textContent="Playing HLS stream",a.style.color="#00aa00"),window.currentShakaPlayer=o,e.next=30;break;case 23:e.prev=23,e.t0=e.catch(5),i.error("Failed to initialize Shaka Player:",e.t0),a&&(a.textContent="Failed to load: "+e.t0.message,a.style.color="#ff4444"),u=OC.generateUrl("/apps/files/ajax/download.php")+"?dir="+encodeURIComponent(t.replace("/.cached_hls/"+t.split("/").pop(),""))+"&files="+encodeURIComponent(t.split("/").pop().replace(/\.[^/.]+$/,"")+".mov"),r.src=u,r.load();case 30:case"end":return e.stop()}}),e,null,[[5,23]])})))).apply(this,arguments)}i.log("🎬 Hyper Viewer Files integration loading..."),document.addEventListener("DOMContentLoaded",(function(){setTimeout(s,1e3)})),window.closeShakaPlayer=function(){window.currentShakaPlayer&&(window.currentShakaPlayer.destroy(),window.currentShakaPlayer=null);var e=document.querySelector(".oc-dialog");e&&e.remove()},i.log("✅ Hyper Viewer Files integration loaded!")}()}();
//# sourceMappingURL=files-integration.js.map